/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("Flags",["lodash"],function(n){var r;return r=function(){function r(){this.is_beta=e(this.is_beta,this),this._availableFlags=["Debug","Experiments"],this._flags=n.zipObject(this._availableFlags,n.map(this._availableFlags,function(e){return sessionStorage[e]==="true"||!1}))}return r.prototype.enable=function(e){return t.call(this._availableFlags,e)>=0?(sessionStorage[e]="true",this._flags[e]=!0):console.warn("Unable to enable "+e+" (available: ["+this._availableFlags+"])")},r.prototype.disable=function(e){if(t.call(this._availableFlags,e)>=0)return sessionStorage[e]=null,this._flags[e]=!1},r.prototype.get=function(e){return this._flags[e]},r.is_beta=function(){return $("body").is(".beta")||$("body").is(".basic-staff")},r.prototype.is_beta=function(){return $("body").is(".beta")||$("body").is(".basic-staff")},r}(),window.is_beta=r.is_beta,new r})}).call(this),function(){define("Logger",["log","Flags"],function(e,t){var n;return n=function(){function n(){if(!e)return;window.log=this.log,t.disable("Debug"),t.is_beta()&&t.enable("Debug"),this._printHello(t.get("Debug"))}return n.prototype.log=function(n,r){var i;i=['color: #000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.warn=function(n,r){var i;i=['color: #d9af16; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.err=function(n,r){var i;i=['color: #a10000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype._printHello=function(t){var n;return t==null&&(t=!1),n=["height: 60px","width: 60px","display: block",'font-size: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"background-color:transparent","padding: 30px 40px 30px 70px","line-height: 50px","background-image: url('data:image/png;base64,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')","background-repeat: no-repeat","background-position: 0% 50%","background-size: auto 80%"],e("[c='"+n.join(";")+"']"+(t?"DEBUG MODE":"")+"[c]")},n}(),new n})}.call(this),function(){define("common/add_on/array",[],function(){var e;return e=function(){function e(){Array.prototype.to_rails_params=function(e,t){var n;return t==null&&(t="id"),function(){var r,i,s;s=[];for(r=0,i=this.length;r<i;r++)n=this[r],s.push(e+"["+t.pluralize()+"][]="+n);return s}.call(this).join("&")}}return e}(),new e})}.call(this),function(){define("common/add_on/bootstrap",["jquery","bootstrap"],function(e){var t;return t=function(){function t(){e("a[rel~=popover], .has-popover").popover({trigger:"hover"}),e("a[rel~=tooltip], .has-tooltip").tooltip(),e("[data-toggle='tooltip']").tooltip()}return t}(),new t})}.call(this),function(){define("common/add_on/jquery",["common/add_on/bootstrap"],function(){var e;return e=function(){function e(){$.fn.incr=function(e,t){var n,r;e==null&&(e=1),t==null&&(t=!1);if(!$(this).length)return;return t&&(e=-e),n=$(this).html().trim(),(r=n.match(/^(\d+)\s*([\D]+)$/m))?$(this).html(r[2].pluralize(parseInt(r[1],10)+e,!0)):$(this).html(parseInt(n,10)+e)},$.fn.decr=function(e,t){return e==null&&(e=1),t==null&&(t=!1),$(this).incr(-e,t)},$.fn.reverse_state=function(){var e;return e=$(this).attr("data-state"),$(this).attr("data-state",{"true":"false","false":"true"}[e]),e.to_bool},$.fn.state=function(){var e;return e=$(this).attr("data-state"),e?e.to_bool:void 0},$.fn.inputWrapper=function(e){return this.text=e,this.each(function(e){return function(t,n){var r;return r=$("<span data-input-wrapper>"+e.text+"</span>"),$(n).after(r).css("text-indent",$(r).outerWidth()).css("padding",0),$(n).parent().attr("data-input-container","")}}(this))}}return e}(),new e})}.call(this),function(){define("common/add_on/string",["pluralize"],function(e){var t;return t=function(){function t(){Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(t,n){return t==null&&(t=42),n==null&&(n=!1),e(this,t,n)}}return t}(),new t})}.call(this),function(){define("common/add_on/main",["common/add_on/array","common/add_on/bootstrap","common/add_on/jquery","common/add_on/string"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){define("common/callback/base",[],function(){var e;return e=function(){function e(){var e;e=this,$("body").on("click","a[data-uid], [data-uid] a",function(t){var n,r,i,s;return $(this).is("[data-uid]")?(r=this,s=this,i=$(r).data("uid")):(r=this,s=$(r).parents("[data-uid]"),i=$(s).data("uid")),n="click_"+i,e.call_callback(e,n,"before",r,s),$.ajax($(r).attr("href")).success(function(t){return e.call_callback(e,n,"success",r,s,t)}).error(function(){return e.call_callback(e,n,"error",r,s)}).done(function(){return e.call_callback(e,n,"done",r,s)}),t.stopPropagation(),!1})}return e.prototype.call_callback=function(e,t,n,r,i,s){if(typeof e[n+"_"+t]=="function")return e[n+"_"+t](r,i,s)},e}()})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("common/callback/message",["jquery","common/callback/base"],function(t,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.before_click_star=function(e){return t("#favorite_count").incr(1,t(e).reverse_state())},r.prototype.before_click_pin=function(e){return t(e).reverse_state()},r.prototype.before_click_lock=function(e){return t(e).reverse_state()},r.prototype.before_click_upvote=function(e,n,r){var i;r==null&&(r=!0),r&&t(n).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,t(n).siblings("[data-uid=downvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,i);if(t(n).parents(".reply-actions").length)return t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_downvote=function(e,n,r){var i;r==null&&(r=!0),r&&t(n).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,t(n).siblings("[data-uid=upvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,!i);if(t(n).parents(".reply-actions").length)return t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_trollvote=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},r.prototype.before_click_problem=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},r.prototype.success_click_upvote=function(e,n,r){return t(n).find("span.count").html(r.upvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=downvote]").find("span.count").html(r.downvote_count)},r.prototype.success_click_downvote=function(e,n,r){return t(n).find("span.count").html(r.downvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=upvote]").find("span.count").html(r.upvote_count)},r.prototype.success_click_trollvote=function(e,n,r){return t(n).find("span.count").html(r.kind_count)},r.prototype.success_click_problem=function(e,n,r){return t(n).find("span.count").html(r.kind_count)},r.prototype.success_click_pin=function(e,n,r){if(r==="OK")return t(e).toggleClass("active")},r.prototype.success_click_lock=function(e,n,r){if(r==="OK")return t(e).toggleClass("active").toggleClass("icon-lock").toggleClass("icon-unlock")},r.prototype.success_click_star=function(e,n,r){var i;if(r.kind!=="Topic")return r.starred?(i=t(e).parent().clone(),i.attr("data-tag-kind","starred"),t("[data-tag-kind='starred']").last().after(i)):t("[data-tag-kind='starred'][data-tag-name='"+r.name+"']").remove(),log("Success star !",e,n,r)},r}(n),new r})}.call(this),function(){define("common/callback/main",["common/callback/message"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/modal/smart",["jquery","lodash","bootstrap"],function(t,n){var r;return r=function(){function r(t){var r;t==null&&(t={}),this._bind=e(this._bind,this),r={selector:"data-smart-modal",url:"data-url",container:"data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"},this.opts=n.extend(r,t),this._bind()}return r.prototype._bind=function(){var e;return e=function(e){return"["+e+"]"},t(e(this.opts.selector)).each(function(e){return function(n,r){var i,s,o,u;return u=t(r).attr(e.opts.url),i=t(r).attr(e.opts.container)||".container-item",o=t(r).attr(e.opts.titleSelector),s=t(r).attr(e.opts.footerSelector),u?t(r).click(function(){return log("Clicked "+r),t.get(u,function(n){var r,u,a;return log("Received data for modal"),u=t(n).find(i).html(),a=o?t(n).find(o).html():!1,r=s?t(n).find(s).html():!1,t(e.opts.modal).find(".modal-body").html(u),a?t(e.opts.modal).find(".modal-header").html(a).show():t(e.opts.modal).find(".modal-header").html("").hide(),r?t(e.opts.modal).find(".modal-footer").html(r).show():t(e.opts.modal).find(".modal-footer").html("").hide(),t(e.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",r)}}(this))},r}(),new r})}.call(this),function(){define("common/modal/main",["require","jquery","bootstrap","common/modal/smart"],function(e,t){var n;return n=function(){function n(){var n;n=this,t("input[data-modal-id]").on("click",function(r){var i,s,o,u;s=!0,o=t(this).data("condition"),o&&e(o)&&(u=e(t(this).data("condition")),u.modalCondition&&(s=u.modalCondition())),i=t(".modal[data-modal-id='"+t(this).data("modal-id")+"']"),n._initModal(i,t(this).data("confirmation"));if(s)return r.preventDefault(),i.modal("show")})}return n.prototype._initModal=function(t,n){if(n)return t.one("click",".btn-primary",function(t){return function(){var t,r;t=e(n),r=new t;if(r.modalConfirmation)return r.modalConfirmation()}}(this))},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/simple_form/date_picker",["jquery","lodash","datetimepicker"],function(t,n){var r;return r=function(){function r(r){r==null&&(r={}),this._bindAll=e(this._bindAll,this),this.opts=n.merge(this.DEFAULTS,r),t.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),t(document).on("nested:fieldAdded",this._bindAll))}return r.prototype.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},r.prototype._bindAll=function(){return this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")},r.prototype._setDefaults=function(){return n.merge(t.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})},r.prototype._bindDateTimePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._bindDatePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._computeOptions=function(e,r){var i,s;return r==null&&(r={}),t(e).attr(this.opts.excludeDateAttr)&&(i=t.parseJSON(t(e).attr(this.opts.excludeDateAttr)),r.disabledDates=n.map(i,function(e){return moment(e)})),t(e).attr(this.opts.includeDateAttr)&&(s=t.parseJSON(t(e).attr(this.opts.includeDateAttr)),r.enabledDates=n.map(s,function(e){return moment(e)})),t(e).attr(this.opts.minDateAttr)&&(r.minDate=moment(t(e).attr(this.opts.minDateAttr))),t(e).attr(this.opts.maxDateAttr)&&(r.maxDate=moment(t(e).attr(this.opts.maxDateAttr))),t(e).attr(this.opts.noWeekends)!=null&&(r.daysOfWeekDisabled=[0,6]),r},r}(),new r})}.call(this),function(){define("common/simple_form/chosen",["jquery","chosen-jquery"],function(e){var t;return t=function(){function t(){e(document).on("nested:fieldAdded",this._bind),this._bind()}return t.prototype._bind=function(){return e(".chosen-select").each(function(){return e(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:e(this).width()+"px"})})},t}(),new t})}.call(this),function(){define("common/simple_form/limit",["jquery","maxlength"],function(e){var t;return t=function(){function t(){e("[data-limit]").each(function(){return e(this).maxlength({maxCharacters:e(this).data("limit"),zeroStatusText:e(this).data("zero"),oneStatusText:e(this).data("one"),moreStatusText:e(this).data("more")})})}return t}(),new t})}.call(this),function(){define("common/simple_form/textarea",["jquery"],function(e){var t;return t=function(){function t(){e("textarea").keydown(function(t){var n,r,i,s;if(t.keyCode===9)return i=this.selectionStart,r=this.selectionEnd,n=e(this),s=n.val(),n.val(s.substring(0,i)+"	"+s.substring(r)),this.selectionStart=this.selectionEnd=i+1,t.preventDefault()})}return t}(),new t})}.call(this),function(){define("common/simple_form/form_group",["jquery"],function(e){var t;return t=function(){function t(){e(".form-group.other").each(function(){var t,n;return n=e(this).find("select"),t=e(n).next("input"),e(n).find("option:selected").html()!==e(n).find("option:last").html()&&e(t).hide(),n.change(function(){return e(n).find("option:selected").html()===e(n).find("option:last").html()?t.show():t.hide()})})}return t}(),new t})}.call(this),function(){define("common/simple_form/main",["common/simple_form/date_picker","common/simple_form/chosen","common/simple_form/limit","common/simple_form/textarea","common/simple_form/form_group"],function(){var e;return e=function(){function e(){}return e}()})}.call(this),function(e,t){typeof define=="function"&&define.amd?define("bloodhound",["jquery"],function(n){return e.Bloodhound=t(n)}):typeof exports=="object"?module.exports=t(require("jquery")):e.Bloodhound=t(jQuery)}(this,function(e){var t=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},isElement:function(e){return!!e&&e.nodeType===1},isJQuery:function(t){return t instanceof e},toStr:function(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(n){function r(){return String(n)}return e.isFunction(n)?n:r},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n="0.11.1",r=function(){function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function r(e){return function(r){return r=t.isArray(r)?r:[].slice.call(arguments,0),function(i){var s=[];return t.each(r,function(n){s=s.concat(e(t.toStr(i[n])))}),s}}}return{nonword:n,whitespace:e,obj:{nonword:r(n),whitespace:r(e)}}}(),i=function(){function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function r(){this.head=this.tail=null}function i(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(t,n){var r=this.list.tail,s;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key],this.size--),(s=this.hash[t])?(s.val=n,this.list.moveToFront(s)):(s=new i(t,n),this.list.add(s),this.hash[t]=s,this.size++)},get:function(t){var n=this.hash[t];if(n)return this.list.moveToFront(n),n.val},reset:function(){this.size=0,this.hash={},this.list=new r}}),t.mixin(r.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){function i(e,r){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=r||n,!this.ls&&this._noop()}function s(){return(new Date).getTime()}function o(e){return JSON.stringify(t.isUndefined(e)?null:e)}function u(t){return e.parseJSON(t)}function a(e){var t,r,i=[],s=n.length;for(t=0;t<s;t++)(r=n.key(t)).match(e)&&i.push(r.replace(e,""));return i}var n;try{n=window.localStorage,n.setItem("~~~","!"),n.removeItem("~~~")}catch(r){n=null}return t.mixin(i.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(n){n.name==="QuotaExceededError"&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),u(this.ls.getItem(this._prefix(e)))},set:function(e,n,r){return t.isNumber(r)?this._safeSet(this._ttlKey(e),o(s()+r)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),o(n))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=a(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var n=u(this.ls.getItem(this._ttlKey(e)));return t.isNumber(n)&&s()>n?!0:!1}}),i}(),o=function(){function u(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=e.cache===!1?new i(0):o}var n=0,r={},s=6,o=new i(10);return u.setMaxPendingRequests=function(t){s=t},u.resetCache=function(){o.reset()},t.mixin(u.prototype,{_fingerprint:function(n){return n=n||{},n.url+n.type+e.param(n.data||{})},_get:function(e,t){function a(e){t(null,e),i._cache.set(o,e)}function f(){t(!0)}function l(){n--,delete r[o],i.onDeckRequestArgs&&(i._get.apply(i,i.onDeckRequestArgs),i.onDeckRequestArgs=null)}var i=this,o,u;o=this._fingerprint(e);if(this.cancelled||o!==this.lastReq)return;(u=r[o])?u.done(a).fail(f):n<s?(n++,r[o]=this._send(e).done(a).fail(f).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(n,r){var i,s;r=r||e.noop,n=t.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(i=this._cache.get(s))?r(null,i):this._get(n,r)},cancel:function(){this.cancelled=!0}}),u}(),u=window.SearchIndex=function(){function i(n){n=n||{},(!n.datumTokenizer||!n.queryTokenizer)&&e.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||t.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function s(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()}),e}function o(){var e={};return e[r]=[],e[n]={},e}function u(e){var t={},n=[];for(var r=0,i=e.length;r<i;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function a(e,t){var n=0,r=0,i=[];e=e.sort(),t=t.sort();var s=e.length,o=t.length;while(n<s&&r<o)e[n]<t[r]?n++:e[n]>t[r]?r++:(i.push(e[n]),n++,r++);return i}var n="c",r="i";return t.mixin(i.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(e){var i=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var u,a;i.datums[u=i.identify(e)]=e,a=s(i.datumTokenizer(e)),t.each(a,function(e){var t,s,a;t=i.trie,s=e.split("");while(a=s.shift())t=t[n][a]||(t[n][a]=o()),t[r].push(u)})})},get:function(n){var r=this;return t.map(n,function(e){return r.datums[e]})},search:function(i){var o=this,f,l;return f=s(this.queryTokenizer(i)),t.each(f,function(e){var t,i,s,u;if(l&&l.length===0)return!1;t=o.trie,i=e.split("");while(t&&(s=i.shift()))t=t[n][s];if(!t||i.length!==0)return l=[],!1;u=t[r].slice(0),l=l?a(l,u):u}),l?t.map(u(l),function(e){return o.datums[e]}):[]},all:function(){var t=[];for(var n in this.datums)t.push(this.datums[n]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),a=function(){function n(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new s(e.cacheKey)}var e;return e={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(n.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(n){if(!this.cache)return;this.storage.set(e.data,n,this.ttl),this.storage.set(e.protocol,location.protocol,this.ttl),this.storage.set(e.thumbprint,this.thumbprint,this.ttl)},fromCache:function(){var n={},r;return this.cache?(n.data=this.storage.get(e.data),n.protocol=this.storage.get(e.protocol),n.thumbprint=this.storage.get(e.thumbprint),r=n.thumbprint!==this.thumbprint||n.protocol!==location.protocol,n.data&&!r?n.data:null):null},fromNetwork:function(e){function r(){e(!0)}function i(n){e(null,t.transform(n))}var t=this,n;if(!e)return;n=this.prepare(this._settings()),this.transport(n).fail(r).done(i)},clear:function(){return this.storage.clear(),this}}),n}(),f=function(){function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.transport=new o({cache:e.cache,limiter:e.limiter,transport:e.transport})}return t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,n){function s(e,t){e?n([]):n(r.transform(t))}var r=this,i;if(!n)return;return t=t||"",i=this.prepare(t,this._settings()),this.transport.get(i,s)},cancelLastRequest:function(){this.transport.cancel()}}),e}(),l=function(){function r(r){var i;return r?(i={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},r=t.isString(r)?{url:r}:r,r=t.mixin(i,r),!r.url&&e.error("prefetch requires url to be set"),r.transform=r.filter||r.transform,r.cacheKey=r.cacheKey||r.url,r.thumbprint=n+r.thumbprint,r.transport=r.transport?u(r.transport):e.ajax,r):null}function i(n){var r;if(!n)return;return r={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,n=t.mixin(r,n),!n.url&&e.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=o(n),n.transport=n.transport?u(n.transport):e.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(e){function i(e,t){return t.url=n(t.url,e),t}function s(e,t){return t.url=t.url.replace(r,encodeURIComponent(e)),t}function o(e,t){return t}var t,n,r;return t=e.prepare,n=e.replace,r=e.wildcard,t?t:(n?t=i:e.wildcard?t=s:t=o,t)}function o(e){function s(e){return function(r){return t.debounce(r,e)}}function o(e){return function(r){return t.throttle(r,e)}}var n,r,i;return n=e.limiter,r=e.rateLimitBy,i=e.rateLimitWait,n||(n=/^throttle$/i.test(r)?o(i):s(i)),n}function u(n){return function(i){function o(e){t.defer(function(){s.resolve(e)})}function u(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,o,u),s}}return function(s){var o,u;return o={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},s=t.mixin(o,s||{}),!s.datumTokenizer&&e.error("datumTokenizer is required"),!s.queryTokenizer&&e.error("queryTokenizer is required"),u=s.sorter,s.sorter=u?function(e){return e.sort(u)}:t.identity,s.local=t.isFunction(s.local)?s.local():s.local,s.prefetch=r(s.prefetch),s.remote=i(s.remote),s}}(),c=function(){function i(e){e=l(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.local=e.local,this.remote=e.remote?new f(e.remote):null,this.prefetch=e.prefetch?new a(e.prefetch):null,this.index=new u({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),e.initialize!==!1&&this.initialize()}var n;return n=window&&window.Bloodhound,i.noConflict=function(){return window&&(window.Bloodhound=n),i},i.tokenizers=r,t.mixin(i.prototype,{__ttAdapter:function(){function n(e,n,r){return t.search(e,n,r)}function r(e,n){return t.search(e,n)}var t=this;return this.remote?n:r},_loadPrefetch:function(){function s(e,t){if(e)return r.reject();n.add(t),n.prefetch.store(n.index.serialize()),r.resolve()}var n=this,r,i;return r=e.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),r.resolve()):this.prefetch.fromNetwork(s):r.resolve(),r.promise()},_initialize:function(){function r(){t.add(t.local)}var t=this,n;return this.clear(),(this.initPromise=this._loadPrefetch()).done(r),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(n){return n=t.isArray(n)?n:[].slice.call(arguments),this.index.get(n)},search:function(n,r,i){function u(e){var n=[];t.each(e,function(e){!t.some(o,function(t){return s.identify(e)===s.identify(t)})&&n.push(e)}),i&&i(n)}var s=this,o;return o=this.sorter(this.index.search(n)),r(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(n,u):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),i}();return c}),function(e,t){typeof define=="function"&&define.amd?define("typeahead.js",["jquery"],function(e){return t(e)}):typeof exports=="object"?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){var t=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},isElement:function(e){return!!e&&e.nodeType===1},isJQuery:function(t){return t instanceof e},toStr:function(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(n){function r(){return String(n)}return e.isFunction(n)?n:r},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){function n(n){var o,u;return u=t.mixin({},e,n),o={css:s(),classes:u,html:r(u),selectors:i(u)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(e){t.mixin(e,o)}}}function r(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(e,t){n[t]="."+e}),n}function s(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return n}(),r=function(){function i(t){(!t||!t.el)&&e.error("EventBus initialized without el"),this.$el=e(t.el)}var n,r;return n="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(i.prototype,{_trigger:function(t,r){var i;return i=e.Event(n+t),(r=r||[]).unshift(i),this.$el.trigger.apply(this.$el,r),i},before:function(e){var t,n;return t=[].slice.call(arguments,1),n=this._trigger("before"+e,t),n.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=r[e])&&this._trigger(t,[].slice.call(arguments,1))}}),i}(),i=function(){function n(t,n,r,i){var s;if(!r)return this;n=n.split(e),r=i?f(r,i):r,this._callbacks=this._callbacks||{};while(s=n.shift())this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(r);return this}function r(e,t,r){return n.call(this,"async",e,t,r)}function i(e,t,r){return n.call(this,"sync",e,t,r)}function s(t){var n;if(!this._callbacks)return this;t=t.split(e);while(n=t.shift())delete this._callbacks[n];return this}function o(n){var r,i,s,o,a;if(!this._callbacks)return this;n=n.split(e),s=[].slice.call(arguments,1);while((r=n.shift())&&(i=this._callbacks[r]))o=u(i.sync,this,[r].concat(s)),a=u(i.async,this,[r].concat(s)),o()&&t(a);return this}function u(e,t,n){function r(){var r;for(var i=0,s=e.length;!r&&i<s;i+=1)r=e[i].apply(t,n)===!1;return!r}return r}function a(){var e;return window.setImmediate?e=function(t){setImmediate(function(){t()})}:e=function(t){setTimeout(function(){t()},0)},e}function f(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var e=/\s+/,t=a();return{onSync:i,onAsync:r,off:s,trigger:o}}(),s=function(e){function r(e,n,r){var i=[],s;for(var o=0,u=e.length;o<u;o++)i.push(t.escapeRegExChars(e[o]));return s=r?"\\b("+i.join("|")+")\\b":"("+i.join("|")+")",n?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function u(t){var n,r,i;if(n=o.exec(t.data))i=e.createElement(s.tagName),s.className&&(i.className=s.className),r=t.splitText(n.index),r.splitText(n[0].length),i.appendChild(r.cloneNode(!0)),t.parentNode.replaceChild(i,r);return!!n}function a(e,t){var n,r=3;for(var i=0;i<e.childNodes.length;i++)n=e.childNodes[i],n.nodeType===r?i+=t(n)?1:0:a(n,t)}var o;s=t.mixin({},n,s);if(!s.node||!s.pattern)return;s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],o=r(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,u)}}(window.document),o=function(){function r(n,r){n=n||{},n.input||e.error("input is missing"),r.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=s(this.$input),this._checkLanguageDirection(),this.$hint.length===0&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function s(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return r.normalizeQuery(e)===r.normalizeQuery(t)}function u(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var n;return n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},r.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(r.prototype,i,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var r=n[t.which||t.keyCode];this._managePreventDefault(r,t),r&&this._shouldTrigger(r,t)&&this.trigger(r+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,n){var r;switch(t){case"up":case"down":r=!u(n);break;default:r=!1}r&&n.preventDefault()},_shouldTrigger:function(t,n){var r;switch(t){case"tab":r=!u(n);break;default:r=!0}return r},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,n){var r,i;r=o(t,this.query),i=r?this.query.length!==t.length:!1,this.query=t,!n&&!r?this.trigger("queryChanged",this.query):!n&&i&&this.trigger("whitespaceChanged",this.query)},bind:function(){var e=this,r,i,s,o;return r=t.bind(this._onBlur,this),i=t.bind(this._onFocus,this),s=t.bind(this._onKeydown,this),o=t.bind(this._onInput,this),this.$input.on("blur.tt",r).on("focus.tt",i).on("keydown.tt",s),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){if(n[r.which||r.keyCode])return;t.defer(t.bind(e._onInput,e,r))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,n){this.setInputValue(t),this._setQuery(t,n)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,n,r,i;t=this.getInputValue(),n=this.getHint(),r=t!==n&&n.indexOf(t)===0,i=t!==""&&r&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var e,n,r;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(r=document.selection.createRange(),r.moveStart("character",-e),e===r.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),r}(),u=function(){function o(n,i){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&!f(n.name)&&e.error("invalid dataset name: "+n.name),i.mixin(this),this.highlight=!!n.highlight,this.name=n.name||r(),this.limit=n.limit||5,this.displayFn=u(n.display||n.displayKey),this.templates=a(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function u(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function a(n,r){function i(t){return e("<div>").text(r(t))}return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||i}}function f(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var n,r;return n={val:"tt-selectable-display",obj:"tt-selectable-object"},r=t.getIdGenerator(),o.extractData=function(r){var i=e(r);return i.data(n.obj)?{val:i.data(n.val)||"",obj:i.data(n.obj)||null}:null},t.mixin(o.prototype,i,{_overwrite:function(t,n){n=n||[],n.length?this._renderSuggestions(t,n):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,n,!1)},_append:function(t,n){n=n||[],n.length&&this.$lastSuggestion.length?this._appendSuggestions(t,n):n.length?this._renderSuggestions(t,n):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,n,!0)},_renderSuggestions:function(t,n){var r;r=this._getSuggestionsFragment(t,n),this.$lastSuggestion=r.children().last(),this.$el.html(r).prepend(this._getHeader(t,n)).append(this._getFooter(t,n))},_appendSuggestions:function(t,n){var r,i;r=this._getSuggestionsFragment(t,n),i=r.children().last(),this.$lastSuggestion.after(r),this.$lastSuggestion=i},_renderPending:function(t){var n=this.templates.pending;this._resetLastSuggestion(),n&&this.$el.html(n({query:t,dataset:this.name}))},_renderNotFound:function(t){var n=this.templates.notFound;this._resetLastSuggestion(),n&&this.$el.html(n({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(i,o){var u=this,a;return a=document.createDocumentFragment(),t.each(o,function(r){var s,o;o=u._injectQuery(i,r),s=e(u.templates.suggestion(o)).data(n.obj,r).data(n.val,u.displayFn(r)).addClass(u.classes.suggestion+" "+u.classes.selectable),a.appendChild(s[0])}),this.highlight&&s({className:this.classes.highlight,node:a,pattern:i}),e(a)},_getFooter:function(t,n){return this.templates.footer?this.templates.footer({query:t,suggestions:n,dataset:this.name}):null},_getHeader:function(t,n){return this.templates.header?this.templates.header({query:t,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(n,r){return t.isObject(r)?t.mixin({_query:n},r):r},update:function(n){function u(e){if(s)return;s=!0,e=(e||[]).slice(0,r.limit),o=e.length,r._overwrite(n,e),o<r.limit&&r.async&&r.trigger("asyncRequested",n)}function a(t){t=t||[],!i&&o<r.limit&&(r.cancel=e.noop,o+=t.length,r._append(n,t.slice(0,r.limit-o)),r.async&&r.trigger("asyncReceived",n))}var r=this,i=!1,s=!1,o=0;this.cancel(),this.cancel=function(){i=!0,r.cancel=e.noop,r.async&&r.trigger("asyncCanceled",n)},this.source(n,u,a),!s&&u([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),o}(),a=function(){function n(n,r){function s(t){var n=i.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(i.$node),new u(t,r)}var i=this;n=n||{},n.node||e.error("node is required"),r.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,s)}return t.mixin(n.prototype,i,{_onSelectableClick:function(n){this.trigger("selectableClicked",e(n.currentTarget))},_onRendered:function(t,n,r,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",n,r,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function n(e){return e.isEmpty()}return t.every(this.datasets,n)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var n,r,i,s;n=t.position().top,r=n+t.outerHeight(!0),i=this.$node.scrollTop(),s=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),n<0?this.$node.scrollTop(i+n):s<r&&this.$node.scrollTop(i+(r-s))},bind:function(){var e=this,n;return n=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),t.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var n,r,i,s;return r=this.getActiveSelectable(),n=this._getSelectables(),i=r?n.index(r):-1,s=i+t,s=(s+1)%(n.length+1)-1,s=s<-1?n.length-1:s,s===-1?null:n.eq(s)},setCursor:function(t){this._removeCursor();if(t=t&&t.first())t.addClass(this.classes.cursor),this._ensureVisible(t)},getSelectableData:function(t){return t&&t.length?u.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(n){function i(e){e.update(n)}var r=n!==this.query;return r&&(this.query=n,t.each(this.datasets,i)),r},empty:function(){function n(e){e.clear()}t.each(this.datasets,n),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function r(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,r)}}),n}(),f=function(){function n(){a.apply(this,[].slice.call(arguments,0))}var e=a.prototype;return t.mixin(n.prototype,a.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(n){return this.$node.css(n==="ltr"?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),n}(),l=function(){function n(n,i){var s,o,u,a,f,l,h,p,d,v,m;n=n||{},n.input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),i.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=r(this,"activate","open","_onFocused"),o=r(this,"deactivate","_onBlurred"),u=r(this,"isActive","isOpen","_onEnterKeyed"),a=r(this,"isActive","isOpen","_onTabKeyed"),f=r(this,"isActive","_onEscKeyed"),l=r(this,"isActive","open","_onUpKeyed"),h=r(this,"isActive","open","_onDownKeyed"),p=r(this,"isActive","isOpen","_onLeftKeyed"),d=r(this,"isActive","isOpen","_onRightKeyed"),v=r(this,"_openIfActive","_onQueryChanged"),m=r(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",o,this).onSync("enterKeyed",u,this).onSync("tabKeyed",a,this).onSync("escKeyed",f,this).onSync("upKeyed",l,this).onSync("downKeyed",h,this).onSync("leftKeyed",p,this).onSync("rightKeyed",d,this).onSync("queryChanged",v,this).onSync("whitespaceChanged",m,this).onSync("langDirChanged",this._onLangDirChanged,this)}function r(e){var n=[].slice.call(arguments,1);return function(){var r=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,r)})}}return t.mixin(n.prototype,{_hacks:function(){var r,i;r=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),r.on("blur.tt",function(e){var n,s,o;n=document.activeElement,s=i.is(n),o=i.has(n).length>0,t.isMsie()&&(s||o)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),i.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(t,n){this.select(n)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,n,r,i){this._updateHint(),this.eventBus.trigger("render",r,i,n)},_onAsyncRequested:function(t,n,r){this.eventBus.trigger("asyncrequest",r,n)},_onAsyncCanceled:function(t,n,r){this.eventBus.trigger("asynccancel",r,n)},_onAsyncReceived:function(t,n,r){this.eventBus.trigger("asyncreceive",r,n)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,n){var r;(r=this.menu.getActiveSelectable())&&this.select(r)&&n.preventDefault()},_onTabKeyed:function(t,n){var r;(r=this.menu.getActiveSelectable())?this.select(r)&&n.preventDefault():(r=this.menu.getTopSelectable())&&this.autocomplete(r)&&n.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){this.dir==="rtl"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){this.dir==="ltr"&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,n){this.dir!==n&&(this.dir=n,this.menu.setLanguageDirection(n))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(n){return n=t.isString(n)?n:this.input.getQuery()||"",n.length>=this.minLength},_updateHint:function(){var n,r,i,s,u,a,f;n=this.menu.getTopSelectable(),r=this.menu.getSelectableData(n),i=this.input.getInputValue(),r&&!t.isBlankString(i)&&!this.input.hasOverflow()?(s=o.normalizeQuery(i),u=t.escapeRegExChars(s),a=new RegExp("^(?:"+u+")(.+$)","i"),f=a.exec(r.val),f&&this.input.setHint(i+f[1])):this.input.clearHint()},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return!this.isOpen()&&!this.eventBus.before("open")&&(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(n){this.input.setQuery(t.toStr(n))},getVal:function(){return this.input.getQuery()},select:function(t){var n=this.menu.getSelectableData(t);return n&&!this.eventBus.before("select",n.obj)?(this.input.setQuery(n.val,!0),this.eventBus.trigger("select",n.obj),this.close(),!0):!1},autocomplete:function(t){var n,r,i;return n=this.input.getQuery(),r=this.menu.getSelectableData(t),i=r&&n!==r.val,i&&!this.eventBus.before("autocomplete",r.obj)?(this.input.setQuery(r.val),this.eventBus.trigger("autocomplete",r.obj),!0):!1},moveCursor:function(t){var n,r,i,s,o;return n=this.input.getQuery(),r=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(r),s=i?i.obj:null,o=this._minLengthMet()&&this.menu.update(n),!o&&!this.eventBus.before("cursorchange",s)?(this.menu.setCursor(r),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",s),!0):!1},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();(function(){function c(t,n){t.each(function(){var t=e(this),r;(r=t.data(s.typeahead))&&n(r,t)})}function h(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(d(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function p(e,t){e.data(s.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(n){}return e}function d(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function v(e){var n,r;n=e.data(s.www),r=e.parent().filter(n.selectors.wrapper),t.each(e.data(s.attrs),function(n,r){t.isUndefined(n)?e.removeAttr(r):e.attr(r,n)}),e.removeData(s.typeahead).removeData(s.www).removeData(s.attr).removeClass(n.classes.input),r.length&&(e.detach().insertAfter(r),r.remove())}function m(n){var r,i;return r=t.isJQuery(n)||t.isElement(n),i=r?e(n).first():[],i.length?i:null}var i,s,u;i=e.fn.typeahead,s={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},u={initialize:function(u,c){function v(){var n,i,v,g,y,b,w,E,S,x,T;t.each(c,function(e){e.highlight=!!u.highlight}),n=e(this),i=e(d.html.wrapper),v=m(u.hint),g=m(u.menu),y=u.hint!==!1&&!v,b=u.menu!==!1&&!g,y&&(v=h(n,d)),b&&(g=e(d.html.menu).css(d.css.menu)),v&&v.val(""),n=p(n,d);if(y||b)i.css(d.css.wrapper),n.css(y?d.css.input:d.css.inputWithNoHint),n.wrap(i).parent().prepend(y?v:null).append(b?g:null);T=b?f:a,w=new r({el:n}),E=new o({hint:v,input:n},d),S=new T({node:g,datasets:c},d),x=new l({input:E,menu:S,eventBus:w,minLength:u.minLength},d),n.data(s.www,d),n.data(s.typeahead,x)}var d;return c=t.isArray(c)?c:[].slice.call(arguments,1),u=u||{},d=n(u.classNames),this.each(v)},isEnabled:function(){var t;return c(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return c(this,function(e){e.enable()}),this},disable:function(){return c(this,function(e){e.disable()}),this},isActive:function(){var t;return c(this.first(),function(e){t=e.isActive()}),t},activate:function(){return c(this,function(e){e.activate()}),this},deactivate:function(){return c(this,function(e){e.deactivate()}),this},isOpen:function(){var t;return c(this.first(),function(e){t=e.isOpen()}),t},open:function(){return c(this,function(e){e.open()}),this},close:function(){return c(this,function(e){e.close()}),this},select:function(n){var r=!1,i=e(n);return c(this.first(),function(e){r=e.select(i)}),r},autocomplete:function(n){var r=!1,i=e(n);return c(this.first(),function(e){r=e.autocomplete(i)}),r},moveCursor:function(t){var n=!1;return c(this.first(),function(e){n=e.moveCursor(t)}),n},val:function(t){var n;return arguments.length?(c(this,function(e){e.setVal(t)}),this):(c(this.first(),function(e){n=e.getVal()}),n)},destroy:function(){return c(this,function(e,t){v(t),e.destroy()}),this}},e.fn.typeahead=function(e){return u[e]?u[e].apply(this,[].slice.call(arguments,1)):u.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this}})()}),define("typeahead",["jquery"],function(){}),function(){define("common/typeahead/search",["jquery","typeahead","bloodhound"],function(e,t){var n;return n=function(){function t(){this.form=e(".main-navbar-search"),this.input=this.form.find("input"),this.fetch_url=this.form.attr("action"),this.userUrl=this.form.attr("data-user-url"),this.input.length&&this._setupTypeahead()}return t.prototype._setupTypeahead=function(){var e,t;return t=this,this._bindEnter(),this.form.addClass("js-search"),e=this._getBloodhound(),e.initialize(),this.input.typeahead({highlight:!0,hint:!0},{displayKey:"value",source:e.ttAdapter(),templates:{suggestion:function(e){return"<a href='"+t.userUrl+e.value+"' class='search-suggestion-item'><div class='search-user-picture bg-image-item rounded square-xs' style='background-image: url(https://cdn.42.fr/userprofil/profilview/"+e.value+".jpg)'></div><span>"+e.value+"</span></a>"}}})},t.prototype._bindEnter=function(){var t;return t=this,this.form.find("input[name='query']").keyup(function(n){if(n.keyCode===13)return e(t.form).submit()})},t.prototype._getBloodhound=function(){return new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.fetch_url+".json?query=*%QUERY*",filter:function(e){return _.map(e,function(e){return{value:e}})}}})},t}(),n})}.call(this),function(){define("common/typeahead/main",["jquery","bloodhound","common/typeahead/search"],function(e){var t;return t=function(){function t(){var t;t=this,e(".typeahead").each(function(){var n,r;return n=e(this),r=t._getBloodhound.call(this),r.initialize(),n.typeahead({highlight:!0,hint:!1},{displayKey:"displayKey",source:r.ttAdapter()}).on("typeahead:selected",function(e,t){return n.parents("form").find('input[type="hidden"][data-typeahead-'+n.data("displayKey")+"]").val(t.value)})})}return t.prototype._getBloodhound=function(){var t;return t=e(this),new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:t.data("url")+"?query=%QUERY",filter:function(n){return e.map(n,function(e){return{displayKey:e[t.data("displayKey")],value:e[t.data("valueKey")||"id"],data:e}})}}})},t}(),[]})}.call(this),function(){define("common/cache",["jquery"],function(e){var t;return t=function(){function t(){this._$element=e("[data-cache]"),this._$element.find("[data-cache-target]").each(function(){var t,n;return t=e(this),n=e(""+t.data("cache-target")),n.html(t.html())})}return t}(),new t})}.call(this),function(){define("common/copy",["jquery","zeroclipboard"],function(e,t){var n;return n=function(){function n(){t.config({swfPath:"/assets/clipboard-8d300934b0e6dbff620155650e9246a4.swf"}),e("[data-copy]").each(function(e){return function(t,n){return e._initCopy(n)}}(this))}return n.prototype._initCopy=function(n){var r;return r=new t(n),r.on("ready",function(){return r.on("copy",function(t){var r,i;return i=e(""+e(n).data("copy")).val(),r=e(n).data("copy-type")||"text/plain",t.clipboardData.setData(r,i),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})},n}(),new n})}.call(this),function(){define("common/data_events",["jquery"],function(e){var t;return t=function(){function t(){this.refresh()}return t.prototype.refresh=function(){return this.attachFocusEvents(),this.attachToggleEvents()},t.prototype.attachFocusEvents=function(){return e("[data-event-focus]").click(function(){return e(e(this).attr("data-event-focus")).focus()})},t.prototype.attachToggleEvents=function(){return e("[data-event-toggle]").each(function(){var t,n,r;return t=e(this).attr("data-event-container"),r=e(this).attr("data-event-toggle"),n=t?e(this).parents(t):e(this).parent(),e(n).find(r).addClass("hidden"),e(this).click(function(t){return t.stopImmediatePropagation(),e(n).find(r).toggleClass("hidden"),e(this).toggleClass("active"),!1})})},t}(),new t})}.call(this),function(){define("common/data_date",["jquery","moment-twitter"],function(e,t){var n;return n=function(){function n(){this._updateAll(),this.handler=setInterval(this._updateAll,61e3)}return n.prototype._updateAll=function(){return e("[data-long-date]").each(function(){return e(this).html(t(e(this).attr("data-long-date"),"YYYY-MM-DD HH:mm Z").fromNow())}),e("[data-short-date]").each(function(){return e(this).html(t(e(this).attr("data-short-date"),"YYYY-MM-DD HH:mm Z").twitter())}),e("[data-cal-date]").each(function(){return e(this).html(t(e(this).attr("data-cal-date"),"YYYY-MM-DD HH:mm Z").calendar())})},n.prototype.refresh=function(){return this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,61e3)},n.refresh=function(){var e;return window.__||(window.__={}),(e=window.__).date||(e.date=new this),window.__.date.refresh()},n}()})}.call(this),function(){define("common/emojify",["emojify"],function(e){var t;return t=function(){function t(){e.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir:"/images/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),this.refresh()}return t.prototype.refresh=function(){var t,n,r,i,s,o;i=["messages","changelogs"],s=[];for(n=0,r=i.length;n<r;n++)o=i[n],t=document.getElementsByClassName(o+"-list")[0],e&&t!=null?s.push(e.run(t)):s.push(void 0);return s},t}(),new t})}.call(this),function(){define("common/fullscreen",["jquery"],function(e){var t;return t=function(){function t(){e("[data-toggle-fullscreen]").click(function(){var t;t=e(".page-content")[0];if(t){if(t.requestFullscreen)return t.requestFullscreen();if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen()}}),document.addEventListener("webkitfullscreenchange",function(){return e("html").toggleClass("fullscreen")},!1)}return t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/infinite_scroll",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._bindManualButtons=e(this._bindManualButtons,this),this._clearManualButtons=e(this._clearManualButtons,this),this._generateManualButtons=e(this._generateManualButtons,this),this.paginate=e(this.paginate,this);var i;i={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",itemContainer:".messages-list",loading:function(e){return"Loading "+(e?"previous":"next")+" messages..."},limit:250},r||(r={}),this.options=n.extend(i,r),this._refreshValues(),this.nav=t(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),this._getNextItems(!0),t(document).scroll(this.paginate),r.onRefresh&&this.onRefresh(r.onRefresh)}return r.prototype._setupReferences=function(){var e,n;return e=t(this.options.itemContainer+" "+this.options.itemSelector).first(),n=t(this.options.itemContainer+" "+this.options.itemSelector).last(),this.start=e?e.attr("data-index"):0,this.end=n?n.attr("data-index"):0},r.prototype.paginate=function(e){var n;n=this._isScrollUp();if(n&&t(document).scrollTop()===0&&this.scroll>350)return e.preventDefault(),e.stopImmediatePropagation(),t("body").scrollTop(this.scroll),!1;this._refreshValues();if(this._needMoreContent(n))return this._getNextItems(n)},r.prototype._needMoreContent=function(e){var t;return e?this.scroll<this.options.limit:(t=this.docHeight-(this.winHeight+this.scroll),t<this.options.limit)},r.prototype.onRefresh=function(e){return this.callbacks.push(e)},r.prototype._addLoader=function(e){var n;return n='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n  '+this.options.loading(e)+"\n</h1>",e?t(""+this.options.itemContainer).prepend(n):t(""+this.options.itemContainer).append(n),e?t("[data-load-previous]").remove():t("[data-load-next]").remove()},r.prototype._removeLoader=function(){return t(this.options.itemContainer+" .infinite-loader").remove()},r.prototype._generateManualButtons=function(){return t(this.options.prevSelector).length>0&&t(this.options.itemContainer).prepend(t('<div class="btn btn-block btn-primary" data-load-previous>Load previous messages</div>')),t(this.options.nextSelector).length>0&&t(this.options.itemContainer).append(t('<div class="btn btn-block btn-primary" data-load-next>Load next messages</div>')),this},r.prototype._clearManualButtons=function(){return t("[data-load-previous], [data-load-next]").remove()},r.prototype._bindManualButtons=function(){return t(document).on("click","[data-load-previous]",function(e){return function(){return e._getNextItems(!0)}}(this)),t(document).on("click","[data-load-next]",function(e){return function(){return e._getNextItems(!1)}}(this))},r.prototype._getNextItems=function(e){var r,i,s;return e==null&&(e=!1),s=e?this.options.prevSelector:this.options.nextSelector,t(s).length>0?(r=t(s).first(),i=t(r).attr("href"),!this.lock&&i&&(r.remove(),this._addLoader(e),this.lock=!0,t.get(i,function(r){return function(i){var o,u,a,f,l,c,h;return l=t(i).find(r.options.navSelector),f=t(i).find(s).parent(),r.nav.append(f),r.nav=t(r.options.navSelector),u=t(i).find(r.options.itemSelector),e?(o=t(r.options.itemContainer+" "+r.options.itemSelector).first(),c=-document.querySelector("[data-id='"+o.attr("data-id")+"']").getBoundingClientRect().top,o.before(u),o.prevAll().each(function(){return c+=t(this).outerHeight()}),t("body").scrollTop(c)):(a=t(r.options.itemContainer+" fantom-item").detach(),h=t(r.options.itemContainer+" [data-id='virtual']").detach(),t(r.options.itemContainer+" "+r.options.itemSelector).last().after(u),t(r.options.itemContainer+" "+r.options.itemSelector).last().after(a),t(r.options.itemContainer+" "+r.options.itemSelector).last().after(h)),r.lock=!1,r._removeLoader(),r._generateManualButtons(),n.each(r.callbacks,function(e){return e()})}}(this))),!0):!1},r.prototype._isScrollUp=function(){return this.scroll>t(document).scrollTop()},r.prototype._refreshValues=function(){return this.docHeight=t(document).innerHeight(),this.winHeight=t(window).innerHeight(),this.scroll=t(document).scrollTop()},r}()})}.call(this),function(){define("common/lockable",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this._form_to_data,e("[data-lockable-url]").length&&setInterval(function(t){return function(){return t._synchronize_locked(e("[data-lockable-url]").data("lockable-url"))}}(this),1e4),e("[data-check-lock-url]").length&&(setInterval(function(t){return function(){return t._check_locked(e("[data-check-lock-url]").data("check-lock-url"))}}(this),1e4),e("#lock_taken .roger").click(function(n){return function(){return e("form").submit(function(){return e.ajax({url:e(this).attr("action"),data:t(e("form")),type:"POST",dataType:"JSON"}).success(function(t){return document.location.href=e("#lock_taken .roger").attr("href")}),!1}),e("form").submit()}}(this)))}return t.prototype._synchronize_locked=function(t){return e.getScript(t)},t.prototype._check_locked=function(t){return e.getJSON(t,function(t){var n;if(t.res!=="OK")return e("#lock_taken .modal-body").html((n=t["res"])!=null?n:""),e("#lock_taken").modal("show")})},t.prototype._form_to_data=function(t){return e.map(e(t).find("input, select, textarea"),function(t){return e(t).attr("name")+"="+e(t).val()}).join("&")},t}(),new t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/manage_attachment",["jquery"],function(t){var n;n=function(){function n(){this.changed=e(this.changed,this),t.getJSON(t("[data-attachments-url]").data("attachments-url"),function(e){return function(n){return e.values=n,t("form .attachment_kind input:hidden").each(function(n,r){if(t(r).parents("form").find(".attachment_fields input").length===0)return e.changed(r,t(r).val())})}}(this)),t("form").on("change","#attachment_select",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e,n){var r,i,s,o,u,a,f;n==null&&(n=t(e).find("option:checked").html().toLowerCase()),r=t(e).parents(".form-group").siblings(".attachment_fields"),a=(new Date).getTime(),i=t(e).attr("name"),s="<div class='form-group input optional project_attachements'>",u=this.values[n];for(o in u)f=u[o],s+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+n+"' name='"+i.replace("[kind]","[attachable_attributes]["+a+"][attachable_type]]")+"' /></div>",s+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+a+"_"+o+"'>"+o+"</label>",s+="<div class='col-sm-10'>",f==="string"?s+="<input class='input optional form-control' id='project_attachements_attributes_"+a+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+a+"]["+o+"]")+"' />":f==="text"?s+="<textarea class='text optional form-control' id='project_attachements_attributes_"+a+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+a+"]["+o+"]")+"' />":f==="upload"&&(s+="<input class='file optional form-control' type='file' id='project_attachements_attributes_"+a+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+a+"]["+o+"]")+"' />"),s+="</div>";return s+="</div>",t(r).html(s)},n}();if(t("[data-attachments-url]").length)return new n})}.call(this),function(){define("common/markdownable",["jquery","marked","Logger"],function(e,t,n){var r;return r=function(){function r(e){var r;t==null?n.warn("Unable to find marked for client-side markdown compilation."):(r={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"},this.opts=_.extend(r,e),this._generateMarkdown())}return r.prototype._generateMarkdown=function(){var n;return n=this,e(this.opts.markdownSelector).each(function(){return e(this).html(t(e(this).attr(n.opts.markdownAttribute).trim()))})},r}(),new r})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/multiple_actions",["jquery"],function(t){var n;return n=function(){function n(){this.on_select_one_click=e(this.on_select_one_click,this),this.on_select_all_click=e(this.on_select_all_click,this),this.on_select_click=e(this.on_select_click,this),this.selector=".table.admin_table",t(this.selector).length&&(this.bindAll(),t(this.selector).find(".btns").hide(),this.on_select_click())}return n.prototype.bindAll=function(){var e;return e=this,t(this.selector).on("click",".select.all",this.on_select_all_click),t(this.selector).on("click",".select.one",this.on_select_one_click),t(this.selector).on("click",".select",this.on_select_click)},n.prototype.on_select_click=function(e){if(!e)return;return t(e.target).parents(this.selector).find(".btns")[t(e.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),t(e.target).parents(this.selector).find(".btns a").each(function(n){return function(r,i){var s;return s=t(e.target).parents(n.selector).find(".select.one").filter(":checked").map(function(){return t(this).data("id")}).toArray(),s=s.to_rails_params(t(e.target).parents(n.selector).data("model")),t(i).attr("href",t(i).attr("href").split("?")[0]+"?"+s)}}(this))},n.prototype.on_select_all_click=function(e){return t(e.target).parents(this.selector).find(".select.one").prop("checked",!t(e.target).parents(this.selector).find(".select.one").filter(":checked").length),t(e.target).prop("checked",t(e.target).parents(this.selector).find(".select.one").filter(":checked").length)},n.prototype.on_select_one_click=function(e){return t(e.target).parents(this.selector).find(".select.all").prop("checked",!t(e.target).parents(this.selector).find(".select.one").not(":checked").length)},n}(),new n})}.call(this),function(){define("common/notifications_manager",["jquery","tinycon"],function(e,t){var n;return n=function(){function n(t){if(!window.webkitNotifications||window.webkitNotifications.checkPermission()===0||e("body[data-id]").length!==0)return;this._setDefaultOptions(),t=e.extend(this.default_notif_options,t),e("#browser_notification").on("click",function(){return e(this).parents(".alert").remove(),window.webkitNotifications.requestPermission()}),this.alert("Configure browser notifications : <a href='#' id='browser_notification'>Let's Go!</a>",t.alert)}return n.prototype._setDefaultOptions=function(){var n;return n=e("title").html(),this.default_alert_options={parent:".span9","class":"success",fct:"prepend",template:"<div class='alert fade in alert-$class'><button class='close' data-dismiss='alert'>x</button>$msg</div>"},this.default_notif_options={image:e("link[rel='shortcut icon']").attr("href"),onclick:function(){return window.focus()},title:n,timeout:5e3,alert:{"class":"info"}},this.default_blink_title_options={title:n},this.blink_titles=[n],this.blink_interval=null,this.blink_index=1,t.setOptions({width:7,height:9,font:"10px arial",colour:"#FFFFFF",background:"#FF0000",fallback:!0})},n.prototype.alert=function(t,n){return n=e.extend(this.default_alert_options,n),e(n.parent)[n.fct](e(n.template.replace("$class",n["class"]).replace("$msg",t)))},n.prototype.blink_title=function(t,n){if(!e("body").hasClass("hidden"))return;return n=e.extend(this.default_blink_title_options,n),this.blink_titles.push(t),this.blink_fct=function(t){return function(){return e("title").html(t.blink_titles[t.blink_index]),t.blink_index=(t.blink_index+1)%t.blink_titles.length}}(this),this.blink_interval||(this.blink_interval=setInterval(this.blink_fct,700)),e(window).one("focus",function(t){return function(){return clearInterval(t.blink_interval),t.blink_interval=null,e("title").text(n.title),t.blink_titles=[t.default_blink_title_options.title],t.blink_index=1}}(this))},n.prototype.set_focus_favicon=function(){return e(window).one("focus",function(e){return function(){return t.reset(),e.value=void 0}}(this))},n.prototype.incr_favicon=function(e){return this.value==null&&(this.value=0),this.value+=1,t.setBubble(this.value),this.set_focus_favicon()},n.prototype.update_favicon=function(e,n){return this.value=e,e!=null?t.setBubble(e):(t.reset(),this.set_focus_favicon())},n.prototype.display_notif=function(t,n){var r;n=e.extend(this.default_notif_options,n);if(window.webkitNotifications&&window.webkitNotifications.checkPermission()===0)return r=window.webkitNotifications.createNotification(n.image,n.title,t),r.onclick=n.onclick,r.show(),setTimeout(function(){return r.cancel()},n.timeout)},n}(),new n})}.call(this),function(){define("common/overlay",["jquery","lodash"],function(e,t){var n;return n=function(){function n(n){var r;r={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"},this.opts=t.extend(r,n),e("["+this.opts.trigger+"]").click(function(t){return function(){if(e("["+t.opts.widthSelector+"]").length===0||e(window).width()<=parseInt(e("["+t.opts.widthSelector+"]").attr(t.opts.widthSelector)))return e("["+t.opts.selector+"]").toggleClass(""+t.opts.openClass)}}(this)),e("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(t){return function(){return e("["+t.opts.selector+"]").removeClass(""+t.opts.openClass)}}(this))}return n}(),new n})}.call(this),function(){define("common/remote_pagination",["jquery"],function(e){var t;return t=function(){function t(){e("a[data-remote]").parents("[data-scroll]").length>0&&e(window).scroll(function(){var t;t=e(".pagination a[rel=next]").attr("href");if(t&&e(window).scrollTop()>e(document).height()-e(window).height()-50)return e(".pagination").html("<li><span>Loading...</span></li>"),e.getScript(t+"?scroll=true")}),this.loading_animation(),e(document).ajaxComplete(this.loading_animation)}return t.prototype.loading_animation=function(){if(!e(".pagination a[data-remote]").length)return;e("a[data-remote]").length>0&&e("a[data-remote]").parents("[data-scroll]").length===0&&e(".pagination").on("click","a[data-remote=true]",function(t){history.pushState("","New URL: "+e(this).attr("href"),e(this).attr("href")),e("ul.pagination").empty().html("<li><span>Loading...</span></li>");if(e(window).scrollTop()>e("#main-container").offset().top-50)return e("html, body").animate({scrollTop:e("#main-container").offset().top-50},"fast")});if(e("a[data-remote]").parents("[data-scroll]").length>0)return e(".pagination").hide()},t}(),new t})}.call(this),function(){define("common/responsive_menu",["jquery"],function(e){var t;return t=function(){function t(e){this.enabled=e!=null?e:!0,this._registerEvents(),this}return t.prototype._registerEvents=function(){return this.enabled?e("[data-trigger-menu]").on("click",function(){return e(".left-main-container").toggleClass("opened"),e(this).toggleClass("closed")}):e("[data-trigger-menu]").hide()},t}(),new t})}.call(this),function(){define("common/scroll_spy",["jquery","scrollspy"],function(e){var t;return t=function(){function t(){e("body").scrollspy({target:"#navbar-scale",offset:30})}return t}()})}.call(this),function(){define("common/spinner",["jquery","odometer"],function(e,t){var n;return n=function(){function n(){e("[data-spinner-value]").each(function(){var n,r,i;return i=parseInt(e(this).attr("data-spinner-value")),n=this,r=new t({el:n,value:0}),setTimeout(function(){return r.update(i)},1e3)})}return n}()})}.call(this),function(){define("common/tags",["jquery","lodash"],function(e,t){var n;return n=function(){function n(){e("[data-filter-tags]").keyup(function(){var n;n=t.snakeCase(e(this).val().toLowerCase()),e(".sidebar-tag-item").show();if(n.length>0)return e(".sidebar-tag-item:not([data-tag-name*='"+n+"'])").hide()}),e("[data-tag-collapse]").each(this.onCollapse()),e("[data-tag-collapse]").click(this.onCollapse())}return n.prototype.onCollapse=function(){var t,n;return n="iconf-minus-1",t="iconf-add-1",function(){var r;return e(this).hasClass(t)?e(this).removeClass(t).addClass(n):e(this).removeClass(n).addClass(t),r=e(this).parent().attr("data-tag-kind"),e(".sidebar-tag-item[data-tag-kind='"+r+"']").toggle()}},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/user_link",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._onLeave=e(this._onLeave,this),this._getTriggerPosition=e(this._getTriggerPosition,this),this._onHover=e(this._onHover,this);var i;i={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:t(".main-left-navbar a").first().attr("href")},this.opts=n.extend(i,r),this._bindUserLinks()}return r.prototype._bindUserLinks=function(){var e;return e=this,t(this.opts.linkSelector).hover(this._onHover,this._onLeave)},r.prototype._onHover=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("body").append(this._getPopupTemplate(r)),this._showBubbleFor(r,n)},r.prototype._getTriggerPosition=function(e,n){return{left:t(e).offset().left+t(e).innerWidth()/2-t(n).innerWidth()/2,top:t(e).offset().top-t(n).innerHeight()}},r.prototype._onLeave=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("[data-user-popup='"+r+"']").remove()},r.prototype._showBubbleFor=function(e,n){return t.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",url:this.opts.profileBaseUrl+"/users/"+e+".json",done:function(r){return function(i){var s;return t("[data-user-popup='"+e+"']").html(r._getPopupContent(i.user)),s=t("[data-user-popup='"+e+"']"),s.css(r._getTriggerPosition(n,s))}}(this)})},r.prototype._getPopupTemplate=function(e){return'<div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+e+'" style="position: absolute">\n  <h3 class="marked-title">Loading...</h3>\n</div>'},r.prototype._getPopupContent=function(e){return'<div class="user-popup-image" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+e.login+'.jpg)">\n</div>\n<div class="user-popup-info">\n  <h3 class="user-popup-login">'+e.full_name+'</h3>\n  <span class="user-popup-email marked-title">\n    <span class="icon-envelope"></span>\n    '+e.email+'\n  </span>\n  <h5 class="user-popup-location">\n    <span data-user-location="'+e.location+'" class="icon-circle"></span>\n    '+(e.location||"unavailable")+"\n  </h5>\n</div>"},r}(),new r})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("common/window_focus",[],function(){var t;return t=function(){function t(){var t,n,r,i,s;t="hidden",n=function(e){var n,r,i;e=e||window.event,i="visible",r="hidden",n={focus:i,focusin:i,pageshow:i,blur:r,focusout:r,pagehide:r},e.type in n?document.body.className=n[e.type]:document.body.className=this[t]?r:i},e.call(document,t)>=0?document.addEventListener("visibilitychange",n):(r=t="mozHidden",e.call(document,r)>=0)?document.addEventListener("mozvisibilitychange",n):(i=t="webkitHidden",e.call(document,i)>=0)?document.addEventListener("webkitvisibilitychange",n):(s=t="msHidden",e.call(document,s)>=0)?document.addEventListener("msvisibilitychange",n):e.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n}return t}()})}.call(this),function(){define("common/markdown_preview",["jquery","lodash","marked"],function(e,t,n){var r;return r=function(){function r(r){var i,s;i={bindSelector:"data-markdown-preview"},this.opts=t.extend(i,r),s=this,e("["+this.opts.bindSelector+"]").each(function(t){var r,i;i=this,r=e(this).attr(s.opts.bindSelector);if(r)return e(r).keyup(function(){return e(i).html(n(e(this).val()))})})}return r}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/main",["require","jquery","Logger","common/add_on","common/callback","common/modal","common/simple_form","common/typeahead","common/cache","common/copy","common/data_events","common/data_date","common/emojify","common/fullscreen","common/infinite_scroll","common/lockable","common/manage_attachment","common/markdownable","common/multiple_actions","common/notifications_manager","common/overlay","common/remote_pagination","common/responsive_menu","common/scroll_spy","common/spinner","common/tags","common/user_link","common/window_focus","common/markdown_preview"],function(t,n){var r;return r=function(){function r(){this._emitReady=e(this._emitReady,this),this._ready=e(this._ready,this),n(this._ready)}return r.prototype._ready=function(){var e,n,r,i;return r=t("common/scroll_spy"),new r,i=t("common/simple_form"),new i,e=t("common/data_date"),new e,n=t("common/markdown_preview"),new n,this._emitReady()},r.prototype._emitReady=function(){return n(document).trigger("intra.ready"),this.ready()},r}()})}.call(this),define("common",["common/main"],function(e){return e});