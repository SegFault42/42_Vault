(function(){define("project/answer",["jquery"],function(e){var t;return t=function(){function t(){e(document).on("change","[data-star-range]",function(){return e(this).attr("data-star-range",e(this).val())})}return t}()})}).call(this),function(){define("project/calendar",["jquery","noty","fullcalendar"],function(e){var t;return t=function(){function t(){var t;t=this,this._$modal=e("#slotSelectionModalContainer"),this._$calendar=e("#calendar"),this._$loading=e("#loading"),this._waitingAjax=!1,this.calendar=this._$calendar.fullCalendar({header:{left:"",center:"title",right:"today prev next"},axisFormat:"h:mm a",defaultDate:moment().add(1,"d"),defaultView:"agendaWeek",firstDay:1,allDaySlot:!1,slotEventOverlap:!1,selectable:!1,selectHelper:!0,slotDuration:"00:30:00",snapDuration:"00:15:00",eventClick:function(e){return function(n){var r;if(e._waitingAjax)return;return r=n.ids.split(",").map(function(e){return e>>0}),t._populateModal(r,n),t._$modal.modal("show")}}(this),loading:function(e){return function(t){e._isLoading=t;if(e._isLoading)return e._intervalHandler=clearInterval(e._intervalHandler),e._timeOutHandler=setTimeout(function(){return e._loadingEnable=!0,e._$loading.show(),e._intervalHandler=setInterval(function(){if(!e._isLoading)return e._$loading.fadeOut(),e._loadingEnable=!1,e._intervalHandler=clearInterval(e._intervalHandler)},1e3)},100);if(!e._loadingEnable)return clearTimeout(e._timeOutHandler)}}(this),events:function(n,r,i,s){var o;return o={start:n.format(),end:r.format()},e.getJSON(t._$calendar.data("index-url"),o,function(e){return s(e)})}}),this._bind()}return t.prototype._bind=function(){return this._$modal.on("hidden.bs.modal",".btn-primary",function(){return e(this).off(".modal")}),this._$modal.on("click.modal",".btn-primary:not(.disable)",this._sendSelectedSession.bind(this))},t.prototype._sendSelectedSession=function(){var t,n,r,i;return t=this._$modal.find(".modal-body select"),r=t.val()>>0,n=t.data("ids").split(",").slice(r,r+this._$calendar.data("duration")).join(","),i=this._$calendar.data("update-url").replace(":ids",n),this._waitingAjax=!0,this._$loading.show(),this._$modal.find(".btn-primary").addClass("disable"),e.ajax({url:i,type:"post",dataType:"json",data:{start:this._$calendar.fullCalendar("getView").start.format(),end:this._$calendar.fullCalendar("getView").end.format(),_method:"put"},success:function(e){return function(t){if(t.status===200)return document.location=e._$calendar.data("reload-url")}}(this),complete:function(e){return function(t){return e._showNotification(t),e._$loading.fadeOut(),e._waitingAjax=!1}}(this)})},t.prototype._populateModal=function(t,n){var r,i,s,o,u,a,f,l;f=moment(n._start),u=this._$calendar.data("duration"),l=15,r=this._$modal.find(".modal-body select"),r.empty(),o=t.length-u;for(i=s=0,a=o;0<=a?s<=a:s>=a;i=0<=a?++s:--s)r.append(e('<option value="'+i+'"> From '+n._start.format("LT")+" to "+n._start.add(l*u,"m").format("LT")+" </option>")),n._start.subtract((u-1)*l,"m");return n._start=f,r.data("ids",t.join(","))},t.prototype._showNotification=function(e){return e=e.responseJSON,noty({layout:"topRight",type:e.status===200?"success":"error",text:e.message,timeout:4e3})},t}(),t.isCalendar=function(){return e("#calendar").length},t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("project/scales",["jquery","rangeslider"],function(t){var n;return n=function(){function n(){this._onSkillIdChange=e(this._onSkillIdChange,this),this._onQuestionKindChange=e(this._onQuestionKindChange,this),this._sliderSlt='input[type="range"]',this._skillSummaryCtnSlt=".skillSummary",this._typeInputInputSlt="[data-skill-type]",this._questionKindInputSlt="[data-question-kind]",this._addSkillStl="[data-association='questions_skills'].add_nested_fields",this._getSummarySkills(),this._createSliders(),this._bind(),t(""+this._sliderSlt).parents(".form-group").show(),this._updateLimits(),this._updateSummary()}return n.prototype._createSliders=function(){var e;return e=this,t(""+this._sliderSlt).not(".slided").each(function(e){return function(n,r){var i,s;return i=t(r),s=i.data("kind"),i.attr("max",s==="standard"?100:25),i.rangeslider({polyfill:!1,onSlide:function(){return e._checkLimit.apply(e,t.merge(arguments,this.$element))},onSlideEnd:function(){return e._updateLimits(),e._updateSummary()}}),i.addClass("slided")}}(this))},n.prototype._bind=function(){return t(document).on("change",this._questionKindInputSlt,this._onQuestionKindChange),t(document).on("change",this._typeInputInputSlt,this._onSkillIdChange),t(document).on("nested:fieldRemoved",function(e){return function(){return e._updateLimits(),e._updateSummary()}}(this)),t(document).on("nested:fieldAdded:questions",function(e){return function(t){return t.field.find(""+e._questionKindInputSlt).change()}}(this)),t(document).on("nested:fieldAdded:questions_skills",function(e){return function(){var n,r;return n=t(""+e._sliderSlt).not(".slided"),r=n.parents(".fields:eq(1)").find(""+e._questionKindInputSlt).val(),n.data("kind",r),e._createSliders(),n.parents(".fields:eq(0)").find("[data-skill-type]").change()}}(this))},n.prototype._onQuestionKindChange=function(e){var n,r,i;return i=t(e.currentTarget),r=i.parents(".fields").first(),n=r.find(""+this._sliderSlt),n.data("kind",i.val()),n.val(0),n.rangeslider("destroy").removeClass("slided"),this._createSliders(),this._updateLimits(),this._updateSummary()},n.prototype._onSkillIdChange=function(e){var n,r,i,s;return n=t(e.currentTarget),s=n.val(),i=n.parents(".form-group").next(),r=i.find(""+this._sliderSlt),s?(i.fadeIn("slow"),r.attr("data-slider-id",s)):i.fadeOut("slow"),r.val(0),this._updateLimits(),s&&r.val(r.data("slider-limit")).change(),this._updateLimits(),this._updateSummary()},n.prototype._checkLimit=function(e,n,r){var i,s;s=t(r).data("kind")==="malus"?"-":"",t(r).next().find(".rangeslider__handle").html(""+s+n),i=t(r).data("slider-limit");if(n>i)return t(r).val(i).change()},n.prototype._updateLimits=function(){var e;return e=this._getUniqSliders(),e.each(function(e){return function(n,r){var i,s,o,u,a,f;return s=t(r).attr("data-slider-id"),o=t(r).data("kind"),a=t(r).attr("max")>>0,f=t(r).attr("min")>>0,i=t(e._sliderSlt+":visible[data-slider-id="+s+"]").filter(function(e,n){return t(n).data("kind")===o}),u=a,i.each(function(e,n){return u-=t(n).val()>>0}),u<f&&(u=f),i.each(function(e,n){return t(n).data("slider-limit",u+(t(n).val()>>0))})}}(this))},n.prototype._getUniqSliders=function(){var e,n;return e=t(this._sliderSlt+":visible.slided"),n={standard:[],malus:[],bonus:[]},e=e.filter(function(e,r){var i,s;return i=t(r).attr("data-slider-id"),s=t(r).data("kind"),n[s].indexOf(i)===-1?(n[s].push(i),!0):!1})},n.prototype._getSummarySkills=function(){return this._summarySkills=t(this._skillSummaryCtnSlt+" [data-skill-id]").map(function(e,n){return{id:t(n).attr("data-skill-id"),$element:t(n)}})},n.prototype._updateSummary=function(){return this._summarySkills.each(function(e){return function(n,r){var i,s;return s={standard:0,bonus:0,malus:0},r.id!=null&&(i=t(e._sliderSlt+":visible[data-slider-id="+r.id+"]"),i.each(function(e,n){var r;return r=t(n).data("kind"),s[r]+=t(n).val()>>0})),r.$element.find(".standard .value").html(s.standard),r.$element.find(".bonus .value").html(s.bonus),r.$element.find(".malus .value").html("-"+s.malus)}}(this))},n}(),n.isScales=function(){return t(".skillSummary").length},n})}.call(this),function(){define("project/radios",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this,e("[data-radio-item] label").each(function(){var n;return n=this,e("#"+e(this).attr("for")).on("change",function(){return t._activate(n)}),e(this).on("click",function(){return t._activate(this)})})}return t.prototype._activate=function(t){var n;return n=e(t).parent().attr("data-radio-item"),e("[data-radio-item='"+n+"'] label").removeClass("active"),e(t).addClass("active"),e(t).attr("for")!=="scale_team_flag_ok"?e(".scale-section-answers").addClass("hidden"):e(".scale-section-answers").removeClass("hidden")},t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("project/rules",["jquery"],function(t){var n;return n=function(){function n(){this.changed=e(this.changed,this),this.url=t("[data-select-url]").data("select-url"),t(".rules_select").each(function(){if(t(this).find("option:checked").attr("value").length===0)return t(this).parents(".form-group").siblings(".params_fields").html("")}),t("form").on("change",".rules_select",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e){var n;if(t(e).find("option:checked").attr("value").length===0){t(e).parents(".form-group").siblings(".params_fields").html("");return}return n=this.url.replace(":id",t(e).find("option:checked").attr("value")),t.getJSON(n,function(n){var r,i;return i="<div class='form-group input optional project_projects_rules_rule'>",r=t(e).attr("name"),t.each(n,function(e,t){var n;return n=(new Date).getTime(),i+="<label class='select optional col-sm-2 control-label' for='project_projects_rules_attributes_params_attributes_"+n+"_rule_id'>"+t.name+"</label>",i+="<div class='col-sm-10'><input class='input optional form-control' value='"+t.default_value.replace(/(')/g,"&#39;")+"' id='project_projects_rules_attributes_params_attributes_"+n+"_value' name='"+r.replace("[rule_id]","[params_projects_rules_attributes]["+n+e+"][value]")+"' /></div>",i+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+t.id+"' name='"+r.replace("[rule_id]","[params_projects_rules_attributes]["+n+e+"][param_id]")+"' /></div>"}),t(e).parents(".form-group").siblings(".params_fields").html(i+"</div>")})},n}(),n.hasRules=function(){return t("[data-select-url]").length},n})}.call(this),function(){define("project/skills",["jquery","rangeslider"],function(e){var t;return t=function(){function t(){console.log("coucou"),this._$form=e("form"),this._rangeSlt='input[type="range"]:visible',this._$difficulty=e("[data-difficulty]"),this._updateLimits(),e(""+this._rangeSlt).each(function(t){return function(n,r){return t._initSlider(e(r))}}(this)),this._$difficulty.on("change",function(t){return function(){return t._updateRanges(e(""+t._rangeSlt))}}(this)),e(document).on("nested:fieldRemoved:projects_skills",function(e){return function(){return e._updateLimits()}}(this)),e(document).on("nested:fieldAdded:projects_skills",function(t){return function(){return t._updateRanges(e(""+t._rangeSlt).not(".slided"))}}(this))}return t.prototype._updateRanges=function(t){var n,r;return r=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),n=parseFloat(r),t.each(function(t){return function(r,i){var s,o,u,a;return s=e(i),a=s.attr("max"),u=n*s.val()/a,o=n/100,s.attr("max",n).attr("step",o),s.rangeslider("destroy"),s.val(u),t._initSlider(s),s.val(u)}}(this)),this._updateLimits()},t.prototype._initSlider=function(e){return e.rangeslider({polyfill:!1,onSlide:this._checkLimit,onSlideEnd:function(e){return function(){return e._updateLimits()}}(this)}),e.addClass("slided")},t.prototype._checkLimit=function(t,n){var r,i,s;s=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),i=n*100/parseFloat(s),console.log("limit !, "+t+" => "+i+" ("+n+" * 100) / "+s+")"),this.$element.next().find(".rangeslider__handle").attr("data-percent",""+i),r=this.$element.data("rangeUntil");if(n>r)return this.$element.val(r).change()},t.prototype._updateLimits=function(){var t,n;return n=e("[data-difficulty]").val()==="0"?100:e("[data-difficulty]").val(),t=parseFloat(n),e(""+this._rangeSlt).each(function(n,r){return t-=parseFloat(e(r).val())}),t<0&&(t=0),e(""+this._rangeSlt).each(function(n,r){return e(r).data("rangeUntil",parseFloat(e(r).val())+t)})},t.prototype.modalCondition=function(){var t;return t=0,e(""+this._rangeSlt).each(function(n,r){return t+=e(r).next().find(".rangeslider__handle").html()>>0}),t!==100&&e("[data-difficulty]").val()!=="0"},t.prototype.modalConfirmation=function(){return this._$form.submit()},t}(),t.hasSkills=function(){return e("[data-add-skill]").length},t})}.call(this),function(){define("project/form",["jquery","lodash","marked"],function(e,t,n){var r;return r=function(){function r(){e(".new_project, .edit_project").length>0&&this._bindProject(),e(".new_scale, .edit_scale").length>0&&this._bindScale()}return r.prototype._bindProject=function(){return this._bindNameCheck(),this._hideDependancies(),this._bindEstimations(),this._manageRules(),e(document).on("nested:fieldAdded",function(e){return function(){return e._manageRules()}}(this))},r.prototype._bindNameCheck=function(){var n;return n=this,e("#project_name").keyup(function(){var r,i;return r=e(this),e(this).val().length>0?(i=e(this).val(),e.getJSON(location.origin+"/projects.json",function(e){var s;return s=t.findWhere(e,{name:i}),s?(n._updateNextHelp(r,i+" is already token"),n._updateNextHelp("#project_tag_ids","")):(n._updateNextHelp(r,i+" seems to be a nice name !"),n._updateNextHelp("#project_tag_ids","The tag "+i+" will also be automaticaly created."))})):(n._updateNextHelp(r,""),n._updateNextHelp("#project_tag_ids",""))})},r.prototype._bindEstimations=function(){return e("#project_min_estimate_time").val("604800"),e("#project_max_estimate_time").val("1209600")},r.prototype._manageRules=function(){var n;return n=t.template("<div class=\"col-sm-12 lead\">\n  <h4>Rule <%= name %>\n    <small>\n      <%= description || 'No description' %>\n      (<%= kind %> rule)\n    </small>\n  </h4>\n  <p><pre><code><%= code %></code></pre></p>\n</div>"),e(".rules_select").change(function(){var r,i;return r=e(this).parents(".fields").find(".rule-description").first(),i=t.findWhere(rules_description,{id:parseInt(e(this).val())}),console.log("Ho !",r,i,i.description),r.html(n(i))})},r.prototype._hideDependancies=function(){return e("#project_parent_id").val()===""&&e(".project_inherited_team").hide(),e("#project_parent_id").change(function(){return e(this).val()!==""?e(".project_inherited_team").show():e(".project_inherited_team").hide()})},r.prototype._updateNextHelp=function(t,n){var r;r=e(t).parent().find(".help-block").last();if(e(r).length>0)return e(r).html(n)},r.prototype._bindScale=function(){return this._bindMarkdownPreviews(),this._checkScales(),this._bindNavbarArchi(),e(document).on("nested:fieldAdded",function(e){return function(){return e._bindNavbarArchi()}}(this)),e(".section-counter-item input[type='text']").keyup(function(e){return function(){return e._bindNavbarArchi()}}(this))},r.prototype._checkScales=function(){var n,r;return n=t.template("<p class='text-warning primary-warning'>An other scale (<%= name %>) is already set as <b>primary</b>. You can <a href='<%= link %>/edit' target='_blank'>edit it now</a></p>"),r=t.template("<p class='text-warning primary-warning'>There is no other scale defined as primary for this project. Don't forget to set this scale as primary later if you want to use it for defenses.</a></p>"),existing_scales&&e("#scale_is_primary").parents(".checkbox").after(n(existing_scales)),e("#scale_is_primary").change(function(){var t;t=this.checked,e(".primary-warning").detach();if(t&&existing_scales)return e("#scale_is_primary").parents(".checkbox").after(n(existing_scales));if(!t&&!existing_scales)return e("#scale_is_primary").parents(".checkbox").after(r())})},r.prototype._bindMarkdownPreviews=function(){return console.log("binded"),e("[data-markdown-preview]").each(function(t){var r;return console.log(t),r=e("<div class='markdown-preview-container'></div>"),e(this).after(r),e(this).keyup(function(){return e(r).html(n(e(this).val()))})})},r.prototype._bindNavbarArchi=function(){var t;return t=e("#navbar-scale-edit .nav .sections-list"),t.html("<li><h5 class='marked-title'><a href='#sections'>Sections <small>("+e(".section-counter-item").length+" defined)</small></a></h5><ol class='section-root'></ol></li>"),e(".section-counter-item").each(function(){var n,r,i;return i=e(this).find(".scale_sections_name input"),n=e("<li><a href='#"+i.attr("id")+"'>"+i.val()+"</a></li>"),e(this).find(".question-item").length>0&&(r=e("<ol></ol>"),e(this).find(".question-item").each(function(){var t,n;return n=e(this).find(".scale_sections_questions_name input"),t=e("<li><a href='#"+n.attr("id")+"'>"+n.val()+"</a></li>"),r.append(t)}),n.append(r)),t.find(".section-root").append(n)})},r}(),new r})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};this.WebSocketRails=function(){function t(t,n){this.url=t,this.use_websockets=n!=null?n:!0,this.connection_stale=e(this.connection_stale,this),this.pong=e(this.pong,this),this.supports_websockets=e(this.supports_websockets,this),this.dispatch_channel=e(this.dispatch_channel,this),this.unsubscribe=e(this.unsubscribe,this),this.subscribe_private=e(this.subscribe_private,this),this.subscribe=e(this.subscribe,this),this.dispatch=e(this.dispatch,this),this.trigger_event=e(this.trigger_event,this),this.trigger=e(this.trigger,this),this.unbind=e(this.unbind,this),this.bind=e(this.bind,this),this.connection_established=e(this.connection_established,this),this.new_message=e(this.new_message,this),this.reconnect=e(this.reconnect,this),this.callbacks={},this.channels={},this.queue={},this.connect()}return t.prototype.connect=function(){return this.state="connecting",!this.supports_websockets()||!this.use_websockets?this._conn=new t.HttpConnection(this.url,this):this._conn=new t.WebSocketConnection(this.url,this),this._conn.new_message=this.new_message},t.prototype.disconnect=function(){return this._conn&&(this._conn.close(),delete this._conn._conn,delete this._conn),this.state="disconnected"},t.prototype.reconnect=function(){var e,t,n,r,i;n=(r=this._conn)!=null?r.connection_id:void 0,this.disconnect(),this.connect(),i=this.queue;for(t in i)e=i[t],e.connection_id===n&&!e.is_result()&&this.trigger_event(e);return this.reconnect_channels()},t.prototype.new_message=function(e){var n,r,i,s,o,u;u=[];for(i=0,s=e.length;i<s;i++)r=e[i],n=new t.Event(r),n.is_result()?((o=this.queue[n.id])!=null&&o.run_callbacks(n.success,n.data),delete this.queue[n.id]):n.is_channel()?this.dispatch_channel(n):n.is_ping()?this.pong():this.dispatch(n),this.state==="connecting"&&n.name==="client_connected"?u.push(this.connection_established(n.data)):u.push(void 0);return u},t.prototype.connection_established=function(e){this.state="connected",this._conn.setConnectionId(e.connection_id),this._conn.flush_queue();if(this.on_open!=null)return this.on_open(e)},t.prototype.bind=function(e,t){var n,r;return(r=(n=this.callbacks)[e])==null&&(n[e]=[]),this.callbacks[e].push(t)},t.prototype.unbind=function(e){return delete this.callbacks[e]},t.prototype.trigger=function(e,n,r,i){var s,o;return s=new t.Event([e,n,(o=this._conn)!=null?o.connection_id:void 0],r,i),this.trigger_event(s)},t.prototype.trigger_event=function(e){var t,n,r;return(r=(t=this.queue)[n=e.id])==null&&(t[n]=e),this._conn&&this._conn.trigger(e),e},t.prototype.dispatch=function(e){var t,n,r,i,s;if(this.callbacks[e.name]==null)return;i=this.callbacks[e.name],s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(t(e.data));return s},t.prototype.subscribe=function(e,n,r){var i;return this.channels[e]==null?(i=new t.Channel(e,this,!1,n,r),this.channels[e]=i,i):this.channels[e]},t.prototype.subscribe_private=function(e,n,r){var i;return this.channels[e]==null?(i=new t.Channel(e,this,!0,n,r),this.channels[e]=i,i):this.channels[e]},t.prototype.unsubscribe=function(e){if(this.channels[e]==null)return;return this.channels[e].destroy(),delete this.channels[e]},t.prototype.dispatch_channel=function(e){if(this.channels[e.channel]==null)return;return this.channels[e.channel].dispatch(e.name,e.data)},t.prototype.supports_websockets=function(){return typeof WebSocket=="function"||typeof WebSocket=="object"},t.prototype.pong=function(){var e,n;return e=new t.Event(["websocket_rails.pong",{},(n=this._conn)!=null?n.connection_id:void 0]),this._conn.trigger(e)},t.prototype.connection_stale=function(){return this.state!=="connected"},t.prototype.reconnect_channels=function(){var e,t,n,r,i;r=this.channels,i=[];for(n in r)t=r[n],e=t._callbacks,t.destroy(),delete this.channels[n],t=t.is_private?this.subscribe_private(n):this.subscribe(n),t._callbacks=e,i.push(t);return i},t}(),WebSocketRails.Event=function(){function e(e,t,n){var r;this.success_callback=t,this.failure_callback=n,this.name=e[0],r=e[1],r!=null&&(this.id=r["id"]!=null?r.id:(1+Math.random())*65536|0,this.channel=r.channel!=null?r.channel:void 0,this.data=r.data!=null?r.data:r,this.token=r.token!=null?r.token:void 0,this.connection_id=e[2],r.success!=null&&(this.result=!0,this.success=r.success))}return e.prototype.is_channel=function(){return this.channel!=null},e.prototype.is_result=function(){return typeof this.result!="undefined"},e.prototype.is_ping=function(){return this.name==="websocket_rails.ping"},e.prototype.serialize=function(){return JSON.stringify([this.name,this.attributes()])},e.prototype.attributes=function(){return{id:this.id,channel:this.channel,data:this.data,token:this.token}},e.prototype.run_callbacks=function(e,t){return this.success=e,this.result=t,this.success===!0?typeof this.success_callback=="function"?this.success_callback(this.result):void 0:typeof this.failure_callback=="function"?this.failure_callback(this.result):void 0},e}(),WebSocketRails.AbstractConnection=function(){function e(e,t){this.dispatcher=t,this.message_queue=[]}return e.prototype.close=function(){},e.prototype.trigger=function(e){return this.dispatcher.state!=="connected"?this.message_queue.push(e):this.send_event(e)},e.prototype.send_event=function(e){if(this.connection_id!=null)return e.connection_id=this.connection_id},e.prototype.on_close=function(e){var t;if(this.dispatcher&&this.dispatcher._conn===this)return t=new WebSocketRails.Event(["connection_closed",e]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(t)},e.prototype.on_error=function(e){var t;if(this.dispatcher&&this.dispatcher._conn===this)return t=new WebSocketRails.Event(["connection_error",e]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(t)},e.prototype.on_message=function(e){if(this.dispatcher&&this.dispatcher._conn===this)return this.dispatcher.new_message(e)},e.prototype.setConnectionId=function(e){this.connection_id=e},e.prototype.flush_queue=function(){var e,t,n,r;r=this.message_queue;for(t=0,n=r.length;t<n;t++)e=r[t],this.trigger(e);return this.message_queue=[]},e}(),WebSocketRails.HttpConnection=function(e){function t(e,n){var r=this;this.dispatcher=n,t.__super__.constructor.apply(this,arguments),this._url="http://"+e,this._conn=this._createXMLHttpObject(),this.last_pos=0;try{this._conn.onreadystatechange=function(){return r._parse_stream()},this._conn.addEventListener("load",this.on_close,!1)}catch(i){this._conn.onprogress=function(){return r._parse_stream()},this._conn.onload=this.on_close,this._conn.readyState=3}this._conn.open("GET",this._url,!0),this._conn.send()}return n(t,e),t.prototype.connection_type="http",t.prototype._httpFactories=function(){return[function(){return new XDomainRequest},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}]},t.prototype.close=function(){return this._conn.abort()},t.prototype.send_event=function(e){return t.__super__.send_event.apply(this,arguments),this._post_data(e.serialize())},t.prototype._post_data=function(e){return $.ajax(this._url,{type:"POST",data:{client_id:this.connection_id,data:e},success:function(){}})},t.prototype._createXMLHttpObject=function(){var e,t,n,r,i;n=!1,e=this._httpFactories();for(r=0,i=e.length;r<i;r++){t=e[r];try{n=t()}catch(s){continue}break}return n},t.prototype._parse_stream=function(){var e,t;if(this._conn.readyState===3){e=this._conn.responseText.substring(this.last_pos),this.last_pos=this._conn.responseText.length,e=e.replace(/\]\]\[\[/g,"],[");try{return t=JSON.parse(e),this.on_message(t)}catch(n){}}},t}(WebSocketRails.AbstractConnection),WebSocketRails.WebSocketConnection=function(e){function t(e,n){var r=this;this.url=e,this.dispatcher=n,t.__super__.constructor.apply(this,arguments),this.url.match(/^wss?:\/\//)?console.log("WARNING: Using connection urls with protocol specified is depricated"):window.location.protocol==="https:"?this.url="wss://"+this.url:this.url="ws://"+this.url,this._conn=new WebSocket(this.url),this._conn.onmessage=function(e){var t;return t=JSON.parse(e.data),r.on_message(t)},this._conn.onclose=function(e){return r.on_close(e)},this._conn.onerror=function(e){return r.on_error(e)}}return n(t,e),t.prototype.connection_type="websocket",t.prototype.close=function(){return this._conn.close()},t.prototype.send_event=function(e){return t.__super__.send_event.apply(this,arguments),this._conn.send(e.serialize())},t}(WebSocketRails.AbstractConnection),WebSocketRails.Channel=function(){function t(t,n,r,i,s){var o,u,a;this.name=t,this._dispatcher=n,this.is_private=r!=null?r:!1,this.on_success=i,this.on_failure=s,this._failure_launcher=e(this._failure_launcher,this),this._success_launcher=e(this._success_launcher,this),this._callbacks={},this._token=void 0,this._queue=[],this.is_private?u="websocket_rails.subscribe_private":u="websocket_rails.subscribe",this.connection_id=(a=this._dispatcher._conn)!=null?a.connection_id:void 0,o=new WebSocketRails.Event([u,{data:{channel:this.name}},this.connection_id],this._success_launcher,this._failure_launcher),this._dispatcher.trigger_event(o)}return t.prototype.destroy=function(){var e,t,n;return this.connection_id===((n=this._dispatcher._conn)!=null?n.connection_id:void 0)&&(t="websocket_rails.unsubscribe",e=new WebSocketRails.Event([t,{data:{channel:this.name}},this.connection_id]),this._dispatcher.trigger_event(e)),this._callbacks={}},t.prototype.bind=function(e,t){var n,r;return(r=(n=this._callbacks)[e])==null&&(n[e]=[]),this._callbacks[e].push(t)},t.prototype.unbind=function(e){return delete this._callbacks[e]},t.prototype.trigger=function(e,t){var n;return n=new WebSocketRails.Event([e,{channel:this.name,data:t,token:this._token},this.connection_id]),this._token?this._dispatcher.trigger_event(n):this._queue.push(n)},t.prototype.dispatch=function(e,t){var n,r,i,s,o,u;if(e==="websocket_rails.channel_token")return this.connection_id=(s=this._dispatcher._conn)!=null?s.connection_id:void 0,this._token=t.token,this.flush_queue();if(this._callbacks[e]==null)return;o=this._callbacks[e],u=[];for(r=0,i=o.length;r<i;r++)n=o[r],u.push(n(t));return u},t.prototype._success_launcher=function(e){if(this.on_success!=null)return this.on_success(e)},t.prototype._failure_launcher=function(e){if(this.on_failure!=null)return this.on_failure(e)},t.prototype.flush_queue=function(){var e,t,n,r;r=this._queue;for(t=0,n=r.length;t<n;t++)e=r[t],this._dispatcher.trigger_event(e);return this._queue=[]},t}()}.call(this),define("websocket-rails",function(){}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("components/websockets/manager",["jquery","websocket-rails","Logger"],function(t,n){var r;return r=function(){function n(n){this._initChat=e(this._initChat,this),this._onOpen=e(this._onOpen,this),this.addHandler=e(this.addHandler,this);var r;console.group("Websocket connection"),r={websocketUrl:t("body").attr("data-url"),userId:t("body").attr("data-id"),publicChannelName:"global",handlers:[]},this.opts=_.extend(r,n),this.dispatcher=new WebSocketRails(this.opts.websocketUrl+"websocket"),this.logged=!1,this.retries=0,this.dispatcher.on_open=this._onOpen,window.dispatcher=this.dispatcher,window.manager=this}return n.prototype._logOnPrivateChannel=function(){return this.logged||(this.retries>0&&log("Retrying ("+this.retries+" retry)"),log("Waiting for access on private channels... [private-"+this.opts.userId+"]"),(this.private_channel=this.dispatcher.subscribe_private("private-"+this.opts.userId))&&console.time("Private channel request"),this.private_channel.on_success=function(e){return function(t){return e.logged=!0,console.timeEnd("Private channel request"),log("[c='color: green']["+t.login+"@private-"+e.opts.userId+"][c] Has joined the channel !"),e._bindPrivateRoutes(),e._initChat(t.login)}}(this),this.private_channel.on_failure=function(e){return function(t){return e.logged=!1,e.retries++,log("[c='color: orange'][!@private-"+e.opts.userId+"][c] Authorization failed because "+t.message),e.retries<3&&e._logOnPrivateChannel,console.groupEnd("Websocket connection")}}(this)),this.logged},n.prototype._logOnPublicChannel=function(){return this.public_channel=this.dispatcher.subscribe(this.opts.publicChannelName),log("[c='color: green'][public@"+this.opts.publicChannelName+"][c] Has joined the channel !"),this._bindPublicRoutes(),this._bindTestChannel()},n.prototype._bindTestChannel=function(){return log("Binding test channel... [c='color:#bbb'](on [debug.hello] for simple ping pong test)[c]"),this.debug_channel=this.dispatcher.subscribe("debug"),this.debug_channel.bind("hello",function(e){return console.info("[Debug] Hello received !",e)})},n.prototype._bindPrivateRoutes=function(){return _.each(this.opts.handlers,function(e){return function(t){if(t.bindHandlers)return t.bindHandlers(e.private_channel)}}(this)),console.groupEnd("Websocket connection")},n.prototype._bindPublicRoutes=function(){return _.each(this.opts.handlers,function(e){return function(t){if(t.bindPublicHandlers)return t.bindPublicHandlers(e.dispatcher)}}(this))},n.prototype.addHandler=function(e){e.bindHandlers&&e.bindHandlers(this.dispatcher);if(e.bindPublicHandlers)return e.bindPublicHandlers(this.dispatcher)},n.prototype._onOpen=function(){return log("Websockets are now opened !"),this._logOnPrivateChannel(),this._logOnPublicChannel()},n.prototype._initChat=function(e){return this.private_channel.bind("message",function(e){return function(e){return console.info(e.author+": "+e.content)}}(this)),window.say=function(t){return function(n){return t.dispatcher.trigger("direct.message",{author:e,content:n})}}(this)},n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("components/base",["jquery"],function(t){var n;return n=function(){function n(t,n){this.name=t,this.root=n,this.bindHandlers=e(this.bindHandlers,this),this.data=[],this._renderTemplate(),this.verbose=!0,this.bindEvents=["new"],this.counterClass=".labeled",this.dispatcher=window.dispatcher!=null}return n.prototype._channelNameFor=function(e){return this.name+"."+e},n.prototype._renderTemplate=function(){return""},n.prototype.bind=function(e){switch(e){case"new":return this._onNew;default:return console.warn("Event "+e+" can't be binded on component..."),function(e){return console.warn("empty function "+e)}}},n.prototype._onNew=function(e){return log("[new] requested !",e)},n.prototype.bindHandlers=function(e,t){var n,r,i,s,o,u,a,f;t==null&&(t="?"),u=this.bindEvents;for(r=0,s=u.length;r<s;r++)n=u[r],log("["+this.name+" ("+t+")] - Binding on: "+this._channelNameFor(n),e);a=this.bindEvents,f=[];for(i=0,o=a.length;i<o;i++)n=a[i],f.push(e.bind(this._channelNameFor(n),this.bind(n)));return f},n.prototype.bindPublicHandlers=function(e){return this.dispatcher=e,this.bindHandlers(e.subscribe("global"),"global")},n.prototype._incrementCounters=function(){var e;if(this.root!=null&&t(this.root).find(this.counterClass).length>0)return e=parseInt(t(this.root).find(this.counterClass).text()),t(this.root).find(this.counterClass).html(e+1)},n.prototype._resetCounters=function(){if(this.root!=null&&t(this.root).find(this.counterClass).length>0)return t(this.root).find(this.counterClass).html(0)},n}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("components/drop_component",["jquery","components/base","common/data_date"],function(n,r,i){var s,o;return o=new i,s=function(r){function i(t,n){this._addItem=e(this._addItem,this),this._onNew=e(this._onNew,this),this._renderTemplate=e(this._renderTemplate,this),i.__super__.constructor.call(this,t,n),this.containerSelector=".notifications-container",this.data=[],this._handleEvents(),this.render()}return t(i,r),i.prototype.render=function(){return n(this.containerSelector).html(this._renderTemplate()),o&&o._updateAll(),this._position()},i.prototype._renderTemplate=function(){return this.template='<ul class="menu-drop-list">'+_.map(this.data,this._renderCellTemplate).join("")+"</ul>"},i.prototype._renderCellTemplate=function(e){return'<li class="menu-drop-item dancer '+(e.read?"read":"unread")+'">\n  <a href="'+(e.link||"#")+'">'+(e.image?'<div class="menu-drop-image full-bg square-s" style="background-image: url('+e.image+')"></div>':"")+('    <div class="menu-drop-content">\n    '+(e.title?'<div class="menu-drop-title">'+e.title+"</div>":"")+"\n    "+(e.text?'<div class="menu-drop-text">'+e.text+"</div>":"")+"\n    "+(e.created_at?'<span class="menu-drop-created" data-short-date="'+e.created_at+'">'+e.created_at+"</span>":"")+"\n    </div>\n  </a>\n</li>")},i.prototype._onNew=function(e){return this.verbose&&console.log("["+this.name+"] New "+this.name+" requested !",e),this._addItem(e)},i.prototype._addItem=function(e){e=this._filterObject(e),this.data.unshift(e),this.render();if(!e.read)return this._incrementCounters()},i.prototype._onOpen=function(){return n(this.containerSelector).addClass("open"),this.readingTimeout=setTimeout(function(e){return function(){var t,r,i,s;s=e.data;for(r=0,i=s.length;r<i;r++)t=s[r],t.read=!0;return n(e.containerSelector+" .unread").addClass("read").removeClass("unread"),e._resetCounters(),e.readingTimeout=!1,e._markAllAsRead()}}(this),1e3)},i.prototype._onClose=function(){n(this.containerSelector).removeClass("open");if(this.readingTimeout)return clearTimeout(this.readingTimeout)},i.prototype._markAllAsRead=function(){if(this.dispatcher&&this.data.length)return this.dispatcher.trigger("notifications.readed")},i.prototype._handleEvents=function(){return n(document).on("click",this.root,function(e){return function(t){return n(e.containerSelector).hasClass("open")?e._onClose():e._onOpen(),t.stopImmediatePropagation(),!1}}(this)),n(document).on("click",function(e){return function(){return n(e.containerSelector).removeClass("open")}}(this))},i.prototype._position=function(){var e,t;return t=n(".main-navbar").height(),e=n(this.root).offset().left-265,n(this.containerSelector).css({top:t,left:e})},i.prototype._filterObject=function(e){return e.read||(e.read=!1),e.image&&e.image.url!==void 0&&(e.image=e.image.url),e},i}(r)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("components/friendship",["jquery","components/drop_component"],function(n,r){var i;return i=function(r){function i(){this._onNew=e(this._onNew,this),n("[data-friendship-drop]").length&&(i.__super__.constructor.call(this,"friendship","[data-friendship-drop]"),this._bindFriendshipActions())}return t(i,r),i.prototype.ACCEPT_URL="http://localhost:8000/friends/<%= id %>",i.prototype.DECLINE_URL="http://localhost:8000/friends/<%= id %>/ignore",i.prototype.ACCEPTED_MESSAGE='<span class="icon-check"></span> Invitation accepted',i.prototype.DECLINED_MESSAGE='<span class="icon-ban"></span> Invitation declined',i.prototype._renderCellTemplate=function(e){return'<li class="menu-drop-item">\n  <div class="menu-drop-image full-bg square-s rounded" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+e.login+'.jpg)"></div>\n  <div class="menu-drop-name">'+e.login+'</div>\n  <div class="menu-drop-actions">\n    <a href="#" data-friendship-accept="'+e.id+'"><span class="icon-check-circle-o"></span></a>\n    <a href="#" data-friendship-decline="'+e.id+'"><span class="icon-times-circle-o"></span></a>\n  </div>\n</li>'},i.prototype._bindFriendshipActions=function(){var e;return e=this,n("[data-friendship-accept]").click(function(){var t,r;return r=_.template(e.ACCEPT_URL)({id:n(this).attr("data-friendship-accept")}),t=n(this).parent().parent(),console.log("click ("+r+") aaaaand..."),n.ajax({url:r,data:{_method:"put"},method:"POST",success:function(){return console.log("request"),n(t).html(e.ACCEPTED_MESSAGE)}})}),n("[data-friendship-decline]").click(function(){var t,r;return r=_.template(e.DECLINE_URL)({id:n(this).attr("data-friendship-decline")}),t=n(this).parent().parent(),n.ajax({url:r,data:{_method:"delete"},method:"POST",success:function(){return n(t).html(e.DECLINED_MESSAGE)}})})},i.prototype._onNew=function(e){return console.log("newFriendship requested !",e),this.data.push(e),this.render(),this._bindFriendshipActions(),this._incrementCounters()},i}(r)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("components/notification",["jquery","components/drop_component"],function(t,n){var r;return r=function(n){function r(){t("[data-notification-drop]").length?(r.__super__.constructor.call(this,"notification","[data-notification-drop]"),this.manageExistingNotifications()):console.error("[Notification] Unable to find notifiable aera")}return e(r,n),r.prototype.manageExistingNotifications=function(){var e,t,n,r,i,s,o,u;!1,this.TODO;if(typeof _notifications!="undefined"&&_notifications!==null){s=_notifications.unread;for(e=0,n=s.length;e<n;e++)i=s[e],this._addItem(i);o=_notifications.read,u=[];for(t=0,r=o.length;t<r;t++)i=o[t],u.push(this._addItem(i));return u}},r}(n)})}.call(this),function(){define("components/main",["require","jquery","components/websockets/manager","components/base","components/drop_component","components/friendship","components/notification"],function(e,t){var n,r,i,s,o;return s=e("components/websockets/manager"),r=e("components/friendship"),i=e("components/notification"),n=e("common/data_date"),this.components=[],t("[data-friendship-drop]").length&&this.components.push(this.friendship=new r),this.components.push(this.notification=new i),is_beta()?o=new s({handlers:this.components}):o={},o})}.call(this),define("components",["components/main"],function(e){return e}),function(){define("project/main",["require","jquery","project/answer","project/calendar","project/scales","project/radios","project/rules","project/skills","project/form","components"],function(e,t,n,r,i,s,o,u,a){var f;return f=function(){function e(){i.isScales()&&new i,r.isCalendar()&&new r,o.hasRules()&&new o,u.hasSkills()&&new u,new n,new s}return e}()})}.call(this),define("project",["project/main"],function(e){return e}),function(){define("sortable",["jquery","noty","jquery-ui/ui/sortable"],function(e){var t;return t=function(){function t(){var t;t=this,e("[data-sortable]").sortable({axis:"y",update:function(){return t._update(e("[data-update-url]").data("update-url"),e(this).sortable("serialize"),!0)}}),e("#save_all_sorted").click(function(){var n;return n=0,e("[data-sortable]").each(function(){return n++,t._update(e("[data-update-url]").data("update-url"),e(this).sortable("serialize"),n===1)})})}return t.prototype._update=function(t,n,r){e.post(t,n);if(r===!0)return noty({layout:"topRight",type:"success",text:"Updated",timeout:4e3})},t}()})}.call(this),function(){define("animMaster/helpers",["jquery","async","easel","tween"],function(e,t){var n;return n=function(e){var t;return t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,t.test(e)},{getData:function(t,n){var r,i;i=1,r=function(s){var o,u,a,f;a=[];for(u in s)f=s[u],_.isObject(f)?f.ajax?(i++,o=u,a.push(e.getJSON(f.ajax).then(function(e){s[o]=e,i--;if(i===0)return t(null,n)}))):a.push(r(f)):a.push(s[u]=f);return a},r(n),i--;if(i===0)return t(null,n)},getRadianAngle:function(e,t){var n;return t=t||0,e=e||360,n=360*Number(this)/e,(t+n)*Math.PI/180},getDegreeAngle:function(e){return(Number(this)*(180/Math.PI)>>0)-e},setter:function(e,t,n,r,i){return e[n]=i,t(r)},emit:function(e,t,n){var r;return r=new createjs.Event(t),r.data=n,e.dispatchEvent(r)}}})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("animMaster/base",["jquery","async","stats","animMaster/helpers"],function(t,n,r,i){var s,o,u;return u=1920,o=1350,s=function(){function s(t){this.emit=e(this.emit,this),this._set=_.curry(i.setter)(this),n.series([function(e){return function(n){return i.getData(e._set(n,"data"),t.data||{})}}(this),function(e){return function(n){return e._createStage(n,t)}}(this),function(e){return function(t){return e._createElements(t)}}(this),function(e){return function(t){return e._bindEvents(t)}}(this),function(e){return function(n){return e._startStats(n,t)}}(this)],function(e){return function(t,n){if(!t)return e.start()}}(this))}return s.prototype._createStage=function(e,t){return this._stage=new createjs.Stage(t.viewId),this._stage._stage=this._stage,this._stage.realWidth=t.scale.width||u,this._stage.realHeight=t.scale.height||o,this._stage.toResize=!0,createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(60),this._stage.enableMouseOver(),e()},s.prototype._bindEvents=function(){return t(window).on("resize orientationchange",function(e){return function(){return e._stage.toResize=!0}}(this))},s.prototype._startStats=function(e,t){return t.stats?(this._stats=new r,this._stats.domElement.style.position="absolute",this._stats.domElement.style.top="0",this._stats.domElement.style.right="0",this._stats.domElement.style["z-index"]="2000",document.body.appendChild(this._stats.domElement),e()):e()},s.prototype._resize=function(){var e,n,r;r=window.innerWidth-t(".page-content").position().left,e=window.innerHeight-t(".page-content").position().top,n=Math.min(r/this._stage.realWidth,e/this._stage.realHeight),this._stage.scaleX=n,this._stage.scaleY=n,this._stage.canvas.width=this._stage.realWidth*n,this._stage.canvas.height=this._stage.realHeight*n,this._stage.toResize=!1;if(window.innerHeight>this._stage.canvas.height)return t(this._stage.canvas).css("margin-top",(window.innerHeight-this._stage.canvas.height)/2)},s.prototype.start=function(){var e,t;return t=function(e){return function(){return e._stage.toResize&&e._resize(),e._stage.update()}}(this),e=t,this._stats&&(e=function(e){return function(){return e._stats.begin(),t(),e._stats.end()}}(this)),createjs.Ticker.addEventListener("tick",e)},s.prototype.emit=function(e,t){return i.emit(this._stage,e,t)},s}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("animMaster/element",["async","animMaster/helpers"],function(n,r){var i;return i=function(i){function s(t,i){this.emit=e(this.emit,this),this._setMargin=e(this._setMargin,this),this.Container_constructor(),this.container=i.container,this._set=_.curry(r.setter)(this),n.series([function(e){return function(t){return r.getData(e._set(t,"data"),i.data||{})}}(this),function(e){return function(t){return e._createContent(t)}}(this),function(e){return function(t){return e._setContent(t,i)}}(this),function(e){return function(t){return e._setMargin(t)}}(this),function(e){return function(t){return e._createElements(t)}}(this),function(e){return function(t){return e._bindEvents(t)}}(this)],function(e){return function(){return t(null,e)}}(this))}return t(s,i),s.prototype._createContent=function(e){return this._stage=this.container._stage,this.content=this,this.container.addChild(this),e()},s.prototype._setMargin=function(e){var t,n,r;return this.content.margin&&(r=this.content.margin,t=this.content._stage,n=this.content.clone(),n.set({x:r,y:r,width:this.content.width-r*2,height:this.content.height-r*2}),this.content.addChild(n),this.content=n,this.content.margin=r,this.content._stage=t),e()},s.prototype.emit=function(e,t){return r.emit(this._stage,e,t)},s.prototype.getCircleAttr=function(e,t,n,r,i){var s,o;return o=360/t*e,s=(90-o)*Math.PI/180,{x:n+i*Math.cos(s),y:r-i*Math.sin(s),alpha:o}},s.prototype.getData=function(e,t){return r.getData(e,t)},s.prototype._bindEvents=function(e){return e()},s.prototype._setContent=function(e){return e()},s}(createjs.Container),createjs.EventDispatcher.initialize(i.prototype),createjs.promote(i,"Container"),i})}.call(this),function(){define("animMaster/main",["animMaster/base","animMaster/element","animMaster/helpers"],function(e,t,n){return Number.prototype.GRA=n.getRadianAngle,Number.prototype.GDA=n.getDegreeAngle,{Base:e,Element:t}})}.call(this),define("animMaster",["animMaster/main"],function(e){return e}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/profile/base",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._createElements=function(e){var t,n,r;return this.circle=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,0,330),scaleX:0,scaleY:0}),this.content.addChild(this.circle),this.avatar=(new createjs.Bitmap(this.data.avatar)).set({alpha:0,x:-160,y:-240,scaleX:2,scaleY:2,mask:(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#ff000").drawCircle(0,-60,130)})}),this.content.addChild(this.avatar),r=-90,t="#212226 ",n=270,this._hack=new createjs.Shape,this._hack.alpha=0,this._hack.command=this._hack.graphics.s(t).ss(30).arc(0,-60,140,r.GRA(),n.GRA(),!1).command,this.content.addChild(this._hack),this.login=(new createjs.Text).set({alpha:0,text:this.data.login,y:150,textAlign:"center",font:"50px Arial",color:"#5b5b60"}),this.content.addChild(this.login),this._shadow=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,0,360),alpha:0,mask:(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#ff000").drawRect(-1*this._stage.realWidth/2,-1*this._stage.realHeight/2,this._stage.realWidth,this._stage.realHeight/2)})}),this.content.addChildAt(this._shadow,0),e()},n.prototype._createCategoryLabel=function(e,t){return this._categoryLabel&&this.content.removeChild(this._categoryLabel),this._categoryLabel=(new createjs.Text).set({text:e,y:100,textAlign:"center",font:"40px Helvetica",color:t}),this.content.addChild(this._categoryLabel)},n.prototype._removeCategoryLabel=function(){if(this._categoryLabel)return this.content.removeChild(this._categoryLabel)},n.prototype.animations=function(){return{start:function(e){return function(t){return createjs.Tween.get(e.circle).to({scaleX:1,scaleY:1},200).call(function(){return createjs.Tween.get(e._hack).to({alpha:1},0).call(function(){return createjs.Tween.get(e.avatar).to({alpha:1},200,createjs.Ease.getPowInOut(5)).call(function(){return createjs.Tween.get(e.login).to({alpha:1},500,createjs.Ease.getPowInOut(5)).call(t,e)})})})}}(this),reduce:function(e){return function(t){return e._shadow.alpha===0?t():(e._removeCategoryLabel(),createjs.Tween.get(e._shadow).to({alpha:0},1e3).call(t,e))}}(this),expand:function(e){return function(t,n){return e._shadow.alpha===1?t():(e._createCategoryLabel(n.name,n.color),e._shadow.shadow=new createjs.Shadow(n.color,0,0,150),createjs.Tween.get(e._shadow).to({alpha:1},1e3).call(t,e))}}(this)}},n}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/profile/xp",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._createElements=function(e){var t,n;return n=-90,t="#00bbbc",this._xp=new createjs.Shape,this._xp.command=this._xp.graphics.rs(["#2dd57a","#00babc"],[0,1],0,0,280,0,0,320).ss(45).arc(0,0,300,n.GRA(),n.GRA(),!1).command,this.content.addChild(this._xp),e()},n.prototype.animations=function(){return{start:function(e){return function(t){return createjs.Tween.get(e._xp.command).to({endAngle:e.data.xp.GRA(100,-90)},700,createjs.Ease.bounceOut).call(t,e)}}(this)}},n}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/profile/categorie",["jquery","async","animMaster"],function(t,n,r){var i,s;return s={reduce:"reduce",expand:"expand"},i=function(t){function r(e,t){this._arcMargin=2,this._state=s.reduce,this.currentIndexPositionFromTopCategory=t.data.index,r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(e){var t,n,r,i,s,o;return i=350,o=30,s=this._getRotation()-this._getArcSize()/2-this._arcMargin,t=this._getArcSize(),this._arc=(new createjs.Shape).set({cursor:"pointer",alpha:0,rotation:s}),this._arc._arcCommand=this._arc.graphics.s(this.data.color).ss(o).arc(0,0,i,0,t.GRA(),!1).command,this.content.addChild(this._arc),i=420,r=20,s=this._getRotation()-this._arcMargin,n="#333",this._point=(new createjs.Shape).set({alpha:0,rotation:s,cursor:"pointer"}),this._point.graphics.s(this.data.color).beginFill(n).ss(5).dc(i,0,r),this.content.addChild(this._point),this._createText(this._getRotation(0),0),e()},r.prototype._createText=function(e,t){var n,r;return r=500,n=this.getCircleAttr(e,360,0,-25,r),this._text=(new createjs.Text(this.data.name,"40px Helvetica",this.data.color)).set({alpha:t,x:n.x,y:n.y,cursor:"pointer",textAlign:this._setTextAlign()}),this.content.addChild(this._text)},r.prototype._bindEvents=function(e){return this._text.on("click",function(e){return function(){if(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)return e.emit("category.clicked",{ids:[e.data.id]})}}(this)),this._point.on("click",function(e){return function(){if(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)return e.emit("category.clicked",{ids:[e.data.id]})}}(this)),this._arc.on("click",function(e){return function(){if(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)return e.emit("category.clicked",{ids:[e.data.id]})}}(this)),this._point.on("mouseover",function(e){return function(){return e.emit("category.mouseovered",{index:e.data.index})}}(this)),this._point.on("mouseout",function(e){return function(){return e.emit("category.mouseouted",{index:e.data.index})}}(this)),this._arc.on("mouseover",function(e){return function(){return e.emit("category.mouseovered",{index:e.data.index})}}(this)),this._arc.on("mouseout",function(e){return function(){return e.emit("category.mouseouted",{index:e.data.index})}}(this)),e()},r.prototype._getRotation=function(e,t,n){var r;return e==null&&(e=-90),t==null&&(t=360),n==null&&(n=this.data.total),r=t/n*this.currentIndexPositionFromTopCategory+this._arcMargin,r=r<0?360+r:r,r+e},r.prototype._getArcSize=function(e,t){return e==null&&(e=360),t==null&&(t=this.data.total),e/t-this._arcMargin},r.prototype._setTextAlign=function(){return this.currentIndexPositionFromTopCategory===0||this.currentIndexPositionFromTopCategory===this.data.total/2?"center":this._state===s.reduce?this.currentIndexPositionFromTopCategory>this.data.total/2?"right":"left":this.currentIndexPositionFromTopCategory>0?"left":"right"},r.prototype._setCurrentIndexPositionFromTopCategory=function(e){this.currentIndexPositionFromTopCategory=(this.data.index-e+this.data.total)%this.data.total;if(this.currentIndexPositionFromTopCategory>this.data.total/2)return this.currentIndexPositionFromTopCategory-=this.data.total},r.prototype._getArcExpandRotation=function(e){var t;return this.currentIndexPositionFromTopCategory===0?t=e-90+this._getArcSize()/2:(this.currentIndexPositionFromTopCategory<0?e<0?t=(180+e%360)*-1+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory:t=180-e%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory:(e<180?t=0-e%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*(this.currentIndexPositionFromTopCategory-1):t=360-e%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*(this.currentIndexPositionFromTopCategory-1),t+=this._arcMargin,t%=360),t+=e),t},r.prototype._getPointExpandRotation=function(e){var t;return this.currentIndexPositionFromTopCategory===0?e:(this.currentIndexPositionFromTopCategory<0?t=this.currentIndexPositionFromTopCategory*-1*(this._getArcSize()+this._arcMargin)-(90+(this._getArcSize(180,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory*-1)+this._getArcSize(180,this.data.total-1)/2:t=this.currentIndexPositionFromTopCategory*-1*(this._getArcSize()+this._arcMargin)+(90+(this._getArcSize(180,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory)-this._getArcSize(180,this.data.total-1)/2-this._arcMargin/2,t%360+e)},r.prototype.animations=function(){return{start:function(e){return function(t){return createjs.Tween.get(e._arc).to({alpha:1},300),createjs.Tween.get(e._point).to({alpha:1},300),createjs.Tween.get(e._text).to({alpha:1},300).call(t,e)}}(this),rotate:function(e){return function(t,r,i){var s;return s=function(e,t){var n;return n=t.rotation+i,t._saveRotation=n,createjs.Tween.get(t).to({rotation:n},500).call(e,this)},e._setCurrentIndexPositionFromTopCategory(r),n.parallel([function(t){return s(t,e._arc)},function(t){return s(t,e._point)}],t)}}(this),reduce:function(e){return function(t){var r;return e.content.removeChild(e._text),e._text=null,e._state===s.reduce?t():(e._state=s.reduce,r=e._getArcSize(),n.parallel([function(t){return createjs.Tween.get(e._arc).to({rotation:e._arc._saveRotation},500,createjs.Ease.circInOut).call(t,e)},function(t){return createjs.Tween.get(e._point).to({rotation:e._point._saveRotation},500,createjs.Ease.circInOut).call(t,e)},function(t){return createjs.Tween.get(e._arc._arcCommand).to({endAngle:r.GRA()},500,createjs.Ease.circInOut).call(t,e)}],t))}}(this),expand:function(e){return function(t){var r;return e._state===s.expand?t():(e._state=s.expand,r=e.currentIndexPositionFromTopCategory===0?180:e._getArcSize(180,e.data.total-1),n.parallel([function(t){return createjs.Tween.get(e._arc).to({rotation:e._getArcExpandRotation(e._arc.rotation)},500,createjs.Ease.circInOut).call(t,e)},function(t){return createjs.Tween.get(e._point).to({rotation:e._getPointExpandRotation(e._point.rotation)},500,createjs.Ease.circInOut).call(t,e)},function(t){return createjs.Tween.get(e._arc._arcCommand).to({endAngle:r.GRA()},500,createjs.Ease.circInOut).call(t,e)}],function(){return t()}))}}(this),mouseovered:function(e){return function(t){if(e._enabled)return t();(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)&&e._state!==s.reduce&&(e._text||e._createText(e._point.rotation+90,1));if(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)e._point.shadow=new createjs.Shadow(e.data.color,0,0,15),e._arc.shadow=new createjs.Shadow(e.data.color,0,0,15);return t()}}(this),mouseouted:function(e){return function(t){if(e._enabled)return t();(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)&&e._state!==s.reduce&&e._text&&(e.content.removeChild(e._text),e._text=null);if(e.currentIndexPositionFromTopCategory!==0||e._state!==s.expand)e._point.shadow=null,e._arc.shadow=null;return t()}}(this),enable:function(e){return function(t){return e.currentIndexPositionFromTopCategory===0?t():(e._enabled=!0,e._text||e._createText(e._point.rotation+90,1),e._point.shadow=new createjs.Shadow(e.data.color,0,0,15),e._arc.shadow=new createjs.Shadow(e.data.color,0,0,15),t())}}(this),disable:function(e){return function(t){return e.currentIndexPositionFromTopCategory===0?t():(e._enabled=!1,e._point.shadow=null,e._arc.shadow=null,e._text&&(e.content.removeChild(e._text),e._text=null),t())}}(this)}},r}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/profile/main",["jquery","async","animMaster","galaxy/profile/base","galaxy/profile/xp","galaxy/profile/categorie"],function(t,n,r,i,s,o){var u;return u=function(t){function r(){this.currentIndexCategory=0,r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._setContent=function(e){return this.content.x=this._stage.realWidth/2,this.content.y=this._stage.realHeight/2,this.content.scaleX=.6,this.content.scaleY=.6,e()},r.prototype._createElements=function(e){return n.parallel([function(e){return function(t){return new i(e._set(t,"_base"),{container:e.content,data:_.pick(e.data.profile,["avatar","login"])})}}(this),function(e){return function(t){return new s(e._set(t,"_xp"),{container:e.content,data:_.pick(e.data.profile,["xp"])})}}(this),function(e){return function(t){var r;return e._categories=[],e.data.categories.length===0?t():(r=_.curry(function(t,n,r){return n||e._categories.push(r),t()}),n.eachSeries(e.data.categories,function(t,n){return t.index=e.data.categories.indexOf(t),t.total=e.data.categories.length,new o(r(n),{container:e.content,data:t})},t))}}(this)],e)},r.prototype.getCategoryIndexFromId=function(e){return _.findIndex(this._categories,{data:{id:e}})},r.prototype.animations=function(){return{start:function(e){return function(t){return n.series([function(t){return e._base.animations().start(t)},function(t){return e._xp.animations().start(t)},function(t){return e.animations().categories().start(t)}],t)}}(this),down:function(e){return function(t){return e.y!==e._stage.realHeight/2?t():createjs.Tween.get(e).to({y:e.y+e._stage.realHeight/4},400,createjs.Ease.backOut).call(t)}}(this),categories:function(e){return function(){return{enable:function(t,r){return n.each(r,function(t,n){var r;return r=_.find(e._categories,function(e){return e.data.id===t}),r.animations().enable(n)},t())},disable:function(t,r){return n.each(r,function(t,n){var r;return r=_.find(e._categories,function(e){return e.data.id===t}),r.animations().disable(n)},t())},start:function(t){return n.each(e._categories,function(e,t){return e.animations().start(t)},t)},selected:function(t,r){return n.series([function(t){return e.animations().categories().mouseouted(t,r)},function(t){return e.animations().categories().reduce(t)},function(t){return e.animations().categories().rotate(t,r)},function(t){return e.animations().categories().expand(t,r)},function(t){return e.animations().down(t)}],function(){return e.currentIndexCategory=r,t()})},reduce:function(t){return n.parallel([function(t){return e._base.animations().reduce(t)},function(t){return n.each(e._categories,function(e,t){return e.animations().reduce(t)},t)}],t)},rotate:function(t,r){var i;return i=e._categories[r].currentIndexPositionFromTopCategory*(360/e._categories.length)*-1,i>=180&&(i-=360),i<=-180&&(i=360+i),n.each(e._categories,function(e,t){return e.animations().rotate(t,r,i)},t)},expand:function(t,r){return n.parallel([function(t){return e._base.animations().expand(t,e._categories[r].data)},function(t){return n.each(e._categories,function(e,t){return e.animations().expand(t)},t)}],t)},mouseovered:function(t,r){return n.series([function(t){return e._categories[r].animations().mouseovered(t)}],t)},mouseouted:function(t,r){return n.series([function(t){return e._categories[r].animations().mouseouted(t)}],t)}}}}(this)}},r}(r.Element)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("galaxy/infoBox/categories",["jquery","async","animMaster"],function(n,r,i){var s;return s=function(n){function r(){return this._createElements=e(this._createElements,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype._setContent=function(e,t){return this.content.y=this.data.topPosition,e()},r.prototype.getHeight=function(){var e;return e=this._title.getMeasuredHeight(),_.forEach(this._categories,function(t){return e+=t.getMeasuredHeight()+10}),e},r.prototype._createElements=function(e){var t,n;return t="Associated skills",this._title=new createjs.Text(t,"lighter 25px Helvetica","#fff"),this.content.addChild(this._title),this._categories=[],n=this._title.getMeasuredHeight()+10,_.forEach(this.data.associatedCategories,function(e){return function(t,r){var i,s;return s=_.filter(e.data.categories,{id:t})[0],e._point=new createjs.Shape,e._point.graphics.s(s.color).ss(2).dc(10,n+15,6),e.content.addChild(e._point),i=(new createjs.Text(s.name,"lighter 20px Helvetica",s.color)).set({y:n+4,x:30}),e._categories.push(i),e.content.addChild(i),n+=i.getBounds().height+10}}(this)),e()},r.prototype.animations=function(){return{start:function(e){return function(t){return createjs.Tween.get(e.circle).to({scaleX:1,scaleY:1},200).call(function(){return createjs.Tween.get(e.avatar).to({alpha:1},200,createjs.Ease.getPowInOut(5)).call(function(){return createjs.Tween.get(e.login).to({alpha:1},500,createjs.Ease.getPowInOut(5)).call(t,e)})})}}(this),reduce:function(e){return function(t){return e._shadow.alpha===0?t():createjs.Tween.get(e._shadow).to({alpha:0},1e3).call(t,e)}}(this),expand:function(e){return function(t,n){return e._shadow.alpha===1?n():(e._shadow.shadow=new createjs.Shadow(t,0,0,50),createjs.Tween.get(e._shadow).to({alpha:1},1e3).call(n,e))}}(this)}},r}(i.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/infoBox/requiredProjects",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._setContent=function(e){return this.content.y=this.data.topPosition,e()},n.prototype.getHeight=function(){return this.data.projects?this._title.getMeasuredHeight():0},n.prototype._createElements=function(e){var t,n,r;return this.data.projects?(n="Projects amount required",this._title=new createjs.Text(n,"lighter 20px Helvetica","#fff"),this.content.addChild(this._title),this._projects=[],r=this._title.getMeasuredHeight()+10,t=0,_.forEach(this.data.projects,function(e){return function(n,i){var s;return s=(new createjs.Text(n.name,"lighter 15px Helvetica","#fff")).set({y:r,x:t,cursor:"pointer"}),s.index=i,e._projects.push(s),e.content.addChild(s),t+=s.getBounds().width+10}}(this)),e()):e()},n.prototype._bindEvents=function(e){return _.forEach(this._projects,function(e){return function(t,n){return t.on("click",function(){return e.emit("project.clicked",{index:t.index})})}}(this)),e()},n}(r.Element)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("galaxy/infoBox/button",["jquery","async","animMaster"],function(n,r,i){var s;return s=function(n){function r(){return this._bindEvents=e(this._bindEvents,this),this._createElements=e(this._createElements,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype._setContent=function(e,t){return this.content.y=this.data.topPosition-t.container.margin/2,this.content.x=t.container.width-140,e()},r.prototype._createElements=function(e){var t;return this._button=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#00babc").drawRoundRect(0,0,140,40,3),cursor:"pointer"}),this.content.addChild(this._button),t="View more",this._text=(new createjs.Text(t,"bold 20px Helvetica","#fff")).set({x:20,y:10,lineWidth:this.content.width-(this.content.margin*3+50),textBaseline:"top"}),this.content.addChild(this._text),e()},r.prototype._bindEvents=function(e){return this._button.on("click",function(e){return function(){return document.location=e.data.url}}(this)),e()},r}(i.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/infoBox/main",["jquery","async","animMaster","galaxy/infoBox/categories","galaxy/infoBox/requiredProjects","galaxy/infoBox/button"],function(t,n,r,i,s,o){var u;return u=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._setContent=function(e,t){return this.alpha=this.data.project!=null,this.content.margin=30,this.content.x=20,this.content.y=20,this.content.width=this._stage.realWidth/4,this.content.height=this._stage.realHeight/5,e()},r.prototype._createElements=function(e){var t,r;return r=0,this._box=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#000").drawRect(0,0,this.width,this.height),alpha:.5}),this.addChildAt(this._box,0),this.data.project==null?e():(this.data.project.description=this.data.project.description||"",this._icon=(new createjs.Bitmap(this.data.project.icon)).set({alpha:1,x:5,y:5}),this.content.addChild(this._icon),this._title=(new createjs.Text(this.data.project.name,"lighter 30px Helvetica","#fff")).set({x:30+this.content.margin,y:4,lineWidth:this.content.width-(this.content.margin*3+50),textBaseline:"top"}),this.content.addChild(this._title),this.data.project.final_mark&&(this._mark=(new createjs.Text(" Mark : "+this.data.project.final_mark,"lighter 25px Helvetica","#fff")).set({x:30+this.content.margin+this.content.margin+this._title.getMeasuredWidth(),y:10,lineWidth:this.content.width-(this.content.margin*3+50),textBaseline:"top"}),this.content.addChild(this._mark)),r+=this._title.getMeasuredHeight()+this.content.margin,this._description=(new createjs.Text(this.data.project.description,"20px Helvetica","#fff")).set({y:r,lineWidth:this.content.width-this.content.margin*2,lineHeight:20}),this.content.addChild(this._description),t=function(e){return function(t,n){var r;return r={container:e.content,data:{categories:e.data.categories,topPosition:n}},r.data[t]=e.data.project[t],r}}(this),n.series([function(e){return function(n){return r+=e._description.getMeasuredHeight()+e.content.margin,new i(e._set(n,"_categories"),t("associatedCategories",r))}}(this),function(e){return function(n){return r+=e._categories.getHeight()+e.content.margin,new s(e._set(n,"_requiredProjects"),t("projects",r))}}(this),function(e){return function(n){return r+=e._requiredProjects.getHeight(),new o(e._set(n,"_button"),t("url",r))}}(this),function(e){return function(t){return e._updateBoxHeight(),t()}}(this),function(e){return function(t){return e.emit("infobox.shown",_.pick(e.data.project,"associatedCategories")),t()}}(this)],e))},r.prototype._updateBoxHeight=function(){var e;return e=this.content.margin+this.content.margin,e+=this._title.getMeasuredHeight()+this.content.margin,e+=this._description.getMeasuredHeight()+this.content.margin,e+=this._categories.getHeight()+this.content.margin,e+=this._requiredProjects.getHeight()+this.content.margin,this._box.graphics.clear().beginFill("#000").drawRect(0,0,this.width,e)},r.prototype.animations=function(){return{hide:function(e){return function(t,n){return e.emit("infobox.hidden",_.pick(e.data.project,"associatedCategories")),createjs.Tween.get(e).to({alpha:0},n).call(t,e)}}(this)}},r}(r.Element)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;define("galaxy/galaxy/label",["jquery","async","animMaster"],function(n,r,i){var s;return s=function(n){function r(){return this._createElements=e(this._createElements,this),r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype._setContent=function(e){return this.content.margin=10,this.content.x=this.data.x,this.content.y=this.data.y,e()},r.prototype._createElements=function(e){return this._box=new createjs.Shape,this.addChildAt(this._box,0),this._title=(new createjs.Text(this.data.title,"20px Helvetica","#fff")).set({lineWidth:200,textBaseline:"hanging"}),this.content.addChild(this._title),this._updateBoxHeight(),e()},r.prototype._updateBoxHeight=function(){var e,t,n;return t=this._title.getBounds(),e=t.height+this.content.margin,n=t.width+this.content.margin*2,this._box._command=this._box.graphics.clear().beginFill("#000").ss(2).beginStroke(this.data.strokeColor).command,this._box.graphics.drawRect(0,0,n,e)},r.prototype.getHeight=function(){return this._title.getBounds().height+this.content.margin},r.prototype.animations=function(){return{selected:function(e){return function(t){return e._box._command.style="#fff",t()}}(this),unSelected:function(e){return function(t){return e._box._command.style=e.data.strokeColor,t()}}(this)}},r}(i.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/galaxy/project",["jquery","async","animMaster","galaxy/galaxy/label"],function(t,n,r,i){var s,o;return o=30,s=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(e){var t,r,s,u,a,f;return a=this.getCircleAttr(this.data.angle,360,0,0,this.data.tiersRange[this.data.tierIndex]),u=1-(this.data.final_mark||0)/100,r=this.data.bonused?"#caba78":"#29292e",this._circle=(new createjs.Shape).set({cursor:"pointer",graphics:(new createjs.Graphics).ss(3).beginFill(r).beginStroke("#5b5b686")}),this._circle._command=this._circle.graphics.command,this.data.failed?s=new createjs.Bitmap(this.data.failed):this.data.malused?s=new createjs.Bitmap(this.data.malused):this.data.bonused?s=new createjs.Bitmap(this.data.bonused):this.data.validated&&this._circle.graphics.lf(["#29292e",this.data.color],[u,u],a.x,a.y-o*this.data.size>>0,a.x,a.y+o*this.data.size>>0),this._circle.graphics.dc(a.x,a.y,o*this.data.size),this.content.addChild(this._circle),s&&(s.set({x:a.x-16,y:a.y-16}),this.content.addChild(s)),f=_.without(this.data.states,"Authorize"),t=-180,_.forEach(f,function(e){return function(t){var n;return n=e.getCircleAttr(210,360,a.x,a.y,o*e.data.size),t=new createjs.Bitmap(t),t.set({x:n.x-18,y:n.y-18}),e.content.addChild(t)}}(this)),n.parallel([function(e){return function(t){return new i(e._set(t,"_label"),{container:e.content,data:{x:a.x,y:a.y-o*e.data.size,title:e.data.name,strokeColor:"#6f7279"}})}}(this)],function(t){return function(){var n;return n=t._label.getHeight(),n>t.data.radius&&(t._label.y-=n/2),e()}}(this))},r.prototype._bindEvents=function(e){return this._circle.on("click",function(e){return function(){return e.emit("project.clicked",e.data.id)}}(this)),e()},r.prototype.animations=function(){return{selected:function(e){return function(t,n){return e._circle.shadow=new createjs.Shadow(n,0,0,25),e._circle._command.style="#fff",e._label.animations().selected(t)}}(this),unSelected:function(e){return function(t){return e._circle.shadow=null,e._circle._command.style="#5b5b686",e._label.animations().unSelected(t)}}(this)}},r}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/galaxy/search",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype._createElements=function(e){return this._$search=t(".galaxy-search").fadeIn(),this._$search.find(".typeahead").focus(),e()},r.prototype._bindEvents=function(e){return this._$search.on("typeahead:selected",function(e){return function(t,n){return e._stage.on("category.ready",function(){return this.emit("project.clicked",n.data.id)},e,!0),e.emit("category.clicked",{ids:n.data.skills}),e._$search.blur()}}(this)),e()},r}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/galaxy/main",["jquery","async","animMaster","galaxy/galaxy/project","galaxy/galaxy/search"],function(t,n,r,i,s){var o,u;return u=[350,500,650,800,950,1100],o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._setContent=function(e,t){return this.visible=!1,this.content.x=this._stage.realWidth/2,this.content.y=this._stage.realHeight/4*3,e()},r.prototype._createElements=function(e){var t,n,r,i,o;return o=1,t="#5b5b68",i=180,n=360,r=200,_.forEach(u,function(e){return function(r){var s;return s=(new createjs.Shape).set({graphics:(new createjs.Graphics).s(t).ss(o).arc(0,0,r,i.GRA(),n.GRA(),!1)}),e.content.addChild(s)}}(this)),new s(this._set(e,"_search"),{container:this,data:_.pick(this.data,"projectSearchUrl")})},r.prototype._clean=function(){return _.forEach(this._projects,function(e){return function(t){return e.content.removeChild(t)}}(this)),this._projects=[]},r.prototype.populate=function(e,t){var r;return this._category=t,this._clean(),r={projects:{ajax:this.data.projectsUrl.replace("#skillId",this._category.id)}},n.series([function(e){return function(t){return e.getData(t,r)}}(this)],function(t){return function(r,s){var o,a;return a=s[0].projects,o=_.curry(function(e,n,r){return n||t._projects.push(r),e()}),n.each(a.reverse(),function(e,n){var r;return r={container:t,data:{tiersRange:u,color:t._category.color}},_.merge(r.data,e),new i(o(n),r)}),e()}}(this))},r.prototype.animations=function(){return{show:function(e){return function(t){return createjs.Tween.get(e).to({visible:!0},200).call(t,e)}}(this),hide:function(e){return function(t){return createjs.Tween.get(e).to({visible:!1},200).call(t,e)}}(this),projects:function(e){return function(){return{selected:function(t,r){var i;return i=e._selectedProject,e._selectedProject=_.find(e._projects,function(e){return e.data.id===r}),n.parallel([function(e){return i?i.animations().unSelected(e):e()},function(t){return e._selectedProject.animations().selected(t,e._category.color)}],t)}}}}(this)}},r}(r.Element)})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("galaxy/main",["jquery","async","animMaster","galaxy/profile","galaxy/infoBox","galaxy/galaxy"],function(t,n,r,i,s,o){var u;return u=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(e){return n.parallel([function(e){return function(t){var n;return n=new o(e._set(t,"_galaxy"),{container:e._stage,data:_.pick(e.data,["projectsUrl"])})}}(this),function(e){return function(t){return new i(e._set(t,"_profile"),{container:e._stage,data:{categories:e.data.categories,profile:{ajax:e.data.profileUrl}}})}}(this),function(e){return function(t){return new s(e._set(t,"_infoBox"),{container:e._stage,data:_.pick(e.data,"categories")})}}(this)],e)},r.prototype._bindEvents=function(e){var t,i,s,o,u,a,f,l,c,h,p,d;return r.__super__._bindEvents.call(this),h=function(e){return n.series([function(t){return function(n){return t._profile.animations().categories().enable(n,e.data.associatedCategories)}}(this)],c)},c=function(e){return function(){return e._stage.on("infobox.shown",h,e,!0)}}(this),c(),l=function(e){return n.series([function(t){return function(n){return e.data.associatedCategories?t._profile.animations().categories().disable(n,e.data.associatedCategories):n()}}(this)],f)},f=function(e){return function(){return e._stage.on("infobox.hidden",l,e,!0)}}(this),f(),a=function(e){return n.series([function(t){return function(n){return t.animations().categories().mouseovered(n,e.data.index)}}(this)],u)},u=function(e){return function(){return e._stage.on("category.mouseovered",a,e,!0)}}(this),u(),o=function(e){return n.series([function(t){return function(n){return t.animations().categories().mouseouted(n,e.data.index)}}(this)],s)},s=function(e){return function(){return e._stage.on("category.mouseouted",o,e,!0)}}(this),s(),i=function(e){return n.series([function(t){return function(n){return t.animations().categories().selected(n,e.data.ids)}}(this)],t)},t=function(e){return function(){return e.emit("category.ready"),e._stage.on("category.clicked",i,e,!0)}}(this),t(),d=function(e){return n.series([function(t){return function(n){return t.animations().projects().selected(n,e.data)}}(this)],p)},p=function(e){return function(){return e._stage.on("project.clicked",d,e,!0)}}(this),p(),e()},r.prototype.start=function(){return r.__super__.start.call(this),this.animations().start()},r.prototype.animations=function(){return{start:function(e){return function(t){return n.series([function(t){return e._profile.animations().start(t)}],t)}}(this),projects:function(e){return function(){return{selected:function(t,r){return n.series([function(t){return e._infoBox.animations().hide(t)},function(t){return e._galaxy.animations().projects().selected(t,r)},function(t){var n;return e._stage.removeChild(e._infoBox),n={categories:e.data.categories,project:{ajax:e.data.projectUrl.replace("#projectId",r)}},new s(e._set(t,"_infoBox"),{container:e._stage,data:n})}],t)}}}}(this),categories:function(e){return function(){return{selected:function(t,r){return _.forEach(r,function(r){var i;i=e._profile.getCategoryIndexFromId(r);if(i!==-1)return n.series([function(t){return e._infoBox.animations().hide(t)},function(t){return e._galaxy.animations().hide(t)},function(t){return e._profile.animations().categories().selected(t,i)},function(t){return e._galaxy.animations().show(t)},function(t){return e._galaxy.populate(t,e.data.categories[i])}],t),!1})},mouseovered:function(t,r){return n.series([function(t){return e._profile.animations().categories().mouseovered(t,r)}],t)},mouseouted:function(t,r){return n.series([function(t){return e._profile.animations().categories().mouseouted(t,r)}],t)}}}}(this)}},r}(r.Base)})}.call(this),define("galaxy",["galaxy/main"],function(e){return e}),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;sessionStorage.Debug=!0,require(["require","vendor"],function(t){t(["common"],function(n){return t(["jquery","project","sortable","galaxy"],function(t,r,i,s){var o;return o=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.ready=function(){var e;return t("canvas#view").length?(t("body").addClass("galaxy-background"),e=t("canvas#view"),new s({scale:{width:2595,height:1522},stats:!1,viewId:"view",data:{categories:{ajax:e.data("categoriesurl")},profileUrl:e.data("profileurl"),projectsUrl:e.data("projectsurl"),projectUrl:e.data("projecturl"),projectSearchUrl:e.data("projectsearchurl")}})):(new r,new i)},o}(n),new o})})})}.call(this),define("application",function(){});