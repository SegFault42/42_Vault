/*!
 * jQuery JavaScript Library v2.2.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-02-22T19:11Z
 */
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=st.type(t);return"function"===n||st.isWindow(t)?!1:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(st.isFunction(e))return st.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return st.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(gt.test(e))return st.filter(e,t,n);e=st.filter(e,t)}return st.grep(t,function(t){return J.call(e,t)>-1!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function s(t){var e={};return st.each(t.match(wt)||[],function(t,n){e[n]=!0}),e}function o(){Z.removeEventListener("DOMContentLoaded",o),t.removeEventListener("load",o),st.ready()}function a(){this.expando=st.expando+a.uid++}function l(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Et,"-$&").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:$t.test(n)?st.parseJSON(n):n}catch(r){}Tt.set(t,e,n)}else n=void 0;return n}function u(t,e,n,i){var r,s=1,o=20,a=i?function(){return i.cur()}:function(){return st.css(t,e,"")},l=a(),u=n&&n[3]||(st.cssNumber[e]?"":"px"),c=(st.cssNumber[e]||"px"!==u&&+l)&&jt.exec(st.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do s=s||".5",c/=s,st.style(t,e,c+u);while(s!==(s=a()/l)&&1!==s&&--o)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function c(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&st.nodeName(t,e)?st.merge([t],n):n}function h(t,e){for(var n=0,i=t.length;i>n;n++)St.set(t[n],"globalEval",!e||St.get(e[n],"globalEval"))}function d(t,e,n,i,r){for(var s,o,a,l,u,d,f=e.createDocumentFragment(),p=[],g=0,m=t.length;m>g;g++)if(s=t[g],s||0===s)if("object"===st.type(s))st.merge(p,s.nodeType?[s]:s);else if(Lt.test(s)){for(o=o||f.appendChild(e.createElement("div")),a=(Ot.exec(s)||["",""])[1].toLowerCase(),l=Nt[a]||Nt._default,o.innerHTML=l[1]+st.htmlPrefilter(s)+l[2],d=l[0];d--;)o=o.lastChild;st.merge(p,o.childNodes),o=f.firstChild,o.textContent=""}else p.push(e.createTextNode(s));for(f.textContent="",g=0;s=p[g++];)if(i&&st.inArray(s,i)>-1)r&&r.push(s);else if(u=st.contains(s.ownerDocument,s),o=c(f.appendChild(s),"script"),u&&h(o),n)for(d=0;s=o[d++];)It.test(s.type||"")&&n.push(s);return f}function f(){return!0}function p(){return!1}function g(){try{return Z.activeElement}catch(t){}}function m(t,e,n,i,r,s){var o,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)m(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=p;else if(!r)return t;return 1===s&&(o=r,r=function(t){return st().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=st.guid++)),t.each(function(){st.event.add(this,e,r,i,n)})}function v(t,e){return st.nodeName(t,"table")&&st.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function y(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){var n,i,r,s,o,a,l,u;if(1===e.nodeType){if(St.hasData(t)&&(s=St.access(t),o=St.set(e,s),u=s.events)){delete o.handle,o.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)st.event.add(e,r,u[r][n])}Tt.hasData(t)&&(a=Tt.access(t),l=st.extend({},a),Tt.set(e,l))}}function w(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Mt.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function x(t,e,n,i){e=Q.apply([],e);var r,s,o,a,l,u,h=0,f=t.length,p=f-1,g=e[0],m=st.isFunction(g);if(m||f>1&&"string"==typeof g&&!it.checkClone&&qt.test(g))return t.each(function(r){var s=t.eq(r);m&&(e[0]=g.call(this,r,s.html())),x(s,e,n,i)});if(f&&(r=d(e,t[0].ownerDocument,!1,t,i),s=r.firstChild,1===r.childNodes.length&&(r=s),s||i)){for(o=st.map(c(r,"script"),_),a=o.length;f>h;h++)l=r,h!==p&&(l=st.clone(l,!0,!0),a&&st.merge(o,c(l,"script"))),n.call(t[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,st.map(o,y),h=0;a>h;h++)l=o[h],It.test(l.type||"")&&!St.access(l,"globalEval")&&st.contains(u,l)&&(l.src?st._evalUrl&&st._evalUrl(l.src):st.globalEval(l.textContent.replace(Yt,"")))}return t}function k(t,e,n){for(var i,r=e?st.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||st.cleanData(c(i)),i.parentNode&&(n&&st.contains(i.ownerDocument,i)&&h(c(i,"script")),i.parentNode.removeChild(i));return t}function C(t,e){var n=st(e.createElement(t)).appendTo(e.body),i=st.css(n[0],"display");return n.detach(),i}function S(t){var e=Z,n=Vt[t];return n||(n=C(t,e),"none"!==n&&n||(Gt=(Gt||st("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Gt[0].contentDocument,e.write(),e.close(),n=C(t,e),Gt.detach()),Vt[t]=n),n}function T(t,e,n){var i,r,s,o,a=t.style;return n=n||Xt(t),o=n?n.getPropertyValue(e)||n[e]:void 0,""!==o&&void 0!==o||st.contains(t.ownerDocument,t)||(o=st.style(t,e)),n&&!it.pixelMarginRight()&&Zt.test(o)&&Ut.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s),void 0!==o?o+"":o}function $(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t){if(t in ie)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ne.length;n--;)if(t=ne[n]+e,t in ie)return t}function D(t,e,n){var i=jt.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function j(t,e,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=st.css(t,n+At[s],!0,r)),i?("content"===n&&(o-=st.css(t,"padding"+At[s],!0,r)),"margin"!==n&&(o-=st.css(t,"border"+At[s]+"Width",!0,r))):(o+=st.css(t,"padding"+At[s],!0,r),"padding"!==n&&(o+=st.css(t,"border"+At[s]+"Width",!0,r)));return o}function A(e,n,i){var r=!0,s="width"===n?e.offsetWidth:e.offsetHeight,o=Xt(e),a="border-box"===st.css(e,"boxSizing",!1,o);if(Z.msFullscreenElement&&t.top!==t&&e.getClientRects().length&&(s=Math.round(100*e.getBoundingClientRect()[n])),0>=s||null==s){if(s=T(e,n,o),(0>s||null==s)&&(s=e.style[n]),Zt.test(s))return s;r=a&&(it.boxSizingReliable()||s===e.style[n]),s=parseFloat(s)||0}return s+j(e,n,i||(a?"border":"content"),r,o)+"px"}function P(t,e){for(var n,i,r,s=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(s[o]=St.get(i,"olddisplay"),n=i.style.display,e?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&Pt(i)&&(s[o]=St.access(i,"olddisplay",S(i.nodeName)))):(r=Pt(i),"none"===n&&r||St.set(i,"olddisplay",r?n:st.css(i,"display"))));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?s[o]||"":"none"));return t}function M(t,e,n,i,r){return new M.prototype.init(t,e,n,i,r)}function O(){return t.setTimeout(function(){re=void 0}),re=st.now()}function I(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=At[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function N(t,e,n){for(var i,r=(z.tweeners[e]||[]).concat(z.tweeners["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,e,t))return i}function L(t,e,n){var i,r,s,o,a,l,u,c,h=this,d={},f=t.style,p=t.nodeType&&Pt(t),g=St.get(t,"fxshow");n.queue||(a=st._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,st.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=st.css(t,"display"),c="none"===u?St.get(t,"olddisplay")||S(t.nodeName):u,"inline"===c&&"none"===st.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],oe.exec(r)){if(delete e[i],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;p=!0}d[i]=g&&g[i]||st.style(t,i)}else u=void 0;if(st.isEmptyObject(d))"inline"===("none"===u?S(t.nodeName):u)&&(f.display=u);else{g?"hidden"in g&&(p=g.hidden):g=St.access(t,"fxshow",{}),s&&(g.hidden=!p),p?st(t).show():h.done(function(){st(t).hide()}),h.done(function(){var e;St.remove(t,"fxshow");for(e in d)st.style(t,e,d[e])});for(i in d)o=N(p?g[i]:0,i,h),i in g||(g[i]=o.start,p&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function R(t,e){var n,i,r,s,o;for(n in t)if(i=st.camelCase(n),r=e[i],s=t[n],st.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),o=st.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function z(t,e,n){var i,r,s=0,o=z.prefilters.length,a=st.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=re||O(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,s=1-i,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(s);return a.notifyWith(t,[u,s,n]),1>s&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:st.extend({},e),opts:st.extend(!0,{specialEasing:{},easing:st.easing._default},n),originalProperties:e,originalOptions:n,startTime:re||O(),duration:n.duration,tweens:[],createTween:function(e,n){var i=st.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?(a.notifyWith(t,[u,1,0]),a.resolveWith(t,[u,e])):a.rejectWith(t,[u,e]),this}}),c=u.props;for(R(c,u.opts.specialEasing);o>s;s++)if(i=z.prefilters[s].call(u,t,c,u.opts))return st.isFunction(i.stop)&&(st._queueHooks(u.elem,u.opts.queue).stop=st.proxy(i.stop,i)),i;return st.map(c,N,u),st.isFunction(u.opts.start)&&u.opts.start.call(t,u),st.fx.timer(st.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function F(t){return t.getAttribute&&t.getAttribute("class")||""}function H(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(wt)||[];if(st.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function B(t,e,n,i){function r(a){var l;return s[a]=!0,st.each(t[a]||[],function(t,a){var u=a(e,n,i);return"string"!=typeof u||o||s[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var s={},o=t===Se;return r(e.dataTypes[0])||!s["*"]&&r("*")}function q(t,e){var n,i,r=st.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&st.extend(!0,t,i),t}function W(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function Y(t,e,n,i){var r,s,o,a,l,u={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)u[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=u[l+" "+s]||u["* "+s],!o)for(r in u)if(a=r.split(" "),a[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){o===!0?o=u[r]:u[r]!==!0&&(s=a[0],c.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(h){return{state:"parsererror",error:o?h:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}function G(t,e,n,i){var r;if(st.isArray(e))st.each(e,function(e,r){n||De.test(t)?i(t,r):G(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==st.type(e))i(t,e);else for(r in e)G(t+"["+r+"]",e[r],n,i)}function V(t){return st.isWindow(t)?t:9===t.nodeType&&t.defaultView}var U=[],Z=t.document,X=U.slice,Q=U.concat,K=U.push,J=U.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,it={},rt="2.2.1",st=function(t,e){return new st.fn.init(t,e)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,lt=/-([\da-z])/gi,ut=function(t,e){return e.toUpperCase()};st.fn=st.prototype={jquery:rt,constructor:st,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=st.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return st.each(this,t)},map:function(t){return this.pushStack(st.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:U.sort,splice:U.splice},st.extend=st.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||st.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],i=t[e],o!==i&&(u&&i&&(st.isPlainObject(i)||(r=st.isArray(i)))?(r?(r=!1,s=n&&st.isArray(n)?n:[]):s=n&&st.isPlainObject(n)?n:{},o[e]=st.extend(u,s,i)):void 0!==i&&(o[e]=i));return o},st.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===st.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!st.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){return"object"!==st.type(t)||t.nodeType||st.isWindow(t)?!1:t.constructor&&!nt.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=st.trim(t),t&&(1===t.indexOf("use strict")?(e=Z.createElement("script"),e.text=t,Z.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(at,"ms-").replace(lt,ut)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,r=0;if(n(t))for(i=t.length;i>r&&e.call(t[r],r,t[r])!==!1;r++);else for(r in t)if(e.call(t[r],r,t[r])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ot,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?st.merge(i,"string"==typeof t?[t]:t):K.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:J.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],s=0,o=t.length,a=!n;o>s;s++)i=!e(t[s],s),i!==a&&r.push(t[s]);return r},map:function(t,e,i){var r,s,o=0,a=[];if(n(t))for(r=t.length;r>o;o++)s=e(t[o],o,i),null!=s&&a.push(s);else for(o in t)s=e(t[o],o,i),null!=s&&a.push(s);return Q.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),st.isFunction(t)?(i=X.call(arguments,2),r=function(){return t.apply(e||this,i.concat(X.call(arguments)))},r.guid=t.guid=t.guid||st.guid++,r):void 0},now:Date.now,support:it}),"function"==typeof Symbol&&(st.fn[Symbol.iterator]=U[Symbol.iterator]),st.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(t){function e(t,e,n,i){var r,s,o,a,l,u,h,f,p=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!i&&((e?e.ownerDocument||e:F)!==P&&A(e),e=e||P,O)){if(11!==g&&(u=vt.exec(t)))if(r=u[1]){if(9===g){if(!(o=e.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(p&&(o=p.getElementById(r))&&R(e,o)&&o.id===r)return n.push(o),n}else{if(u[2])return K.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&w.getElementsByClassName&&e.getElementsByClassName)return K.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&!Y[t+" "]&&(!I||!I.test(t))){if(1!==g)p=e,f=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(yt,"\\$&"):e.setAttribute("id",a=z),h=S(t),s=h.length,l=dt.test(a)?"#"+a:"[id='"+a+"']";s--;)h[s]=l+" "+d(h[s]);f=h.join(","),p=_t.test(t)&&c(e.parentNode)||e}if(f)try{return K.apply(n,p.querySelectorAll(f)),n}catch(m){}finally{a===z&&e.removeAttribute("id")}}}return $(t.replace(at,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>x.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[z]=!0,t}function r(t){var e=P.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,s=B++;return e.first?function(e,n,s){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,s)}:function(e,n,o){var a,l,u,c=[H,s];if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(u=e[z]||(e[z]={}),l=u[e.uniqueID]||(u[e.uniqueID]={}),(a=l[i])&&a[0]===H&&a[1]===s)return c[2]=a[2];if(l[i]=c,c[2]=t(e,n,o))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,n,i){for(var r=0,s=n.length;s>r;r++)e(t,n[r],i);return i}function m(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,u=null!=e;l>a;a++)(s=t[a])&&(!n||n(s,i,r))&&(o.push(s),u&&e.push(a));return o}function v(t,e,n,r,s,o){return r&&!r[z]&&(r=v(r)),s&&!s[z]&&(s=v(s,o)),i(function(i,o,a,l){var u,c,h,d=[],f=[],p=o.length,v=i||g(e||"*",a.nodeType?[a]:a,[]),_=!t||!i&&e?v:m(v,d,t,a,l),y=n?s||(i?t:p||r)?[]:o:_;if(n&&n(_,y,a,l),r)for(u=m(y,f),r(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[f[c]]=!(_[f[c]]=h));if(i){if(s||t){if(s){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(_[c]=h);s(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=s?tt(i,h):d[c])>-1&&(i[u]=!(o[u]=h))}}else y=m(y===o?y.splice(p,y.length):y),s?s(null,o,y,l):K.apply(o,y)})}function _(t){for(var e,n,i,r=t.length,s=x.relative[t[0].type],o=s||x.relative[" "],a=s?1:0,l=f(function(t){return t===e},o,!0),u=f(function(t){return tt(e,t)>-1},o,!0),c=[function(t,n,i){var r=!s&&(i||n!==E)||((e=n).nodeType?l(t,n,i):u(t,n,i));return e=null,r}];r>a;a++)if(n=x.relative[t[a].type])c=[f(p(c),n)];else{if(n=x.filter[t[a].type].apply(null,t[a].matches),n[z]){for(i=++a;r>i&&!x.relative[t[i].type];i++);return v(a>1&&p(c),a>1&&d(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),n,i>a&&_(t.slice(a,i)),r>i&&_(t=t.slice(i)),r>i&&d(t))}c.push(n)}return p(c)}function y(t,n){var r=n.length>0,s=t.length>0,o=function(i,o,a,l,u){var c,h,d,f=0,p="0",g=i&&[],v=[],_=E,y=i||s&&x.find.TAG("*",u),b=H+=null==_?1:Math.random()||.1,w=y.length;for(u&&(E=o===P||o||u);p!==w&&null!=(c=y[p]);p++){if(s&&c){for(h=0,o||c.ownerDocument===P||(A(c),a=!O);d=t[h++];)if(d(c,o||P,a)){l.push(c);break}u&&(H=b)}r&&((c=!d&&c)&&f--,i&&g.push(c))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(g,v,o,a);if(i){if(f>0)for(;p--;)g[p]||v[p]||(v[p]=X.call(l));v=m(v)}K.apply(l,v),u&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return u&&(H=b,E=_),g};return r?i(o):o}var b,w,x,k,C,S,T,$,E,D,j,A,P,M,O,I,N,L,R,z="sizzle"+1*new Date,F=t.document,H=0,B=0,q=n(),W=n(),Y=n(),G=function(t,e){return t===e&&(j=!0),0},V=1<<31,U={}.hasOwnProperty,Z=[],X=Z.pop,Q=Z.push,K=Z.push,J=Z.slice,tt=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",st=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+rt+")*)|.*)\\)|)",ot=new RegExp(nt+"+","g"),at=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ht=new RegExp(st),dt=new RegExp("^"+it+"$"),ft={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+rt),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,yt=/'|\\/g,bt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xt=function(){A()};try{K.apply(Z=J.call(F.childNodes),F.childNodes),Z[F.childNodes.length].nodeType}catch(kt){K={apply:Z.length?function(t,e){Q.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:F;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,M=P.documentElement,O=!C(P),(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(P.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(P.getElementsByClassName),w.getById=r(function(t){return M.appendChild(t).id=z,!P.getElementsByName||!P.getElementsByName(z).length}),w.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var n=e.getElementById(t);return n?[n]:[]}},x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(bt,wt);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),x.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},x.find.CLASS=w.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&O?e.getElementsByClassName(t):void 0},N=[],I=[],(w.qsa=mt.test(P.querySelectorAll))&&(r(function(t){M.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+z+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||I.push(".#.+[+~]")}),r(function(t){var e=P.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=mt.test(L=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(t){w.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),N.push("!=",st)}),I=I.length&&new RegExp(I.join("|")),N=N.length&&new RegExp(N.join("|")),e=mt.test(M.compareDocumentPosition),R=e||mt.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},G=e?function(t,e){if(t===e)return j=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===P||t.ownerDocument===F&&R(F,t)?-1:e===P||e.ownerDocument===F&&R(F,e)?1:D?tt(D,t)-tt(D,e):0:4&n?-1:1)}:function(t,e){if(t===e)return j=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,a=[t],l=[e];if(!r||!s)return t===P?-1:e===P?1:r?-1:s?1:D?tt(D,t)-tt(D,e):0;if(r===s)return o(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?o(a[i],l[i]):a[i]===F?-1:l[i]===F?1:0},P):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&A(t),n=n.replace(ct,"='$1']"),w.matchesSelector&&O&&!Y[n+" "]&&(!N||!N.test(n))&&(!I||!I.test(n)))try{var i=L.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&A(t),R(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&A(t);var n=x.attrHandle[e.toLowerCase()],i=n&&U.call(x.attrHandle,e.toLowerCase())?n(t,e,!O):void 0;return void 0!==i?i:w.attributes||!O?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(j=!w.detectDuplicates,D=!w.sortStable&&t.slice(0),t.sort(G),j){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return D=null,t},k=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},x=e.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(bt,wt),t[3]=(t[3]||t[4]||t[5]||"").replace(bt,wt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ht.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(bt,wt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=q[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&q(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var s=e.attr(r,t);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(ot," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,f,p,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!l&&!a,y=!1;if(m){if(s){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&_){for(d=m,h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===H&&u[1],y=f&&u[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(y=f=0)||p.pop();)if(1===d.nodeType&&++y&&d===e){c[t]=[H,f,y];break}}else if(_&&(d=e,h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),u=c[t]||[],f=u[0]===H&&u[1],y=f),y===!1)for(;(d=++f&&d&&d[g]||(y=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(_&&(h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[H,y]),d!==e)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(t,n){var r,s=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[z]?s(n):s.length>1?(r=[t,t,"",n],x.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=s(t,n),o=r.length;o--;)i=tt(t,r[o]),t[i]=!(e[i]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:i(function(t){var e=[],n=[],r=T(t.replace(at,"$1"));return r[z]?i(function(t,e,n,i){for(var s,o=r(t,null,i,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,i,s){return e[0]=t,r(e,null,s,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(bt,wt),function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(bt,wt).toLowerCase(),function(e){var n;do if(n=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},x.pseudos.nth=x.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})x.pseudos[b]=l(b);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,S=e.tokenize=function(t,n){var i,r,s,o,a,l,u,c=W[t+" "];if(c)return n?0:c.slice(0);for(a=t,l=[],u=x.preFilter;a;){(!i||(r=lt.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ut.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(at," ")}),a=a.slice(i.length));for(o in x.filter)!(r=ft[o].exec(a))||u[o]&&!(r=u[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)},T=e.compile=function(t,e){var n,i=[],r=[],s=Y[t+" "];if(!s){for(e||(e=S(t)),n=e.length;n--;)s=_(e[n]),s[z]?i.push(s):r.push(s);s=Y(t,y(r,i)),s.selector=t}return s},$=e.select=function(t,e,n,i){var r,s,o,a,l,u="function"==typeof t&&t,h=!i&&S(t=u.selector||t);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&w.getById&&9===e.nodeType&&O&&x.relative[s[1].type]){if(e=(x.find.ID(o.matches[0].replace(bt,wt),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=ft.needsContext.test(t)?0:s.length;r--&&(o=s[r],!x.relative[a=o.type]);)if((l=x.find[a])&&(i=l(o.matches[0].replace(bt,wt),_t.test(s[0].type)&&c(e.parentNode)||e))){if(s.splice(r,1),t=i.length&&d(s),!t)return K.apply(n,i),n;break}}return(u||T(t,h))(i,e,!O,n,!e||_t.test(t)&&c(e.parentNode)||e),n},w.sortStable=z.split("").sort(G).join("")===z,w.detectDuplicates=!!j,A(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(et,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);st.find=ct,st.expr=ct.selectors,st.expr[":"]=st.expr.pseudos,st.uniqueSort=st.unique=ct.uniqueSort,st.text=ct.getText,st.isXMLDoc=ct.isXML,st.contains=ct.contains;var ht=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&st(t).is(n))break;i.push(t)}return i},dt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},ft=st.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,gt=/^.[^:#\[\.,]*$/;st.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?st.find.matchesSelector(i,t)?[i]:[]:st.find.matches(t,st.grep(e,function(t){return 1===t.nodeType}))},st.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(st(t).filter(function(){for(e=0;n>e;e++)if(st.contains(r[e],this))return!0}));for(e=0;n>e;e++)st.find(t,r[e],i);return i=this.pushStack(n>1?st.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ft.test(t)?st(t):t||[],!1).length}});var mt,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_t=st.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||mt,"string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:vt.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof st?e[0]:e,st.merge(this,st.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Z,!0)),pt.test(i[1])&&st.isPlainObject(e))for(i in e)st.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=Z.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):st.isFunction(t)?void 0!==n.ready?n.ready(t):t(st):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),st.makeArray(t,this))};_t.prototype=st.fn,mt=st(Z);var yt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({has:function(t){var e=st(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(st.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,s=[],o=ft.test(t)||"string"!=typeof t?st(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&st.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?st.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?J.call(st(t),this[0]):J.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(st.uniqueSort(st.merge(this.get(),st(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),st.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ht(t,"parentNode")},parentsUntil:function(t,e,n){return ht(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return ht(t,"nextSibling")},prevAll:function(t){return ht(t,"previousSibling")},nextUntil:function(t,e,n){return ht(t,"nextSibling",n)},prevUntil:function(t,e,n){return ht(t,"previousSibling",n)},siblings:function(t){return dt((t.parentNode||{}).firstChild,t)},children:function(t){return dt(t.firstChild)},contents:function(t){return t.contentDocument||st.merge([],t.childNodes)}},function(t,e){st.fn[t]=function(n,i){var r=st.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=st.filter(i,r)),this.length>1&&(bt[t]||st.uniqueSort(r),yt.test(t)&&r.reverse()),this.pushStack(r)}});var wt=/\S+/g;st.Callbacks=function(t){t="string"==typeof t?s(t):st.extend({},t);var e,n,i,r,o=[],a=[],l=-1,u=function(){for(r=t.once,i=e=!0;a.length;l=-1)for(n=a.shift();++l<o.length;)o[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=o.length,n=!1);t.memory||(n=!1),e=!1,r&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(l=o.length-1,a.push(n)),function i(e){st.each(e,function(e,n){st.isFunction(n)?t.unique&&c.has(n)||o.push(n):n&&n.length&&"string"!==st.type(n)&&i(n)})}(arguments),n&&!e&&u()),this},remove:function(){return st.each(arguments,function(t,e){for(var n;(n=st.inArray(e,o,n))>-1;)o.splice(n,1),l>=n&&l--}),this},has:function(t){return t?st.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||(o=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},st.extend({Deferred:function(t){var e=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return st.Deferred(function(n){st.each(e,function(e,s){var o=st.isFunction(t[e])&&t[e];r[s[1]](function(){var t=o&&o.apply(this,arguments);t&&st.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[s[0]+"With"](this===i?n.promise():this,o?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?st.extend(t,i):i}},r={};return i.pipe=i.then,st.each(e,function(t,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,s=X.call(arguments),o=s.length,a=1!==o||t&&st.isFunction(t.promise)?o:0,l=1===a?t:st.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?X.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)s[r]&&st.isFunction(s[r].promise)?s[r].promise().progress(u(r,n,e)).done(u(r,i,s)).fail(l.reject):--a;return a||l.resolveWith(i,s),l.promise()}});var xt;st.fn.ready=function(t){return st.ready.promise().done(t),this},st.extend({isReady:!1,readyWait:1,holdReady:function(t){t?st.readyWait++:st.ready(!0)},ready:function(t){(t===!0?--st.readyWait:st.isReady)||(st.isReady=!0,t!==!0&&--st.readyWait>0||(xt.resolveWith(Z,[st]),st.fn.triggerHandler&&(st(Z).triggerHandler("ready"),st(Z).off("ready"))))}}),st.ready.promise=function(e){return xt||(xt=st.Deferred(),"complete"===Z.readyState||"loading"!==Z.readyState&&!Z.documentElement.doScroll?t.setTimeout(st.ready):(Z.addEventListener("DOMContentLoaded",o),t.addEventListener("load",o))),xt.promise(e)},st.ready.promise();var kt=function(t,e,n,i,r,s,o){var a=0,l=t.length,u=null==n;if("object"===st.type(n)){r=!0;for(a in n)kt(t,e,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,st.isFunction(i)||(o=!0),u&&(o?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(st(t),n)})),e))for(;l>a;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:u?e.call(t):l?e(t[0],n):s},Ct=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};a.uid=1,a.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Ct(t))return{};var e=t[this.expando];return e||(e={},Ct(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[e]=n;else for(i in e)r[i]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,st.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,s=t[this.expando];if(void 0!==s){if(void 0===e)this.register(t);else{st.isArray(e)?i=e.concat(e.map(st.camelCase)):(r=st.camelCase(e),e in s?i=[e,r]:(i=r,i=i in s?[i]:i.match(wt)||[])),n=i.length;for(;n--;)delete s[i[n]]}(void 0===e||st.isEmptyObject(s))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!st.isEmptyObject(e)}};var St=new a,Tt=new a,$t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Et=/[A-Z]/g;st.extend({hasData:function(t){return Tt.hasData(t)||St.hasData(t)},data:function(t,e,n){return Tt.access(t,e,n)},removeData:function(t,e){Tt.remove(t,e)},_data:function(t,e,n){return St.access(t,e,n)},_removeData:function(t,e){St.remove(t,e)}}),st.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Tt.get(s),1===s.nodeType&&!St.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=st.camelCase(i.slice(5)),l(s,i,r[i])));St.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Tt.set(this,t)}):kt(this,function(e){var n,i;if(s&&void 0===e){if(n=Tt.get(s,t)||Tt.get(s,t.replace(Et,"-$&").toLowerCase()),void 0!==n)return n;if(i=st.camelCase(t),n=Tt.get(s,i),void 0!==n)return n;if(n=l(s,i,void 0),void 0!==n)return n}else i=st.camelCase(t),this.each(function(){var n=Tt.get(this,i);Tt.set(this,i,e),t.indexOf("-")>-1&&void 0!==n&&Tt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Tt.remove(this,t)})}}),st.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=St.get(t,e),n&&(!i||st.isArray(n)?i=St.access(t,e,st.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=st.queue(t,e),i=n.length,r=n.shift(),s=st._queueHooks(t,e),o=function(){st.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return St.get(t,n)||St.access(t,n,{empty:st.Callbacks("once memory").add(function(){St.remove(t,[e+"queue",n])})})}}),st.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?st.queue(this[0],t):void 0===e?this:this.each(function(){var n=st.queue(this,t,e);st._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&st.dequeue(this,t)})},dequeue:function(t){return this.each(function(){st.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=st.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)n=St.get(s[o],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var Dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,jt=new RegExp("^(?:([+-])=|)("+Dt+")([a-z%]*)$","i"),At=["Top","Right","Bottom","Left"],Pt=function(t,e){return t=e||t,"none"===st.css(t,"display")||!st.contains(t.ownerDocument,t)},Mt=/^(?:checkbox|radio)$/i,Ot=/<([\w:-]+)/,It=/^$|\/(?:java|ecma)script/i,Nt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td;var Lt=/<|&#?\w+;/;!function(){var t=Z.createDocumentFragment(),e=t.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Rt=/^key/,zt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ft=/^([^.]*)(?:\.(.+)|)/;st.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,u,c,h,d,f,p,g,m=St.get(t);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=st.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return"undefined"!=typeof st&&st.event.triggered!==e.type?st.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(wt)||[""],u=e.length;u--;)a=Ft.exec(e[u])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f&&(h=st.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=st.event.special[f]||{},c=st.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&st.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,p,o)!==!1||t.addEventListener&&t.addEventListener(f,o)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),st.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,o,a,l,u,c,h,d,f,p,g,m=St.hasData(t)&&St.get(t);if(m&&(l=m.events)){for(e=(e||"").match(wt)||[""],u=e.length;u--;)if(a=Ft.exec(e[u])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(h=st.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!r&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));o&&!d.length&&(h.teardown&&h.teardown.call(t,p,m.handle)!==!1||st.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)st.event.remove(t,f+e[u],n,i,!0);st.isEmptyObject(l)&&St.remove(t,"handle events")}},dispatch:function(t){t=st.event.fix(t);var e,n,i,r,s,o=[],a=X.call(arguments),l=(St.get(this,"events")||{})[t.type]||[],u=st.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(o=st.event.handlers.call(this,t,l),e=0;(r=o[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(s.namespace))&&(t.handleObj=s,
t.data=s.data,i=((st.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,s,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(i=[],n=0;a>n;n++)s=e[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?st(r,this).index(l)>-1:st.find(r,this,null,[l]).length),i[r]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,s=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Z,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===s||(t.which=1&s?1:2&s?3:4&s?2:0),t}},fix:function(t){if(t[st.expando])return t;var e,n,i,r=t.type,s=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=zt.test(r)?this.mouseHooks:Rt.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new st.Event(s),e=i.length;e--;)n=i[e],t[n]=s[n];return t.target||(t.target=Z),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,s):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&st.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return st.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},st.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},st.Event=function(t,e){return this instanceof st.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?f:p):this.type=t,e&&st.extend(this,e),this.timeStamp=t&&t.timeStamp||st.now(),void(this[st.expando]=!0)):new st.Event(t,e)},st.Event.prototype={constructor:st.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=f,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=f,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=f,t&&t.stopImmediatePropagation(),this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){st.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return(!r||r!==i&&!st.contains(i,r))&&(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),st.fn.extend({on:function(t,e,n,i){return m(this,t,e,n,i)},one:function(t,e,n,i){return m(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,st(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){st.event.remove(this,t,n,e)})}});var Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Bt=/<script|<style|<link/i,qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Yt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;st.extend({htmlPrefilter:function(t){return t.replace(Ht,"<$1></$2>")},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),l=st.contains(t.ownerDocument,t);if(!(it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||st.isXMLDoc(t)))for(o=c(a),s=c(t),i=0,r=s.length;r>i;i++)w(s[i],o[i]);if(e)if(n)for(s=s||c(t),o=o||c(a),i=0,r=s.length;r>i;i++)b(s[i],o[i]);else b(t,a);return o=c(a,"script"),o.length>0&&h(o,!l&&c(t,"script")),a},cleanData:function(t){for(var e,n,i,r=st.event.special,s=0;void 0!==(n=t[s]);s++)if(Ct(n)){if(e=n[St.expando]){if(e.events)for(i in e.events)r[i]?st.event.remove(n,i):st.removeEvent(n,i,e.handle);n[St.expando]=void 0}n[Tt.expando]&&(n[Tt.expando]=void 0)}}}),st.fn.extend({domManip:x,detach:function(t){return k(this,t,!0)},remove:function(t){return k(this,t)},text:function(t){return kt(this,function(t){return void 0===t?st.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return x(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.appendChild(t)}})},prepend:function(){return x(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=v(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return x(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return x(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(st.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return st.clone(this,t,e)})},html:function(t){return kt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Bt.test(t)&&!Nt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=st.htmlPrefilter(t);try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(st.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return x(this,arguments,function(e){var n=this.parentNode;st.inArray(this,t)<0&&(st.cleanData(c(this)),n&&n.replaceChild(e,this))},t)}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){st.fn[t]=function(t){for(var n,i=[],r=st(t),s=r.length-1,o=0;s>=o;o++)n=o===s?this:this.clone(!0),st(r[o])[e](n),K.apply(i,n.get());return this.pushStack(i)}});var Gt,Vt={HTML:"block",BODY:"block"},Ut=/^margin/,Zt=new RegExp("^("+Dt+")(?!px)[a-z%]+$","i"),Xt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Qt=function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=o[s];return r},Kt=Z.documentElement;!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Kt.appendChild(o);var e=t.getComputedStyle(a);n="1%"!==e.top,s="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,Kt.removeChild(o)}var n,i,r,s,o=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),st.extend(it,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},pixelMarginRight:function(){return null==i&&e(),r},reliableMarginLeft:function(){return null==i&&e(),s},reliableMarginRight:function(){var e,n=a.appendChild(Z.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",Kt.appendChild(o),e=!parseFloat(t.getComputedStyle(n).marginRight),Kt.removeChild(o),a.removeChild(n),e}}))}();var Jt=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ne=["Webkit","O","Moz","ms"],ie=Z.createElement("div").style;st.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=T(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=st.camelCase(e),l=t.style;return e=st.cssProps[a]||(st.cssProps[a]=E(a)||a),o=st.cssHooks[e]||st.cssHooks[a],void 0===n?o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e]:(s=typeof n,"string"===s&&(r=jt.exec(n))&&r[1]&&(n=u(t,e,r),s="number"),null!=n&&n===n&&("number"===s&&(n+=r&&r[3]||(st.cssNumber[a]?"":"px")),it.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l[e]=n)),void 0)}},css:function(t,e,n,i){var r,s,o,a=st.camelCase(e);return e=st.cssProps[a]||(st.cssProps[a]=E(a)||a),o=st.cssHooks[e]||st.cssHooks[a],o&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=T(t,e,i)),"normal"===r&&e in ee&&(r=ee[e]),""===n||n?(s=parseFloat(r),n===!0||isFinite(s)?s||0:r):r}}),st.each(["height","width"],function(t,e){st.cssHooks[e]={get:function(t,n,i){return n?Jt.test(st.css(t,"display"))&&0===t.offsetWidth?Qt(t,te,function(){return A(t,e,i)}):A(t,e,i):void 0},set:function(t,n,i){var r,s=i&&Xt(t),o=i&&j(t,e,i,"border-box"===st.css(t,"boxSizing",!1,s),s);return o&&(r=jt.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=st.css(t,e)),D(t,n,o)}}}),st.cssHooks.marginLeft=$(it.reliableMarginLeft,function(t,e){return e?(parseFloat(T(t,"marginLeft"))||t.getBoundingClientRect().left-Qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),st.cssHooks.marginRight=$(it.reliableMarginRight,function(t,e){return e?Qt(t,{display:"inline-block"},T,[t,"marginRight"]):void 0}),st.each({margin:"",padding:"",border:"Width"},function(t,e){st.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+At[i]+e]=s[i]||s[i-2]||s[0];return r}},Ut.test(t)||(st.cssHooks[t+e].set=D)}),st.fn.extend({css:function(t,e){return kt(this,function(t,e,n){var i,r,s={},o=0;if(st.isArray(e)){for(i=Xt(t),r=e.length;r>o;o++)s[e[o]]=st.css(t,e[o],!1,i);return s}return void 0!==n?st.style(t,e,n):st.css(t,e)},t,e,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pt(this)?st(this).show():st(this).hide()})}}),st.Tween=M,M.prototype={constructor:M,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||st.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(st.cssNumber[n]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,n=M.propHooks[this.prop];return this.options.duration?this.pos=e=st.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=st.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){st.fx.step[t.prop]?st.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[st.cssProps[t.prop]]&&!st.cssHooks[t.prop]?t.elem[t.prop]=t.now:st.style(t.elem,t.prop,t.now+t.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},st.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},st.fx=M.prototype.init,st.fx.step={};var re,se,oe=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;st.Animation=st.extend(z,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return u(n.elem,t,jt.exec(e),n),n}]},tweener:function(t,e){st.isFunction(t)?(e=t,t=["*"]):t=t.match(wt);for(var n,i=0,r=t.length;r>i;i++)n=t[i],z.tweeners[n]=z.tweeners[n]||[],z.tweeners[n].unshift(e)},prefilters:[L],prefilter:function(t,e){e?z.prefilters.unshift(t):z.prefilters.push(t)}}),st.speed=function(t,e,n){var i=t&&"object"==typeof t?st.extend({},t):{complete:n||!n&&e||st.isFunction(t)&&t,duration:t,easing:n&&e||e&&!st.isFunction(e)&&e};return i.duration=st.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in st.fx.speeds?st.fx.speeds[i.duration]:st.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){st.isFunction(i.old)&&i.old.call(this),i.queue&&st.dequeue(this,i.queue)},i},st.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Pt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=st.isEmptyObject(t),s=st.speed(e,n,i),o=function(){var e=z(this,st.extend({},t),s);(r||St.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=st.timers,o=St.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ae.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));(e||!n)&&st.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=St.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=st.timers,o=i?i.length:0;for(n.finish=!0,st.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),st.each(["toggle","show","hide"],function(t,e){var n=st.fn[e];st.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,i,r)}}),st.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){st.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),st.timers=[],st.fx.tick=function(){var t,e=0,n=st.timers;for(re=st.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||st.fx.stop(),re=void 0},st.fx.timer=function(t){st.timers.push(t),t()?st.fx.start():st.timers.pop()},st.fx.interval=13,st.fx.start=function(){se||(se=t.setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){t.clearInterval(se),se=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fn.delay=function(e,n){return e=st.fx?st.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=Z.createElement("input"),e=Z.createElement("select"),n=e.appendChild(Z.createElement("option"));t.type="checkbox",it.checkOn=""!==t.value,it.optSelected=n.selected,e.disabled=!0,it.optDisabled=!n.disabled,t=Z.createElement("input"),t.value="t",t.type="radio",it.radioValue="t"===t.value}();var le,ue=st.expr.attrHandle;st.fn.extend({attr:function(t,e){return kt(this,st.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){st.removeAttr(this,t)})}}),st.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof t.getAttribute?st.prop(t,e,n):(1===s&&st.isXMLDoc(t)||(e=e.toLowerCase(),r=st.attrHooks[e]||(st.expr.match.bool.test(e)?le:void 0)),void 0!==n?null===n?void st.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=st.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&st.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i,r=0,s=e&&e.match(wt);if(s&&1===t.nodeType)for(;n=s[r++];)i=st.propFix[n]||n,st.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)}}),le={set:function(t,e,n){return e===!1?st.removeAttr(t,n):t.setAttribute(n,n),n}},st.each(st.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ue[e]||st.find.attr;ue[e]=function(t,e,i){var r,s;return i||(s=ue[e],ue[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,ue[e]=s),r}});var ce=/^(?:input|select|textarea|button)$/i,he=/^(?:a|area)$/i;st.fn.extend({prop:function(t,e){return kt(this,st.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[st.propFix[t]||t]})}}),st.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&st.isXMLDoc(t)||(e=st.propFix[e]||e,r=st.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=st.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||he.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),it.optSelected||(st.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this});var de=/[\t\r\n\f]/g;st.fn.extend({addClass:function(t){var e,n,i,r,s,o,a,l=0;if(st.isFunction(t))return this.each(function(e){st(this).addClass(t.call(this,e,F(this)))});if("string"==typeof t&&t)for(e=t.match(wt)||[];n=this[l++];)if(r=F(n),i=1===n.nodeType&&(" "+r+" ").replace(de," ")){for(o=0;s=e[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a=st.trim(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,s,o,a,l=0;if(st.isFunction(t))return this.each(function(e){st(this).removeClass(t.call(this,e,F(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(wt)||[];n=this[l++];)if(r=F(n),i=1===n.nodeType&&(" "+r+" ").replace(de," ")){for(o=0;s=e[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");a=st.trim(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):st.isFunction(t)?this.each(function(n){st(this).toggleClass(t.call(this,n,F(this),e),e)}):this.each(function(){var e,i,r,s;if("string"===n)for(i=0,r=st(this),s=t.match(wt)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(void 0===t||"boolean"===n)&&(e=F(this),e&&St.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":St.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+F(n)+" ").replace(de," ").indexOf(e)>-1)return!0;return!1}});var fe=/\r/g;st.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=st.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,st(this).val()):t,null==r?r="":"number"==typeof r?r+="":st.isArray(r)&&(r=st.map(r,function(t){return null==t?"":t+""})),e=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=st.valHooks[r.type]||st.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(fe,""):null==n?"":n)}}}),st.extend({valHooks:{option:{get:function(t){return st.trim(t.value)}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,s="select-one"===t.type||0>r,o=s?null:[],a=s?r+1:i.length,l=0>r?a:s?r:0;a>l;l++)if(n=i[l],(n.selected||l===r)&&(it.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!st.nodeName(n.parentNode,"optgroup"))){if(e=st(n).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=st.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=st.inArray(st.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(t,e){return st.isArray(e)?t.checked=st.inArray(st(t).val(),e)>-1:void 0}},it.checkOn||(st.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var pe=/^(?:focusinfocus|focusoutblur)$/;st.extend(st.event,{trigger:function(e,n,i,r){var s,o,a,l,u,c,h,d=[i||Z],f=nt.call(e,"type")?e.type:e,p=nt.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||Z,3!==i.nodeType&&8!==i.nodeType&&!pe.test(f+st.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),u=f.indexOf(":")<0&&"on"+f,e=e[st.expando]?e:new st.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:st.makeArray(n,[e]),h=st.event.special[f]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!st.isWindow(i)){for(l=h.delegateType||f,pe.test(l+f)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(i.ownerDocument||Z)&&d.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=d[s++])&&!e.isPropagationStopped();)e.type=s>1?l:h.bindType||f,c=(St.get(o,"events")||{})[e.type]&&St.get(o,"handle"),c&&c.apply(o,n),c=u&&o[u],c&&c.apply&&Ct(o)&&(e.result=c.apply(o,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Ct(i)||u&&st.isFunction(i[f])&&!st.isWindow(i)&&(a=i[u],a&&(i[u]=null),st.event.triggered=f,i[f](),st.event.triggered=void 0,a&&(i[u]=a)),e.result}},simulate:function(t,e,n){var i=st.extend(new st.Event,n,{type:t,isSimulated:!0});st.event.trigger(i,null,e),i.isDefaultPrevented()&&n.preventDefault()}}),st.fn.extend({trigger:function(t,e){return this.each(function(){st.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?st.event.trigger(t,e,n,!0):void 0}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){st.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),st.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),it.focusin="onfocusin"in t,it.focusin||st.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){st.event.simulate(e,t.target,st.event.fix(t))};st.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=St.access(i,e);r||i.addEventListener(t,n,!0),St.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=St.access(i,e)-1;r?St.access(i,e,r):(i.removeEventListener(t,n,!0),St.remove(i,e))}}});var ge=t.location,me=st.now(),ve=/\?/;st.parseJSON=function(t){return JSON.parse(t+"")},st.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(i){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&st.error("Invalid XML: "+e),n};var _e=/#.*$/,ye=/([?&])_=[^&]*/,be=/^(.*?):[ \t]*([^\r\n]*)$/gm,we=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xe=/^(?:GET|HEAD)$/,ke=/^\/\//,Ce={},Se={},Te="*/".concat("*"),$e=Z.createElement("a");$e.href=ge.href,st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ge.href,type:"GET",isLocal:we.test(ge.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Te,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?q(q(t,st.ajaxSettings),e):q(st.ajaxSettings,t)},ajaxPrefilter:H(Ce),ajaxTransport:H(Se),ajax:function(e,n){function i(e,n,i,a){var u,h,_,y,w,k=n;2!==b&&(b=2,l&&t.clearTimeout(l),r=void 0,o=a||"",x.readyState=e>0?4:0,u=e>=200&&300>e||304===e,i&&(y=W(d,x,i)),y=Y(d,y,x,u),u?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(st.lastModified[s]=w),w=x.getResponseHeader("etag"),w&&(st.etag[s]=w)),204===e||"HEAD"===d.type?k="nocontent":304===e?k="notmodified":(k=y.state,h=y.data,_=y.error,u=!_)):(_=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(n||k)+"",u?g.resolveWith(f,[h,k,x]):g.rejectWith(f,[x,k,_]),x.statusCode(v),v=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[x,d,u?h:_]),m.fireWith(f,[x,k]),c&&(p.trigger("ajaxComplete",[x,d]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,s,o,a,l,u,c,h,d=st.ajaxSetup({},n),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?st(f):st.event,g=st.Deferred(),m=st.Callbacks("once memory"),v=d.statusCode||{},_={},y={},b=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!a)for(a={};e=be.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,_[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return r&&r.abort(e),i(0,e),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||ge.href)+"").replace(_e,"").replace(ke,ge.protocol+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=st.trim(d.dataType||"*").toLowerCase().match(wt)||[""],null==d.crossDomain){u=Z.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=$e.protocol+"//"+$e.host!=u.protocol+"//"+u.host}catch(k){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=st.param(d.data,d.traditional)),B(Ce,d,n,x),2===b)return x;c=st.event&&d.global,c&&0===st.active++&&st.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!xe.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(ve.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ye.test(s)?s.replace(ye,"$1_="+me++):s+(ve.test(s)?"&":"?")+"_="+me++)),d.ifModified&&(st.lastModified[s]&&x.setRequestHeader("If-Modified-Since",st.lastModified[s]),st.etag[s]&&x.setRequestHeader("If-None-Match",st.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Te+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)x.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(d.beforeSend.call(f,x,d)===!1||2===b))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](d[h]);if(r=B(Se,d,n,x)){if(x.readyState=1,c&&p.trigger("ajaxSend",[x,d]),2===b)return x;d.async&&d.timeout>0&&(l=t.setTimeout(function(){x.abort("timeout")},d.timeout));try{b=1,r.send(_,i)}catch(k){if(!(2>b))throw k;i(-1,k)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return st.get(t,e,n,"json")},getScript:function(t,e){return st.get(t,void 0,e,"script")}}),st.each(["get","post"],function(t,e){st[e]=function(t,n,i,r){return st.isFunction(n)&&(r=r||i,i=n,n=void 0),st.ajax(st.extend({url:t,type:e,dataType:r,data:n,success:i},st.isPlainObject(t)&&t))}}),st._evalUrl=function(t){return st.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},st.fn.extend({wrapAll:function(t){var e;return st.isFunction(t)?this.each(function(e){st(this).wrapAll(t.call(this,e))}):(this[0]&&(e=st(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return st.isFunction(t)?this.each(function(e){st(this).wrapInner(t.call(this,e))}):this.each(function(){var e=st(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=st.isFunction(t);return this.each(function(n){st(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}}),st.expr.filters.hidden=function(t){return!st.expr.filters.visible(t)},st.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ee=/%20/g,De=/\[\]$/,je=/\r?\n/g,Ae=/^(?:submit|button|image|reset|file)$/i,Pe=/^(?:input|select|textarea|keygen)/i;st.param=function(t,e){var n,i=[],r=function(t,e){e=st.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(t)||t.jquery&&!st.isPlainObject(t))st.each(t,function(){r(this.name,this.value)});else for(n in t)G(n,t[n],e,r);return i.join("&").replace(Ee,"+")},st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=st.prop(this,"elements");return t?st.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!st(this).is(":disabled")&&Pe.test(this.nodeName)&&!Ae.test(t)&&(this.checked||!Mt.test(t))}).map(function(t,e){var n=st(this).val();return null==n?null:st.isArray(n)?st.map(n,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:n.replace(je,"\r\n")}}).get()}}),st.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Me={0:200,1223:204},Oe=st.ajaxSettings.xhr();it.cors=!!Oe&&"withCredentials"in Oe,it.ajax=Oe=!!Oe,st.ajaxTransport(function(e){var n,i;return it.cors||Oe&&!e.crossDomain?{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Me[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}:void 0}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return st.globalEval(t),t}}}),st.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),st.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=st("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),Z.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ie=[],Ne=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||st.expando+"_"+me++;return this[t]=!0,t}}),st.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,o,a=e.jsonp!==!1&&(Ne.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ne.test(e.data)&&"data");
return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=st.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ne,"$1"+r):e.jsonp!==!1&&(e.url+=(ve.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||st.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},i.always(function(){void 0===s?st(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ie.push(r)),o&&st.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),it.createHTMLDocument=function(){var t=Z.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),st.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||(it.createHTMLDocument?Z.implementation.createHTMLDocument(""):Z);var i=pt.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=d([t],e,r),r&&r.length&&st(r).remove(),st.merge([],i.childNodes))};var Le=st.fn.load;st.fn.load=function(t,e,n){if("string"!=typeof t&&Le)return Le.apply(this,arguments);var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=st.trim(t.slice(a)),t=t.slice(0,a)),st.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&st.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?st("<div>").append(st.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(o,s||[t.responseText,e,t])})}),this},st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){st.fn[e]=function(t){return this.on(e,t)}}),st.expr.filters.animated=function(t){return st.grep(st.timers,function(e){return t===e.elem}).length},st.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,u,c=st.css(t,"position"),h=st(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=st.css(t,"top"),l=st.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1,u?(i=h.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),st.isFunction(e)&&(e=e.call(t,n,st.extend({},a))),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},st.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){st.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;if(s)return e=s.documentElement,st.contains(e,i)?(r=i.getBoundingClientRect(),n=V(s),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===st.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),st.nodeName(t[0],"html")||(i=t.offset()),i.top+=st.css(t[0],"borderTopWidth",!0),i.left+=st.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-st.css(n,"marginTop",!0),left:e.left-i.left-st.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===st.css(t,"position");)t=t.offsetParent;return t||Kt})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;st.fn[t]=function(i){return kt(this,function(t,i,r){var s=V(t);return void 0===r?s?s[e]:t[i]:void(s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r)},t,i,arguments.length)}}),st.each(["top","left"],function(t,e){st.cssHooks[e]=$(it.pixelPosition,function(t,n){return n?(n=T(t,e),Zt.test(n)?st(t).position()[e]+"px":n):void 0})}),st.each({Height:"height",Width:"width"},function(t,e){st.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){st.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||r===!0?"margin":"border");return kt(this,function(e,n,i){var r;return st.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?st.css(e,n,o):st.style(e,n,i,o)},e,s?i:void 0,s,null)}})}),st.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),st.fn.andSelf=st.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return st});var Re=t.jQuery,ze=t.$;return st.noConflict=function(e){return t.$===st&&(t.$=ze),e&&t.jQuery===st&&(t.jQuery=Re),st},e||(t.jQuery=t.$=st),st}),function(){function t(t,e){if(t!==e){var n=null===t,i=t===x,r=t===t,s=null===e,o=e===x,a=e===e;if(t>e&&!s||!r||n&&!o&&a||i&&a)return 1;if(e>t&&!n||!a||s&&!i&&r||o&&r)return-1}return 0}function e(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function n(t,e,n){if(e!==e)return f(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function i(t){return"function"==typeof t||!1}function r(t){return null==t?"":t+""}function s(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function o(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function a(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function l(e,n,i){for(var r=-1,s=e.criteria,o=n.criteria,a=s.length,l=i.length;++r<a;){var u=t(s[r],o[r]);if(u){if(r>=l)return u;var c=i[r];return u*("asc"===c||c===!0?1:-1)}}return e.index-n.index}function u(t){return Ht[t]}function c(t){return Bt[t]}function h(t,e,n){return e?t=Yt[t]:n&&(t=Gt[t]),"\\"+t}function d(t){return"\\"+Gt[t]}function f(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var s=t[r];if(s!==s)return r}return-1}function p(t){return!!t&&"object"==typeof t}function g(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function m(t,e){for(var n=-1,i=t.length,r=-1,s=[];++n<i;)t[n]===e&&(t[n]=H,s[++r]=n);return s}function v(t,e){for(var n,i=-1,r=t.length,s=-1,o=[];++i<r;){var a=t[i],l=e?e(a,i,t):a;i&&n===l||(n=l,o[++s]=a)}return o}function _(t){for(var e=-1,n=t.length;++e<n&&g(t.charCodeAt(e)););return e}function y(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function b(t){return qt[t]}function w(g){function U(t){if(p(t)&&!Da(t)&&!(t instanceof Ht)){if(t instanceof tt)return t;if(to.call(t,"__chain__")&&to.call(t,"__wrapped__"))return fi(t)}return new tt(t)}function K(){}function tt(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function Ht(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Eo,this.__views__=[]}function Bt(){var t=new Ht(this.__wrapped__);return t.__actions__=ne(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ne(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ne(this.__views__),t}function qt(){if(this.__filtered__){var t=new Ht(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Wt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Da(t),i=0>e,r=n?t.length:0,s=Gn(0,r,this.__views__),o=s.start,a=s.end,l=a-o,u=i?a:o-1,c=this.__iteratees__,h=c.length,d=0,f=ko(l,this.__takeCount__);if(!n||L>r||r==l&&f==l)return nn(i&&n?t.reverse():t,this.__actions__);var p=[];t:for(;l--&&f>d;){u+=e;for(var g=-1,m=t[u];++g<h;){var v=c[g],_=v.iteratee,y=v.type,b=_(m);if(y==z)m=b;else if(!b){if(y==R)continue t;break t}}p[d++]=m}return p}function Yt(){this.__data__={}}function Gt(t){return this.has(t)&&delete this.__data__[t]}function Vt(t){return"__proto__"==t?x:this.__data__[t]}function Ut(t){return"__proto__"!=t&&to.call(this.__data__,t)}function Zt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Xt(t){var e=t?t.length:0;for(this.data={hash:vo(null),set:new co};e--;)this.push(t[e])}function Qt(t,e){var n=t.data,i="string"==typeof e||Or(e)?n.set.has(e):n.hash[e];return i?0:-1}function Kt(t){var e=this.data;"string"==typeof t||Or(t)?e.set.add(t):e.hash[t]=!0}function ee(t,e){for(var n=-1,i=t.length,r=-1,s=e.length,o=Fs(i+s);++n<i;)o[n]=t[n];for(;++r<s;)o[n++]=e[r];return o}function ne(t,e){var n=-1,i=t.length;for(e||(e=Fs(i));++n<i;)e[n]=t[n];return e}function ie(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function re(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function se(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function oe(t,e,n,i){for(var r=-1,s=t.length,o=i,a=o;++r<s;){var l=t[r],u=+e(l);n(u,o)&&(o=u,a=l)}return a}function ae(t,e){for(var n=-1,i=t.length,r=-1,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[++r]=o)}return s}function le(t,e){for(var n=-1,i=t.length,r=Fs(i);++n<i;)r[n]=e(t[n],n,t);return r}function ue(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ce(t,e,n,i){var r=-1,s=t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function de(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function fe(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}function pe(t,e){return t===x?e:t}function ge(t,e,n,i){return t!==x&&to.call(i,n)?t:e}function me(t,e,n){for(var i=-1,r=Fa(e),s=r.length;++i<s;){var o=r[i],a=t[o],l=n(a,e[o],o,t,e);(l===l?l===a:a!==a)&&(a!==x||o in t)||(t[o]=l)}return t}function ve(t,e){return null==e?t:ye(e,Fa(e),t)}function _e(t,e){for(var n=-1,i=null==t,r=!i&&Qn(t),s=r?t.length:0,o=e.length,a=Fs(o);++n<o;){var l=e[n];r?a[n]=Kn(l,s)?t[l]:x:a[n]=i?x:t[l]}return a}function ye(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var s=e[i];n[s]=t[s]}return n}function be(t,e,n){var i=typeof t;return"function"==i?e===x?t:on(t,e,n):null==t?$s:"object"==i?ze(t):e===x?Ms(t):Fe(t,e)}function we(t,e,n,i,r,s,o){var a;if(n&&(a=r?n(t,i,r):n(t)),a!==x)return a;if(!Or(t))return t;var l=Da(t);if(l){if(a=Vn(t),!e)return ne(t,a)}else{var u=no.call(t),c=u==V;if(u!=X&&u!=B&&(!c||r))return Ft[u]?Zn(t,u,e):r?t:{};if(a=Un(c?{}:t),!e)return ve(a,t)}s||(s=[]),o||(o=[]);for(var h=s.length;h--;)if(s[h]==t)return o[h];return s.push(t),o.push(a),(l?ie:Ae)(t,function(i,r){a[r]=we(i,e,n,r,t,s,o)}),a}function xe(t,e,n){if("function"!=typeof t)throw new Zs(F);return ho(function(){t.apply(x,n)},e)}function ke(t,e){var i=t?t.length:0,r=[];if(!i)return r;var s=-1,o=qn(),a=o==n,l=a&&e.length>=L?gn(e):null,u=e.length;l&&(o=Qt,a=!1,e=l);t:for(;++s<i;){var c=t[s];if(a&&c===c){for(var h=u;h--;)if(e[h]===c)continue t;r.push(c)}else o(e,c,0)<0&&r.push(c)}return r}function Ce(t,e){var n=!0;return No(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Se(t,e,n,i){var r=i,s=r;return No(t,function(t,o,a){var l=+e(t,o,a);(n(l,r)||l===i&&l===s)&&(r=l,s=t)}),s}function Te(t,e,n,i){var r=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===x||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)t[n++]=e;return t}function $e(t,e){var n=[];return No(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Ee(t,e,n,i){var r;return n(t,function(t,n,s){return e(t,n,s)?(r=i?n:t,!1):void 0}),r}function De(t,e,n,i){i||(i=[]);for(var r=-1,s=t.length;++r<s;){var o=t[r];p(o)&&Qn(o)&&(n||Da(o)||Sr(o))?e?De(o,e,n,i):ue(i,o):n||(i[i.length]=o)}return i}function je(t,e){return Ro(t,e,ts)}function Ae(t,e){return Ro(t,e,Fa)}function Pe(t,e){return zo(t,e,Fa)}function Me(t,e){for(var n=-1,i=e.length,r=-1,s=[];++n<i;){var o=e[n];Mr(t[o])&&(s[++r]=o)}return s}function Oe(t,e,n){if(null!=t){n!==x&&n in hi(t)&&(e=[n]);for(var i=0,r=e.length;null!=t&&r>i;)t=t[e[i++]];return i&&i==r?t:x}}function Ie(t,e,n,i,r,s){return t===e?!0:null==t||null==e||!Or(t)&&!p(e)?t!==t&&e!==e:Ne(t,e,Ie,n,i,r,s)}function Ne(t,e,n,i,r,s,o){var a=Da(t),l=Da(e),u=q,c=q;a||(u=no.call(t),u==B?u=X:u!=X&&(a=qr(t))),l||(c=no.call(e),c==B?c=X:c!=X&&(l=qr(e)));var h=u==X,d=c==X,f=u==c;if(f&&!a&&!h)return zn(t,e,u);if(!r){var p=h&&to.call(t,"__wrapped__"),g=d&&to.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,i,r,s,o)}if(!f)return!1;s||(s=[]),o||(o=[]);for(var m=s.length;m--;)if(s[m]==t)return o[m]==e;s.push(t),o.push(e);var v=(a?Rn:Fn)(t,e,n,i,r,s,o);return s.pop(),o.pop(),v}function Le(t,e,n){var i=e.length,r=i,s=!n;if(null==t)return!r;for(t=hi(t);i--;){var o=e[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<r;){o=e[i];var a=o[0],l=t[a],u=o[1];if(s&&o[2]){if(l===x&&!(a in t))return!1}else{var c=n?n(l,u,a):x;if(!(c===x?Ie(u,l,n,!0):c))return!1}}return!0}function Re(t,e){var n=-1,i=Qn(t)?Fs(t.length):[];return No(t,function(t,r,s){i[++n]=e(t,r,s)}),i}function ze(t){var e=Wn(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:t[n]===i&&(i!==x||n in hi(t))}}return function(t){return Le(t,e)}}function Fe(t,e){var n=Da(t),i=ti(t)&&ii(e),r=t+"";return t=di(t),function(s){if(null==s)return!1;var o=r;if(s=hi(s),(n||!i)&&!(o in s)){if(s=1==t.length?s:Oe(s,Ue(t,0,-1)),null==s)return!1;o=Ti(t),s=hi(s)}return s[o]===e?e!==x||o in s:Ie(e,s[o],x,!0)}}function He(t,e,n,i,r){if(!Or(t))return t;var s=Qn(e)&&(Da(e)||qr(e)),o=s?x:Fa(e);return ie(o||e,function(a,l){if(o&&(l=a,a=e[l]),p(a))i||(i=[]),r||(r=[]),Be(t,e,l,He,n,i,r);else{var u=t[l],c=n?n(u,a,l,t,e):x,h=c===x;h&&(c=a),c===x&&(!s||l in t)||!h&&(c===c?c===u:u!==u)||(t[l]=c)}}),t}function Be(t,e,n,i,r,s,o){for(var a=s.length,l=e[n];a--;)if(s[a]==l)return void(t[n]=o[a]);var u=t[n],c=r?r(u,l,n,t,e):x,h=c===x;h&&(c=l,Qn(l)&&(Da(l)||qr(l))?c=Da(u)?u:Qn(u)?ne(u):[]:Fr(l)||Sr(l)?c=Sr(u)?Ur(u):Fr(u)?u:{}:h=!1),s.push(l),o.push(c),h?t[n]=i(c,l,r,s,o):(c===c?c!==u:u===u)&&(t[n]=c)}function qe(t){return function(e){return null==e?x:e[t]}}function We(t){var e=t+"";return t=di(t),function(n){return Oe(n,t,e)}}function Ye(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=r&&Kn(i)){var r=i;fo.call(t,i,1)}}return t}function Ge(t,e){return t+_o(To()*(e-t+1))}function Ve(t,e,n,i,r){return r(t,function(t,r,s){n=i?(i=!1,t):e(n,t,r,s)}),n}function Ue(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=n===x||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Fs(r);++i<r;)s[i]=t[i+e];return s}function Ze(t,e){var n;return No(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function Xe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Qe(t,e,n){var i=Hn(),r=-1;e=le(e,function(t){return i(t)});var s=Re(t,function(t){var n=le(e,function(e){return e(t)});return{criteria:n,index:++r,value:t}});return Xe(s,function(t,e){return l(t,e,n)})}function Ke(t,e){var n=0;return No(t,function(t,i,r){n+=+e(t,i,r)||0}),n}function Je(t,e){var i=-1,r=qn(),s=t.length,o=r==n,a=o&&s>=L,l=a?gn():null,u=[];l?(r=Qt,o=!1):(a=!1,l=e?[]:u);t:for(;++i<s;){var c=t[i],h=e?e(c,i,t):c;if(o&&c===c){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),u.push(c)}else r(l,h,0)<0&&((e||a)&&l.push(h),u.push(c))}return u}function tn(t,e){for(var n=-1,i=e.length,r=Fs(i);++n<i;)r[n]=t[e[n]];return r}function en(t,e,n,i){for(var r=t.length,s=i?r:-1;(i?s--:++s<r)&&e(t[s],s,t););return n?Ue(t,i?0:s,i?s+1:r):Ue(t,i?s+1:0,i?r:s)}function nn(t,e){var n=t;n instanceof Ht&&(n=n.value());for(var i=-1,r=e.length;++i<r;){var s=e[i];n=s.func.apply(s.thisArg,ue([n],s.args))}return n}function rn(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&Ao>=r){for(;r>i;){var s=i+r>>>1,o=t[s];(n?e>=o:e>o)&&null!==o?i=s+1:r=s}return r}return sn(t,e,$s,n)}function sn(t,e,n,i){e=n(e);for(var r=0,s=t?t.length:0,o=e!==e,a=null===e,l=e===x;s>r;){var u=_o((r+s)/2),c=n(t[u]),h=c!==x,d=c===c;if(o)var f=d||i;else f=a?d&&h&&(i||null!=c):l?d&&(i||h):null==c?!1:i?e>=c:e>c;f?r=u+1:s=u}return ko(s,jo)}function on(t,e,n){if("function"!=typeof t)return $s;if(e===x)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,s){return t.call(e,n,i,r,s)};case 5:return function(n,i,r,s,o){return t.call(e,n,i,r,s,o)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new so(t.byteLength),n=new po(e);return n.set(new po(t)),e}function ln(t,e,n){for(var i=n.length,r=-1,s=xo(t.length-i,0),o=-1,a=e.length,l=Fs(a+s);++o<a;)l[o]=e[o];for(;++r<i;)l[n[r]]=t[r];for(;s--;)l[o++]=t[r++];return l}function un(t,e,n){for(var i=-1,r=n.length,s=-1,o=xo(t.length-r,0),a=-1,l=e.length,u=Fs(o+l);++s<o;)u[s]=t[s];for(var c=s;++a<l;)u[c+a]=e[a];for(;++i<r;)u[c+n[i]]=t[s++];return u}function cn(t,e){return function(n,i,r){var s=e?e():{};if(i=Hn(i,r,3),Da(n))for(var o=-1,a=n.length;++o<a;){var l=n[o];t(s,l,i(l,o,n),n)}else No(n,function(e,n,r){t(s,e,i(e,n,r),r)});return s}}function hn(t){return vr(function(e,n){var i=-1,r=null==e?0:n.length,s=r>2?n[r-2]:x,o=r>2?n[2]:x,a=r>1?n[r-1]:x;for("function"==typeof s?(s=on(s,a,5),r-=2):(s="function"==typeof a?a:x,r-=s?1:0),o&&Jn(n[0],n[1],o)&&(s=3>r?x:s,r=1);++i<r;){var l=n[i];l&&t(e,l,s)}return e})}function dn(t,e){return function(n,i){var r=n?Bo(n):0;if(!ni(r))return t(n,i);for(var s=e?r:-1,o=hi(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}function fn(t){return function(e,n,i){for(var r=hi(e),s=i(e),o=s.length,a=t?o:-1;t?a--:++a<o;){var l=s[a];if(n(r[l],l,r)===!1)break}return e}}function pn(t,e){function n(){var r=this&&this!==Jt&&this instanceof n?i:t;return r.apply(e,arguments)}var i=vn(t);return n}function gn(t){return vo&&co?new Xt(t):null}function mn(t){return function(e){for(var n=-1,i=Cs(cs(e)),r=i.length,s="";++n<r;)s=t(s,i[n],n);return s}}function vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Io(t.prototype),i=t.apply(n,e);return Or(i)?i:n}}function _n(t){function e(n,i,r){r&&Jn(n,i,r)&&(i=x);var s=Ln(n,t,x,x,x,x,x,i);return s.placeholder=e.placeholder,s}return e}function yn(t,e){return vr(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(x,n))})}function bn(t,e){return function(n,i,r){if(r&&Jn(n,i,r)&&(i=x),i=Hn(i,r,3),1==i.length){n=Da(n)?n:ci(n);var s=oe(n,i,t,e);if(!n.length||s!==e)return s}return Se(n,i,t,e)}}function wn(t,n){return function(i,r,s){if(r=Hn(r,s,3),Da(i)){var o=e(i,r,n);return o>-1?i[o]:x}return Ee(i,r,t)}}function xn(t){return function(n,i,r){return n&&n.length?(i=Hn(i,r,3),e(n,i,t)):-1}}function kn(t){return function(e,n,i){return n=Hn(n,i,3),Ee(e,n,t,!0)}}function Cn(t){return function(){for(var e,n=arguments.length,i=t?n:-1,r=0,s=Fs(n);t?i--:++i<n;){var o=s[r++]=arguments[i];if("function"!=typeof o)throw new Zs(F);!e&&tt.prototype.thru&&"wrapper"==Bn(o)&&(e=new tt([],!0))}for(i=e?-1:n;++i<n;){o=s[i];var a=Bn(o),l="wrapper"==a?Ho(o):x;e=l&&ei(l[0])&&l[1]==(A|$|D|P)&&!l[4].length&&1==l[9]?e[Bn(l[0])].apply(e,l[3]):1==o.length&&ei(o)?e[a]():e.thru(o)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&Da(i)&&i.length>=L)return e.plant(i).value();for(var r=0,o=n?s[r].apply(this,t):i;++r<n;)o=s[r].call(this,o);return o}}}function Sn(t,e){return function(n,i,r){return"function"==typeof i&&r===x&&Da(n)?t(n,i):e(n,on(i,r,3))}}function Tn(t){return function(e,n,i){return("function"!=typeof n||i!==x)&&(n=on(n,i,3)),t(e,n,ts)}}function $n(t){return function(e,n,i){return("function"!=typeof n||i!==x)&&(n=on(n,i,3)),t(e,n)}}function En(t){return function(e,n,i){var r={};return n=Hn(n,i,3),Ae(e,function(e,i,s){var o=n(e,i,s);i=t?o:i,e=t?e:o,r[i]=e}),r}}function Dn(t){return function(e,n,i){return e=r(e),(t?e:"")+Mn(e,n,i)+(t?"":e)}}function jn(t){var e=vr(function(n,i){var r=m(i,e.placeholder);return Ln(n,t,x,i,r)});return e}function An(t,e){return function(n,i,r,s){var o=arguments.length<3;return"function"==typeof i&&s===x&&Da(n)?t(n,i,r,o):Ve(n,Hn(i,s,4),r,o,e)}}function Pn(t,e,n,i,r,s,o,a,l,u){function c(){for(var y=arguments.length,b=y,w=Fs(y);b--;)w[b]=arguments[b];if(i&&(w=ln(w,i,r)),s&&(w=un(w,s,o)),p||v){var k=c.placeholder,T=m(w,k);if(y-=T.length,u>y){var $=a?ne(a):x,E=xo(u-y,0),A=p?T:x,P=p?x:T,M=p?w:x,O=p?x:w;e|=p?D:j,e&=~(p?j:D),g||(e&=~(C|S));var I=[t,e,n,M,A,O,P,$,l,E],N=Pn.apply(x,I);return ei(t)&&qo(N,I),N.placeholder=k,N}}var L=d?n:this,R=f?L[t]:t;return a&&(w=li(w,a)),h&&l<w.length&&(w.length=l),this&&this!==Jt&&this instanceof c&&(R=_||vn(t)),R.apply(L,w)}var h=e&A,d=e&C,f=e&S,p=e&$,g=e&T,v=e&E,_=f?x:vn(t);return c}function Mn(t,e,n){var i=t.length;if(e=+e,i>=e||!bo(e))return"";var r=e-i;return n=null==n?" ":n+"",ms(n,mo(r/n.length)).slice(0,r)}function On(t,e,n,i){function r(){for(var e=-1,a=arguments.length,l=-1,u=i.length,c=Fs(u+a);++l<u;)c[l]=i[l];for(;a--;)c[l++]=arguments[++e];var h=this&&this!==Jt&&this instanceof r?o:t;return h.apply(s?n:this,c)}var s=e&C,o=vn(t);return r}function In(t){var e=Ws[t];return function(t,n){return n=n===x?0:+n||0,n?(n=lo(10,n),e(t*n)/n):e(t)}}function Nn(t){return function(e,n,i,r){var s=Hn(i);return null==i&&s===be?rn(e,n,t):sn(e,n,s(i,r,1),t)}}function Ln(t,e,n,i,r,s,o,a){var l=e&S;if(!l&&"function"!=typeof t)throw new Zs(F);var u=i?i.length:0;if(u||(e&=~(D|j),i=r=x),u-=r?r.length:0,e&j){var c=i,h=r;i=r=x}var d=l?x:Ho(t),f=[t,e,n,i,r,c,h,s,o,a];if(d&&(ri(f,d),e=f[1],a=f[9]),f[9]=null==a?l?0:t.length:xo(a-u,0)||0,e==C)var p=pn(f[0],f[2]);else p=e!=D&&e!=(C|D)||f[4].length?Pn.apply(x,f):On.apply(x,f);var g=d?Fo:qo;return g(p,f)}function Rn(t,e,n,i,r,s,o){var a=-1,l=t.length,u=e.length;if(l!=u&&!(r&&u>l))return!1;for(;++a<l;){var c=t[a],h=e[a],d=i?i(r?h:c,r?c:h,a):x;if(d!==x){if(d)continue;return!1}if(r){if(!de(e,function(t){return c===t||n(c,t,i,r,s,o)}))return!1}else if(c!==h&&!n(c,h,i,r,s,o))return!1}return!0}function zn(t,e,n){switch(n){case W:case Y:return+t==+e;case G:return t.name==e.name&&t.message==e.message;case Z:return t!=+t?e!=+e:t==+e;case Q:case J:return t==e+""}return!1}function Fn(t,e,n,i,r,s,o){var a=Fa(t),l=a.length,u=Fa(e),c=u.length;if(l!=c&&!r)return!1;for(var h=l;h--;){var d=a[h];if(!(r?d in e:to.call(e,d)))return!1}for(var f=r;++h<l;){d=a[h];var p=t[d],g=e[d],m=i?i(r?g:p,r?p:g,d):x;if(!(m===x?n(p,g,i,r,s,o):m))return!1;f||(f="constructor"==d)}if(!f){var v=t.constructor,_=e.constructor;if(v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _))return!1}return!0}function Hn(t,e,n){var i=U.callback||Ss;return i=i===Ss?be:i,n?i(t,e,n):i}function Bn(t){for(var e=t.name,n=Oo[e],i=n?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==t)return r.name}return e}function qn(t,e,i){var r=U.indexOf||Ci;return r=r===Ci?n:r,t?r(t,e,i):r}function Wn(t){for(var e=es(t),n=e.length;n--;)e[n][2]=ii(e[n][1]);return e}function Yn(t,e){var n=null==t?x:t[e];return Lr(n)?n:x}function Gn(t,e,n){for(var i=-1,r=n.length;++i<r;){var s=n[i],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=ko(e,t+o);break;case"takeRight":t=xo(t,e-o)}}return{start:t,end:e}}function Vn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&to.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Un(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Gs),new e}function Zn(t,e,n){var i=t.constructor;switch(e){case et:return an(t);case W:case Y:return new i(+t);case nt:case it:case rt:case st:case ot:case at:case lt:case ut:case ct:var r=t.buffer;return new i(n?an(r):r,t.byteOffset,t.length);case Z:case J:return new i(t);case Q:var s=new i(t.source,Dt.exec(t));s.lastIndex=t.lastIndex}return s}function Xn(t,e,n){null==t||ti(e,t)||(e=di(e),t=1==e.length?t:Oe(t,Ue(e,0,-1)),e=Ti(e));var i=null==t?t:t[e];return null==i?x:i.apply(t,n)}function Qn(t){return null!=t&&ni(Bo(t))}function Kn(t,e){return t="number"==typeof t||Pt.test(t)?+t:-1,e=null==e?Po:e,t>-1&&t%1==0&&e>t}function Jn(t,e,n){if(!Or(n))return!1;var i=typeof e;if("number"==i?Qn(n)&&Kn(e,n.length):"string"==i&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function ti(t,e){var n=typeof t;if("string"==n&&xt.test(t)||"number"==n)return!0;if(Da(t))return!1;var i=!wt.test(t);return i||null!=e&&t in hi(e)}function ei(t){var e=Bn(t);if(!(e in Ht.prototype))return!1;var n=U[e];if(t===n)return!0;var i=Ho(n);return!!i&&t===i[0]}function ni(t){return"number"==typeof t&&t>-1&&t%1==0&&Po>=t}function ii(t){return t===t&&!Or(t)}function ri(t,e){var n=t[1],i=e[1],r=n|i,s=A>r,o=i==A&&n==$||i==A&&n==P&&t[7].length<=e[8]||i==(A|P)&&n==$;if(!s&&!o)return t;i&C&&(t[2]=e[2],r|=n&C?0:T);var a=e[3];if(a){var l=t[3];t[3]=l?ln(l,a,e[4]):ne(a),t[4]=l?m(t[3],H):ne(e[4])}return a=e[5],a&&(l=t[5],t[5]=l?un(l,a,e[6]):ne(a),t[6]=l?m(t[5],H):ne(e[6])),a=e[7],a&&(t[7]=ne(a)),i&A&&(t[8]=null==t[8]?e[8]:ko(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function si(t,e){return t===x?e:ja(t,e,si)}function oi(t,e){t=hi(t);for(var n=-1,i=e.length,r={};++n<i;){var s=e[n];s in t&&(r[s]=t[s])}return r}function ai(t,e){var n={};return je(t,function(t,i,r){e(t,i,r)&&(n[i]=t)}),n}function li(t,e){for(var n=t.length,i=ko(e.length,n),r=ne(t);i--;){var s=e[i];t[i]=Kn(s,n)?r[s]:x}return t}function ui(t){for(var e=ts(t),n=e.length,i=n&&t.length,r=!!i&&ni(i)&&(Da(t)||Sr(t)),s=-1,o=[];++s<n;){var a=e[s];(r&&Kn(a,i)||to.call(t,a))&&o.push(a)}return o}function ci(t){return null==t?[]:Qn(t)?Or(t)?t:Gs(t):ss(t)}function hi(t){return Or(t)?t:Gs(t)}function di(t){if(Da(t))return t;var e=[];return r(t).replace(kt,function(t,n,i,r){e.push(i?r.replace($t,"$1"):n||t)}),e}function fi(t){return t instanceof Ht?t.clone():new tt(t.__wrapped__,t.__chain__,ne(t.__actions__))}function pi(t,e,n){e=(n?Jn(t,e,n):null==e)?1:xo(_o(e)||1,1);for(var i=0,r=t?t.length:0,s=-1,o=Fs(mo(r/e));r>i;)o[++s]=Ue(t,i,i+=e);return o}function gi(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var s=t[e];s&&(r[++i]=s)}return r}function mi(t,e,n){var i=t?t.length:0;return i?((n?Jn(t,e,n):null==e)&&(e=1),Ue(t,0>e?0:e)):[]}function vi(t,e,n){var i=t?t.length:0;return i?((n?Jn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ue(t,0,0>e?0:e)):[]}function _i(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!0,!0):[]}function yi(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!0):[]}function bi(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Jn(t,e,n)&&(n=0,i=r),Te(t,e,n,i)):[]}function wi(t){return t?t[0]:x}function xi(t,e,n){var i=t?t.length:0;return n&&Jn(t,e,n)&&(e=!1),i?De(t,e):[]}function ki(t){var e=t?t.length:0;return e?De(t,!0):[]}function Ci(t,e,i){var r=t?t.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?xo(r+i,0):i;else if(i){var s=rn(t,e);return r>s&&(e===e?e===t[s]:t[s]!==t[s])?s:-1}return n(t,e,i||0)}function Si(t){return vi(t,1)}function Ti(t){var e=t?t.length:0;return e?t[e-1]:x}function $i(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?xo(i+n,0):ko(n||0,i-1))+1;else if(n){r=rn(t,e,!0)-1;var s=t[r];return(e===e?e===s:s!==s)?r:-1}if(e!==e)return f(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Ei(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=qn(),r=t.length;++n<r;)for(var s=0,o=t[n];(s=i(e,o,s))>-1;)fo.call(e,s,1);return e}function Di(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,s=[],o=t.length;for(e=Hn(e,n,3);++r<o;){var a=t[r];e(a,r,t)&&(i.push(a),s.push(r))}return Ye(t,s),i}function ji(t){return mi(t,1)}function Ai(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Jn(t,e,n)&&(e=0,n=i),Ue(t,e,n)):[]}function Pi(t,e,n){var i=t?t.length:0;return i?((n?Jn(t,e,n):null==e)&&(e=1),Ue(t,0,0>e?0:e)):[]}function Mi(t,e,n){var i=t?t.length:0;return i?((n?Jn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ue(t,0>e?0:e)):[]}function Oi(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!1,!0):[]}function Ii(t,e,n){return t&&t.length?en(t,Hn(e,n,3)):[]}function Ni(t,e,i,r){var s=t?t.length:0;if(!s)return[];null!=e&&"boolean"!=typeof e&&(r=i,i=Jn(t,e,r)?x:e,e=!1);var o=Hn();return(null!=i||o!==be)&&(i=o(i,r,3)),e&&qn()==n?v(t,i):Je(t,i)}function Li(t){if(!t||!t.length)return[];var e=-1,n=0;t=ae(t,function(t){return Qn(t)?(n=xo(t.length,n),!0):void 0});for(var i=Fs(n);++e<n;)i[e]=le(t,qe(e));return i}function Ri(t,e,n){var i=t?t.length:0;if(!i)return[];var r=Li(t);return null==e?r:(e=on(e,n,4),le(r,function(t){return ce(t,e,x,!0)}))}function zi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qn(n))var i=i?ue(ke(i,n),ke(n,i)):n}return i?Je(i):[]}function Fi(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||Da(t[0])||(e=[]);++n<i;){var s=t[n];e?r[s]=e[n]:s&&(r[s[0]]=s[1])}return r}function Hi(t){var e=U(t);return e.__chain__=!0,e}function Bi(t,e,n){return e.call(n,t),t}function qi(t,e,n){return e.call(n,t)}function Wi(){return Hi(this)}function Yi(){return new tt(this.value(),this.__chain__)}function Gi(t){for(var e,n=this;n instanceof K;){var i=fi(n);e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e}function Vi(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof Ht){var n=t;return this.__actions__.length&&(n=new Ht(this)),n=n.reverse(),n.__actions__.push({func:qi,args:[e],thisArg:x}),new tt(n,this.__chain__)}return this.thru(e)}function Ui(){return this.value()+""}function Zi(){return nn(this.__wrapped__,this.__actions__)}function Xi(t,e,n){var i=Da(t)?se:Ce;return n&&Jn(t,e,n)&&(e=x),("function"!=typeof e||n!==x)&&(e=Hn(e,n,3)),i(t,e)}function Qi(t,e,n){var i=Da(t)?ae:$e;return e=Hn(e,n,3),i(t,e)}function Ki(t,e){return ra(t,ze(e))}function Ji(t,e,n,i){var r=t?Bo(t):0;return ni(r)||(t=ss(t),r=t.length),n="number"!=typeof n||i&&Jn(e,n,i)?0:0>n?xo(r+n,0):n||0,"string"==typeof t||!Da(t)&&Br(t)?r>=n&&t.indexOf(e,n)>-1:!!r&&qn(t,e,n)>-1}function tr(t,e,n){var i=Da(t)?le:Re;return e=Hn(e,n,3),i(t,e)}function er(t,e){return tr(t,Ms(e))}function nr(t,e,n){var i=Da(t)?ae:$e;return e=Hn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function ir(t,e,n){if(n?Jn(t,e,n):null==e){t=ci(t);var i=t.length;return i>0?t[Ge(0,i-1)]:x}var r=-1,s=Vr(t),i=s.length,o=i-1;for(e=ko(0>e?0:+e||0,i);++r<e;){var a=Ge(r,o),l=s[a];s[a]=s[r],s[r]=l}return s.length=e,s}function rr(t){return ir(t,Eo)}function sr(t){var e=t?Bo(t):0;return ni(e)?e:Fa(t).length}function or(t,e,n){var i=Da(t)?de:Ze;return n&&Jn(t,e,n)&&(e=x),("function"!=typeof e||n!==x)&&(e=Hn(e,n,3)),i(t,e)}function ar(t,e,n){if(null==t)return[];n&&Jn(t,e,n)&&(e=x);var i=-1;e=Hn(e,n,3);var r=Re(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}});return Xe(r,a)}function lr(t,e,n,i){return null==t?[]:(i&&Jn(e,n,i)&&(n=x),Da(e)||(e=null==e?[]:[e]),Da(n)||(n=null==n?[]:[n]),Qe(t,e,n))}function ur(t,e){return Qi(t,ze(e))}function cr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Zs(F);var n=t;t=e,e=n}return t=bo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function hr(t,e,n){return n&&Jn(t,e,n)&&(e=x),e=t&&null==e?t.length:xo(+e||0,0),Ln(t,A,x,x,x,x,e)}function dr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Zs(F);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=x),n}}function fr(t,e,n){function i(){f&&oo(f),u&&oo(u),g=0,u=f=p=x}function r(e,n){n&&oo(n),u=f=p=x,e&&(g=ga(),c=t.apply(d,l),f||u||(l=d=x))}function s(){var t=e-(ga()-h);0>=t||t>e?r(p,u):f=ho(s,t)}function o(){r(v,f)}function a(){if(l=arguments,h=ga(),d=this,p=v&&(f||!_),m===!1)var n=_&&!f;else{u||_||(g=h);var i=m-(h-g),r=0>=i||i>m;r?(u&&(u=oo(u)),g=h,c=t.apply(d,l)):u||(u=ho(o,i))}return r&&f?f=oo(f):f||e===m||(f=ho(s,e)),n&&(r=!0,c=t.apply(d,l)),!r||f||u||(l=d=x),c}var l,u,c,h,d,f,p,g=0,m=!1,v=!0;if("function"!=typeof t)throw new Zs(F);if(e=0>e?0:+e||0,n===!0){var _=!0;v=!1}else Or(n)&&(_=!!n.leading,m="maxWait"in n&&xo(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return a.cancel=i,a}function pr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Zs(F);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o),o};return n.cache=new pr.Cache,n}function gr(t){if("function"!=typeof t)throw new Zs(F);return function(){return!t.apply(this,arguments)}}function mr(t){return dr(2,t)}function vr(t,e){if("function"!=typeof t)throw new Zs(F);return e=xo(e===x?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=xo(n.length-e,0),s=Fs(r);++i<r;)s[i]=n[e+i];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var o=Fs(e+1);for(i=-1;++i<e;)o[i]=n[i];return o[e]=s,t.apply(this,o)}}function _r(t){if("function"!=typeof t)throw new Zs(F);return function(e){return t.apply(this,e)}}function yr(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Zs(F);return n===!1?i=!1:Or(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fr(t,e,{leading:i,maxWait:+e,trailing:r})}function br(t,e){return e=null==e?$s:e,
Ln(e,D,x,[t],[])}function wr(t,e,n,i){return e&&"boolean"!=typeof e&&Jn(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?we(t,e,on(n,i,1)):we(t,e)}function xr(t,e,n){return"function"==typeof e?we(t,!0,on(e,n,1)):we(t,!0)}function kr(t,e){return t>e}function Cr(t,e){return t>=e}function Sr(t){return p(t)&&Qn(t)&&to.call(t,"callee")&&!uo.call(t,"callee")}function Tr(t){return t===!0||t===!1||p(t)&&no.call(t)==W}function $r(t){return p(t)&&no.call(t)==Y}function Er(t){return!!t&&1===t.nodeType&&p(t)&&!Fr(t)}function Dr(t){return null==t?!0:Qn(t)&&(Da(t)||Br(t)||Sr(t)||p(t)&&Mr(t.splice))?!t.length:!Fa(t).length}function jr(t,e,n,i){n="function"==typeof n?on(n,i,3):x;var r=n?n(t,e):x;return r===x?Ie(t,e,n):!!r}function Ar(t){return p(t)&&"string"==typeof t.message&&no.call(t)==G}function Pr(t){return"number"==typeof t&&bo(t)}function Mr(t){return Or(t)&&no.call(t)==V}function Or(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ir(t,e,n,i){return n="function"==typeof n?on(n,i,3):x,Le(t,Wn(e),n)}function Nr(t){return zr(t)&&t!=+t}function Lr(t){return null==t?!1:Mr(t)?ro.test(Js.call(t)):p(t)&&At.test(t)}function Rr(t){return null===t}function zr(t){return"number"==typeof t||p(t)&&no.call(t)==Z}function Fr(t){var e;if(!p(t)||no.call(t)!=X||Sr(t)||!to.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return je(t,function(t,e){n=e}),n===x||to.call(t,n)}function Hr(t){return Or(t)&&no.call(t)==Q}function Br(t){return"string"==typeof t||p(t)&&no.call(t)==J}function qr(t){return p(t)&&ni(t.length)&&!!zt[no.call(t)]}function Wr(t){return t===x}function Yr(t,e){return e>t}function Gr(t,e){return e>=t}function Vr(t){var e=t?Bo(t):0;return ni(e)?e?ne(t):[]:ss(t)}function Ur(t){return ye(t,ts(t))}function Zr(t,e,n){var i=Io(t);return n&&Jn(t,e,n)&&(e=x),e?ve(i,e):i}function Xr(t){return Me(t,ts(t))}function Qr(t,e,n){var i=null==t?x:Oe(t,di(e),e+"");return i===x?n:i}function Kr(t,e){if(null==t)return!1;var n=to.call(t,e);if(!n&&!ti(e)){if(e=di(e),t=1==e.length?t:Oe(t,Ue(e,0,-1)),null==t)return!1;e=Ti(e),n=to.call(t,e)}return n||ni(t.length)&&Kn(e,t.length)&&(Da(t)||Sr(t))}function Jr(t,e,n){n&&Jn(t,e,n)&&(e=x);for(var i=-1,r=Fa(t),s=r.length,o={};++i<s;){var a=r[i],l=t[a];e?to.call(o,l)?o[l].push(a):o[l]=[a]:o[l]=a}return o}function ts(t){if(null==t)return[];Or(t)||(t=Gs(t));var e=t.length;e=e&&ni(e)&&(Da(t)||Sr(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,s=Fs(e),o=e>0;++i<e;)s[i]=i+"";for(var a in t)o&&Kn(a,e)||"constructor"==a&&(r||!to.call(t,a))||s.push(a);return s}function es(t){t=hi(t);for(var e=-1,n=Fa(t),i=n.length,r=Fs(i);++e<i;){var s=n[e];r[e]=[s,t[s]]}return r}function ns(t,e,n){var i=null==t?x:t[e];return i===x&&(null==t||ti(e,t)||(e=di(e),t=1==e.length?t:Oe(t,Ue(e,0,-1)),i=null==t?x:t[Ti(e)]),i=i===x?n:i),Mr(i)?i.call(t):i}function is(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||ti(e,t)?[i]:di(e);for(var r=-1,s=e.length,o=s-1,a=t;null!=a&&++r<s;){var l=e[r];Or(a)&&(r==o?a[l]=n:null==a[l]&&(a[l]=Kn(e[r+1])?[]:{})),a=a[l]}return t}function rs(t,e,n,i){var r=Da(t)||qr(t);if(e=Hn(e,i,4),null==n)if(r||Or(t)){var s=t.constructor;n=r?Da(t)?new s:[]:Io(Mr(s)?s.prototype:x)}else n={};return(r?ie:Ae)(t,function(t,i,r){return e(n,t,i,r)}),n}function ss(t){return tn(t,Fa(t))}function os(t){return tn(t,ts(t))}function as(t,e,n){return e=+e||0,n===x?(n=e,e=0):n=+n||0,t>=ko(e,n)&&t<xo(e,n)}function ls(t,e,n){n&&Jn(t,e,n)&&(e=n=x);var i=null==t,r=null==e;if(null==n&&(r&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,r=!0)),i&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,n||t%1||e%1){var s=To();return ko(t+s*(e-t+ao("1e-"+((s+"").length-1))),e)}return Ge(t,e)}function us(t){return t=r(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function cs(t){return t=r(t),t&&t.replace(Mt,u).replace(Tt,"")}function hs(t,e,n){t=r(t),e+="";var i=t.length;return n=n===x?i:ko(0>n?0:+n||0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ds(t){return t=r(t),t&&vt.test(t)?t.replace(gt,c):t}function fs(t){return t=r(t),t&&St.test(t)?t.replace(Ct,h):t||"(?:)"}function ps(t,e,n){t=r(t),e=+e;var i=t.length;if(i>=e||!bo(e))return t;var s=(e-i)/2,o=_o(s),a=mo(s);return n=Mn("",a,n),n.slice(0,o)+t+n}function gs(t,e,n){return(n?Jn(t,e,n):null==e)?e=0:e&&(e=+e),t=ys(t),So(t,e||(jt.test(t)?16:10))}function ms(t,e){var n="";if(t=r(t),e=+e,1>e||!t||!bo(e))return n;do e%2&&(n+=t),e=_o(e/2),t+=t;while(e);return n}function vs(t,e,n){return t=r(t),n=null==n?0:ko(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function _s(t,e,n){var i=U.templateSettings;n&&Jn(t,e,n)&&(e=n=x),t=r(t),e=me(ve({},n||e),i,ge);var s,o,a=me(ve({},e.imports),i.imports,ge),l=Fa(a),u=tn(a,l),c=0,h=e.interpolate||Ot,f="__p += '",p=Vs((e.escape||Ot).source+"|"+h.source+"|"+(h===bt?Et:Ot).source+"|"+(e.evaluate||Ot).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Rt+"]")+"\n";t.replace(p,function(e,n,i,r,a,l){return i||(i=r),f+=t.slice(c,l).replace(It,d),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e}),f+="';\n";var m=e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(ht,""):f).replace(dt,"$1").replace(ft,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Qa(function(){return qs(l,g+"return "+f).apply(x,u)});if(v.source=f,Ar(v))throw v;return v}function ys(t,e,n){var i=t;return(t=r(t))?(n?Jn(i,e,n):null==e)?t.slice(_(t),y(t)+1):(e+="",t.slice(s(t,e),o(t,e)+1)):t}function bs(t,e,n){var i=t;return t=r(t),t?(n?Jn(i,e,n):null==e)?t.slice(_(t)):t.slice(s(t,e+"")):t}function ws(t,e,n){var i=t;return t=r(t),t?(n?Jn(i,e,n):null==e)?t.slice(0,y(t)+1):t.slice(0,o(t,e+"")+1):t}function xs(t,e,n){n&&Jn(t,e,n)&&(e=x);var i=M,s=O;if(null!=e)if(Or(e)){var o="separator"in e?e.separator:o;i="length"in e?+e.length||0:i,s="omission"in e?r(e.omission):s}else i=+e||0;if(t=r(t),i>=t.length)return t;var a=i-s.length;if(1>a)return s;var l=t.slice(0,a);if(null==o)return l+s;if(Hr(o)){if(t.slice(a).search(o)){var u,c,h=t.slice(0,a);for(o.global||(o=Vs(o.source,(Dt.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)c=u.index;l=l.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var d=l.lastIndexOf(o);d>-1&&(l=l.slice(0,d))}return l+s}function ks(t){return t=r(t),t&&mt.test(t)?t.replace(pt,b):t}function Cs(t,e,n){return n&&Jn(t,e,n)&&(e=x),t=r(t),t.match(e||Nt)||[]}function Ss(t,e,n){return n&&Jn(t,e,n)&&(e=x),p(t)?Es(t):be(t,e)}function Ts(t){return function(){return t}}function $s(t){return t}function Es(t){return ze(we(t,!0))}function Ds(t,e){return Fe(t,we(e,!0))}function js(t,e,n){if(null==n){var i=Or(e),r=i?Fa(e):x,s=r&&r.length?Me(e,r):x;(s?s.length:i)||(s=!1,n=e,e=t,t=this)}s||(s=Me(e,Fa(e)));var o=!0,a=-1,l=Mr(t),u=s.length;n===!1?o=!1:Or(n)&&"chain"in n&&(o=n.chain);for(;++a<u;){var c=s[a],h=e[c];t[c]=h,l&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(o||n){var i=t(this.__wrapped__),r=i.__actions__=ne(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,ue([this.value()],arguments))}}(h))}return t}function As(){return Jt._=io,this}function Ps(){}function Ms(t){return ti(t)?qe(t):We(t)}function Os(t){return function(e){return Oe(t,di(e),e+"")}}function Is(t,e,n){n&&Jn(t,e,n)&&(e=n=x),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=xo(mo((e-t)/(n||1)),0),s=Fs(r);++i<r;)s[i]=t,t+=n;return s}function Ns(t,e,n){if(t=_o(t),1>t||!bo(t))return[];var i=-1,r=Fs(ko(t,Do));for(e=on(e,n,1);++i<t;)Do>i?r[i]=e(i):e(i);return r}function Ls(t){var e=++eo;return r(t)+e}function Rs(t,e){return(+t||0)+(+e||0)}function zs(t,e,n){return n&&Jn(t,e,n)&&(e=x),e=Hn(e,n,3),1==e.length?fe(Da(t)?t:ci(t),e):Ke(t,e)}g=g?te.defaults(Jt.Object(),g,te.pick(Jt,Lt)):Jt;var Fs=g.Array,Hs=g.Date,Bs=g.Error,qs=g.Function,Ws=g.Math,Ys=g.Number,Gs=g.Object,Vs=g.RegExp,Us=g.String,Zs=g.TypeError,Xs=Fs.prototype,Qs=Gs.prototype,Ks=Us.prototype,Js=qs.prototype.toString,to=Qs.hasOwnProperty,eo=0,no=Qs.toString,io=Jt._,ro=Vs("^"+Js.call(to).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),so=g.ArrayBuffer,oo=g.clearTimeout,ao=g.parseFloat,lo=Ws.pow,uo=Qs.propertyIsEnumerable,co=Yn(g,"Set"),ho=g.setTimeout,fo=Xs.splice,po=g.Uint8Array,go=Yn(g,"WeakMap"),mo=Ws.ceil,vo=Yn(Gs,"create"),_o=Ws.floor,yo=Yn(Fs,"isArray"),bo=g.isFinite,wo=Yn(Gs,"keys"),xo=Ws.max,ko=Ws.min,Co=Yn(Hs,"now"),So=g.parseInt,To=Ws.random,$o=Ys.NEGATIVE_INFINITY,Eo=Ys.POSITIVE_INFINITY,Do=4294967295,jo=Do-1,Ao=Do>>>1,Po=9007199254740991,Mo=go&&new go,Oo={};U.support={};U.templateSettings={escape:_t,evaluate:yt,interpolate:bt,variable:"",imports:{_:U}};var Io=function(){function t(){}return function(e){if(Or(e)){t.prototype=e;var n=new t;t.prototype=x}return n||{}}}(),No=dn(Ae),Lo=dn(Pe,!0),Ro=fn(),zo=fn(!0),Fo=Mo?function(t,e){return Mo.set(t,e),t}:$s,Ho=Mo?function(t){return Mo.get(t)}:Ps,Bo=qe("length"),qo=function(){var t=0,e=0;return function(n,i){var r=ga(),s=N-(r-e);if(e=r,s>0){if(++t>=I)return n}else t=0;return Fo(n,i)}}(),Wo=vr(function(t,e){return p(t)&&Qn(t)?ke(t,De(e,!1,!0)):[]}),Yo=xn(),Go=xn(!0),Vo=vr(function(t){for(var e=t.length,i=e,r=Fs(h),s=qn(),o=s==n,a=[];i--;){var l=t[i]=Qn(l=t[i])?l:[];r[i]=o&&l.length>=120?gn(i&&l):null}var u=t[0],c=-1,h=u?u.length:0,d=r[0];t:for(;++c<h;)if(l=u[c],(d?Qt(d,l):s(a,l,0))<0){for(var i=e;--i;){var f=r[i];if((f?Qt(f,l):s(t[i],l,0))<0)continue t}d&&d.push(l),a.push(l)}return a}),Uo=vr(function(e,n){n=De(n);var i=_e(e,n);return Ye(e,n.sort(t)),i}),Zo=Nn(),Xo=Nn(!0),Qo=vr(function(t){return Je(De(t,!1,!0))}),Ko=vr(function(t,e){return Qn(t)?ke(t,e):[]}),Jo=vr(Li),ta=vr(function(t){var e=t.length,n=e>2?t[e-2]:x,i=e>1?t[e-1]:x;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):x,i=x),t.length=e,Ri(t,n,i)}),ea=vr(function(t){return t=De(t),this.thru(function(e){return ee(Da(e)?e:[hi(e)],t)})}),na=vr(function(t,e){return _e(t,De(e))}),ia=cn(function(t,e,n){to.call(t,n)?++t[n]:t[n]=1}),ra=wn(No),sa=wn(Lo,!0),oa=Sn(ie,No),aa=Sn(re,Lo),la=cn(function(t,e,n){to.call(t,n)?t[n].push(e):t[n]=[e]}),ua=cn(function(t,e,n){t[n]=e}),ca=vr(function(t,e,n){var i=-1,r="function"==typeof e,s=ti(e),o=Qn(t)?Fs(t.length):[];return No(t,function(t){var a=r?e:s&&null!=t?t[e]:x;o[++i]=a?a.apply(t,n):Xn(t,e,n)}),o}),ha=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),da=An(ce,No),fa=An(he,Lo),pa=vr(function(t,e){if(null==t)return[];var n=e[2];return n&&Jn(e[0],e[1],n)&&(e.length=1),Qe(t,De(e),[])}),ga=Co||function(){return(new Hs).getTime()},ma=vr(function(t,e,n){var i=C;if(n.length){var r=m(n,ma.placeholder);i|=D}return Ln(t,i,e,n,r)}),va=vr(function(t,e){e=e.length?De(e):Xr(t);for(var n=-1,i=e.length;++n<i;){var r=e[n];t[r]=Ln(t[r],C,t)}return t}),_a=vr(function(t,e,n){var i=C|S;if(n.length){var r=m(n,_a.placeholder);i|=D}return Ln(e,i,t,n,r)}),ya=_n($),ba=_n(E),wa=vr(function(t,e){return xe(t,1,e)}),xa=vr(function(t,e,n){return xe(t,e,n)}),ka=Cn(),Ca=Cn(!0),Sa=vr(function(t,e){if(e=De(e),"function"!=typeof t||!se(e,i))throw new Zs(F);var n=e.length;return vr(function(i){for(var r=ko(i.length,n);r--;)i[r]=e[r](i[r]);return t.apply(this,i)})}),Ta=jn(D),$a=jn(j),Ea=vr(function(t,e){return Ln(t,P,x,x,x,De(e))}),Da=yo||function(t){return p(t)&&ni(t.length)&&no.call(t)==q},ja=hn(He),Aa=hn(function(t,e,n){return n?me(t,e,n):ve(t,e)}),Pa=yn(Aa,pe),Ma=yn(ja,si),Oa=kn(Ae),Ia=kn(Pe),Na=Tn(Ro),La=Tn(zo),Ra=$n(Ae),za=$n(Pe),Fa=wo?function(t){var e=null==t?x:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Qn(t)?ui(t):Or(t)?wo(t):[]}:ui,Ha=En(!0),Ba=En(),qa=vr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=le(De(e),Us);return oi(t,ke(ts(t),e))}var n=on(e[0],e[1],3);return ai(t,function(t,e,i){return!n(t,e,i)})}),Wa=vr(function(t,e){return null==t?{}:"function"==typeof e[0]?ai(t,on(e[0],e[1],3)):oi(t,De(e))}),Ya=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Ga=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Va=Dn(),Ua=Dn(!0),Za=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xa=mn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Qa=vr(function(t,e){try{return t.apply(x,e)}catch(n){return Ar(n)?n:new Bs(n)}}),Ka=vr(function(t,e){return function(n){return Xn(n,t,e)}}),Ja=vr(function(t,e){return function(n){return Xn(t,n,e)}}),tl=In("ceil"),el=In("floor"),nl=bn(kr,$o),il=bn(Yr,Eo),rl=In("round");return U.prototype=K.prototype,tt.prototype=Io(K.prototype),tt.prototype.constructor=tt,Ht.prototype=Io(K.prototype),Ht.prototype.constructor=Ht,Yt.prototype["delete"]=Gt,Yt.prototype.get=Vt,Yt.prototype.has=Ut,Yt.prototype.set=Zt,Xt.prototype.push=Kt,pr.Cache=Yt,U.after=cr,U.ary=hr,U.assign=Aa,U.at=na,U.before=dr,U.bind=ma,U.bindAll=va,U.bindKey=_a,U.callback=Ss,U.chain=Hi,U.chunk=pi,U.compact=gi,U.constant=Ts,U.countBy=ia,U.create=Zr,U.curry=ya,U.curryRight=ba,U.debounce=fr,U.defaults=Pa,U.defaultsDeep=Ma,U.defer=wa,U.delay=xa,U.difference=Wo,U.drop=mi,U.dropRight=vi,U.dropRightWhile=_i,U.dropWhile=yi,U.fill=bi,U.filter=Qi,U.flatten=xi,U.flattenDeep=ki,U.flow=ka,U.flowRight=Ca,U.forEach=oa,U.forEachRight=aa,U.forIn=Na,U.forInRight=La,U.forOwn=Ra,U.forOwnRight=za,U.functions=Xr,U.groupBy=la,U.indexBy=ua,U.initial=Si,U.intersection=Vo,U.invert=Jr,U.invoke=ca,U.keys=Fa,U.keysIn=ts,U.map=tr,U.mapKeys=Ha,U.mapValues=Ba,U.matches=Es,U.matchesProperty=Ds,U.memoize=pr,U.merge=ja,U.method=Ka,U.methodOf=Ja,U.mixin=js,U.modArgs=Sa,U.negate=gr,U.omit=qa,U.once=mr,U.pairs=es,U.partial=Ta,U.partialRight=$a,U.partition=ha,U.pick=Wa,U.pluck=er,U.property=Ms,U.propertyOf=Os,U.pull=Ei,U.pullAt=Uo,U.range=Is,U.rearg=Ea,U.reject=nr,U.remove=Di,U.rest=ji,U.restParam=vr,U.set=is,U.shuffle=rr,U.slice=Ai,U.sortBy=ar,U.sortByAll=pa,U.sortByOrder=lr,U.spread=_r,U.take=Pi,U.takeRight=Mi,U.takeRightWhile=Oi,U.takeWhile=Ii,U.tap=Bi,U.throttle=yr,U.thru=qi,U.times=Ns,U.toArray=Vr,U.toPlainObject=Ur,U.transform=rs,U.union=Qo,U.uniq=Ni,U.unzip=Li,U.unzipWith=Ri,U.values=ss,U.valuesIn=os,U.where=ur,U.without=Ko,U.wrap=br,U.xor=zi,U.zip=Jo,U.zipObject=Fi,U.zipWith=ta,U.backflow=Ca,U.collect=tr,U.compose=Ca,U.each=oa,U.eachRight=aa,U.extend=Aa,U.iteratee=Ss,U.methods=Xr,U.object=Fi,U.select=Qi,U.tail=ji,U.unique=Ni,js(U,U),U.add=Rs,U.attempt=Qa,U.camelCase=Ya,U.capitalize=us,U.ceil=tl,U.clone=wr,U.cloneDeep=xr,U.deburr=cs,U.endsWith=hs,U.escape=ds,U.escapeRegExp=fs,U.every=Xi,U.find=ra,U.findIndex=Yo,U.findKey=Oa,U.findLast=sa,U.findLastIndex=Go,U.findLastKey=Ia,U.findWhere=Ki,U.first=wi,U.floor=el,U.get=Qr,U.gt=kr,U.gte=Cr,U.has=Kr,U.identity=$s,U.includes=Ji,U.indexOf=Ci,U.inRange=as,U.isArguments=Sr,U.isArray=Da,U.isBoolean=Tr,U.isDate=$r,U.isElement=Er,U.isEmpty=Dr,U.isEqual=jr,U.isError=Ar,U.isFinite=Pr,U.isFunction=Mr,U.isMatch=Ir,U.isNaN=Nr,U.isNative=Lr,U.isNull=Rr,U.isNumber=zr,U.isObject=Or,U.isPlainObject=Fr,U.isRegExp=Hr,U.isString=Br,U.isTypedArray=qr,U.isUndefined=Wr,U.kebabCase=Ga,U.last=Ti,U.lastIndexOf=$i,U.lt=Yr,U.lte=Gr,U.max=nl,U.min=il,U.noConflict=As,U.noop=Ps,U.now=ga,U.pad=ps,U.padLeft=Va,U.padRight=Ua,U.parseInt=gs,U.random=ls,U.reduce=da,U.reduceRight=fa,U.repeat=ms,U.result=ns,U.round=rl,U.runInContext=w,U.size=sr,U.snakeCase=Za,U.some=or,U.sortedIndex=Zo,U.sortedLastIndex=Xo,U.startCase=Xa,U.startsWith=vs,U.sum=zs,U.template=_s,U.trim=ys,U.trimLeft=bs,U.trimRight=ws,U.trunc=xs,U.unescape=ks,U.uniqueId=Ls,U.words=Cs,U.all=Xi,U.any=or,U.contains=Ji,U.eq=jr,U.detect=ra,U.foldl=da,U.foldr=fa,U.head=wi,U.include=Ji,U.inject=da,js(U,function(){var t={};return Ae(U,function(e,n){U.prototype[n]||(t[n]=e)}),t}(),!1),U.sample=ir,U.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ir(e,t)}):ir(this.value())},U.VERSION=k,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){U[t].placeholder=U}),ie(["drop","take"],function(t,e){Ht.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new Ht(this);n=null==n?1:xo(_o(n)||0,0);var r=this.clone();return i?r.__takeCount__=ko(r.__takeCount__,n):r.__views__.push({size:n,type:t+(r.__dir__<0?"Right":"")}),r},Ht.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ie(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=z;Ht.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:Hn(t,e,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),ie(["first","last"],function(t,e){var n="take"+(e?"Right":"");Ht.prototype[t]=function(){return this[n](1).value()[0]}}),ie(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");Ht.prototype[t]=function(){return this.__filtered__?new Ht(this):this[n](1)}}),ie(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?ze:Ms;Ht.prototype[t]=function(t){return this[n](i(t))}}),Ht.prototype.compact=function(){return this.filter($s)},Ht.prototype.reject=function(t,e){return t=Hn(t,e,1),this.filter(function(e){return!t(e)})},Ht.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new Ht(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==x&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},Ht.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Ht.prototype.toArray=function(){return this.take(Eo)},Ae(Ht.prototype,function(t,e){var n=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e),r=U[i?"take"+("last"==e?"Right":""):e];r&&(U.prototype[e]=function(){var e=i?[1]:arguments,s=this.__chain__,o=this.__wrapped__,a=!!this.__actions__.length,l=o instanceof Ht,u=e[0],c=l||Da(o);c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=function(t){return i&&s?r(t,1)[0]:r.apply(x,ue([t],e))},d={func:qi,args:[h],thisArg:x},f=l&&!a;if(i&&!s)return f?(o=o.clone(),o.__actions__.push(d),t.call(o)):r.call(x,this.value())[0];if(!i&&c){o=f?o:new Ht(this);var p=t.apply(o,e);return p.__actions__.push(d),new tt(p,s)}return this.thru(h)})}),ie(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Ks:Xs)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);U.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),Ae(Ht.prototype,function(t,e){var n=U[e];if(n){var i=n.name,r=Oo[i]||(Oo[i]=[]);r.push({name:e,func:n})}}),Oo[Pn(x,S).name]=[{name:"wrapper",func:x}],Ht.prototype.clone=Bt,Ht.prototype.reverse=qt,Ht.prototype.value=Wt,U.prototype.chain=Wi,U.prototype.commit=Yi,U.prototype.concat=ea,U.prototype.plant=Gi,U.prototype.reverse=Vi,U.prototype.toString=Ui,U.prototype.run=U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=Zi,U.prototype.collect=U.prototype.map,U.prototype.head=U.prototype.first,U.prototype.select=U.prototype.filter,U.prototype.tail=U.prototype.rest,U}var x,k="3.10.0",C=1,S=2,T=4,$=8,E=16,D=32,j=64,A=128,P=256,M=30,O="...",I=150,N=16,L=200,R=1,z=2,F="Expected a function",H="__lodash_placeholder__",B="[object Arguments]",q="[object Array]",W="[object Boolean]",Y="[object Date]",G="[object Error]",V="[object Function]",U="[object Map]",Z="[object Number]",X="[object Object]",Q="[object RegExp]",K="[object Set]",J="[object String]",tt="[object WeakMap]",et="[object ArrayBuffer]",nt="[object Float32Array]",it="[object Float64Array]",rt="[object Int8Array]",st="[object Int16Array]",ot="[object Int32Array]",at="[object Uint8Array]",lt="[object Uint8ClampedArray]",ut="[object Uint16Array]",ct="[object Uint32Array]",ht=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,ft=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39|#96);/g,gt=/[&<>"'`]/g,mt=RegExp(pt.source),vt=RegExp(gt.source),_t=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,xt=/^\w*$/,kt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ct=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,St=RegExp(Ct.source),Tt=/[\u0300-\u036f\ufe20-\ufe23]/g,$t=/\\(\\)?/g,Et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,jt=/^0[xX]/,At=/^\[object .+?Constructor\]$/,Pt=/^\d+$/,Mt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ot=/($^)/,It=/['\n\r\u2028\u2029\\]/g,Nt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Lt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Rt=-1,zt={};zt[nt]=zt[it]=zt[rt]=zt[st]=zt[ot]=zt[at]=zt[lt]=zt[ut]=zt[ct]=!0,zt[B]=zt[q]=zt[et]=zt[W]=zt[Y]=zt[G]=zt[V]=zt[U]=zt[Z]=zt[X]=zt[Q]=zt[K]=zt[J]=zt[tt]=!1;var Ft={};Ft[B]=Ft[q]=Ft[et]=Ft[W]=Ft[Y]=Ft[nt]=Ft[it]=Ft[rt]=Ft[st]=Ft[ot]=Ft[Z]=Ft[X]=Ft[Q]=Ft[J]=Ft[at]=Ft[lt]=Ft[ut]=Ft[ct]=!0,Ft[G]=Ft[V]=Ft[U]=Ft[K]=Ft[tt]=!1;var Ht={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},qt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wt={"function":!0,object:!0},Yt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=Wt[typeof exports]&&exports&&!exports.nodeType&&exports,Ut=Wt[typeof module]&&module&&!module.nodeType&&module,Zt=Vt&&Ut&&"object"==typeof global&&global&&global.Object&&global,Xt=Wt[typeof self]&&self&&self.Object&&self,Qt=Wt[typeof window]&&window&&window.Object&&window,Kt=Ut&&Ut.exports===Vt&&Vt,Jt=Zt||Qt!==(this&&this.window)&&Qt||Xt||this,te=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Jt._=te,define(function(){return te})):Vt&&Ut?Kt?(Ut.exports=te)._=te:Vt._=te:Jt._=te}.call(this),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Kn.apply(null,arguments)}function e(t){Kn=t}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function a(t,e,n,i){return Ot(t,e,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function u(t){return null==t._pf&&(t._pf=l()),t._pf}function c(t){if(null==t._isValid){var e=u(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function h(t){var e=a(NaN);return null!=t?o(u(e),t):u(e).userInvalidated=!0,e}function d(t){return void 0===t}function f(t,e){var n,i,r;if(d(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),d(e._i)||(t._i=e._i),d(e._f)||(t._f=e._f),d(e._l)||(t._l=e._l),d(e._strict)||(t._strict=e._strict),d(e._tzm)||(t._tzm=e._tzm),d(e._isUTC)||(t._isUTC=e._isUTC),d(e._offset)||(t._offset=e._offset),d(e._pf)||(t._pf=u(e)),d(e._locale)||(t._locale=e._locale),Jn.length>0)for(n in Jn)i=Jn[n],r=e[i],d(r)||(t[i]=r);return t}function p(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),ti===!1&&(ti=!0,t.updateOffset(this),ti=!1)}function g(t){return t instanceof p||null!=t&&null!=t._isAMomentObject}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=m(e)),n}function _(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&v(t[i])!==v(e[i]))&&o++;return o+s}function y(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function b(t,e){var n=!0;return o(function(){return n&&(y(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function w(t,e){ei[t]||(y(e),ei[t]=!0)}function x(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function k(t){return"[object Object]"===Object.prototype.toString.call(t)}function C(t){var e,n;for(n in t)e=t[n],x(e)?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function S(t,e){var n,i=o({},t);for(n in e)s(e,n)&&(k(t[n])&&k(e[n])?(i[n]={},o(i[n],t[n]),o(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);return i}function T(t){null!=t&&this.set(t)}function $(t){return t?t.toLowerCase().replace("_","-"):t}function E(t){for(var e,n,i,r,s=0;s<t.length;){for(r=$(t[s]).split("-"),e=r.length,n=$(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=D(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&_(r,n,!0)>=e-1)break;e--}s++}return null}function D(t){var e=null;if(!ii[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=ni._abbr,require("./locale/"+t),j(e)}catch(n){}return ii[t]}function j(t,e){var n;return t&&(n=d(e)?M(t):A(t,e),n&&(ni=n)),ni._abbr}function A(t,e){return null!==e?(e.abbr=t,null!=ii[t]?(w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),e=S(ii[t]._config,e)):null!=e.parentLocale&&(null!=ii[e.parentLocale]?e=S(ii[e.parentLocale]._config,e):w("parentLocaleUndefined","specified parentLocale is not defined yet")),ii[t]=new T(e),j(t),ii[t]):(delete ii[t],null)}function P(t,e){if(null!=e){var n;null!=ii[t]&&(e=S(ii[t]._config,e)),n=new T(e),n.parentLocale=ii[t],ii[t]=n,j(t)}else null!=ii[t]&&(null!=ii[t].parentLocale?ii[t]=ii[t].parentLocale:null!=ii[t]&&delete ii[t]);return ii[t]}function M(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ni;if(!n(t)){if(e=D(t))return e;t=[t]}return E(t)}function O(){return Object.keys(ii)}function I(t,e){var n=t.toLowerCase();ri[n]=ri[n+"s"]=ri[e]=t}function N(t){return"string"==typeof t?ri[t]||ri[t.toLowerCase()]:void 0}function L(t){var e,n,i={};for(n in t)s(t,n)&&(e=N(n),e&&(i[e]=t[n]));return i}function R(e,n){return function(i){return null!=i?(F(this,e,i),t.updateOffset(this,n),this):z(this,e)}}function z(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function F(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function H(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=N(t),x(this[t]))return this[t](e);return this}function B(t,e,n){var i=""+Math.abs(t),r=e-i.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function q(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(li[t]=r),e&&(li[e[0]]=function(){return B(r.apply(this,arguments),e[1],e[2])}),n&&(li[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Y(t){var e,n,i=t.match(si);for(e=0,n=i.length;n>e;e++)li[i[e]]?i[e]=li[i[e]]:i[e]=W(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function G(t,e){return t.isValid()?(e=V(e,t.localeData()),ai[e]=ai[e]||Y(e),ai[e](t)):t.localeData().invalidDate()}function V(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(oi.lastIndex=0;i>=0&&oi.test(t);)t=t.replace(oi,n),oi.lastIndex=0,i-=1;return t}function U(t,e,n){Ti[t]=x(e)?e:function(t,i){return t&&n?n:e}}function Z(t,e){return s(Ti,t)?Ti[t](e._strict,e._locale):new RegExp(X(t))}function X(t){return Q(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}))}function Q(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=v(t)}),n=0;n<t.length;n++)$i[t[n]]=i}function J(t,e){K(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function tt(t,e,n){null!=e&&s($i,t)&&$i[t](e,n._a,n,t)}function et(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function nt(t,e){return n(this._months)?this._months[t.month()]:this._months[Li.test(e)?"format":"standalone"][t.month()]}function it(t,e){return n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Li.test(e)?"format":"standalone"][t.month()]}function rt(t,e,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function st(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=v(e);else if(e=t.localeData().monthsParse(e),"number"!=typeof e)return t;return n=Math.min(t.date(),et(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function ot(e){return null!=e?(st(this,e),t.updateOffset(this,!0),this):z(this,"Month")}function at(){return et(this.year(),this.month())}function lt(t){return this._monthsParseExact?(s(this,"_monthsRegex")||ct.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex}function ut(t){return this._monthsParseExact?(s(this,"_monthsRegex")||ct.call(this),t?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex}function ct(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],s=[];for(e=0;12>e;e++)n=a([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),s.sort(t),e=0;12>e;e++)i[e]=Q(i[e]),r[e]=Q(r[e]),s[e]=Q(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")$","i")}function ht(t){var e,n=t._a;return n&&-2===u(t).overflow&&(e=n[Di]<0||n[Di]>11?Di:n[ji]<1||n[ji]>et(n[Ei],n[Di])?ji:n[Ai]<0||n[Ai]>24||24===n[Ai]&&(0!==n[Pi]||0!==n[Mi]||0!==n[Oi])?Ai:n[Pi]<0||n[Pi]>59?Pi:n[Mi]<0||n[Mi]>59?Mi:n[Oi]<0||n[Oi]>999?Oi:-1,u(t)._overflowDayOfYear&&(Ei>e||e>ji)&&(e=ji),u(t)._overflowWeeks&&-1===e&&(e=Ii),u(t)._overflowWeekday&&-1===e&&(e=Ni),u(t).overflow=e),t}function dt(t){var e,n,i,r,s,o,a=t._i,l=Bi.exec(a)||qi.exec(a);if(l){for(u(t).iso=!0,e=0,n=Yi.length;n>e;e++)if(Yi[e][1].exec(l[1])){r=Yi[e][0],i=Yi[e][2]!==!1;break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=Gi.length;n>e;e++)if(Gi[e][1].exec(l[3])){s=(l[2]||" ")+Gi[e][0];break}if(null==s)return void(t._isValid=!1)}if(!i&&null!=s)return void(t._isValid=!1);if(l[4]){
if(!Wi.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=r+(s||"")+(o||""),$t(t)}else t._isValid=!1}function ft(e){var n=Vi.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(dt(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function pt(t,e,n,i,r,s,o){var a=new Date(t,e,n,i,r,s,o);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function gt(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function mt(t){return vt(t)?366:365}function vt(t){return t%4===0&&t%100!==0||t%400===0}function _t(){return vt(this.year())}function yt(t,e,n){var i=7+e-n,r=(7+gt(t,0,i).getUTCDay()-e)%7;return-r+i-1}function bt(t,e,n,i,r){var s,o,a=(7+n-i)%7,l=yt(t,i,r),u=1+7*(e-1)+a+l;return 0>=u?(s=t-1,o=mt(s)+u):u>mt(t)?(s=t+1,o=u-mt(t)):(s=t,o=u),{year:s,dayOfYear:o}}function wt(t,e,n){var i,r,s=yt(t.year(),e,n),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return 1>o?(r=t.year()-1,i=o+xt(r,e,n)):o>xt(t.year(),e,n)?(i=o-xt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=o),{week:i,year:r}}function xt(t,e,n){var i=yt(t,e,n),r=yt(t+1,e,n);return(mt(t)-i+r)/7}function kt(t,e,n){return null!=t?t:null!=e?e:n}function Ct(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function St(t){var e,n,i,r,s=[];if(!t._d){for(i=Ct(t),t._w&&null==t._a[ji]&&null==t._a[Di]&&Tt(t),t._dayOfYear&&(r=kt(t._a[Ei],i[Ei]),t._dayOfYear>mt(r)&&(u(t)._overflowDayOfYear=!0),n=gt(r,0,t._dayOfYear),t._a[Di]=n.getUTCMonth(),t._a[ji]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Ai]&&0===t._a[Pi]&&0===t._a[Mi]&&0===t._a[Oi]&&(t._nextDay=!0,t._a[Ai]=0),t._d=(t._useUTC?gt:pt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ai]=24)}}function Tt(t){var e,n,i,r,s,o,a,l;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,o=4,n=kt(e.GG,t._a[Ei],wt(It(),1,4).year),i=kt(e.W,1),r=kt(e.E,1),(1>r||r>7)&&(l=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,n=kt(e.gg,t._a[Ei],wt(It(),s,o).year),i=kt(e.w,1),null!=e.d?(r=e.d,(0>r||r>6)&&(l=!0)):null!=e.e?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s),1>i||i>xt(n,s,o)?u(t)._overflowWeeks=!0:null!=l?u(t)._overflowWeekday=!0:(a=bt(n,i,r,s,o),t._a[Ei]=a.year,t._dayOfYear=a.dayOfYear)}function $t(e){if(e._f===t.ISO_8601)return void dt(e);e._a=[],u(e).empty=!0;var n,i,r,s,o,a=""+e._i,l=a.length,c=0;for(r=V(e._f,e._locale).match(si)||[],n=0;n<r.length;n++)s=r[n],i=(a.match(Z(s,e))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&u(e).unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),c+=i.length),li[s]?(i?u(e).empty=!1:u(e).unusedTokens.push(s),tt(s,i,e)):e._strict&&!i&&u(e).unusedTokens.push(s);u(e).charsLeftOver=l-c,a.length>0&&u(e).unusedInput.push(a),u(e).bigHour===!0&&e._a[Ai]<=12&&e._a[Ai]>0&&(u(e).bigHour=void 0),e._a[Ai]=Et(e._locale,e._a[Ai],e._meridiem),St(e),ht(e)}function Et(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function Dt(t){var e,n,i,r,s;if(0===t._f.length)return u(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=f({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],$t(e),c(e)&&(s+=u(e).charsLeftOver,s+=10*u(e).unusedTokens.length,u(e).score=s,(null==i||i>s)&&(i=s,n=e));o(t,n||e)}function jt(t){if(!t._d){var e=L(t._i);t._a=r([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),St(t)}}function At(t){var e=new p(ht(Pt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Pt(t){var e=t._i,r=t._f;return t._locale=t._locale||M(t._l),null===e||void 0===r&&""===e?h({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),g(e)?new p(ht(e)):(n(r)?Dt(t):r?$t(t):i(e)?t._d=e:Mt(t),c(t)||(t._d=null),t))}function Mt(e){var s=e._i;void 0===s?e._d=new Date(t.now()):i(s)?e._d=new Date(+s):"string"==typeof s?ft(e):n(s)?(e._a=r(s.slice(0),function(t){return parseInt(t,10)}),St(e)):"object"==typeof s?jt(e):"number"==typeof s?e._d=new Date(s):t.createFromInputFallback(e)}function Ot(t,e,n,i,r){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=t,s._f=e,s._strict=i,At(s)}function It(t,e,n,i){return Ot(t,e,n,i,!1)}function Nt(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return It();for(i=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](i))&&(i=e[r]);return i}function Lt(){var t=[].slice.call(arguments,0);return Nt("isBefore",t)}function Rt(){var t=[].slice.call(arguments,0);return Nt("isAfter",t)}function zt(t){var e=L(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=M(),this._bubble()}function Ft(t){return t instanceof zt}function Ht(t,e){q(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+B(~~(t/60),2)+e+B(~~t%60,2)})}function Bt(t,e){var n=(e||"").match(t)||[],i=n[n.length-1]||[],r=(i+"").match(Ki)||["-",0,0],s=+(60*r[1])+v(r[2]);return"+"===r[0]?s:-s}function qt(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(g(e)||i(e)?+e:+It(e))-+r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):It(e).local()}function Wt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Yt(e,n){var i,r=this._offset||0;return this.isValid()?null!=e?("string"==typeof e?e=Bt(ki,e):Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=Wt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?le(this,ne(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Wt(this):null!=e?this:NaN}function Gt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Vt(t){return this.utcOffset(0,t)}function Ut(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Wt(this),"m")),this}function Zt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Bt(xi,this._i)),this}function Xt(t){return this.isValid()?(t=t?It(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Qt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Kt(){if(!d(this._isDSTShifted))return this._isDSTShifted;var t={};if(f(t,this),t=Pt(t),t._a){var e=t._isUTC?a(t._a):It(t._a);this._isDSTShifted=this.isValid()&&_(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jt(){return this.isValid()?!this._isUTC:!1}function te(){return this.isValid()?this._isUTC:!1}function ee(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ne(t,e){var n,i,r,o=t,a=null;return Ft(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=Ji.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:v(a[ji])*n,h:v(a[Ai])*n,m:v(a[Pi])*n,s:v(a[Mi])*n,ms:v(a[Oi])*n}):(a=tr.exec(t))?(n="-"===a[1]?-1:1,o={y:ie(a[2],n),M:ie(a[3],n),w:ie(a[4],n),d:ie(a[5],n),h:ie(a[6],n),m:ie(a[7],n),s:ie(a[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=se(It(o.from),It(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new zt(o),Ft(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function ie(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function re(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function se(t,e){var n;return t.isValid()&&e.isValid()?(e=qt(e,t),t.isBefore(e)?n=re(t,e):(n=re(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function oe(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function ae(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(w(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=ne(n,i),le(this,r,t),this}}function le(e,n,i,r){var s=n._milliseconds,o=oe(n._days),a=oe(n._months);e.isValid()&&(r=null==r?!0:r,s&&e._d.setTime(+e._d+s*i),o&&F(e,"Date",z(e,"Date")+o*i),a&&st(e,z(e,"Month")+a*i),r&&t.updateOffset(e,o||a))}function ue(t,e){var n=t||It(),i=qt(n,this).startOf("day"),r=this.diff(i,"days",!0),s=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse",o=e&&(x(e[s])?e[s]():e[s]);return this.format(o||this.localeData().calendar(s,this,It(n)))}function ce(){return new p(this)}function he(t,e){var n=g(t)?t:It(t);return this.isValid()&&n.isValid()?(e=N(d(e)?"millisecond":e),"millisecond"===e?+this>+n:+n<+this.clone().startOf(e)):!1}function de(t,e){var n=g(t)?t:It(t);return this.isValid()&&n.isValid()?(e=N(d(e)?"millisecond":e),"millisecond"===e?+n>+this:+this.clone().endOf(e)<+n):!1}function fe(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function pe(t,e){var n,i=g(t)?t:It(t);return this.isValid()&&i.isValid()?(e=N(e||"millisecond"),"millisecond"===e?+this===+i:(n=+i,+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))):!1}function ge(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function me(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ve(t,e,n){var i,r,s,o;return this.isValid()?(i=qt(t,this),i.isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),e=N(e),"year"===e||"month"===e||"quarter"===e?(o=_e(this,i),"quarter"===e?o/=3:"year"===e&&(o/=12)):(s=this-i,o="second"===e?s/1e3:"minute"===e?s/6e4:"hour"===e?s/36e5:"day"===e?(s-r)/864e5:"week"===e?(s-r)/6048e5:s),n?o:m(o)):NaN):NaN}function _e(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)}function ye(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function be(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?x(Date.prototype.toISOString)?this.toDate().toISOString():G(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function we(e){var n=G(this,e||t.defaultFormat);return this.localeData().postformat(n)}function xe(t,e){return this.isValid()&&(g(t)&&t.isValid()||It(t).isValid())?ne({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ke(t){return this.from(It(),t)}function Ce(t,e){return this.isValid()&&(g(t)&&t.isValid()||It(t).isValid())?ne({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Se(t){return this.to(It(),t)}function Te(t){var e;return void 0===t?this._locale._abbr:(e=M(t),null!=e&&(this._locale=e),this)}function $e(){return this._locale}function Ee(t){switch(t=N(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function De(t){return t=N(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function je(){return+this._d-6e4*(this._offset||0)}function Ae(){return Math.floor(+this/1e3)}function Pe(){return this._offset?new Date(+this):this._d}function Me(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Oe(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Ie(){return this.isValid()?this.toISOString():null}function Ne(){return c(this)}function Le(){return o({},u(this))}function Re(){return u(this).overflow}function ze(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fe(t,e){q(0,[t,t.length],0,e)}function He(t){return Ye.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Be(t){return Ye.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function qe(){return xt(this.year(),1,4)}function We(){var t=this.localeData()._week;return xt(this.year(),t.dow,t.doy)}function Ye(t,e,n,i,r){var s;return null==t?wt(this,i,r).year:(s=xt(t,i,r),e>s&&(e=s),Ge.call(this,t,e,n,i,r))}function Ge(t,e,n,i,r){var s=bt(t,e,n,i,r),o=gt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ve(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ue(t){return wt(t,this._week.dow,this._week.doy).week}function Ze(){return this._week.dow}function Xe(){return this._week.doy}function Qe(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ke(t){var e=wt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Je(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function tn(t,e){return n(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]}function en(t){return this._weekdaysShort[t.day()]}function nn(t){return this._weekdaysMin[t.day()]}function rn(t,e,n){var i,r,s;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;7>i;i++){if(r=It([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function sn(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Je(t,this.localeData()),this.add(t-e,"d")):e}function on(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function an(t){return this.isValid()?null==t?this.day()||7:this.day(this.day()%7?t:t-7):null!=t?this:NaN}function ln(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function un(){return this.hours()%12||12}function cn(t,e){q(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function hn(t,e){return e._meridiemParse}function dn(t){return"p"===(t+"").toLowerCase().charAt(0)}function fn(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function pn(t,e){e[Oi]=v(1e3*("0."+t))}function gn(){return this._isUTC?"UTC":""}function mn(){return this._isUTC?"Coordinated Universal Time":""}function vn(t){return It(1e3*t)}function _n(){return It.apply(null,arguments).parseZone()}function yn(t,e,n){var i=this._calendar[t];return x(i)?i.call(e,n):i}function bn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function wn(){return this._invalidDate}function xn(t){return this._ordinal.replace("%d",t)}function kn(t){return t}function Cn(t,e,n,i){var r=this._relativeTime[n];return x(r)?r(t,e,n,i):r.replace(/%d/i,t)}function Sn(t,e){var n=this._relativeTime[t>0?"future":"past"];return x(n)?n(e):n.replace(/%s/i,e)}function Tn(t,e,n,i){var r=M(),s=a().set(i,e);return r[n](s,t)}function $n(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return Tn(t,e,n,r);var s,o=[];for(s=0;i>s;s++)o[s]=Tn(t,s,n,r);return o}function En(t,e){return $n(t,e,"months",12,"month")}function Dn(t,e){return $n(t,e,"monthsShort",12,"month")}function jn(t,e){return $n(t,e,"weekdays",7,"day")}function An(t,e){return $n(t,e,"weekdaysShort",7,"day")}function Pn(t,e){return $n(t,e,"weekdaysMin",7,"day")}function Mn(){var t=this._data;return this._milliseconds=Cr(this._milliseconds),this._days=Cr(this._days),this._months=Cr(this._months),t.milliseconds=Cr(t.milliseconds),t.seconds=Cr(t.seconds),t.minutes=Cr(t.minutes),t.hours=Cr(t.hours),t.months=Cr(t.months),t.years=Cr(t.years),this}function On(t,e,n,i){var r=ne(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function In(t,e){return On(this,t,e,1)}function Nn(t,e){return On(this,t,e,-1)}function Ln(t){return 0>t?Math.floor(t):Math.ceil(t)}function Rn(){var t,e,n,i,r,s=this._milliseconds,o=this._days,a=this._months,l=this._data;return s>=0&&o>=0&&a>=0||0>=s&&0>=o&&0>=a||(s+=864e5*Ln(Fn(a)+o),o=0,a=0),l.milliseconds=s%1e3,t=m(s/1e3),l.seconds=t%60,e=m(t/60),l.minutes=e%60,n=m(e/60),l.hours=n%24,o+=m(n/24),r=m(zn(o)),a+=r,o-=Ln(Fn(r)),i=m(a/12),a%=12,l.days=o,l.months=a,l.years=i,this}function zn(t){return 4800*t/146097}function Fn(t){return 146097*t/4800}function Hn(t){var e,n,i=this._milliseconds;if(t=N(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+zn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Fn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Bn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)}function qn(t){return function(){return this.as(t)}}function Wn(t){return t=N(t),this[t+"s"]()}function Yn(t){return function(){return this._data[t]}}function Gn(){return m(this.days()/7)}function Vn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Un(t,e,n){var i=ne(t).abs(),r=Fr(i.as("s")),s=Fr(i.as("m")),o=Fr(i.as("h")),a=Fr(i.as("d")),l=Fr(i.as("M")),u=Fr(i.as("y")),c=r<Hr.s&&["s",r]||1>=s&&["m"]||s<Hr.m&&["mm",s]||1>=o&&["h"]||o<Hr.h&&["hh",o]||1>=a&&["d"]||a<Hr.d&&["dd",a]||1>=l&&["M"]||l<Hr.M&&["MM",l]||1>=u&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,Vn.apply(null,c)}function Zn(t,e){return void 0===Hr[t]?!1:void 0===e?Hr[t]:(Hr[t]=e,!0)}function Xn(t){var e=this.localeData(),n=Un(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Qn(){var t,e,n,i=Br(this._milliseconds)/1e3,r=Br(this._days),s=Br(this._months);t=m(i/60),e=m(t/60),i%=60,t%=60,n=m(s/12),s%=12;var o=n,a=s,l=r,u=e,c=t,h=i,d=this.asSeconds();return d?(0>d?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(u||c||h?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(h?h+"S":""):"P0D"}var Kn,Jn=t.momentProperties=[],ti=!1,ei={};t.suppressDeprecationWarnings=!1;var ni,ii={},ri={},si=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,oi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ai={},li={},ui=/\d/,ci=/\d\d/,hi=/\d{3}/,di=/\d{4}/,fi=/[+-]?\d{6}/,pi=/\d\d?/,gi=/\d\d\d\d?/,mi=/\d\d\d\d\d\d?/,vi=/\d{1,3}/,_i=/\d{1,4}/,yi=/[+-]?\d{1,6}/,bi=/\d+/,wi=/[+-]?\d+/,xi=/Z|[+-]\d\d:?\d\d/gi,ki=/Z|[+-]\d\d(?::?\d\d)?/gi,Ci=/[+-]?\d+(\.\d{1,3})?/,Si=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ti={},$i={},Ei=0,Di=1,ji=2,Ai=3,Pi=4,Mi=5,Oi=6,Ii=7,Ni=8;q("M",["MM",2],"Mo",function(){return this.month()+1}),q("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),q("MMMM",0,0,function(t){return this.localeData().months(this,t)}),I("month","M"),U("M",pi),U("MM",pi,ci),U("MMM",function(t,e){return e.monthsShortRegex(t)}),U("MMMM",function(t,e){return e.monthsRegex(t)}),K(["M","MM"],function(t,e){e[Di]=v(t)-1}),K(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[Di]=r:u(n).invalidMonth=t});var Li=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ri="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),zi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Fi=Si,Hi=Si,Bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,qi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Wi=/Z|[+-]\d\d(?::?\d\d)?/,Yi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Gi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vi=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=b("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),q("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),q(0,["YY",2],0,function(){return this.year()%100}),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),I("year","y"),U("Y",wi),U("YY",pi,ci),U("YYYY",_i,di),U("YYYYY",yi,fi),U("YYYYYY",yi,fi),K(["YYYYY","YYYYYY"],Ei),K("YYYY",function(e,n){n[Ei]=2===e.length?t.parseTwoDigitYear(e):v(e)}),K("YY",function(e,n){n[Ei]=t.parseTwoDigitYear(e)}),K("Y",function(t,e){e[Ei]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)};var Ui=R("FullYear",!1);t.ISO_8601=function(){};var Zi=b("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=It.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:h()}),Xi=b("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=It.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:h()}),Qi=function(){return Date.now?Date.now():+new Date};Ht("Z",":"),Ht("ZZ",""),U("Z",ki),U("ZZ",ki),K(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Bt(ki,t)});var Ki=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Ji=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,tr=/^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;ne.fn=zt.prototype;var er=ae(1,"add"),nr=ae(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var ir=b("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});q(0,["gg",2],0,function(){return this.weekYear()%100}),q(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fe("gggg","weekYear"),Fe("ggggg","weekYear"),Fe("GGGG","isoWeekYear"),Fe("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),U("G",wi),U("g",wi),U("GG",pi,ci),U("gg",pi,ci),U("GGGG",_i,di),U("gggg",_i,di),U("GGGGG",yi,fi),U("ggggg",yi,fi),J(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=v(t)}),J(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),q("Q",0,"Qo","quarter"),I("quarter","Q"),U("Q",ui),K("Q",function(t,e){e[Di]=3*(v(t)-1)}),q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),U("w",pi),U("ww",pi,ci),U("W",pi),U("WW",pi,ci),J(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=v(t)});var rr={dow:0,doy:6};q("D",["DD",2],"Do","date"),I("date","D"),U("D",pi),U("DD",pi,ci),U("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),K(["D","DD"],ji),K("Do",function(t,e){e[ji]=v(t.match(pi)[0],10)});var sr=R("Date",!0);q("d",0,"do","day"),q("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),q("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),q("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),U("d",pi),U("e",pi),U("E",pi),U("dd",Si),U("ddd",Si),U("dddd",Si),J(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:u(n).invalidWeekday=t}),J(["d","e","E"],function(t,e,n,i){e[i]=v(t)});var or="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ar="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),lr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");q("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),U("DDD",vi),U("DDDD",hi),K(["DDD","DDDD"],function(t,e,n){n._dayOfYear=v(t)}),q("H",["HH",2],0,"hour"),q("h",["hh",2],0,un),q("hmm",0,0,function(){return""+un.apply(this)+B(this.minutes(),2)}),q("hmmss",0,0,function(){return""+un.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),q("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),q("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),cn("a",!0),cn("A",!1),I("hour","h"),U("a",hn),U("A",hn),U("H",pi),U("h",pi),U("HH",pi,ci),U("hh",pi,ci),U("hmm",gi),U("hmmss",mi),U("Hmm",gi),U("Hmmss",mi),K(["H","HH"],Ai),K(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),K(["h","hh"],function(t,e,n){e[Ai]=v(t),u(n).bigHour=!0}),K("hmm",function(t,e,n){var i=t.length-2;e[Ai]=v(t.substr(0,i)),e[Pi]=v(t.substr(i)),u(n).bigHour=!0}),K("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Ai]=v(t.substr(0,i)),e[Pi]=v(t.substr(i,2)),e[Mi]=v(t.substr(r)),u(n).bigHour=!0}),K("Hmm",function(t,e,n){var i=t.length-2;e[Ai]=v(t.substr(0,i)),e[Pi]=v(t.substr(i))}),K("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[Ai]=v(t.substr(0,i)),e[Pi]=v(t.substr(i,2)),e[Mi]=v(t.substr(r))});var ur=/[ap]\.?m?\.?/i,cr=R("Hours",!0);q("m",["mm",2],0,"minute"),I("minute","m"),U("m",pi),U("mm",pi,ci),K(["m","mm"],Pi);var hr=R("Minutes",!1);q("s",["ss",2],0,"second"),I("second","s"),U("s",pi),U("ss",pi,ci),K(["s","ss"],Mi);var dr=R("Seconds",!1);q("S",0,0,function(){return~~(this.millisecond()/100)}),q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,function(){return 10*this.millisecond()}),q(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),q(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),q(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),q(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),q(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),U("S",vi,ui),U("SS",vi,ci),U("SSS",vi,hi);var fr;for(fr="SSSS";fr.length<=9;fr+="S")U(fr,bi);for(fr="S";fr.length<=9;fr+="S")K(fr,pn);var pr=R("Milliseconds",!1);q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var gr=p.prototype;gr.add=er,gr.calendar=ue,gr.clone=ce,gr.diff=ve,gr.endOf=De,gr.format=we,gr.from=xe,gr.fromNow=ke,gr.to=Ce,gr.toNow=Se,gr.get=H,gr.invalidAt=Re,gr.isAfter=he,gr.isBefore=de,gr.isBetween=fe,gr.isSame=pe,gr.isSameOrAfter=ge,gr.isSameOrBefore=me,gr.isValid=Ne,gr.lang=ir,gr.locale=Te,gr.localeData=$e,gr.max=Xi,gr.min=Zi,gr.parsingFlags=Le,gr.set=H,gr.startOf=Ee,gr.subtract=nr,gr.toArray=Me,gr.toObject=Oe,gr.toDate=Pe,gr.toISOString=be,gr.toJSON=Ie,gr.toString=ye,gr.unix=Ae,gr.valueOf=je,gr.creationData=ze,gr.year=Ui,gr.isLeapYear=_t,gr.weekYear=He,gr.isoWeekYear=Be,gr.quarter=gr.quarters=Ve,gr.month=ot,gr.daysInMonth=at,gr.week=gr.weeks=Qe,gr.isoWeek=gr.isoWeeks=Ke,gr.weeksInYear=We,gr.isoWeeksInYear=qe,gr.date=sr,gr.day=gr.days=sn,gr.weekday=on,gr.isoWeekday=an,gr.dayOfYear=ln,gr.hour=gr.hours=cr,gr.minute=gr.minutes=hr,gr.second=gr.seconds=dr,gr.millisecond=gr.milliseconds=pr,gr.utcOffset=Yt,gr.utc=Vt,gr.local=Ut,gr.parseZone=Zt,gr.hasAlignedHourOffset=Xt,gr.isDST=Qt,gr.isDSTShifted=Kt,gr.isLocal=Jt,gr.isUtcOffset=te,gr.isUtc=ee,gr.isUTC=ee,gr.zoneAbbr=gn,gr.zoneName=mn,gr.dates=b("dates accessor is deprecated. Use date instead.",sr),gr.months=b("months accessor is deprecated. Use month instead",ot),gr.years=b("years accessor is deprecated. Use year instead",Ui),gr.zone=b("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Gt);var mr=gr,vr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},_r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},yr="Invalid date",br="%d",wr=/\d{1,2}/,xr={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},kr=T.prototype;kr._calendar=vr,kr.calendar=yn,kr._longDateFormat=_r,kr.longDateFormat=bn,kr._invalidDate=yr,kr.invalidDate=wn,kr._ordinal=br,kr.ordinal=xn,kr._ordinalParse=wr,kr.preparse=kn,kr.postformat=kn,kr._relativeTime=xr,kr.relativeTime=Cn,kr.pastFuture=Sn,kr.set=C,kr.months=nt,kr._months=Ri,kr.monthsShort=it,kr._monthsShort=zi,kr.monthsParse=rt,kr._monthsRegex=Hi,kr.monthsRegex=ut,kr._monthsShortRegex=Fi,kr.monthsShortRegex=lt,kr.week=Ue,kr._week=rr,kr.firstDayOfYear=Xe,kr.firstDayOfWeek=Ze,kr.weekdays=tn,kr._weekdays=or,kr.weekdaysMin=nn,kr._weekdaysMin=lr,kr.weekdaysShort=en,kr._weekdaysShort=ar,kr.weekdaysParse=rn,kr.isPM=dn,kr._meridiemParse=ur,kr.meridiem=fn,j("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=b("moment.lang is deprecated. Use moment.locale instead.",j),t.langData=b("moment.langData is deprecated. Use moment.localeData instead.",M);var Cr=Math.abs,Sr=qn("ms"),Tr=qn("s"),$r=qn("m"),Er=qn("h"),Dr=qn("d"),jr=qn("w"),Ar=qn("M"),Pr=qn("y"),Mr=Yn("milliseconds"),Or=Yn("seconds"),Ir=Yn("minutes"),Nr=Yn("hours"),Lr=Yn("days"),Rr=Yn("months"),zr=Yn("years"),Fr=Math.round,Hr={s:45,m:45,h:22,d:26,M:11},Br=Math.abs,qr=zt.prototype;qr.abs=Mn,qr.add=In,qr.subtract=Nn,qr.as=Hn,qr.asMilliseconds=Sr,qr.asSeconds=Tr,qr.asMinutes=$r,qr.asHours=Er,qr.asDays=Dr,qr.asWeeks=jr,qr.asMonths=Ar,qr.asYears=Pr,qr.valueOf=Bn,qr._bubble=Rn,qr.get=Wn,qr.milliseconds=Mr,qr.seconds=Or,qr.minutes=Ir,qr.hours=Nr,qr.days=Lr,qr.weeks=Gn,qr.months=Rr,qr.years=zr,qr.humanize=Xn,qr.toISOString=Qn,qr.toString=Qn,qr.toJSON=Qn,qr.locale=Te,qr.localeData=$e,qr.toIsoString=b("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qn),qr.lang=ir,q("X",0,0,"unix"),q("x",0,0,"valueOf"),U("x",wi),U("X",Ci),K("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),K("x",function(t,e,n){n._d=new Date(v(t))}),t.version="2.12.0",e(It),t.fn=mr,t.min=Lt,t.max=Rt,t.now=Qi,t.utc=a,t.unix=vn,t.months=En,t.isDate=i,t.locale=j,t.invalid=h,t.duration=ne,t.isMoment=g,t.weekdays=jn,t.parseZone=_n,t.localeData=M,t.isDuration=Ft,t.monthsShort=Dn,t.weekdaysMin=Pn,t.defineLocale=A,t.updateLocale=P,t.locales=O,t.weekdaysShort=An,t.normalizeUnits=N,t.relativeTimeThreshold=Zn,t.prototype=mr;var Wr=t;return Wr});/*!
 * Paper.js v0.9.25 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2014, Juerg Lehni & Jonathan Puckey
 * http://scratchdisk.com/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Sun Oct 25 11:23:38 2015 +0100
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2013 Juerg Lehni
 * http://scratchdisk.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * http://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */
var paper=new function(t){var e=new function(){function n(t,n,i,r,o){function a(s,a){a=a||(a=u(n,s))&&(a.get?a:a.value),"string"==typeof a&&"#"===a[0]&&(a=t[a.substring(1)]||a);var c,d="function"==typeof a,f=a,p=o||d&&!a.base?a&&a.get?s in t:t[s]:null;o&&p||(d&&p&&(a.base=p),d&&r!==!1&&(c=s.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),f&&!d&&f.get&&"function"==typeof f.get&&e.isPlainObject(f)||(f={value:f,writable:!0}),(u(t,s)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=i),h(t,s,f))}var l={};if(n){for(var c in n)n.hasOwnProperty(c)&&!s.test(c)&&a(c);for(var c in l){var d=l[c],f=t["set"+d],p=t["get"+d]||f&&t["is"+d];!p||r!==!0&&0!==p.length||a(c,{get:p,set:f})}}return t}function i(t,e,n){return t&&("length"in t&&!t.getLength&&"number"==typeof t.length?o:a).call(t,e,n=n||t),n}function r(t,e,n){for(var i in e)!e.hasOwnProperty(i)||n&&n[i]||(t[i]=e[i]);return t}var s=/^(statics|enumerable|beans|preserve)$/,o=[].forEach||function(t,e){for(var n=0,i=this.length;i>n;n++)t.call(e,this[n],n,this)},a=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},l=Object.create||function(t){return{__proto__:t}},u=Object.getOwnPropertyDescriptor||function(t,e){var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null},c=Object.defineProperty||function(t,e,n){return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t},h=function(t,e,n){return delete t[e],c(t,e,n)};return n(function(){for(var t=0,e=arguments.length;e>t;t++)r(this,arguments[t])},{inject:function(t){if(t){var e=t.statics===!0?t:t.statics,i=t.beans,r=t.preserve;e!==t&&n(this.prototype,t,t.enumerable,i,r),n(this,e,!0,i,r)}for(var s=1,o=arguments.length;o>s;s++)this.inject(arguments[s]);return this},extend:function(){for(var t,e,i=this,r=0,s=arguments.length;s>r&&!(t=arguments[r].initialize);r++);return t=t||function(){i.apply(this,arguments)},e=t.prototype=l(this.prototype),h(e,"constructor",{value:t,writable:!0,configurable:!0}),n(t,this,!0),arguments.length&&this.inject.apply(t,arguments),t.base=i,t}},!0).inject({inject:function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t];i&&n(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=l(this);return t.inject.apply(t,arguments)},each:function(t,e){return i(this,t,e)},set:function(t){return r(this,t)},clone:function(){return new this.constructor(this)},statics:{each:i,create:l,define:h,describe:u,set:r,clone:function(t){return r(new t.constructor,t)},isPlainObject:function(t){var n=null!=t&&t.constructor;return n&&(n===Object||n===e||"Object"===n.name)},pick:function(e,n){return e!==t?e:n}}})};"undefined"!=typeof module&&(module.exports=e),e.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+e.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?s.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},exportJSON:function(t){return e.exportJSON(this,t)},toJSON:function(){return e.serialize(this)},_set:function(n,i,r){if(n&&(r||e.isPlainObject(n))){for(var s=Object.keys(n._filtering||n),o=0,a=s.length;a>o;o++){var l=s[o];if(!i||!i[l]){var u=n[l];u!==t&&(this[l]=u)}}return!0}},statics:{exports:{enumerable:!0},extend:function et(){var t=et.base.apply(this,arguments),n=t.prototype._class;return n&&!e.exports[n]&&(e.exports[n]=t),t},equals:function(t,n){if(t===n)return!0;if(t&&t.equals)return t.equals(n);if(n&&n.equals)return n.equals(t);if(t&&n&&"object"==typeof t&&"object"==typeof n){if(Array.isArray(t)&&Array.isArray(n)){var i=t.length;if(i!==n.length)return!1;for(;i--;)if(!e.equals(t[i],n[i]))return!1}else{var r=Object.keys(t),i=r.length;if(i!==Object.keys(n).length)return!1;for(;i--;){var s=r[i];if(!n.hasOwnProperty(s)||!e.equals(t[s],n[s]))return!1}}return!0}return!1},read:function(n,i,r,s){if(this===e){var o=this.peek(n,i);return n.__index++,o}var a=this.prototype,l=a._readIndex,u=i||l&&n.__index||0;s||(s=n.length-u);var c=n[u];return c instanceof this||r&&r.readNull&&null==c&&1>=s?(l&&(n.__index=u+1),c&&r&&r.clone?c.clone():c):(c=e.create(this.prototype),l&&(c.__read=!0),c=c.initialize.apply(c,u>0||s<n.length?Array.prototype.slice.call(n,u,u+s):n)||c,l&&(n.__index=u+c.__read,c.__read=t),c)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readAll:function(t,e,n){for(var i,r=[],s=e||0,o=t.length;o>s;s++)r.push(Array.isArray(i=t[s])?this.read(i,0,n):this.read(t,s,n,1));return r},readNamed:function(n,i,r,s,o){var a=this.getNamed(n,i),l=a!==t;if(l){var u=n._filtered;u||(u=n._filtered=e.create(n[0]),u._filtering=n[0]),u[i]=t}return this.read(l?[a]:n,r,s,o)},getNamed:function(n,i){var r=n[0];return n._hasObject===t&&(n._hasObject=1===n.length&&e.isPlainObject(r)),n._hasObject?i?r[i]:n._filtered||r:void 0},hasNamed:function(t,e){return!!this.getNamed(t,e)},isPlainValue:function(t,e){return this.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,n,i,r){n=n||{};var o,a=!r;if(a&&(n.formatter=new s(n.precision),r={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){o=t._serialize(n,r);var l=t._class;!l||i||o._compact||o[0]===l||o.unshift(l)}else if(Array.isArray(t)){o=[];for(var u=0,c=t.length;c>u;u++)o[u]=e.serialize(t[u],n,i,r);i&&(o._compact=!0)}else if(e.isPlainObject(t)){o={};for(var h=Object.keys(t),u=0,c=h.length;c>u;u++){var d=h[u];o[d]=e.serialize(t[d],n,i,r)}}else o="number"==typeof t?n.formatter.number(t,n.precision):t;return a&&r.length>0?[["dictionary",r.definitions],o]:o},deserialize:function(t,n,i,r){var s=t,o=!i;if(i=i||{},Array.isArray(t)){var a=t[0],l="dictionary"===a;if(1==t.length&&/^#/.test(a))return i.dictionary[a];a=e.exports[a],s=[],r&&(i.dictionary=s);for(var u=a?1:0,c=t.length;c>u;u++)s.push(e.deserialize(t[u],n,i,l));if(a){var h=s;n?s=n(a,h):(s=e.create(a.prototype),a.apply(s,h))}}else if(e.isPlainObject(t)){s={},r&&(i.dictionary=s);for(var d in t)s[d]=e.deserialize(t[d],n,i)}return o&&t&&t.length&&"dictionary"===t[0][0]?s[1]:s},exportJSON:function(t,n){var i=e.serialize(t,n);return n&&n.asString===!1?i:JSON.stringify(i)},importJSON:function(t,n){return e.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i){var r=n&&n.constructor===t?n:e.create(t.prototype),s=r===n;if(1===i.length&&r instanceof _&&(s||!(r instanceof b))){var o=i[0];e.isPlainObject(o)&&(o.insert=!1)}return t.apply(r,i),s&&(n=null),r})},splice:function(e,n,i,r){var s=n&&n.length,o=i===t;i=o?e.length:i,i>e.length&&(i=e.length);for(var a=0;s>a;a++)n[a]._index=i+a;if(o)return e.push.apply(e,n),[];var l=[i,r];n&&l.push.apply(l,n);for(var u=e.splice.apply(e,l),a=0,c=u.length;c>a;a++)u[a]._index=t;for(var a=i+s,c=e.length;c>a;a++)e[a]._index=a;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var n={on:function(t,n){if("string"!=typeof t)e.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,r=i&&i[t],s=this._callbacks=this._callbacks||{};s=s[t]=s[t]||[],-1===s.indexOf(n)&&(s.push(n),r&&r.install&&1===s.length&&r.install.call(this,t))}return this},off:function(t,n){if("string"!=typeof t)return void e.each(t,function(t,e){this.off(e,t)},this);var i,r=this._eventTypes,s=r&&r[t],o=this._callbacks&&this._callbacks[t];return o&&(!n||-1!==(i=o.indexOf(n))&&1===o.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&o.splice(i,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=[].slice.call(arguments,1);n=n.slice();for(var r=0,s=n.length;s>r;r++)if(n[r].apply(this,i)===!1){e&&e.stop&&e.stop();break}return!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._callbacks,n=t?"install":"uninstall";for(var i in e)if(e[i].length>0){var r=this._eventTypes,s=r&&r[i],o=s&&s[n];o&&o.call(this,i)}},statics:{inject:function nt(t){var n=t._events;if(n){var i={};e.each(n,function(n,r){var s="string"==typeof n,o=s?n:r,a=e.capitalize(o),l=o.substring(2).toLowerCase();i[l]=s?{}:n,o="_"+o,t["get"+a]=function(){return this[o]},t["set"+a]=function(t){var e=this[o];e&&this.off(l,e),t&&this.on(l,t),this[o]=t}}),t._eventTypes=i}return nt.base.apply(this,arguments)}}},i=e.extend({_class:"PaperScope",initialize:function it(){paper=this,this.settings=new e({applyMatrix:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=it._id++,it._scopes[this._id]=this;var t=it.prototype;if(!this.support){var n=Q.getContext(1,1);t.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:K.nativeModes},Q.release(n)}if(!this.browser){var i=navigator.userAgent.toLowerCase(),r=(/(win)/.exec(i)||/(mac)/.exec(i)||/(linux)/.exec(i)||[])[0],s=t.browser={platform:r};r&&(s[r]=!0),i.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:([.\d]+))?/g,function(t,e,n,i,r){if(!s.chrome){var o="opera"===e?i:n;"trident"===e&&(o=r,e="msie"),s.version=o,s.versionNumber=parseFloat(o),s.name=e,s[e]=!0}}),s.chrome&&delete s.webkit,s.atom&&delete s.chrome}},version:"0.9.25",getView:function(){return this.project&&this.project.getView()},getPaper:function(){return this},execute:function(t,e,n){paper.PaperScript.execute(t,this,e,n),B.updateFocus()},install:function(t){var n=this;e.each(["project","view","tool"],function(i){e.define(t,i,{configurable:!0,get:function(){return n[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return paper=this,this.project=new m(t),this},activate:function(){paper=this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete i._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),r=e.extend(n,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null==this._index?!1:(e.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),s=e.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision)},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});s.instance=new s;var o=new function(){function t(t,e,n){return e>t?e:t>n?n:t}var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],n=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,s=Math.pow,a=1e-12,l=1.12e-16;return{TOLERANCE:1e-6,EPSILON:a,MACHINE_EPSILON:l,CURVETIME_EPSILON:4e-7,GEOMETRIC_EPSILON:2e-7,WINDING_EPSILON:2e-7,TRIGONOMETRIC_EPSILON:1e-7,CLIPPING_EPSILON:1e-7,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-a&&a>=t},integrate:function(t,i,r,s){for(var o=e[s-2],a=n[s-2],l=.5*(r-i),u=l+i,c=0,h=s+1>>1,d=1&s?a[c++]*t(u):0;h>c;){var f=l*o[c];d+=a[c++]*(t(u+f)+t(u-f))}return l*d},findRoot:function(t,e,n,r,s,o,a){for(var l=0;o>l;l++){var u=t(n),c=u/e(n),h=n-c;if(i(c)<a)return h;u>0?(s=n,n=r>=h?.5*(r+s):h):(r=n,n=h>=s?.5*(r+s):h)}return n},solveQuadratic:function(e,n,o,u,c,h){var d,f,p=0,g=c-a,m=h+a,v=1/0,_=n;if(n/=-2,f=n*n-e*o,0!==f&&i(f)<l){var y=s(i(e*n*o),1/3);if(1e-8>y){var b=s(10,i(Math.floor(Math.log(y)*Math.LOG10E)));isFinite(b)||(b=0),e*=b,n*=b,o*=b,f=n*n-e*o}}if(i(e)<a){if(i(_)<a)return i(o)<a?-1:0;d=-o/_}else if(f>=-l){var w=0>f?0:r(f),x=n+(0>n?-w:w);0===x?(d=o/e,v=-d):(d=x/e,v=o/x)}return isFinite(d)&&(null==c||d>g&&m>d)&&(u[p++]=null==c?d:t(d,c,h)),v!==d&&isFinite(v)&&(null==c||v>g&&m>v)&&(u[p++]=null==c?v:t(v,c,h)),p},solveCubic:function(e,n,u,c,h,d,f){var p,g,m,v=0;if(i(e)<a)e=n,g=u,m=c,p=1/0;else if(i(c)<a)g=n,m=u,p=0;else{var _,y,b,w,x,k,C,S=1+l;if(p=-(n/e)/3,C=e*p,g=C+n,m=g*p+u,b=(C+g)*p+m,y=m*p+c,w=y/e,x=s(i(w),1/3),k=0>w?-1:1,w=-b/e,x=w>0?1.3247179572*Math.max(x,r(w)):x,_=p-k*x,_!==p){do if(p=_,C=e*p,g=C+n,m=g*p+u,b=(C+g)*p+m,y=m*p+c,_=0===b?p:p-y/b/S,_===p){p=_;break}while(k*_>k*p);i(e)*p*p>i(c/p)&&(m=-c/p,g=(m-u)/p)}}var v=o.solveQuadratic(e,g,m,h,d,f);return isFinite(p)&&(0===v||p!==h[v-1])&&(null==d||p>d-a&&f+a>p)&&(h[v++]=null==d?p:t(p,d,f)),v}}},a={_id:1,_pools:{},get:function(t){if(t){var e=t._class,n=this._pools[e];return n||(n=this._pools[e]={_id:1}),n._id++}return this._id++}},l=e.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.x=t,this.y=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.x=this.y=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new l(this.x,this.y)},toString:function(){var t=s.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();o.isZero(n)&&this.getAngle(),this.set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=l.read(arguments),e=this.getLength()*t.getLength();if(o.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(-1>n?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=l.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=l.read(arguments),n=t.x-this.x,i=t.y-this.y,r=n*n+i*i,s=e.read(arguments);return s?r:Math.sqrt(r)},normalize:function(e){e===t&&(e=1);var n=this.getLength(),i=0!==n?e/n:0,r=new l(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new l(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=l.read(arguments);return new l(this.x+t.x,this.y+t.y)},subtract:function(){var t=l.read(arguments);return new l(this.x-t.x,this.y-t.y)},multiply:function(){var t=l.read(arguments);return new l(this.x*t.x,this.y*t.y)},divide:function(){var t=l.read(arguments);return new l(this.x/t.x,this.y/t.y)},modulo:function(){var t=l.read(arguments);return new l(this.x%t.x,this.y%t.y)},negate:function(){return new l(-this.x,-this.y)},isInside:function(){return d.read(arguments).contains(this)},isClose:function(){var t=l.read(arguments),n=e.read(arguments);return this.getDistance(t)<n},isCollinear:function(){var t=l.read(arguments);return l.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=l.read(arguments);return l.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){return o.isZero(this.x)&&o.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(){var t=l.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=l.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=l.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new l(t.x*e,t.y*e)},statics:{min:function(){var t=l.read(arguments),e=l.read(arguments);return new l(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=l.read(arguments),e=l.read(arguments);return new l(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new l(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-7*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},e.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new l(e(this.x),e(this.y))}},{})),u=l.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)}}),c=e.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this.__read&&(this.__read=i?2:1)}else"undefined"===n||null===t?(this.width=this.height=0,this.__read&&(this.__read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this.__read&&(this.__read=0)),this.__read&&(this.__read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new c(this.width,this.height)},toString:function(){var t=s.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=c.read(arguments);return new c(this.width+t.width,this.height+t.height)},subtract:function(){var t=c.read(arguments);return new c(this.width-t.width,this.height-t.height)},multiply:function(){var t=c.read(arguments);return new c(this.width*t.width,this.height*t.height)},divide:function(){var t=c.read(arguments);return new c(this.width/t.width,this.height/t.height)},modulo:function(){var t=c.read(arguments);return new c(this.width%t.width,this.height%t.height)},negate:function(){return new c(-this.width,-this.height)},isZero:function(){return o.isZero(this.width)&&o.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new c(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new c(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new c(Math.random(),Math.random())}}},e.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new c(e(this.width),e(this.height))}},{})),h=c.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),d=e.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(n,i,r,s){var o=typeof n,a=0;if("number"===o?(this.x=n,this.y=i,this.width=r,this.height=s,a=4):"undefined"===o||null===n?(this.x=this.y=this.width=this.height=0,a=null===n?1:0):1===arguments.length&&(Array.isArray(n)?(this.x=n[0],this.y=n[1],this.width=n[2],this.height=n[3],a=1):n.x!==t||n.width!==t?(this.x=n.x||0,this.y=n.y||0,this.width=n.width||0,this.height=n.height||0,a=1):n.from===t&&n.to===t&&(this.x=this.y=this.width=this.height=0,this._set(n),a=1)),!a){var u=l.readNamed(arguments,"from"),h=e.peek(arguments);if(this.x=u.x,this.y=u.y,h&&h.x!==t||e.hasNamed(arguments,"to")){var d=l.readNamed(arguments,"to");this.width=d.x-u.x,this.height=d.y-u.y,this.width<0&&(this.x=d.x,this.width=-this.width),this.height<0&&(this.y=d.y,this.height=-this.height)}else{var f=c.read(arguments);this.width=f.width,this.height=f.height}a=arguments.__index}this.__read&&(this.__read=a)},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new d(this.x,this.y,this.width,this.height)},equals:function(t){var n=e.isPlainValue(t)?d.read(arguments):t;return n===this||n&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height||!1},toString:function(){var t=s.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?l:u;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=l.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?c:h;return new e(this.width,this.height,this,"setSize")},setSize:function(){var t=c.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(e){this._fixX!==t&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=e-this.width:this.width=e-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(e){this._fixY!==t&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=e-this.height:this.height=e-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){var e=t?l:u;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=l.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(e){return e&&e.width!==t||4==(Array.isArray(e)?e:arguments).length?this._containsRectangle(d.read(arguments)):this._containsPoint(l.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=d.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=d.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=d.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new d(e,n,i-e,r-n)},unite:function(){var t=d.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new d(e,n,i-e,r-n)},include:function(){var t=l.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new d(e,n,i-e,r-n)},expand:function(){var t=c.read(arguments),e=t.width,n=t.height;return new d(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(e,n){return this.expand(this.width*e-this.width,this.height*(n===t?e:n)-this.height)}},e.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,c="set"+r,h="set"+s,d="get"+n,f="set"+n;this[d]=function(t){var e=t?l:u;return new e(this[o](),this[a](),this,f)},this[f]=function(){var t=l.read(arguments);this[c](t.x),this[h](t.y)}},{beans:!0})),f=d.extend({initialize:function(t,e,n,i,r,s){this.set(t,e,n,i,!0),this._owner=r,this._setter=s},set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=d.prototype;return e.each(["x","y","width","height"],function(t){var n=e.capitalize(t),i="_"+t;this["get"+n]=function(){return this[i]},this["set"+n]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},e.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),p=e.extend({_class:"Matrix",initialize:function rt(t){var e=arguments.length,n=!0;if(6===e?this.set.apply(this,arguments):1===e?t instanceof rt?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):n=!1:0===e?this.reset():n=!1,!n)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,s,o){return this._a=t,this._c=e,this._b=n,this._d=i,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t){return e.serialize(this.getValues(),t)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new p(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty||!1},toString:function(){var t=s.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,n){var i=this._owner;return i?(i.transform(null,!0,e.pick(t,!0),n),this.isIdentity()):!1},translate:function(){var t=l.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._b,this._ty+=e*this._c+n*this._d,this._changed(),this},scale:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._c*=t.x,this._b*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=l.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,u=this._a,c=this._b,h=this._c,d=this._d;return this._a=r*u+s*c,this._b=-s*u+r*c,this._c=r*h+s*d,this._d=-s*h+r*d,this._tx+=o*u+a*c,this._ty+=o*h+a*d,this._changed(),this},shear:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._c;return this._a+=t.y*this._b,this._c+=t.y*this._d,this._b+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=l.read(arguments),e=l.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new l(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},concatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=t._a,o=t._b,a=t._c,l=t._d,u=t._tx,c=t._ty;return this._a=s*e+a*n,this._b=o*e+l*n,this._c=s*i+a*r,this._d=o*i+l*r,this._tx+=u*e+c*n,this._ty+=u*i+c*r,this._changed(),this},preConcatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty,a=t._a,l=t._b,u=t._c,c=t._d,h=t._tx,d=t._ty;return this._a=a*e+l*i,this._b=a*n+l*r,this._c=u*e+c*i,this._d=u*n+c*r,this._tx=a*s+l*o+h,this._ty=u*s+c*o+d,this._changed(),this},chain:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty,a=t._a,l=t._b,u=t._c,c=t._d,h=t._tx,d=t._ty;return new p(a*e+u*n,a*i+u*r,l*e+c*n,l*i+c*r,s+h*e+d*n,o+h*i+d*r)},isIdentity:function(){return 1===this._a&&0===this._c&&0===this._b&&1===this._d&&0===this._tx&&0===this._ty},orNullIfIdentity:function(){return this.isIdentity()?null:this;
},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(l.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new l),e.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=0,s=2*n;s>i;){var o=t[i++],a=t[i++];e[r++]=o*this._a+a*this._b+this._tx,e[r++]=o*this._c+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),o=2;8>o;o++){var a=i[o],l=1&o;a<r[l]?r[l]=a:a>s[l]&&(s[l]=a)}return e||(e=new d),e.set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(l.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!o.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,n){var i=this._getDeterminant();if(!i)return null;var r=t.x-this._tx,s=t.y-this._ty;return e||(e=new l),e.set((r*this._d-s*this._b)/i,(s*this._a-r*this._c)/i,n)},decompose:function(){var t=this._a,e=this._b,n=this._c,i=this._d;if(o.isZero(t*i-e*n))return null;var r=Math.sqrt(t*t+e*e);t/=r,e/=r;var s=t*n+e*i;n-=t*s,i-=e*s;var a=Math.sqrt(n*n+i*i);return n/=a,i/=a,s/=a,e*n>t*i&&(t=-t,e=-e,s=-s,r=-r),{scaling:new l(r,a),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:s}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return new l(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&new p(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return new p(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)}},e.each(["a","c","b","d","tx","ty"],function(t){var n=e.capitalize(t),i="_"+t;this["get"+n]=function(){return this[i]},this["set"+n]=function(t){this[i]=t,this._changed()}},{})),g=e.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new l(this._px,this._py)},getVector:function(){return new l(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return g.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return g.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(g.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return l.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return l.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,a,u,c,h){c||(n-=t,i-=e,a-=r,u-=s);var d=n*u-i*a;if(!o.isZero(d)){var f=t-r,p=e-s,g=(a*p-u*f)/d,m=(n*p-i*f)/d,v=1e-12,_=-v,y=1+v;if(h||g>_&&y>g&&m>_&&y>m)return h||(g=0>=g?0:g>=1?1:g),new l(t+g*n,e+g*i)}},getSide:function(t,e,n,i,r,s,o,a){o||(n-=t,i-=e);var l=r-t,u=s-e,c=l*i-u*n;return 0!==c||a||(c=(l*n+l*n)/(n*n+i*i),c>=0&&1>=c&&(c=0)),0>c?-1:c>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?0>n?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)}}}),m=r.extend({_class:"Project",_list:"projects",_reference:"project",initialize:function(t){r.call(this,!0),this.layers=[],this._activeLayer=null,this.symbols=[],this._currentStyle=new z(null,null,this),this._view=B.create(this,t||Q.getCanvas(1,1)),this._selectedItems={},this._selectedItemCount=0,this._updateVersion=0},_serialize:function(t,n){return e.serialize(this.layers,t,!0,n)},clear:function(){for(var t=this.layers.length-1;t>=0;t--)this.layers[t].remove();this.symbols=[]},isEmpty:function(){return 0===this.layers.length},remove:function st(){return st.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getActiveLayer:function(){return this._activeLayer||new b({project:this})},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var n=this._selectedItems[e];n.isInserted()&&t.push(n)}return t},insertChild:function(t,n,i){return n instanceof b?(n._remove(!1,!0),e.splice(this.layers,[n],t,0),n._setProject(this,!0),this._changes&&n._changed(5),this._activeLayer||(this._activeLayer=n)):n instanceof _?(this._activeLayer||this.insertChild(t,new b(_.NO_INSERT))).insertChild(t,n,i):n=null,n},addChild:function(e,n){return this.insertChild(t,e,n)},_updateSelection:function(t){var e=t._id,n=this._selectedItems;t._selected?n[e]!==t&&(this._selectedItemCount++,n[e]=t):n[e]===t&&(this._selectedItemCount--,delete n[e])},selectAll:function(){for(var t=this.layers,e=0,n=t.length;n>e;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectedItems;for(var e in t)t[e].setFullySelected(!1)},hitTest:function(){for(var t=l.read(arguments),n=C.getOptions(e.read(arguments)),i=this.layers.length-1;i>=0;i--){var r=this.layers[i]._hitTest(t,n);if(r)return r}return null},getItems:function(t){return _._getItems(this.layers,t)},getItem:function(t){return _._getItems(this.layers,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var n=this._activeLayer;return e.importJSON(t,n&&n.isEmpty()&&n)},draw:function(t,n,i){this._updateVersion++,t.save(),n.applyToContext(t);for(var r=new e({offset:new l(0,0),pixelRatio:i,viewMatrix:n.isIdentity()?null:n,matrices:[new p],updateMatrix:!0}),s=0,o=this.layers,a=o.length;a>s;s++)o[s].draw(t,r);if(t.restore(),this._selectedItemCount>0){t.save(),t.strokeWidth=1;var u=this._selectedItems,c=this._scope.settings.handleSize,h=this._updateVersion;for(var d in u)u[d]._drawSelection(t,n,c,u,h);t.restore()}}}),v=e.extend({_class:"Symbol",initialize:function(t,e){this._id=a.get(),this.project=paper.project,this.project.symbols.push(this),t&&this.setDefinition(t,e)},_serialize:function(t,n){return n.add(this,function(){return e.serialize([this._class,this._definition],t,!1,n)})},_changed:function(t){8&t&&_._clearBoundsCache(this),1&t&&(this.project._needsUpdate=!0)},getDefinition:function(){return this._definition},setDefinition:function(t,e){t._parentSymbol&&(t=t.clone()),this._definition&&(this._definition._parentSymbol=null),this._definition=t,t.remove(),t.setSelected(!1),e||t.setPosition(new l),t._parentSymbol=this,this._changed(9)},place:function(t){return new k(this,t)},clone:function(){return new v(this._definition.clone(!1))},equals:function(t){return t===this||t&&this.definition.equals(t.definition)||!1}}),_=e.extend(n,{statics:{extend:function ot(t){return t._serializeFields&&(t._serializeFields=new e(this.prototype._serializeFields,t._serializeFields)),ot.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_applyMatrix:!0,_canApplyMatrix:!0,_boundsSelected:!1,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new p,pivot:null,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,selected:!1,clipMask:!1,data:{}},initialize:function(){},_initialize:function(t,n){var i=t&&e.isPlainObject(t),r=i&&t.internal===!0,s=this._matrix=new p,o=i&&t.project||paper.project;return r||(this._id=a.get()),this._applyMatrix=this._canApplyMatrix&&paper.settings.applyMatrix,n&&s.translate(n),s._owner=this,this._style=new z(o._currentStyle,this,o),this._project||(r||i&&t.insert===!1?this._setProject(o):i&&t.parent?this.setParent(t.parent):(o._activeLayer||new b).addChild(this)),i&&t!==_.NO_INSERT&&this._set(t,{insert:!0,project:!0,parent:!0},!0),i},_events:e.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){this[t]={install:function(t){this.getView()._installEvent(t)},uninstall:function(t){this.getView()._uninstallEvent(t)}}},{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{}}),_serialize:function(t,n){function i(i){for(var o in i){var a=s[o];e.equals(a,"leading"===o?1.2*i.fontSize:i[o])||(r[o]=e.serialize(a,t,"data"!==o,n))}}var r={},s=this;return i(this._serializeFields),this instanceof y||i(this._style._defaults),[this._class,r]},_changed:function(e){var n=this._parentSymbol,i=this._parent||n,r=this._project;if(8&e&&(this._bounds=this._position=this._decomposed=this._globalMatrix=this._currentPath=t),i&&40&e&&_._clearBoundsCache(i),2&e&&_._clearBoundsCache(this),r&&(1&e&&(r._needsUpdate=!0),r._changes)){var s=r._changesById[this._id];s?s.flags|=e:(s={item:this,flags:e},r._changesById[this._id]=s,r._changes.push(s))}n&&n._changed(e)},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getName:function(){return this._name},setName:function(e,n){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._parent;if(e&&i){for(var r=i._children,s=i._namedChildren,o=e,a=1;n&&r[e];)e=o+" "+a++;(s[e]=s[e]||[]).push(this),r[e]=this}this._name=e||t,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},e.each(["locked","visible","blendMode","opacity","guide"],function(t){var n=e.capitalize(t),t="_"+t;this["get"+n]=function(){return this[t]},this["set"+n]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;n>e;e++)if(t[e].isSelected())return!0;return this._selected},setSelected:function(t,e){if(!e&&this._selectChildren)for(var n=this._children,i=0,r=n.length;r>i;i++)n[i].setSelected(t);(t=!!t)^this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(129))},_selected:!1,isFullySelected:function(){var t=this._children;if(t&&this._selected){for(var e=0,n=t.length;n>e;e++)if(!t[e].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;i>n;n++)e[n].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?l:u;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(l.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(t){var e=this._pivot;if(e){var n=t?l:u;e=new n(e.x,e.y,this,"setPivot")}return e},setPivot:function(){this._pivot=l.read(arguments,0,{clone:!0,readNull:!0}),this._position=t},_pivot:null},e.each(["bounds","strokeBounds","handleBounds","roughBounds","internalBounds","internalRoughBounds"],function(t){var n="get"+e.capitalize(t),i=t.match(/^internal(.*)$/),r=i?"get"+i[1]:null;this[n]=function(e){var i=this._boundsGetter,s=!r&&("string"==typeof i?i:i&&i[n])||n,o=this._getCachedBounds(s,e,this,r);return"bounds"===t?new f(o.x,o.y,o.width,o.height,this,"setBounds"):o}},{beans:!0,_getBounds:function(t,e,n){var i=this._children;if(!i||0==i.length)return new d;_._updateBoundsCache(this,n);for(var r=1/0,s=-r,o=r,a=s,l=0,u=i.length;u>l;l++){var c=i[l];if(c._visible&&!c.isEmpty()){var h=c._getCachedBounds(t,e&&e.chain(c._matrix),n);r=Math.min(h.x,r),o=Math.min(h.y,o),s=Math.max(h.x+h.width,s),a=Math.max(h.y+h.height,a)}}return isFinite(r)?new d(r,o,s-r,a-o):new d},setBounds:function(){var t=d.read(arguments),e=this.getBounds(),n=new p,i=t.getCenter();n.translate(i),(t.width!=e.width||t.height!=e.height)&&n.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getCachedBounds:function(t,e,n,i){e=e&&e.orNullIfIdentity();var r=i?null:this._matrix.orNullIfIdentity(),s=(!e||e.equals(r))&&t;if(_._updateBoundsCache(this._parent||this._parentSymbol,n),s&&this._bounds&&this._bounds[s])return this._bounds[s].clone();var o=this._getBounds(i||t,e||r,n);if(s){this._bounds||(this._bounds={});var a=this._bounds[s]=o.clone();a._internal=!!i}return o},statics:{_updateBoundsCache:function(t,e){if(t){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(e){var n=e._boundsCache;if(n){e._bounds=e._position=e._boundsCache=t;for(var i=0,r=n.list,s=r.length;s>i;i++){var o=r[i];o!==e&&(o._bounds=o._position=t,o._boundsCache&&_._clearBoundsCache(o))}}}}}),{beans:!0,_decompose:function(){return this._decomposed=this._matrix.decompose()},getRotation:function(){var t=this._decomposed||this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n.rotation=t,this._decomposed=n}},getScaling:function(t){var e=this._decomposed||this._decompose(),n=e&&e.scaling,i=t?l:u;return n&&new i(n.x,n.y,this,"setScaling")},setScaling:function(){var t=this.getScaling();if(t){var e=l.read(arguments,0,{clone:!0}),n=this._decomposed;this.scale(e.x/t.x,e.y/t.y),n.scaling=e,this._decomposed=n}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments),this._applyMatrix?this.transform(null,!0):this._changed(9)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.preConcatenate(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;r>i;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project.getView()},_installEvents:function at(t){at.base.call(this,t);for(var e=this._children,n=0,i=e&&e.length;i>n;n++)e[n]._installEvents(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof b)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return e.equals(this._children,t._children)},clone:function(t){return this._clone(new this.constructor(_.NO_INSERT),t)},_clone:function(n,i,r){var s=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],o=this._children;n.setStyle(this._style);for(var a=0,l=o&&o.length;l>a;a++)n.addChild(o[a].clone(!1),!0);for(var a=0,l=s.length;l>a;a++){var u=s[a];this.hasOwnProperty(u)&&(n[u]=this[u])}return r!==!1&&n._matrix.initialize(this._matrix),n.setApplyMatrix(this._applyMatrix),n.setPivot(this._pivot),n.setSelected(this._selected),n._data=this._data?e.clone(this._data):null,(i||i===t)&&n.insertAbove(this),this._name&&n.setName(this._name,!0),n},copyTo:function(t){return t.addChild(this.clone(!1))},rasterize:function(t){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,r=n.getTopLeft().floor(),s=n.getBottomRight().ceil(),o=new c(s.subtract(r)),a=Q.getCanvas(o.multiply(i)),l=a.getContext("2d"),u=(new p).scale(i).translate(r.negate());l.save(),u.applyToContext(l),this.draw(l,new e({matrices:[u]})),l.restore();var h=new x(_.NO_INSERT);return h.setCanvas(a),h.transform((new p).translate(r.add(o.divide(2))).scale(1/i)),h.insertAbove(this),h},contains:function(){return!!this._contains(this._matrix._inverseTransform(l.read(arguments)))},_contains:function(t){if(this._children){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return d.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new j.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof _?this._asPathItem().getIntersections(t._asPathItem(),null,e||t._matrix,!0).length>0:!1},hitTest:function(){return this._hitTest(l.read(arguments),C.getOptions(e.read(arguments)))},_hitTest:function(t,n){function i(n,i){var r=f["get"+i]();return t.subtract(r).divide(l).length<=1?new C(n,d,{name:e.hyphenate(i),point:r}):void 0}if(this._locked||!this._visible||this._guide&&!n.guides||this.isEmpty())return null;var r=this._matrix,s=n._totalMatrix,o=this.getView(),a=n._totalMatrix=s?s.chain(r):this.getGlobalMatrix().preConcatenate(o._matrix),l=n._tolerancePadding=new c(j._getPenPadding(1,a.inverted())).multiply(Math.max(n.tolerance,1e-6));if(t=r._inverseTransform(t),!this._children&&!this.getInternalRoughBounds().expand(l.multiply(2))._containsPoint(t))return null;var u,h=!(n.guides&&!this._guide||n.selected&&!this._selected||n.type&&n.type!==e.hyphenate(this._class)||n["class"]&&!(this instanceof n["class"])),d=this;if(h&&(n.center||n.bounds)&&this._parent){var f=this.getInternalBounds();if(n.center&&(u=i("center","Center")),!u&&n.bounds)for(var p=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],g=0;8>g&&!u;g++)u=i("bounds",p[g])}var m=!u&&this._children;if(m)for(var v=this._getChildHitTestOptions(n),g=m.length-1;g>=0&&!u;g--)u=m[g]._hitTest(t,v);return!u&&h&&(u=this._hitTestSelf(t,n)),u&&u.point&&(u.point=r.transform(u.point)),n._totalMatrix=s,u},_getChildHitTestOptions:function(t){return t},_hitTestSelf:function(t,e){return e.fill&&this.hasFill()&&this._contains(t)?new C("fill",this):void 0},matches:function(t,n){function i(t,n){for(var r in t)if(t.hasOwnProperty(r)){var s=t[r],o=n[r];if(e.isPlainObject(s)&&e.isPlainObject(o)){if(!i(s,o))return!1}else if(!e.equals(s,o))return!1}return!0}var r=typeof t;if("object"===r){for(var s in t)if(t.hasOwnProperty(s)&&!this.matches(s,t[s]))return!1}else{if("function"===r)return t(this);var o=/^(empty|editable)$/.test(t)?this["is"+e.capitalize(t)]():"type"===t?e.hyphenate(this._class):this[t];if(/^(constructor|class)$/.test(t)){if(!(this instanceof n))return!1}else if(n instanceof RegExp){if(!n.test(o))return!1}else if("function"==typeof n){if(!n(o))return!1}else if(e.isPlainObject(n)){if(!i(n,o))return!1}else if(!e.equals(o,n))return!1}return!0},getItems:function(t){return _._getItems(this._children,t,this._matrix)},getItem:function(t){return _._getItems(this._children,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function lt(t,n,i,r,s){if(!r&&"object"==typeof n){var o=n.overlapping,a=n.inside,l=o||a,u=l&&d.read([l]);r={items:[],inside:!!a,overlapping:!!o,rect:u,path:o&&new j.Rectangle({rectangle:u,insert:!1})},l&&(n=e.set({},n,{inside:!0,overlapping:!0}))}var c=r&&r.items,u=r&&r.rect;i=u&&(i||new p);for(var h=0,f=t&&t.length;f>h;h++){var g=t[h],m=i&&i.chain(g._matrix),v=!0;if(u){var l=g.getBounds(m);if(!u.intersects(l))continue;r.inside&&u.contains(l)||r.overlapping&&(l.contains(u)||r.path.intersects(g,m))||(v=!1)}if(v&&g.matches(n)&&(c.push(g),s))break;if(lt(g._children,n,m,r,s),s&&c.length>0)break}return c}}},{importJSON:function(t){var n=e.importJSON(t,this);return n!==this?this.addChild(n):n},addChild:function(e,n){return this.insertChild(t,e,n)},insertChild:function(t,e,n){var i=e?this.insertChildren(t,[e],n):null;return i&&i[0]},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,n,i,r){var s=this._children;if(s&&n&&n.length>0){n=Array.prototype.slice.apply(n);for(var o=n.length-1;o>=0;o--){var a=n[o];if(!r||a instanceof r){var l=a._parent===this&&a._index<t;a._remove(!1,!0)&&l&&t--}else n.splice(o,1)}e.splice(s,n,t,0);for(var u=this._project,c=u&&u._changes,o=0,h=n.length;h>o;o++){var a=n[o];a._parent=this,a._setProject(this._project,!0),a._name&&a.setName(a._name),c&&this._changed(5)}this._changed(11)}else n=null;return n},_insertSibling:function(t,e,n){return this._parent?this._parent.insertChild(t,e,n):null},insertAbove:function(t,e){return t._insertSibling(t._index+1,this,e)},insertBelow:function(t,e){return t._insertSibling(t._index,this,e)},sendToBack:function(){return(this._parent||this instanceof b&&this._project).insertChild(0,this)},bringToFront:function(){return(this._parent||this instanceof b&&this._project).addChild(this)},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",reduce:function(){if(this._children&&1===this._children.length){var t=this._children[0].reduce();return t.insertAbove(this),t.setStyle(this._style),this.remove(),t}return this},_removeNamed:function(){var t=this._parent;if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[r.length-1]:delete n[i])}},_remove:function(t,n){var i=this._parent;if(i){if(this._name&&this._removeNamed(),null!=this._index&&e.splice(i._children,null,this._index,1),this._installEvents(!1),t){var r=this._project;r&&r._changes&&this._changed(5)}return n&&i._changed(11),this._parent=null,!0}return!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,n){if(!this._children)return null;t=t||0,n=e.pick(n,this._children.length);for(var i=e.splice(this._children,null,t,n-t),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;e>t;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){return!this._children||0===this._children.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);s>r;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1},translate:function(){var t=new p;return this.transform(t.translate.apply(t,arguments))},rotate:function(t){return this.transform((new p).rotate(t,l.read(arguments,1,{readNull:!0})||this.getPosition(!0)))}},e.each(["scale","shear","skew"],function(t){this[t]=function(){var e=l.read(arguments),n=l.read(arguments,0,{readNull:!0});return this.transform((new p)[t](e,n||this.getPosition(!0)))}},{}),{transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,s=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);if(!t&&!s)return this;if(t&&r.preConcatenate(t),s=s&&this._transformContent(r,n,i)){var o=this._pivot,a=this._style,l=a.getFillColor(!0),u=a.getStrokeColor(!0);o&&r._transformPoint(o,o,!0),l&&l.transform(r),u&&u.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,h=this._position;this._changed(9);var d=c&&t&&t.decompose();if(d&&!d.shearing&&d.rotation%90===0){for(var f in c){var p=c[f];(s||!p._internal)&&t._transformBounds(p,p)}var g=this._boundsGetter,p=c[g&&g.getBounds||g||"getBounds"];p&&(this._position=p.getCenter(!0)),this._bounds=c}else t&&h&&(this._position=t._transformPoint(h,h));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;s>r;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(l.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(l.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(l.read(arguments))},localToParent:function(){return this._matrix._transformPoint(l.read(arguments))},fitBounds:function(t,e){t=d.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:r>i)?t.width/n.width:t.height/n.height,o=new d(new l,new c(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)},_setStyles:function(t){var e=this._style,n=e.getFillColor(),i=e.getStrokeColor(),r=e.getShadowColor();if(n&&(t.fillStyle=n.toCanvasStyle(t)),i){var s=e.getStrokeWidth();if(s>0){t.strokeStyle=i.toCanvasStyle(t),t.lineWidth=s;var o=e.getStrokeJoin(),a=e.getStrokeCap(),l=e.getMiterLimit();if(o&&(t.lineJoin=o),a&&(t.lineCap=a),l&&(t.miterLimit=l),paper.support.nativeDash){var u=e.getDashArray(),c=e.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=c):(t.mozDash=u,t.mozDashOffset=c))}}}if(r){var h=e.getShadowBlur();if(h>0){t.shadowColor=r.toCanvasStyle(t),t.shadowBlur=h;var d=this.getShadowOffset();t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}}},draw:function(t,e,n){function i(t){return o?o.chain(t):t}var r=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var s=e.matrices,o=e.viewMatrix,a=this._matrix,l=s[s.length-1].chain(a);if(l.isInvertible()){s.push(l),e.updateMatrix&&(l._updateVersion=r,this._globalMatrix=l);var u,c,h,d=this._blendMode,f=this._opacity,p="normal"===d,g=K.nativeModes[d],m=p&&1===f||e.dontStart||e.clip||(g||p&&1>f)&&this._canComposite(),v=e.pixelRatio||1;if(!m){var _=this.getStrokeBounds(i(l));if(!_.width||!_.height)return;h=e.offset,c=e.offset=_.getTopLeft().floor(),u=t,t=Q.getContext(_.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var y=n?n.chain(a):!this.getStrokeScaling(!0)&&i(l),b=!m&&e.clipItem,w=!y||b;if(m?(t.globalAlpha=f,g&&(t.globalCompositeOperation=d)):w&&t.translate(-c.x,-c.y),w&&(m?a:i(l)).applyToContext(t),b&&e.clipItem.draw(t,e.extend({clip:!0})),y){t.setTransform(v,0,0,v,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,y),t.restore(),s.pop(),e.clip&&!e.dontFinish&&t.clip(),m||(K.process(d,t,u,f,c.subtract(h).multiply(v)),Q.release(t),e.offset=h)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof A)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){if((this._drawSelected||this._boundsSelected)&&this._isUpdated(r)){var s=this.getSelectedColor(!0)||this.getLayer().getSelectedColor(!0),o=e.chain(this.getGlobalMatrix(!0));if(t.strokeStyle=t.fillStyle=s?s.toCanvasStyle(t):"#009dec",this._drawSelected&&this._drawSelected(t,o,i),this._boundsSelected){var a=n/2,l=o._transformCorners(this.getInternalBounds());t.beginPath();for(var u=0;8>u;u++)t[0===u?"moveTo":"lineTo"](l[u],l[++u]);t.closePath(),t.stroke();for(var u=0;8>u;u++)t.fillRect(l[u]-a,l[++u]-a,n,n)}}},_canComposite:function(){return!1}},e.each(["down","drag","up","move"],function(t){this["removeOn"+e.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),y=_.extend({_class:"Group",_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function ut(e){ut.base.call(this,e),1026&e&&(this._clipItem=t)},_getClipItem:function(){var e=this._clipItem;if(e===t){e=null;for(var n=0,i=this._children.length;i>n;n++){var r=this._children[n];if(r._clipMask){e=r;break}}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem(),r=!0;if(e=e.extend({clipItem:i,clip:!1}),n?this._currentPath?(t.currentPath=this._currentPath,r=!1):(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0})),r)for(var s=0,o=this._children.length;o>s;s++){var a=this._children[s];a!==i&&a.draw(t,e)}n&&(this._currentPath=t.currentPath)}}),b=y.extend({_class:"Layer",initialize:function(n){var i=e.isPlainObject(n)?new e(n):{children:Array.isArray(n)?n:arguments},r=i.insert;i.insert=!1,y.call(this,i),(r||r===t)&&(this._project.addChild(this),this.activate())},_remove:function ct(t,n){if(this._parent)return ct.base.call(this,t,n);if(null!=this._index){var i=this._project;return i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),e.splice(i.layers,null,this._index,1),this._installEvents(!1),t&&i._changes&&this._changed(5),n&&(i._needsUpdate=!0),!0}return!1},getNextSibling:function ht(){return this._parent?ht.base.call(this):this._project.layers[this._index+1]||null},getPreviousSibling:function dt(){return this._parent?dt.base.call(this):this._project.layers[this._index-1]||null},isInserted:function ft(){return this._parent?ft.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_insertSibling:function pt(t,e,n){return this._parent?pt.base.call(this,t,e,n):this._project.insertChild(t,e,n)}}),w=_.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_boundsSelected:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&e.equals(this._radius,t._radius)},clone:function(t){var e=new w(_.NO_INSERT);return e.setType(this._type),e.setSize(this._size),e.setRadius(this._radius),this._clone(e,t)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new h(t.width,t.height,this,"setSize")},setSize:function(){var t=c.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;if("rectangle"===e){var r=c.min(this._radius,t.divide(2));this._radius.set(r.width,r.height)}else"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius.set(n/2,i/2);this._size.set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new h(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size.set(n,n)}else if(t=c.read(arguments),
this._radius){if(this._radius.equals(t))return;if(this._radius.set(t.width,t.height),"rectangle"===e){var n=c.max(this._size,t.multiply(2));this._size.set(n.width,n.height)}else"ellipse"===e&&this._size.set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var n=this._clone(new(j[e.capitalize(this._type)])({center:new l,size:this._size,radius:this._radius,insert:!1}),t);return paper.settings.applyMatrix&&n.setApplyMatrix(!0),n},_draw:function(t,e,n){var i=this._style,r=i.hasFill(),s=i.hasStroke(),o=e.dontFinish||e.clip,a=!n;if(r||s||o){var l=this._type,u=this._radius,c="circle"===l;if(e.dontStart||t.beginPath(),a&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var h=c?u:u.width,d=c?u:u.height,f=this._size,p=f.width,g=f.height;if(a&&"rectangle"===l&&0===h&&0===d)t.rect(-p/2,-g/2,p,g);else{var m=p/2,v=g/2,_=.44771525016920644,y=h*_,b=d*_,w=[-m,-v+d,-m,-v+b,-m+y,-v,-m+h,-v,m-h,-v,m-y,-v,m,-v+b,m,-v+d,m,v-d,m,v-b,m-y,v,m-h,v,-m+h,v,-m+y,v,-m,v-b,-m,v-d];n&&n.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),m!==h&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),v!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),m!==h&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}o||!r&&!s||(this._setStyles(t),r&&(t.fill(i.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),s&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new d(this._size).setCenter(0,0);return"getBounds"!==t&&this.hasStroke()&&(n=n.expand(this.getStrokeWidth())),e?e._transformBounds(n):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=0;4>s;s++){var o=new l(1&s?1:-1,s>1?1:-1),a=o.multiply(r),u=a.subtract(o.multiply(i)),c=new d(a,u);if((n?c.expand(n):c).contains(e))return u}}function e(t,e){var n=t.getAngleInRadians(),i=2*e.width,r=2*e.height,s=i*Math.sin(n),o=r*Math.cos(n);return i*r/(2*Math.sqrt(s*s+o*o))}return{_contains:function n(e){if("rectangle"===this._type){var i=t(this,e);return i?e.subtract(i).divide(this._radius).getLength()<=1:n.base.call(this,e)}return e.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r){var s=!1;if(this.hasStroke()){var o=this._type,a=this._radius,l=this.getStrokeWidth()+2*r.tolerance;if("rectangle"===o){var u=t(this,n,l);if(u){var c=n.subtract(u);s=2*Math.abs(c.getLength()-e(c,a))<=l}else{var h=new d(this._size).setCenter(0,0),f=h.expand(l),p=h.expand(-l);s=f._containsPoint(n)&&!p._containsPoint(n)}}else"ellipse"===o&&(a=e(n,a)),s=2*Math.abs(n.getLength()-a)<=l}return s?new C("stroke",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,n,i,r,s){var o=new w(e.getNamed(s));return o._type=t,o._size=i,o._radius=r,o.translate(n)}return{Circle:function(){var n=l.readNamed(arguments,"center"),i=e.readNamed(arguments,"radius");return t("circle",n,new c(2*i),i,arguments)},Rectangle:function(){var e=d.readNamed(arguments,"rectangle"),n=c.min(c.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=w._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var n,i;if(e.hasNamed(t,"radius"))n=l.readNamed(t,"center"),i=c.readNamed(t,"radius");else{var r=d.readNamed(t,"rectangle");n=r.getCenter(!0),i=r.getSize(!0).divide(2)}return{center:n,radius:i}}}}}),x=_.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{crossOrigin:null,source:null},initialize:function(e,n){this._initialize(e,n!==t&&l.read(arguments,1))||("string"==typeof e?this.setSource(e):this.setImage(e)),this._size||(this._size=new c,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},clone:function(t){var e=new x(_.NO_INSERT),n=this._image,i=this._canvas;if(n)e.setImage(n);else if(i){var r=Q.getCanvas(this._size);r.getContext("2d").drawImage(i,0,0),e.setImage(r)}return e._crossOrigin=this._crossOrigin,this._clone(e,t)},getSize:function(){var t=this._size;return new h(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=c.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this.setImage(Q.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&Q.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new l(0,0).transform(t),n=new l(1,0).transform(t).subtract(e),i=new l(0,1).transform(t).subtract(e);return new c(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){this._canvas&&Q.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=t&&t.complete),this._size=new c(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=Q.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){Q.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){function e(){var t=i.getView();t&&(paper=t._scope,i.setImage(n),i.emit("load"),t.update())}var n,i=this,r=this._crossOrigin;n=document.getElementById(t)||new Image,r&&(n.crossOrigin=r),n.naturalWidth&&n.naturalHeight?setTimeout(e,0):(H.add(n,{load:e}),n.src||(n.src=t)),this.setImage(n)},getCrossOrigin:function(){return this._image&&this._image.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t,this._image&&(this._image.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=d.read(arguments),e=Q.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=d.read(arguments),e=new x(_.NO_INSERT);return e.setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.preConcatenate(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL.apply(e,arguments):null},drawImage:function(t){var e=l.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var n,i;t?t instanceof D?(i=t,n=t.getBounds()):t.width?n=new d(t):t.x&&(n=new d(t.x-.5,t.y-.5,1,1)):n=this.getBounds();var r=32,s=Math.min(n.width,r),o=Math.min(n.height,r),a=x._sampleContext;a?a.clearRect(0,0,r+1,r+1):a=x._sampleContext=Q.getContext(new c(r)),a.save();var l=(new p).scale(s/n.width,o/n.height).translate(-n.x,-n.y);l.applyToContext(a),i&&i.draw(a,new e({clip:!0,matrices:[l]})),this._matrix.applyToContext(a);var u=this.getElement(),h=this._size;u&&a.drawImage(u,-h.width/2,-h.height/2),a.restore();for(var f=a.getImageData(.5,.5,Math.ceil(s),Math.ceil(o)).data,g=[0,0,0],m=0,v=0,_=f.length;_>v;v+=4){var y=f[v+3];m+=y,y/=255,g[0]+=f[v]*y,g[1]+=f[v+1]*y,g[2]+=f[v+2]*y}for(var v=0;3>v;v++)g[v]/=m;return m?N.read(g):null},getPixel:function(){var t=l.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new N("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=l.read(arguments),e=N.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=c.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=d.read(arguments);return t.isEmpty()&&(t=new d(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=l.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new d(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new C("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),k=_.extend({_class:"PlacedSymbol",_applyMatrix:!1,_canApplyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(e,n){this._initialize(e,n!==t&&l.read(arguments,1))||this.setSymbol(e instanceof v?e:new v(e))},_equals:function(t){return this._symbol===t._symbol},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol=t,this._changed(9)},clone:function(t){var e=new k(_.NO_INSERT);return e.setSymbol(this._symbol),this._clone(e,t)},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e,n){var i=this.symbol._definition;return i._getCachedBounds(t,e&&e.chain(i._matrix),n)},_hitTestSelf:function(t,e){var n=this._symbol._definition._hitTest(t,e);return n&&(n.item=this),n},_draw:function(t,e){this.symbol._definition.draw(t,e)}}),C=e.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){return new e({type:null,tolerance:paper.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),S=e.extend({_class:"Segment",beans:!0,initialize:function(e,n,i,r,s,o){var a,l,u,c=arguments.length;0===c||(1===c?"point"in e?(a=e.point,l=e.handleIn,u=e.handleOut):a=e:2===c&&"number"==typeof e?a=arguments:3>=c?(a=e,l=n,u=i):(a=e!==t?[e,n]:null,l=i!==t?[i,r]:null,u=s!==t?[s,o]:null)),new T(a,this,"_point"),new T(l,this,"_handleIn"),new T(u,this,"_handleOut")},_serialize:function(t){return e.serialize(this.hasHandles()?[this._point,this._handleIn,this._handleOut]:this._point,t,!0)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){var t=l.read(arguments);this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(){var t=l.read(arguments);this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(){var t=l.read(arguments);this._handleOut.set(t.x,t.y)},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},clearHandles:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_selectionState:0,isSelected:function(t){var e=this._selectionState;return t?t===this._point?!!(4&e):t===this._handleIn?!!(1&e):t===this._handleOut?!!(2&e):!1:!!(7&e)},setSelected:function(t,e){var n=this._path,t=!!t,i=this._selectionState,r=i,s=e?e===this._point?4:e===this._handleIn?1:e===this._handleOut?2:0:7;t?i|=s:i&=~s,this._selectionState=i,n&&i!==r&&(n._updateSelection(this,r,i),n._changed(129))},getIndex:function(){return this._index!==t?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new E(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t._x,i=t._y;t.set(e._x,e._y),e.set(n,i)},reversed:function(){return new S(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new S(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,l=2;return e[0]=o,e[1]=a,r&&(e[l++]=r._x+o,e[l++]=r._y+a),s&&(e[l++]=s._x+o,e[l++]=s._y+a),t&&(t._transformCoordinates(e,e,l/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,l=2,r&&(r._x=e[l++]-o,r._y=e[l++]-a),s&&(s._x=e[l++]-o,s._y=e[l++]-a)):(r||(e[l++]=o,e[l++]=a),s||(e[l++]=o,e[l++]=a))),e}}),T=l.extend({initialize:function(e,n,i){var r,s,o;if(e)if((r=e[0])!==t)s=e[1];else{var a=e;(r=a.x)===t&&(a=l.read(arguments),r=a.x),s=a.y,o=a.selected}else r=s=0;this._x=r,this._y=s,this._owner=n,n[i]=this,o&&this.setSelected(!0)},set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},_serialize:function(t){var e=t.formatter,n=e.number(this._x),i=e.number(this._y);return this.isSelected()?{x:n,y:i,selected:!0}:[n,i]},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return o.isZero(this._x)&&o.isZero(this._y)},setSelected:function(t){this._owner.setSelected(t,this)},isSelected:function(){return this._owner.isSelected(this)}}),$=e.extend({_class:"Curve",initialize:function(t,e,n,i,r,s,o,a){var l,u,c,h,d,f,p=arguments.length;3===p?(this._path=t,l=e,u=n):0===p?(l=new S,u=new S):1===p?"segment1"in t?(l=new S(t.segment1),u=new S(t.segment2)):"point1"in t?(c=t.point1,d=t.handle1,f=t.handle2,h=t.point2):Array.isArray(t)&&(c=[t[0],t[1]],h=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(l=new S(t),u=new S(e)):4===p?(c=t,d=e,f=n,h=i):8===p&&(c=[t,e],h=[o,a],d=[n-t,i-e],f=[r-o,s-a]),this._segment1=l||new S(c,null,d),this._segment2=u||new S(h,f,null)},_serialize:function(t){return e.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0)},_changed:function(){this._length=this._bounds=t},clone:function(){return new $(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(n.x,n.y)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){var t=l.read(arguments);this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(){var t=l.read(arguments);this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){var t=l.read(arguments);this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){var t=l.read(arguments);this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return 0===this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return $.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;8>n;n+=2)e.push(new l(t[n],t[n+1]));return e},getLength:function(){return null==this._length&&(this._length=$.getLength(this.getValues(),0,1)),this._length},getArea:function(){return $.getArea(this.getValues())},getLine:function(){return new g(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new $($.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return $.getLength(this.getValues(),t,e)},getIntersections:function(t){return $._getIntersections(this.getValues(),t&&t!==this?t.getValues():null,this,t,[],{})},_getParameter:function(e,n){return n?e:e&&e.curve===this?e.parameter:e===t&&n===t?.5:this.getParameterAt(e,0)},divide:function(t,e,n){var i=this._getParameter(t,e),r=4e-7,s=1-r,o=null;if(i>=r&&s>=i){var a=$.subdivide(this.getValues(),i),u=a[0],c=a[1],h=n||this.hasHandles(),d=this._segment1,f=this._segment2,p=this._path;h&&(d._handleOut.set(u[2]-u[0],u[3]-u[1]),f._handleIn.set(c[4]-c[6],c[5]-c[7]));var g=u[6],m=u[7],v=new S(new l(g,m),h&&new l(u[4]-g,u[5]-m),h&&new l(c[2]-g,c[3]-m));p?(p.insert(d._index+1,v),o=this.getNext()):(this._segment2=v,o=new $(v,f))}return o},split:function(t,e){return this._path?this._path.split(this._segment1._index,this._getParameter(t,e)):null},reversed:function(){return new $(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut.set(0,0),this._segment2._handleIn.set(0,0)},statics:{getValues:function(t,e,n){var i=t._point,r=t._handleOut,s=e._handleIn,o=e._point,a=[i._x,i._y,i._x+r._x,i._y+r._y,o._x+s._x,o._y+s._y,o._x,o._y];return n&&n._transformCoordinates(a,a,4),a},subdivide:function(e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7];n===t&&(n=.5);var h=1-n,d=h*i+n*s,f=h*r+n*o,p=h*s+n*a,g=h*o+n*l,m=h*a+n*u,v=h*l+n*c,_=h*d+n*p,y=h*f+n*g,b=h*p+n*m,w=h*g+n*v,x=h*_+n*b,k=h*y+n*w;return[[i,r,d,f,_,y,x,k],[x,k,b,w,m,v,u,c]]},solveCubic:function(t,e,n,i,r,s){var a=t[e],l=t[e+2],u=t[e+4],c=t[e+6],h=3*(l-a),d=3*(u-l)-h,f=c-a-h-d;return o.solveCubic(f,d,h,a-n,i,r,s)},getParameterOf:function(t,e){var n=new l(t[0],t[1]),i=new l(t[6],t[7]),r=1e-12,s=e.isClose(n,r)?0:e.isClose(i,r)?1:null;if(null!==s)return s;for(var o=[e.x,e.y],a=[],u=2e-7,c=0;2>c;c++)for(var h=$.solveCubic(t,c,o[c],a,0,1),d=0;h>d;d++)if(s=a[d],e.isClose($.getPoint(t,s),u))return s;return e.isClose(n,u)?0:e.isClose(i,u)?1:null},getNearestParameter:function(t,e){function n(n){if(n>=0&&1>=n){var i=e.getDistance($.getPoint(t,n),!0);if(f>i)return f=i,p=n,!0}}if($.isStraight(t)){var i=t[0],r=t[1],s=t[6],o=t[7],a=s-i,u=o-r,c=a*a+u*u;if(0===c)return 0;var h=((e.x-i)*a+(e.y-r)*u)/c;return 1e-12>h?0:h>.999999999999?1:$.getParameterOf(t,new l(i+h*a,r+h*u))}for(var d=100,f=1/0,p=0,g=0;d>=g;g++)n(g/d);for(var m=1/(2*d);m>4e-7;)n(p-m)||n(p+m)||(m/=2);return p},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=$.subdivide(t,e)[1]),1>n&&(t=$.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},hasHandles:function(t){var e=o.isZero;return!(e(t[0]-t[2])&&e(t[1]-t[3])&&e(t[4]-t[6])&&e(t[5]-t[7]))},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=3*r-2*n-l,h=3*s-2*i-u,d=3*o-2*l-n,f=3*a-2*u-i;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<10*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[6],r=t[7],s=(t[2]+e)/2,o=(t[3]+n)/2,a=(t[4]+t[6])/2,l=(t[5]+t[7])/2;return 6*((e-s)*(o+n)+(s-a)*(l+o)+(a-i)*(r+l))/10},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;2>r;r++)$._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new d(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,a,l,u){function c(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>l[r]&&(l[r]=i)}var h=3*(e-n)-t+i,d=2*(t+n)-4*e,f=e-t,p=o.solveQuadratic(h,d,f,u),g=4e-7,m=1-g;c(i,0);for(var v=0;p>v;v++){var _=u[v],y=1-_;_>g&&m>_&&c(y*y*y*t+3*y*y*_*e+3*y*_*_*n+_*_*_*i,s)}}}},e.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];if(!e){var n=this._path;e=this._bounds[t]=j[t]([this._segment1,this._segment2],!1,n&&n.getStyle())}return e.clone()}},{}),e.each({isStraight:function(t,e,n){if(e.isZero()&&n.isZero())return!0;if(t.isZero())return!1;if(e.isCollinear(t)&&n.isCollinear(t)){var i=t.dot(t),r=t.dot(e)/i,s=t.dot(n)/i;return r>=0&&1>=r&&0>=s&&s>=-1}return!1},isLinear:function(t,e,n){var i=t.divide(3);return e.equals(i)&&n.negate().equals(i)}},function(t,e){this[e]=function(){var e=this._segment1,n=this._segment2;return t(n._point.subtract(e._point),e._handleOut,n._handleIn)},this.statics[e]=function(e){var n=e[0],i=e[1],r=e[6],s=e[7];return t(new l(r-n,s-i),new l(e[2]-n,e[3]-i),new l(e[4]-r,e[5]-s))}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).y)<1e-7},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAt(.5,!0).x)<1e-7}}),{beans:!1,getParameterAt:function(t,e){return $.getParameterAt(this.getValues(),t,e)},getParameterOf:function(){return $.getParameterOf(this.getValues(),l.read(arguments))},getLocationAt:function(t,e){var n=e?t:this.getParameterAt(t);return null!=n&&n>=0&&1>=n?new E(this,n):null},getLocationOf:function(){return this.getLocationAt(this.getParameterOf(l.read(arguments)),!0)},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getNearestLocation:function(){var t=l.read(arguments),e=this.getValues(),n=$.getNearestParameter(e,t),i=$.getPoint(e,n);return new E(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return e.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return $[t](i,n?e:$.getParameterAt(i,e,0))}},{statics:{evaluateMethods:t}})},new function(){function e(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=9*(i-s)+3*(a-e),c=6*(e+s)-12*i,h=3*(i-e),d=9*(r-o)+3*(l-n),f=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(u*t+c)*t+h,n=(d*t+f)*t+p;return Math.sqrt(e*e+n*n)}}function n(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||0>e||e>1)return null;var r,s,o=t[0],a=t[1],u=t[2],c=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=4e-7,m=1-g;if(0===n&&(g>e||e>m)){var v=g>e;r=v?o:f,s=v?a:p}else{var _=3*(u-o),y=3*(h-u)-_,b=f-o-_-y,w=3*(c-a),x=3*(d-c)-w,k=p-a-w-x;if(0===n)r=((b*e+y)*e+_)*e+o,s=((k*e+x)*e+w)*e+a;else{if(g>e?(r=_,s=w):e>m?(r=3*(f-h),s=3*(p-d)):(r=(3*b*e+2*y)*e+_,s=(3*k*e+2*x)*e+w),i){0===r&&0===s&&(g>e||e>m)&&(r=h-u,s=d-c);var C=Math.sqrt(r*r+s*s);C&&(r/=C,s/=C)}if(3===n){var S=6*b*e+2*y,T=6*k*e+2*x,$=Math.pow(r*r+s*s,1.5);r=0!==$?(r*T-s*S)/$:0,s=0}}}return 2===n?new l(s,-r):new l(r,s)}return{statics:{getLength:function(i,r,s){if(r===t&&(r=0),s===t&&(s=1),0===r&&1===s&&$.isStraight(i)){var a=i[6]-i[0],l=i[7]-i[1];return Math.sqrt(a*a+l*l)}var u=e(i);return o.integrate(u,r,s,n(r,s))},getParameterAt:function(i,r,s){function a(t){return g+=o.integrate(d,s,t,n(s,t)),s=t,g-r}if(s===t&&(s=0>r?1:0),0===r)return s;var l=Math.abs,u=r>0,c=u?s:0,h=u?1:s,d=e(i),f=o.integrate(d,c,h,n(c,h));if(l(r-f)<1e-12)return u?h:c;if(l(r)>f)return null;var p=r/f,g=0;return o.findRoot(a,d,s+p,c,h,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x}}}},new function(){function t(t,e,n,i,r,s,o,a,l,u,c){var h=e.startConnected,d=e.endConnected,f=4e-7,p=1-f;if(null==r&&(r=$.getParameterOf(n,s)),null!==r&&r>=(h?f:0)&&(d?p:1)>=r&&(null==l&&(l=$.getParameterOf(o,u)),null!==l&&l>=(d?f:0)&&(h?p:1)>=l)){var g=e.renormalize;if(g){var m=g(r,l);r=m[0],l=m[1]}var v=new E(i,r,s||$.getPoint(n,r),c),_=new E(a,l,u||$.getPoint(o,l),c),y=v.getPath()===_.getPath()&&v.getIndex()>_.getIndex(),b=y?_:v,w=e.include;v._intersection=_,_._intersection=v,(!w||w(b))&&E.insert(t,b,!0)}}function e(r,s,o,a,l,u,c,h,d,f,p,m,v){if(!(++v>=24)){var _,y,b=s[0],w=s[1],x=s[6],k=s[7],C=g.getSignedDistance,S=C(b,w,x,k,s[2],s[3]),T=C(b,w,x,k,s[4],s[5]),E=S*T>0?.75:4/9,D=E*Math.min(0,S,T),j=E*Math.max(0,S,T),A=C(b,w,x,k,r[0],r[1]),P=C(b,w,x,k,r[2],r[3]),M=C(b,w,x,k,r[4],r[5]),O=C(b,w,x,k,r[6],r[7]),I=n(A,P,M,O),N=I[0],L=I[1];if(null!=(_=i(N,L,D,j))&&null!=(y=i(N.reverse(),L.reverse(),D,j))){r=$.getPart(r,_,y);var R=y-_,z=c+(h-c)*_,F=c+(h-c)*y;if(p>.5&&R>.5)if(F-z>f-d){var H=$.subdivide(r,.5),B=z+(F-z)/2;e(s,H[0],a,o,l,u,d,f,z,B,R,!m,v),e(s,H[1],a,o,l,u,d,f,B,F,R,!m,v)}else{var H=$.subdivide(s,.5),B=d+(f-d)/2;e(H[0],r,a,o,l,u,d,B,z,F,R,!m,v),e(H[1],r,a,o,l,u,B,f,z,F,R,!m,v)}else if(Math.max(f-d,F-z)<1e-7){var q=z+(F-z)/2,W=d+(f-d)/2;r=o.getValues(),s=a.getValues(),t(l,u,m?s:r,m?a:o,m?W:q,null,m?r:s,m?o:a,m?q:W,null)}else R>1e-12&&e(s,r,a,o,l,u,d,f,z,F,R,!m,v)}}}function n(t,e,n,i){var r,s=[0,t],o=[1/3,e],a=[2/3,n],l=[1,i],u=e-(2*t+i)/3,c=n-(t+2*i)/3;if(0>u*c)r=[[s,o,l],[s,a,l]];else{var h=u/c;r=[h>=2?[s,o,l]:.5>=h?[s,a,l]:[s,o,a,l],[s,l]]}return 0>(u||c)?r.reverse():r}function i(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,o=t.length;o>s;s++){var a=t[s][0],l=t[s][1];if(e?l>=n:n>=l)return l===n?a:i+(n-r)*(a-i)/(l-r);i=a,r=l}return null}function s(e,n,i,r,s,a){for(var l=$.isStraight(e),u=l?n:e,c=l?e:n,h=c[0],d=c[1],f=c[6],p=c[7],g=f-h,m=p-d,v=Math.atan2(-m,g),_=Math.sin(v),y=Math.cos(v),b=[],w=0;8>w;w+=2){var x=u[w]-h,k=u[w+1]-d;b.push(x*y-k*_,x*_+k*y)}for(var C=[],S=$.solveCubic(b,1,0,C,0,1),w=0;S>w;w++){var T=C[w],E=$.getPoint(u,T),D=$.getParameterOf(c,E);if(null!==D){var j=$.getPoint(c,D),A=l?D:T,P=l?T:D;(!a.endConnected||P>o.CURVETIME_EPSILON)&&t(s,a,e,i,A,l?j:E,n,r,P,l?E:j)}}}function a(e,n,i,r,s,o){var a=g.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);a&&t(s,o,e,i,null,a,n,r,null,a)}return{statics:{_getIntersections:function(n,i,r,o,u,c){if(!i)return $._getSelfIntersection(n,r,u,c);var h=n[0],d=n[1],f=n[6],p=n[7],g=i[0],m=i[1],v=i[6],_=i[7],y=(3*n[2]+h)/4,b=(3*n[3]+d)/4,w=(3*n[4]+f)/4,x=(3*n[5]+p)/4,k=(3*i[2]+g)/4,C=(3*i[3]+m)/4,S=(3*i[4]+v)/4,T=(3*i[5]+_)/4,E=Math.min,D=Math.max;if(!(D(h,y,w,f)>=E(g,k,S,v)&&E(h,y,w,f)<=D(g,k,S,v)&&D(d,b,x,p)>=E(m,C,T,_)&&E(d,b,x,p)<=D(m,C,T,_)))return u;if(!c.startConnected&&!c.endConnected){var j=$.getOverlaps(n,i);if(j){for(var A=0;2>A;A++){var P=j[A];t(u,c,n,r,P[0],null,i,o,P[1],null,!0)}return u}}var M=$.isStraight(n),O=$.isStraight(i),I=M&&O,N=1e-12,L=u.length;if((I?a:M||O?s:e)(n,i,r,o,u,c,0,1,0,1,0,!1,0),I&&u.length>L)return u;var R=new l(h,d),z=new l(f,p),F=new l(g,m),H=new l(v,_);return R.isClose(F,N)&&t(u,c,n,r,0,R,i,o,0,F),!c.startConnected&&R.isClose(H,N)&&t(u,c,n,r,0,R,i,o,1,H),!c.endConnected&&z.isClose(F,N)&&t(u,c,n,r,1,z,i,o,0,F),z.isClose(H,N)&&t(u,c,n,r,1,z,i,o,1,H),u},_getSelfIntersection:function(t,e,n,i){var r=t[0],s=t[1],a=t[2],u=t[3],c=t[4],h=t[5],d=t[6],f=t[7],p=new g(r,s,d,f,!1),m=p.getSide(new l(a,u),!0),v=p.getSide(new l(c,h),!0);if(m===v){var _=(r-c)*(u-f)+(a-d)*(h-s);if(_*m>0)return n}var y=d-3*c+3*a-r,b=c-2*a+r,w=a-r,x=f-3*h+3*u-s,k=h-2*u+s,C=u-s,S=x*w-y*C,T=x*b-y*k,E=k*w-b*C;if(0>S*S-4*T*E){var D,j=[],A=o.solveCubic(y*y+x*x,3*(y*b+x*k),2*(b*b+k*k)+y*w+x*C,b*w+k*C,j,0,1);if(A>0){for(var P=0,M=0;A>P;P++){var O=Math.abs(e.getCurvatureAt(j[P],!0));O>M&&(M=O,D=j[P])}var I=$.subdivide(t,D);i.endConnected=!0,i.renormalize=function(t,e){return[t*D,e*(1-D)+D]},$._getIntersections(I[0],I[1],e,e,n,i)}}return n},getOverlaps:function(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=4e-7,s=2e-7,o=$.isStraight(t),a=$.isStraight(e),u=o&&a;if(u){var c=n(t)<n(e),h=c?e:t,d=c?t:e,f=new g(h[0],h[1],h[6],h[7]);if(f.getDistance(new l(d[0],d[1]))>s||f.getDistance(new l(d[6],d[7]))>s)return null}else if(o^a)return null;for(var p=[t,e],m=[],v=0,_=0;2>v&&m.length<2;v+=0===_?0:1,_=1^_){var y=$.getParameterOf(p[1^v],new l(p[v][0===_?0:6],p[v][0===_?1:7]));if(null!=y){var b=0===v?[_,y]:[y,_];(0===m.length||i(b[0]-m[0][0])>r&&i(b[1]-m[0][1])>r)&&m.push(b)}if(1===v&&0===m.length)break}if(2!==m.length)m=null;else if(!u){var w=$.getPart(t,m[0][0],m[1][0]),x=$.getPart(e,m[0][1],m[1][1]);(i(x[2]-w[2])>s||i(x[3]-w[3])>s||i(x[4]-w[4])>s||i(x[5]-w[5])>s)&&(m=null)}return m}}}}),E=e.extend({_class:"CurveLocation",beans:!0,initialize:function gt(t,e,n,i,r){if(e>.9999996){var s=t.getNext();s&&(e=0,t=s)}this._id=a.get(gt),this._setCurve(t),this._parameter=e,this._point=n||t.getPointAt(e,!0),this._overlap=i,this._distance=r,this._intersection=this._next=this._prev=null},_setCurve:function(t){var e=t._path;this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._parameter=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this.getCurve(),e=this._segment;if(!e){var n=this.getParameter();0===n?e=t._segment1:1===n?e=t._segment2:null!=n&&(e=t.getPartLength(0,n)<t.getPartLength(n,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){function t(t){var e=t&&t.getCurve();return e&&null!=(i._parameter=e.getParameterOf(i._point))?(i._setCurve(e),i._segment=t,e):void 0}var e=this._curve,n=e&&e._path,i=this;return n&&n._version!==this._version&&(e=this._parameter=this._curve=this._offset=null),e||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getParameter:function(){var t=this.getCurve(),e=this._parameter;return t&&null==e?this._parameter=t.getParameterOf(this._point):e},getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;n>r;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getPartLength(0,e)},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=null;return t&&(e=t.divide(this.getParameter(),!0),e&&this._setSegment(e._segment1)),e},split:function(){var t=this.getCurve();return t?t.split(this.getParameter(),!0):null},equals:function(t,e){var n=this===t,i=2e-7;if(!n&&t instanceof E&&this.getPath()===t.getPath()&&this.getPoint().isClose(t.getPoint(),i)){var r=this.getCurve(),s=t.getCurve(),o=Math.abs,a=o((r.isLast()&&s.isFirst()?-1:r.getIndex())+this.getParameter()-((s.isLast()&&r.isFirst()?-1:s.getIndex())+t.getParameter()));n=(4e-7>a||(a=o(this.getOffset()-t.getOffset()))<i||o(this.getPath().getLength()-a)<i)&&(e||!this._intersection&&!t._intersection||this._intersection&&this._intersection.equals(t._intersection,!0));
}return n},toString:function(){var t=[],e=this.getPoint(),n=s.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getParameter();return null!=r&&t.push("parameter: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e,n){return n>e?t>e&&n>t:t>e&&c>=t||t>=-c&&n>t}var e=this._intersection;if(!e)return!1;var n=this.getParameter(),i=e.getParameter(),r=4e-7,s=1-r;if(n>=r&&s>=n||i>=r&&s>=i)return!this.isTouching();var o=this.getCurve(),a=o.getPrevious(),l=e.getCurve(),u=l.getPrevious(),c=Math.PI;if(!a||!u)return!1;var h=a.getTangentAt(s,!0).negate().getAngleInRadians(),d=o.getTangentAt(r,!0).getAngleInRadians(),f=u.getTangentAt(s,!0).negate().getAngleInRadians(),p=l.getTangentAt(r,!0).getAngleInRadians();return t(f,h,d)^t(p,h,d)&&t(f,d,h)^t(p,d,h)},isOverlap:function(){return!!this._overlap}},e.each($.evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getParameter(),n=this.getCurve();return null!=t&&n&&n[e](t,!0)}},{preserve:!0}),new function(){function t(t,e,n){function i(n,i){for(var s=n+i;s>=-1&&r>=s;s+=i){var o=t[(s%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),2e-7))break;if(e.equals(o))return o}return null}for(var r=t.length,s=0,o=r-1;o>=s;){var a,l=s+o>>>1,u=t[l];if(n&&(a=e.equals(u)?u:i(l,-1)||i(l,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var c=e.getPath(),h=u.getPath(),d=c===h?e.getIndex()+e.getParameter()-(u.getIndex()+u.getParameter()):c._id-h._id;0>d?o=l-1:s=l+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=0,r=e.length;r>i;i++)t(n,e[i]._intersection,!1);return n}}}}),D=_.extend({_class:"PathItem",initialize:function(){},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix.orNullIfIdentity(),o=r?s:(n||t._matrix).orNullIfIdentity();if(!r&&!this.getBounds(s).touches(t.getBounds(o)))return[];for(var a,t,l=this.getCurves(),u=r?l:t.getCurves(),c=l.length,h=r?c:u.length,d=[],f=[],p=0;h>p;p++)d[p]=u[p].getValues(o);for(var p=0;c>p;p++){var g=l[p],m=r?d[p]:g.getValues(s),v=g.getPath();v!==t&&(t=v,a=[],f.push(a)),r&&$._getSelfIntersection(m,g,a,{include:e,startConnected:1===c&&g.getPoint1().equals(g.getPoint2())});for(var _=r?p+1:0;h>_;_++){if(i&&a.length)return a;var y=u[_];$._getIntersections(m,d[_],g,y,a,{include:e,startConnected:r&&g.getPrevious()===y,endConnected:r&&g.getNext()===y})}}a=[];for(var p=0,b=f.length;b>p;p++)a.push.apply(a,f[p]);return a},getCrossings:function(t){return this.getIntersections(t,function(t){return t.isCrossing()})},_asPathItem:function(){return this},setPathData:function(t){function e(t,e){var n=+i[t];return a&&(n+=u[e]),n}function n(t){return new l(e(t,"x"),e(t+1,"y"))}var i,r,s,o=t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,u=new l,h=new l;this.clear();for(var d=0,f=o&&o.length;f>d;d++){var p=o[d],g=p[0],m=g.toLowerCase();i=p.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var v=i&&i.length;switch(a=g===m,"z"!==r||/[mz]/.test(m)||this.moveTo(u=h),m){case"m":case"l":for(var _="m"===m,y=0;v>y;y+=2)this[0===y&&_?"moveTo":"lineTo"](u=n(y));s=u,_&&(h=u);break;case"h":case"v":for(var b="h"===m?"x":"y",y=0;v>y;y++)u[b]=e(y,b),this.lineTo(u);s=u;break;case"c":for(var y=0;v>y;y+=6)this.cubicCurveTo(n(y),s=n(y+2),u=n(y+4));break;case"s":for(var y=0;v>y;y+=4)this.cubicCurveTo(/[cs]/.test(r)?u.multiply(2).subtract(s):u,s=n(y),u=n(y+2)),r=m;break;case"q":for(var y=0;v>y;y+=4)this.quadraticCurveTo(s=n(y),u=n(y+2));break;case"t":for(var y=0;v>y;y+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?u.multiply(2).subtract(s):u,u=n(y)),r=m;break;case"a":for(var y=0;v>y;y+=7)this.arcTo(u=n(y+5),new c(+i[y],+i[y+1]),+i[y+2],+i[y+4],+i[y+3]);break;case"z":this.closePath(!0)}r=m}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=this._getWinding(t,!1,!0);return!!("evenodd"===this.getWindingRule()?1&e:e)}}),j=D.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(e){this._closed=!1,this._segments=[],this._version=0;var n=Array.isArray(e)?"object"==typeof e[0]?e:arguments:!e||e.size!==t||e.x===t&&e.point===t?null:arguments;n&&n.length>0?this.setSegments(n):(this._curves=t,this._selectedSegmentState=0,n||"string"!=typeof e||(this.setPathData(e),e=null)),this._initialize(!n&&e)},_equals:function(t){return this._closed===t._closed&&e.equals(this._segments,t._segments)},clone:function(e){var n=new j(_.NO_INSERT);return n.setSegments(this._segments),n._closed=this._closed,this._clockwise!==t&&(n._clockwise=this._clockwise),this._clone(n,e)},_changed:function mt(e){if(mt.base.call(this,e),8&e){var n=this._parent;if(n&&(n._currentPath=t),this._length=this._area=this._clockwise=this._monoCurves=t,16&e)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;r>i;i++)this._curves[i]._changed()}else 32&e&&(this._bounds=t)},getStyle:function(){var t=this._parent;return(t instanceof A?t:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var n=this.isFullySelected();this._segments.length=0,this._selectedSegmentState=0,this._curves=t,e&&e.length>0&&this._add(S.readAll(e)),n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;n>i;i++)t[i]=new $(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new $(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){e._transformCoordinates(t,g,!1),i=g[0],r=g[1],m?(v.push("M"+p.pair(i,r)),m=!1):(l=g[2],u=g[3],l===i&&u===r&&c===o&&h===a?n||v.push("l"+p.pair(i-o,r-a)):v.push("c"+p.pair(c-o,h-a)+" "+p.pair(l-o,u-a)+" "+p.pair(i-o,r-a))),o=i,a=r,c=g[4],h=g[5]}var i,r,o,a,l,u,c,h,d=this._segments,f=d.length,p=new s(e),g=new Array(6),m=!0,v=[];if(0===f)return"";for(var _=0;f>_;_++)n(d[_]);return this._closed&&f>0&&(n(d[0],!0),v.push("z")),v.join("")}},{isEmpty:function(){return 0===this._segments.length},_transformContent:function(t){for(var e=new Array(6),n=0,i=this._segments.length;i>n;n++)this._segments[n]._transformCoordinates(t,e,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,e=s?n.length:e,o=0;r>o;o++){var a=t[o];a._path&&(a=t[o]=a.clone()),a._path=this,a._index=e+o,a._selectionState&&this._updateSelection(a,0,a._selectionState)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var o=e+r,l=n.length;l>o;o++)n[o]._index=o}if(i){var u=this._countCurves(),c=e+r-1===u?e-1:e,h=c,d=Math.min(c+r,u);t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),h+=t._curves.length);for(var o=h;d>o;o++)i.splice(o,0,new $(this,null,null));this._adjustCurves(c,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;e>s;s++)n=r[s],n._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(S.readAll(arguments)):this._add([S.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(S.readAll(arguments,1),t):this._add([S.read(arguments,1)],t)[0]},addSegment:function(){return this._add([S.read(arguments)])[0]},insertSegment:function(t){return this._add([S.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(S.readAll(t))},insertSegments:function(t,e){return this._add(S.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,n,i){t=t||0,n=e.pick(n,this._segments.length);var r=this._segments,s=this._curves,o=r.length,a=r.splice(t,n-t),l=a.length;if(!l)return a;for(var u=0;l>u;u++){var c=a[u];c._selectionState&&this._updateSelection(c,c._selectionState,0),c._index=c._path=null}for(var u=t,h=r.length;h>u;u++)r[u]._index=u;if(s){var d=t>0&&n===o+(this._closed?1:0)?t-1:t,s=s.splice(d,l);i&&(a._curves=s.slice(1)),this._adjustCurves(d,d)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;n>e;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;n>e;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;i>n;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){if(null==this._area){for(var t=this._segments,e=t.length,n=e-1,i=0,r=0,s=this._closed?e:n;s>r;r++)i+=$.getArea($.getValues(t[r],t[n>r?r+1:0]));this._area=i}return this._area},isClockwise:function(){return this._clockwise!==t?this._clockwise:this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},isFullySelected:function(){var t=this._segments.length;return this._selected&&t>0&&this._selectedSegmentState===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function vt(t){t||this._selectSegments(!1),vt.base.call(this,t)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?7*e:0;for(var n=0;e>n;n++)this._segments[n]._selectionState=t?7:0},_updateSelection:function(t,e,n){t._selectionState=n;var i=this._selectedSegmentState+=n-e;i>0&&this.setSelected(!0)},flatten:function(t){for(var e=new P(this,64,.1),n=0,i=e.length/Math.ceil(e.length/t),r=e.length+(this._closed?-i:i)/2,s=[];r>=n;)s.push(new S(e.getPointAt(n))),n+=i;this.setSegments(s)},reduce:function(){for(var t=this.getCurves(),e=t.length-1;e>=0;e--){var n=t[e];n.hasHandles()||0!==n.getLength()&&!n.isCollinear(n.getNext())||n.remove()}return this},simplify:function(t){if(this._segments.length>2){var e=new M(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null===e)return null;if(1===arguments.length){var n=t;if("number"==typeof n&&(n=this.getLocationAt(n)),!n)return null;t=n.index,e=n.parameter}var i=4e-7,r=1-i;e>=r&&(t++,e--);var s=this.getCurves();if(t>=0&&t<s.length){e>=i&&s[t++].divide(e,!0);var o,a=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),o=this):(o=new j(_.NO_INSERT),o.insertAbove(this,!0),this._clone(o)),o._add(a,0),this.addSegment(a[0]),o}return null},reverse:function(){this._segments.reverse();for(var e=0,n=this._segments.length;n>e;e++){var i=this._segments[e],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=e}this._curves=null,this._clockwise!==t&&(this._clockwise=!this._clockwise),this._changed(9)},join:function(t){if(t){var e=t._segments,n=this.getLastSegment(),i=t.getLastSegment();if(!i)return this;n&&n._point.equals(i._point)&&t.reverse();var r=t.getFirstSegment();if(n&&n._point.equals(r._point))n.setHandleOut(r._handleOut),this._add(e.slice(1));else{var s=this.getFirstSegment();s&&s._point.equals(r._point)&&t.reverse(),i=t.getLastSegment(),s&&s._point.equals(i._point)?(s.setHandleIn(i._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice())}t._closed&&this._add([e[0]]),t.remove()}var o=this.getFirstSegment(),a=this.getLastSegment();return o!==a&&o._point.equals(a._point)&&(o.setHandleIn(a._handleIn),a.remove(),this.setClosed(!0)),this},toShape:function(t){function e(t,e){var n=h[t],i=n.getNext(),r=h[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function n(t){var e=h[t],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point))}function i(t){var e=h[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,s=.5522847498307936;if(i.isOrthogonal(r)){var a=e._point,l=n._point,u=new g(a,i,!0).intersect(new g(l,r,!0),!0);return u&&o.isZero(i.getLength()/u.subtract(a).getLength()-s)&&o.isZero(r.getLength()/u.subtract(l).getLength()-s)}return!1}function r(t,e){return h[t]._point.getDistance(h[e]._point)}if(!this._closed)return null;var s,a,l,u,h=this._segments;if(!this.hasHandles()&&4===h.length&&e(0,2)&&e(1,3)&&n(1)?(s=w.Rectangle,a=new c(r(0,3),r(0,1)),u=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(s=w.Rectangle,a=new c(r(1,6),r(0,3)),l=a.subtract(new c(r(0,7),r(1,2))).divide(2),u=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&i(0)&&i(1)&&i(2)&&i(3)&&(o.isZero(r(0,2)-r(1,3))?(s=w.Circle,l=r(0,2)/2):(s=w.Ellipse,l=new c(r(2,0)/2,r(3,1)/2)),u=h[1]._point),s){var d=this.getPosition(!0),f=this._clone(new s({center:d,size:a,radius:l,insert:!1}),t,!1);return f.rotate(u.subtract(d).getAngle()+90),f}return null},_hitTestSelf:function(t,e){function n(e,n){return t.subtract(e).divide(n).length<=1}function i(t,i,r){if(!e.selected||i.isSelected()){var s=t._point;if(i!==s&&(i=i.add(s)),n(i,b))return new C(r,p,{segment:t,point:i})}}function r(t,n){return(n||e.segments)&&i(t,t._point,"segment")||!n&&e.handles&&(i(t,t._handleIn,"handle-in")||i(t,t._handleOut,"handle-out"))}function s(t){h.add(t)}function o(e){if(("round"!==a||"round"!==u)&&(h=new j({internal:!0,closed:!0}),_||e._index>0&&e._index<v-1?"round"!==a&&(e._handleIn.isZero()||e._handleOut.isZero())&&j._addBevelJoin(e,a,S,c,s,!0):"round"!==u&&j._addSquareCap(e,u,S,s,!0),!h.isEmpty())){var i;return h.contains(t)||(i=h.getNearestLocation(t))&&n(i.getPoint(),y)}return n(e._point,b)}var a,u,c,h,d,f,p=this,g=this.getStyle(),m=this._segments,v=m.length,_=this._closed,y=e._tolerancePadding,b=y,w=e.stroke&&g.hasStroke(),x=e.fill&&g.hasFill(),k=e.curves,S=w?g.getStrokeWidth()/2:x&&e.tolerance>0||k?0:null;if(null!==S&&(S>0?(a=g.getStrokeJoin(),u=g.getStrokeCap(),c=S*g.getMiterLimit(),b=y.add(new l(S,S))):a=u="round"),!e.ends||e.segments||_){if(e.segments||e.handles)for(var T=0;v>T;T++)if(f=r(m[T]))return f}else if(f=r(m[0],!0)||r(m[v-1],!0))return f;if(null!==S){if(d=this.getNearestLocation(t)){var $=d.getParameter();0===$||1===$&&v>1?o(d.getSegment())||(d=null):n(d.getPoint(),b)||(d=null)}if(!d&&"miter"===a&&v>1)for(var T=0;v>T;T++){var E=m[T];if(t.getDistance(E._point)<=c&&o(E)){d=E.getLocation();break}}}return!d&&x&&this._contains(t)||d&&!w&&!k?new C("fill",this):d?new C(w?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},e.each($.evaluateMethods,function(t){this[t+"At"]=function(e,n){var i=this.getLocationAt(e,n);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=l.read(arguments),e=this.getCurves(),n=0,i=e.length;i>n;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t,e){var n=this.getCurves(),i=0;if(e){var r=~~t,s=n[r];return s?s.getLocationAt(t-r,!0):null}for(var o=0,a=n.length;a>o;o++){var l=i,s=n[o];if(i+=s.getLength(),i>t)return s.getLocationAt(t-l)}return n.length>0&&t<=this.getLength()?new E(n[n.length-1],1):null},getNearestLocation:function(){for(var t=l.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;s>r;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){function t(t,e,n,i){function r(e){var n=o[e],i=o[e+1];(h!=n||d!=i)&&(t.beginPath(),t.moveTo(h,d),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!0),t.fill())}for(var s=i/2,o=new Array(6),a=0,l=e.length;l>a;a++){var u=e[a];u._transformCoordinates(n,o,!1);var c=u._selectionState,h=o[0],d=o[1];if(1&c&&r(2),2&c&&r(4),t.fillRect(h-s,d-s,i,i),!(4&c)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(h-s+1,d-s+1,i-2,i-2),t.fillStyle=f}}}function e(t,e,n){function i(e){if(n)e._transformCoordinates(n,p,!1),r=p[0],s=p[1];else{var i=e._point;r=i._x,s=i._y}if(g)t.moveTo(r,s),g=!1;else{if(n)l=p[2],u=p[3];else{var d=e._handleIn;l=r+d._x,u=s+d._y}l===r&&u===s&&c===o&&h===a?t.lineTo(r,s):t.bezierCurveTo(c,h,l,u,r,s)}if(o=r,a=s,n)c=p[4],h=p[5];else{var d=e._handleOut;c=o+d._x,h=a+d._y}}for(var r,s,o,a,l,u,c,h,d=e._segments,f=d.length,p=new Array(6),g=!0,m=0;f>m;m++)i(d[m]);e._closed&&f>0&&i(d[0])}return{_draw:function(t,n,i){function r(t){return c[(t%h+h)%h]}var s=n.dontStart,o=n.dontFinish||n.clip,a=this.getStyle(),l=a.hasFill(),u=a.hasStroke(),c=a.getDashArray(),h=!paper.support.nativeDash&&u&&c&&c.length;if(s||t.beginPath(),!s&&this._currentPath?t.currentPath=this._currentPath:(l||u&&!h||o)&&(e(t,this,i),this._closed&&t.closePath(),s||(this._currentPath=t.currentPath)),!o&&(l||u)&&(this._setStyles(t),l&&(t.fill(a.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),u)){if(h){s||t.beginPath();var d,f=new P(this,32,.25,i),p=f.length,g=-a.getDashOffset(),m=0;for(g%=p;g>0;)g-=r(m--)+r(m--);for(;p>g;)d=g+r(m++),(g>0||d>0)&&f.drawPart(t,Math.max(g,0),Math.max(d,0)),g=d+r(m++)}t.stroke()}},_drawSelected:function(n,i){n.beginPath(),e(n,this,i),n.stroke(),t(n,this._segments,i,paper.settings.handleSize)}}},new function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var s=1;e>s;s++)i[s]=1/r,r=(e-1>s?4:2)-i[s],n[s]=(t[s]-n[s-1])/r;for(var s=1;e>s;s++)n[e-s-1]-=i[e-s]*n[e-s];return n}return{smooth:function(){var e=this._segments,n=e.length,i=this._closed,r=n,s=0;if(!(2>=n)){i&&(s=Math.min(n,4),r+=2*Math.min(n,s));for(var o=[],a=0;n>a;a++)o[a+s]=e[a]._point;if(i)for(var a=0;s>a;a++)o[a]=e[a+n-s]._point,o[a+n+s]=e[a]._point;else r--;for(var u=[],a=1;r-1>a;a++)u[a]=4*o[a]._x+2*o[a+1]._x;u[0]=o[0]._x+2*o[1]._x,u[r-1]=3*o[r-1]._x;for(var c=t(u),a=1;r-1>a;a++)u[a]=4*o[a]._y+2*o[a+1]._y;u[0]=o[0]._y+2*o[1]._y,u[r-1]=3*o[r-1]._y;var h=t(u);if(i){for(var a=0,d=n;s>a;a++,d++){var f=a/s,p=1-f,g=a+s,m=d+s;c[d]=c[a]*f+c[d]*p,h[d]=h[a]*f+h[d]*p,c[m]=c[g]*p+c[m]*f,h[m]=h[g]*p+h[m]*f}r--}for(var v=null,a=s;r-s>=a;a++){var _=e[a-s];v&&_.setHandleIn(v.subtract(_._point)),r>a&&(_.setHandleOut(new l(c[a],h[a]).subtract(_._point)),v=r-1>a?new l(2*o[a+1]._x-c[a+1],2*o[a+1]._y-h[a+1]):new l((o[r]._x+c[r-1])/2,(o[r]._y+h[r-1])/2))}if(i&&v){var _=this._segments[0];_.setHandleIn(v.subtract(_._point))}}}}},new function(){function t(t){var e=t._segments;if(0===e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new S(l.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new S(l.read(arguments))])},cubicCurveTo:function(){var e=l.read(arguments),n=l.read(arguments),i=l.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new S(i,n.subtract(i))])},quadraticCurveTo:function(){var e=l.read(arguments),n=l.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var n=l.read(arguments),i=l.read(arguments),r=e.pick(e.read(arguments),.5),s=1-r,o=t(this)._point,a=n.subtract(o.multiply(s*s)).subtract(i.multiply(r*r)).divide(2*r*s);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(a,i)},arcTo:function(){var n,i,r,s,o,a=t(this),u=a._point,h=l.read(arguments),d=e.peek(arguments),f=e.pick(d,!0);if("boolean"==typeof f)var m=u.add(h).divide(2),n=m.add(m.subtract(u).rotate(f?-90:90));else if(e.remain(arguments)<=2)n=h,h=l.read(arguments);else{var v=c.read(arguments);if(v.isZero())return this.lineTo(h);var _=e.read(arguments),f=!!e.read(arguments),y=!!e.read(arguments),m=u.add(h).divide(2),b=u.subtract(m).rotate(-_),w=b.x,x=b.y,k=Math.abs,C=k(v.width),T=k(v.height),$=C*C,E=T*T,D=w*w,j=x*x,A=Math.sqrt(D/$+j/E);if(A>1&&(C*=A,T*=A,$=C*C,E=T*T),A=($*E-$*j-E*D)/($*j+E*D),k(A)<1e-12&&(A=0),0>A)throw new Error("Cannot create an arc with the given arguments");i=new l(C*x/T,-T*w/C).multiply((y===f?-1:1)*Math.sqrt(A)).rotate(_).add(m),o=(new p).translate(i).rotate(_).scale(C,T),s=o._inverseTransform(u),r=s.getDirectedAngle(o._inverseTransform(h)),!f&&r>0?r-=360:f&&0>r&&(r+=360)}if(n){var P=new g(u.add(n).divide(2),n.subtract(u).rotate(90),!0),M=new g(n.add(h).divide(2),h.subtract(n).rotate(90),!0),O=new g(u,h),I=O.getSide(n);if(i=P.intersect(M,!0),!i){if(!I)return this.lineTo(h);throw new Error("Cannot create an arc with the given arguments")}s=u.subtract(i),r=s.getDirectedAngle(h.subtract(i));var N=O.getSide(i);0===N?r=I*Math.abs(r):I===N&&(r+=0>r?360:-360)}for(var L=Math.abs(r),R=L>=360?4:Math.ceil(L/90),z=r/R,F=z*Math.PI/360,H=4/3*Math.sin(F)/(1+Math.cos(F)),B=[],q=0;R>=q;q++){var b=h,W=null;if(R>q&&(W=s.rotate(90).multiply(H),o?(b=o._transformPoint(s),W=o._transformPoint(s.add(W)).subtract(b)):b=i.add(s)),0===q)a.setHandleOut(W);else{var Y=s.rotate(-90).multiply(H);o&&(Y=o._transformPoint(s.add(Y)).subtract(b)),B.push(new S(b,Y,W))}s=s.rotate(z)}this._add(B)},lineBy:function(){var e=l.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var n=l.read(arguments),i=l.read(arguments),r=e.read(arguments),s=t(this)._point;this.curveTo(s.add(n),s.add(i),r)},cubicCurveBy:function(){var e=l.read(arguments),n=l.read(arguments),i=l.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=l.read(arguments),n=l.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var n=t(this)._point,i=n.add(l.read(arguments)),r=e.pick(e.peek(arguments),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,n.add(l.read(arguments)))},closePath:function(t){this.setClosed(!0),t&&this.join()}}},{_getBounds:function(t,e){return j[t](this._segments,this._closed,this.getStyle(),e)},statics:{getBounds:function(t,e,n,i,r){function s(t){t._transformCoordinates(i,a,!1);for(var e=0;2>e;e++)$._addBounds(l[e],l[e+4],a[e+2],a[e],e,r?r[e]:0,u,c,h);var n=l;l=a,a=n}var o=t[0];if(!o)return new d;for(var a=new Array(6),l=o._transformCoordinates(i,new Array(6),!1),u=l.slice(0,2),c=u.slice(),h=new Array(2),f=1,p=t.length;p>f;f++)s(t[f]);return e&&s(o),new d(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i){function r(t){f=f.include(i?i._transformPoint(t,t):t)}function s(t){f=f.unite(v.setCenter(i?i._transformPoint(t._point):t._point))}function o(t,e){var n=t._handleIn,i=t._handleOut;"round"===e||!n.isZero()&&!i.isZero()&&n.isCollinear(i)?s(t):j._addBevelJoin(t,e,u,m,r)}function a(t,e){"round"===e?s(t):j._addSquareCap(t,e,u,r)}if(!n.hasStroke())return j.getBounds(t,e,n,i);for(var l=t.length-(e?0:1),u=n.getStrokeWidth()/2,h=j._getPenPadding(u,i),f=j.getBounds(t,e,n,i,h),p=n.getStrokeJoin(),g=n.getStrokeCap(),m=u*n.getMiterLimit(),v=new d(new c(h).multiply(2)),_=1;l>_;_++)o(t[_],p);return e?o(t[0],p):l>0&&(a(t[0],g),a(t[t.length-1],g)),f},_getPenPadding:function(t,e){if(!e)return[t,t];var n=e.shiftless(),i=n.transform(new l(t,0)),r=n.transform(new l(0,t)),s=i.getAngleInRadians(),o=i.getLength(),a=r.getLength(),u=Math.sin(s),c=Math.cos(s),h=Math.tan(s),d=-Math.atan(a*h/o),f=Math.atan(a/(h*o));return[Math.abs(o*Math.cos(d)*c-a*Math.sin(d)*u),Math.abs(a*Math.sin(f)*c+o*Math.cos(f)*u)]},_addBevelJoin:function(t,e,n,i,r,s){var o=t.getCurve(),a=o.getPrevious(),u=o.getPointAt(0,!0),c=a.getNormalAt(1,!0),h=o.getNormalAt(0,!0),d=c.getDirectedAngle(h)<0?-n:n;if(c.setLength(d),h.setLength(d),s&&(r(u),r(u.add(c))),"miter"===e){var f=new g(u.add(c),new l(-c.y,c.x),!0).intersect(new g(u.add(h),new l(-h.y,h.x),!0),!0);if(f&&u.getDistance(f)<=i&&(r(f),!s))return}s||r(u.add(c)),r(u.add(h))},_addSquareCap:function(t,e,n,i,r){var s=t._point,o=t.getLocation(),a=o.getNormal().multiply(n);r&&(i(s.subtract(a)),i(s.add(a))),"square"===e&&(s=s.add(a.rotate(0===o.getParameter()?-90:90))),i(s.add(a)),i(s.subtract(a))},getHandleBounds:function(t,e,n,i,r,s){for(var o=new Array(6),a=1/0,l=-a,u=a,c=l,h=0,f=t.length;f>h;h++){var p=t[h];p._transformCoordinates(i,o,!1);for(var g=0;6>g;g+=2){var m=0===g?s:r,v=m?m[0]:0,_=m?m[1]:0,y=o[g],b=o[g+1],w=y-v,x=y+v,k=b-_,C=b+_;a>w&&(a=w),x>l&&(l=x),u>k&&(u=k),C>c&&(c=C)}}return new d(a,u,l-a,c-u)},getRoughBounds:function(t,e,n,i){var r=n.hasStroke()?n.getStrokeWidth()/2:0,s=r;return r>0&&("miter"===n.getStrokeJoin()&&(s=r*n.getMiterLimit()),"square"===n.getStrokeCap()&&(s=Math.max(s,r*Math.sqrt(2)))),j.getHandleBounds(t,e,n,i,j._getPenPadding(r,i),j._getPenPadding(s,i))}}});j.inject({statics:new function(){function t(t,n,i){var r=e.getNamed(i),s=new j(r&&r.insert===!1&&_.NO_INSERT);return s._add(t),s._closed=n,s.set(r)}function n(e,n,i){for(var s=new Array(4),o=0;4>o;o++){var a=r[o];s[o]=new S(a._point.multiply(n).add(e),a._handleIn.multiply(n),a._handleOut.multiply(n))}return t(s,!0,i)}var i=.5522847498307936,r=[new S([-1,0],[0,i],[0,-i]),new S([0,-1],[-i,0],[i,0]),new S([1,0],[0,-i],[0,i]),new S([0,1],[i,0],[-i,0])];return{Line:function(){return t([new S(l.readNamed(arguments,"from")),new S(l.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=l.readNamed(arguments,"center"),i=e.readNamed(arguments,"radius");return n(t,new c(i),arguments)},Rectangle:function(){var e,n=d.readNamed(arguments,"rectangle"),r=c.readNamed(arguments,"radius",0,{readNull:!0}),s=n.getBottomLeft(!0),o=n.getTopLeft(!0),a=n.getTopRight(!0),l=n.getBottomRight(!0);if(!r||r.isZero())e=[new S(s),new S(o),new S(a),new S(l)];else{r=c.min(r,n.getSize(!0).divide(2));var u=r.width,h=r.height,f=u*i,p=h*i;e=[new S(s.add(u,0),null,[-f,0]),new S(s.subtract(0,h),[0,p]),new S(o.add(0,h),null,[0,-p]),new S(o.add(u,0),[-f,0],null),new S(a.subtract(u,0),null,[f,0]),new S(a.add(0,h),[0,-p],null),new S(l.subtract(0,h),null,[0,p]),new S(l.subtract(u,0),[f,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=w._readEllipse(arguments);return n(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=l.readNamed(arguments,"from"),n=l.readNamed(arguments,"through"),i=l.readNamed(arguments,"to"),r=e.getNamed(arguments),s=new j(r&&r.insert===!1&&_.NO_INSERT);return s.moveTo(t),s.arcTo(n,i),s.set(r)},RegularPolygon:function(){for(var n=l.readNamed(arguments,"center"),i=e.readNamed(arguments,"sides"),r=e.readNamed(arguments,"radius"),s=360/i,o=!(i%3),a=new l(0,o?-r:r),u=o?-1:.5,c=new Array(i),h=0;i>h;h++)c[h]=new S(n.add(a.rotate((h+u)*s)));return t(c,!0,arguments)},Star:function(){for(var n=l.readNamed(arguments,"center"),i=2*e.readNamed(arguments,"points"),r=e.readNamed(arguments,"radius1"),s=e.readNamed(arguments,"radius2"),o=360/i,a=new l(0,-1),u=new Array(i),c=0;i>c;c++)u[c]=new S(n.add(a.rotate(o*c).multiply(c%2?s:r)));return t(u,!0,arguments)}}}});var A=D.extend({_class:"CompoundPath",_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function _t(e,n,i){for(var r=n.length-1;r>=0;r--){var s=n[r];s instanceof A&&(n.splice.apply(n,[r,1].concat(s.removeChildren())),s.remove())}n=_t.base.call(this,e,n,i,j);for(var r=0,o=!i&&n&&n.length;o>r;r++){var s=n[r];s._clockwise===t&&s.setClockwise(0===s._index)}return n},reverse:function(){for(var t=this._children,e=0,n=t.length;n>e;e++)t[e].reverse()},smooth:function(){for(var t=0,e=this._children.length;e>t;t++)this._children[t].smooth()},reduce:function yt(){for(var t=this._children,e=t.length-1;e>=0;e--){var n=t[e].reduce();n.isEmpty()&&t.splice(e,1)}if(0===t.length){var n=new j(_.NO_INSERT);return n.insertAbove(this),n.setStyle(this._style),this.remove(),n}return yt.base.call(this)},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()!==!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;i>n;n++)e+=t[n].getArea();return e}},{beans:!0,getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;s>r;r++){var o=n[r],a=o._matrix;i.push(o.getPathData(t&&!a.isIdentity()?t.chain(a):t,e))}return i.join(" ")}},{_getChildHitTestOptions:function(t){return t["class"]===j||"path"===t.type?t:new e(t,{fill:!1})},_draw:function(t,e,n){var i=this._children;if(0!==i.length){if(this._currentPath)t.currentPath=this._currentPath;else{e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var r=0,s=i.length;s>r;r++)i[r].draw(t,e,n);this._currentPath=t.currentPath}if(!e.clip){this._setStyles(t);var o=this._style;o.hasFill()&&(t.fill(o.getWindingRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;s>r;r++){var o=i[r],a=o._matrix;n[o._id]||o._drawSelected(t,a.isIdentity()?e:e.chain(a))}}},new function(){function t(t,e){var n=t._children;if(e&&0===n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}var n={moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new j(_.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=l.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}};return e.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){n[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}}),n});D.inject(new function(){function t(t,e){var n=t.clone(!1).reduce().transform(null,!0,!0);return e?n.resolveCrossings().reorient():n}function e(t,e,n,i,r){var s=new t(_.NO_INSERT);return s.addChildren(e,!0),r&&(s=s.reduce()),s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.setStyle(n._style),s}function n(n,r,o){function a(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];f.push.apply(f,i._segments),p.push.apply(p,i._getMonoCurves())}}if(!n._children&&!n._closed)return i(n,r,o);var l=t(n,!0),h=r&&n!==r&&t(r,!0);h&&/^(subtract|exclude)$/.test(o)^h.isClockwise()!==l.isClockwise()&&h.reverse();var d=E.expand(l.getIntersections(h,function(t){return h&&t.isOverlap()||t.isCrossing()}));s(d);var f=[],p=[];a(l._children||[l]),h&&a(h._children||[h]);for(var g=0,m=d.length;m>g;g++)u(d[g]._segment,l,h,p,o);for(var g=0,m=f.length;m>g;g++){var v=f[g];null==v._winding&&u(v,l,h,p,o)}return e(A,c(f,o),n,r,!0)}function i(n,i,r){function s(t){return a.contains(t.getPointAt(t.getLength()/2))^u?(c.unshift(t),!0):void 0}if(!i||!i._children&&!i._closed||!/^(subtract|intersect)$/.test(r))return null;for(var o=t(n,!1),a=t(i,!1),l=o.getIntersections(a,function(t){return t.isOverlap()||t.isCrossing()}),u="subtract"===r,c=[],h=l.length-1;h>=0;h--){var d=l[h].split();d&&(s(d)&&d.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return s(o),e(y,c,n,i)}function r(t,e){for(var n=t;n;){if(n===e)return;n=n._prev}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._prev;)e=e._prev;t._next=e,e._prev=t}}function s(t){for(var e,n,i=4e-7,s=1-i,o=!1,a=[],l=t.length-1;l>=0;l--){var u=t[l],c=u._curve,h=u._parameter,d=h;c!==e?o=!c.hasHandles():n>0&&(h/=n);var f;i>h?f=c._segment1:h>s?f=c._segment2:(f=c.divide(h,!0,!0)._segment1,o&&a.push(f)),u._setSegment(f);var p=f._intersection,g=u._intersection;if(p){r(p,g);for(var m=p;m;)r(m._intersection,p),m=m._next}else f._intersection=g;e=c,n=d}for(var l=0,v=a.length;v>l;l++)a[l].clearHandles()}function a(t,e,n,i){var r=2e-7,s=4e-7,u=1-s,c=t.x,h=t.y,d=0,f=0,p=[],g=Math.abs;if(n){for(var m=-(1/0),v=1/0,_=h-r,y=h+r,b=0,w=e.length;w>b;b++){var x=e[b].values;if($.solveCubic(x,0,c,p,0,1)>0)for(var k=p.length-1;k>=0;k--){var C=$.getPoint(x,p[k]).y;_>C&&C>m?m=C:C>y&&v>C&&(v=C)}}m=(m+h)/2,v=(v+h)/2,
m>-(1/0)&&(d=a(new l(c,m),e,!1,i)),1/0>v&&(f=a(new l(c,v),e,!1,i))}else for(var S,T,E=c-r,D=c+r,j=!1,b=0,w=e.length;w>b;b++){var A=e[b],x=A.values,P=A.winding;if(P&&(1===P&&h>=x[1]&&h<=x[7]||h>=x[7]&&h<=x[1])&&1===$.solveCubic(x,1,h,p,0,1)){var M=p[0];if(!(M>u&&j&&A.next!==e[b+1]||s>M&&T>u&&A.previous===S)){var O=$.getPoint(x,M).x,I=$.getTangent(x,M).y,N=!1;o.isZero(I)&&!$.isStraight(x)||s>M&&I*$.getTangent(A.previous.values,1).y<0||M>u&&I*$.getTangent(A.next.values,0).y<0?i&&O>=E&&D>=O&&(++d,++f,N=!0):E>=O?(d+=P,N=!0):O>=D&&(f+=P,N=!0),A.previous!==e[b-1]&&(j=s>M&&N)}S=A,T=M}}return Math.max(g(d),g(f))}function u(t,e,n,i,r){var s=2e-7,o=[],l=t,u=0,c=0;do{var h=t.getCurve(),d=h.getLength();o.push({segment:t,curve:h,length:d}),u+=d,t=t.getNext()}while(t&&!t._intersection&&t!==l);for(var f=0;3>f;f++)for(var d=u*(f+1)/4,p=0,g=o.length;g>p;p++){var m=o[p],v=m.length;if(v>=d){(s>d||s>v-d)&&(d=v/2);var h=m.curve,_=h._path,y=_._parent,b=h.getPointAt(d),w=h.isHorizontal();y instanceof A&&(_=y),c+="subtract"===r&&n&&(_===e&&n._getWinding(b,w)||_===n&&!e._getWinding(b,w))?0:a(b,i,w);break}d-=v}for(var x=Math.round(c/3),k=o.length-1;k>=0;k--)o[k].segment._winding=x}function c(t,e){function n(t,e){if(t._visited)return!1;if(!c)return!0;var n=t._winding,i=t._intersection;return i&&e&&d&&i.isOverlap()&&(n=d[n]||n),c(n)}function i(t){return t===a||t===l}function r(t,e){if(!t._next)return t;for(;t;){var r=t._segment,s=r.getNext(),o=s._intersection;if(i(s)||!r._visited&&!s._visited&&(!c||(!e||n(r))&&(!(e&&o&&o.isOverlap())&&n(s)||!e&&o&&n(o._segment))))return t;t=t._next}return null}function s(t,e){for(;t;){var n=t._segment;if(i(n))return n;t=t[e?"_next":"_prev"]}}for(var a,l,u=[],c=h[e],d={unite:{1:2},intersect:{2:1}}[e],f=0,p=t.length;p>f;f++){var g=t[f],m=null,v=!1;if(n(g,!0)){for(a=l=null;!v;){var y=g._intersection,b=m&&g._handleIn;y=y&&(r(y,!0)||r(y,!1))||y;var w=y&&y._segment;if(w&&n(w)&&(g=w),g._visited){if(v=i(g),!v&&y){var x=s(y,!0)||s(y,!1);x&&(g=x,v=!0)}break}m||(m=new j(_.NO_INSERT),a=g,l=w),m.add(new S(g._point,b,g._handleOut)),g._visited=!0,g=g.getNext(),v=i(g)}v?(m.firstSegment.setHandleIn(g._handleIn),m.setClosed(!0)):m&&(console.error("Boolean operation resulted in open path","segments =",m._segments.length,"length =",m.getLength()),m=null),m&&(m._segments.length>8||!o.isZero(m.getArea()))&&(u.push(m),m=null)}}return u}var h={unite:function(t){return 1===t||0===t},intersect:function(t){return 2===t},subtract:function(t){return 1===t},exclude:function(t){return 1===t}};return{_getWinding:function(t,e,n){return a(t,this._getMonoCurves(),e,n)},unite:function(t){return n(this,t,"unite")},intersect:function(t){return n(this,t,"intersect")},subtract:function(t){return n(this,t,"subtract")},exclude:function(t){return n(this,t,"exclude")},divide:function(t){return e(y,[this.subtract(t),this.intersect(t)],this,t,!0)},resolveCrossings:function(){var t=this.getCrossings();if(!t.length)return this;s(E.expand(t));for(var n=this._children||[this],i=[],r=0,o=n.length;o>r;r++)i.push.apply(i,n[r]._segments);return e(A,c(i),this,null,!1)}}}),j.inject({_getMonoCurves:function(){function t(t){var e=t[1],r=t[7],s={values:t,winding:e===r?0:e>r?-1:1,previous:n,next:null};n&&(n.next=s),i.push(s),n=s}function e(e){if(0!==$.getLength(e)){var n=e[1],i=e[3],r=e[5],s=e[7];if($.isStraight(e))t(e);else{var a=3*(i-r)-n+s,l=2*(n+r)-4*i,u=i-n,c=4e-7,h=1-c,d=[],f=o.solveQuadratic(a,l,u,d,c,h);if(0===f)t(e);else{d.sort();var p=d[0],g=$.subdivide(e,p);t(g[0]),f>1&&(p=(d[1]-p)/(1-p),g=$.subdivide(g[1],p),t(g[0])),t(g[1])}}}}var n,i=this._monoCurves;if(!i){i=this._monoCurves=[];for(var r=this.getCurves(),s=this._segments,a=0,l=r.length;l>a;a++)e(r[a].getValues());if(!this._closed&&s.length>1){var u=s[s.length-1]._point,c=s[0]._point,h=u._x,d=u._y,f=c._x,p=c._y;e([h,d,h,d,f,p,f,p])}if(i.length>0){var g=i[0],m=i[i.length-1];g.previous=m,m.next=g}}return i},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var n=this._getMonoCurves(),i=[],r=e.y,s=[],o=0,a=n.length;a>o;o++){var l=n[o].values;if((1===n[o].winding&&r>=l[1]&&r<=l[7]||r>=l[7]&&r<=l[1])&&$.solveCubic(l,1,r,i,0,1)>0)for(var u=i.length-1;u>=0;u--)s.push($.getPoint(l,i[u]).x);if(s.length>1)break}e.x=(s[0]+s[1])/2}return e},reorient:function(){return this.setClockwise(!0),this}}),A.inject({_getMonoCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;i>n;n++)e.push.apply(e,t[n]._getMonoCurves());return e},reorient:function(){var t=this.removeChildren().sort(function(t,e){return e.getBounds().getArea()-t.getBounds().getArea()});if(t.length>0){this.addChildren(t);for(var e=t[0].isClockwise(),n=1,i=t.length;i>n;n++){for(var r=t[n].getInteriorPoint(),s=0,o=n-1;o>=0;o--)t[o].contains(r)&&s++;t[n].setClockwise(s%2===0&&e)}}return this}});var P=e.extend({_class:"PathIterator",initialize:function(t,e,n,i){function r(t,e){var n=$.getValues(t,e,i);a.push(n),s(n,t._index,0,1)}function s(t,e,i,r){if(r-i>c&&!$.isFlatEnough(t,n||.25)){var o=$.subdivide(t,.5),a=(i+r)/2;s(o[0],e,i,a),s(o[1],e,a,r)}else{var h=t[6]-t[0],d=t[7]-t[1],f=Math.sqrt(h*h+d*d);f>1e-6&&(u+=f,l.push({offset:u,value:r,index:e}))}}for(var o,a=[],l=[],u=0,c=1/(e||32),h=t._segments,d=h[0],f=1,p=h.length;p>f;f++)o=h[f],r(d,o),d=o;t._closed&&r(o,h[0]),this.curves=a,this.parts=l,this.length=u,this.index=0},getParameterAt:function(t){for(var e,n=this.index;e=n,!(0==n||this.parts[--n].offset<t););for(var i=this.parts.length;i>e;e++){var r=this.parts[e];if(r.offset>=t){this.index=e;var s=this.parts[e-1],o=s&&s.index==r.index?s.value:0,a=s?s.offset:0;return{value:o+(r.value-o)*(t-a)/(r.offset-a),index:r.index}}}var r=this.parts[this.parts.length-1];return{value:1,index:r.index}},drawPart:function(t,e,n){e=this.getParameterAt(e),n=this.getParameterAt(n);for(var i=e.index;i<=n.index;i++){var r=$.getPart(this.curves[i],i==e.index?e.value:0,i==n.index?n.value:1);i==e.index&&t.moveTo(r[0],r[1]),t.bezierCurveTo.apply(t,r.slice(2))}}},e.each($.evaluateMethods,function(t){this[t+"At"]=function(e,n){var i=this.getParameterAt(e);return $[t](this.curves[i.index],i.value,n)}},{})),M=e.extend({initialize:function(t,e){for(var n,i=this.points=[],r=t._segments,s=0,o=r.length;o>s;s++){var a=r[s].point.clone();n&&n.equals(a)||(i.push(a),n=a)}t._closed&&(this.closed=!0,i.unshift(i[i.length-1]),i.push(i[1])),this.error=e},fit:function(){var t=this.points,e=t.length,n=this.segments=e>0?[new S(t[0])]:[];return e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.closed&&(n.shift(),n.pop()),n},fitCubic:function(t,e,n,i){if(e-t==1){var r=this.points[t],s=this.points[e],o=r.getDistance(s)/3;return void this.addCurve([r,r.add(n.normalize(o)),s.add(i.normalize(o)),s])}for(var a,l=this.chordLengthParameterize(t,e),u=Math.max(this.error,this.error*this.error),c=!0,h=0;4>=h;h++){var d=this.generateBezier(t,e,l,n,i),f=this.findMaxError(t,e,d,l);if(f.error<this.error&&c)return void this.addCurve(d);if(a=f.index,f.error>=u)break;c=this.reparameterize(t,e,l,d),u=f.error}var p=this.points[a-1].subtract(this.points[a]),g=this.points[a].subtract(this.points[a+1]),m=p.add(g).divide(2).normalize();this.fitCubic(t,a,n,m),this.fitCubic(a,e,m.negate(),i)},addCurve:function(t){var e=this.segments[this.segments.length-1];e.setHandleOut(t[1].subtract(t[0])),this.segments.push(new S(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,n,i,r){for(var s=1e-12,o=this.points[t],a=this.points[e],l=[[0,0],[0,0]],u=[0,0],c=0,h=e-t+1;h>c;c++){var d=n[c],f=1-d,p=3*d*f,g=f*f*f,m=p*f,v=p*d,_=d*d*d,y=i.normalize(m),b=r.normalize(v),w=this.points[t+c].subtract(o.multiply(g+m)).subtract(a.multiply(v+_));l[0][0]+=y.dot(y),l[0][1]+=y.dot(b),l[1][0]=l[0][1],l[1][1]+=b.dot(b),u[0]+=y.dot(w),u[1]+=b.dot(w)}var x,k,C=l[0][0]*l[1][1]-l[1][0]*l[0][1];if(Math.abs(C)>s){var S=l[0][0]*u[1]-l[1][0]*u[0],T=u[0]*l[1][1]-u[1]*l[0][1];x=T/C,k=S/C}else{var $=l[0][0]+l[0][1],E=l[1][0]+l[1][1];x=k=Math.abs($)>s?u[0]/$:Math.abs(E)>s?u[1]/E:0}var D,j,A=a.getDistance(o),P=s*A;if(P>x||P>k)x=k=A/3;else{var M=a.subtract(o);D=i.normalize(x),j=r.normalize(k),D.dot(M)-j.dot(M)>A*A&&(x=k=A/3,D=j=null)}return[o,o.add(D||i.normalize(x)),a.add(j||r.normalize(k)),a]},reparameterize:function(t,e,n,i){for(var r=t;e>=r;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);for(var r=1,s=n.length;s>r;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;2>=s;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;1>=s;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=o.subtract(e),c=a.dot(a)+u.dot(l);return Math.abs(c)<1e-6?n:n-u.dot(a)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;t>=r;r++)for(var s=0;t-r>=s;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;e>=i;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;r>=i;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;e>o;o++){var a=this.evaluate(3,n,i[o-t]),l=a.subtract(this.points[o]),u=l.x*l.x+l.y*l.y;u>=s&&(s=u,r=o)}return{error:s,index:r}}}),O=_.extend({_class:"TextItem",_boundsSelected:!0,_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(n){this._content="",this._lines=[];var i=n&&e.isPlainObject(n)&&n.x===t&&n.y===t;this._initialize(i&&n,!i&&l.read(arguments))},_equals:function(t){return this._content===t._content},_clone:function bt(t,e,n){return t.setContent(this._content),bt.base.call(this,t,e,n)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),I=O.extend({_class:"PointText",initialize:function(){O.apply(this,arguments)},clone:function(t){return this._clone(new I(_.NO_INSERT),t)},getPoint:function(){var t=this._matrix.getTranslation();return new u(t.x,t.y,this,"setPoint")},setPoint:function(){var t=l.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t){if(this._content){this._setStyles(t);var e=this._style,n=this._lines,i=e.getLeading(),r=t.shadowColor;t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var s=0,o=n.length;o>s;s++){t.shadowColor=r;var a=n[s];e.hasFill()&&(t.fillText(a,0,0),t.shadowColor="rgba(0,0,0,0)"),e.hasStroke()&&t.strokeText(a,0,0),t.translate(0,i)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),o=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==s&&(l-=a/("center"===s?2:1));var u=new d(l,r?-.75*o:0,a,r*o);return e?e._transformBounds(u,u):u}}),N=e.extend(new function(){function t(t){var e,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i){e=[0,0,0];for(var r=0;3>r;r++){var s=i[r+1];e[r]=parseInt(1==s.length?s+s:s,16)/255}}else if(i=t.match(/^rgba?\((.*)\)$/)){e=i[1].split(",");for(var r=0,a=e.length;a>r;r++){var s=+e[r];e[r]=3>r?s/255:s}}else{var l=o[t];if(!l){n||(n=Q.getContext(1,1),n.globalCompositeOperation="copy"),n.fillStyle="rgba(0,0,0,0)",n.fillStyle=t,n.fillRect(0,0,1,1);var u=n.getImageData(0,0,1,1).data;l=o[t]=[u[0]/255,u[1]/255,u[2]/255]}e=l.slice()}return e}var n,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},r={},o={},u=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s?0:60*(i==t?(e-n)/s+(n>e?6:0):i==e?(n-t)/s+2:(t-e)/s+4);return[o,0===i?0:s/i,i]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t),r=t-i,i=u[i],s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[i[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=o?0:60*(i==t?(e-n)/s+(n>e?6:0):i==e?(n-t)/s+2:(t-e)/s+4),l=(i+r)/2,u=o?0:.5>l?s/(i+r):s/(2-i-r);return[a,u,l]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=.5>n?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;3>a;a++){var l=i[a];0>l&&(l+=1),l>1&&(l-=1),o[a]=1>6*l?s+6*(r-s)*l:1>2*l?r:2>3*l?s+(r-s)*(2/3-l)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return e.each(i,function(t,n){r[n]=[],e.each(t,function(t,s){var o=e.capitalize(t),a=/^(hue|saturation)$/.test(t),u=r[n][s]="gradient"===t?function(t){var e=this._components[0];return t=L.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===n?function(){return l.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+o]=function(){return this._type===n||a&&/^hs[bl]$/.test(this._type)?this._components[s]:this._convert(n)[s]},this["set"+o]=function(t){this._type===n||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(n),this._properties=i[n],this._type=n),this._components[s]=u.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function h(e){var n,s,o,l,u=Array.prototype.slice,c=arguments,d=0;Array.isArray(e)&&(c=e,e=c[0]);var f=null!=e&&typeof e;if("string"===f&&e in i&&(n=e,e=c[1],Array.isArray(e)?(s=e,o=c[2]):(this.__read&&(d=1),c=u.call(c,1),f=typeof e)),!s){if(l="number"===f?c:"object"===f&&null!=e.length?e:null){n||(n=l.length>=3?"rgb":"gray");var p=i[n].length;o=l[p],this.__read&&(d+=l===arguments?p+(null!=o?1:0):1),l.length>p&&(l=u.call(l,0,p))}else if("string"===f)n="rgb",s=t(e),4===s.length&&(o=s[3],s.length--);else if("object"===f)if(e.constructor===h){if(n=e._type,s=e._components.slice(),o=e._alpha,"gradient"===n)for(var g=1,m=s.length;m>g;g++){var v=s[g];v&&(s[g]=v.clone())}}else if(e.constructor===L)n="gradient",l=c;else{n="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb";var _=i[n],y=r[n];this._components=s=[];for(var g=0,m=_.length;m>g;g++){var b=e[_[g]];null==b&&0===g&&"gradient"===n&&"stops"in e&&(b={stops:e.stops,radial:e.radial}),b=y[g].call(this,b),null!=b&&(s[g]=b)}o=e.alpha}this.__read&&n&&(d=1)}if(this._type=n||"rgb",this._id=a.get(h),!s){this._components=s=[];for(var y=r[this._type],g=0,m=y.length;m>g;g++){var b=y[g].call(this,l&&l[g]);null!=b&&(s[g]=b)}}this._components=s,this._properties=i[this._type],this._alpha=o,this.__read&&(this.__read=d)},_serialize:function(t,n){var i=this.getComponents();return e.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,n)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=c[this._type+"-"+t])?e.apply(this,this._components):c["rgb-"+t].apply(this,c[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new N(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var n=e.isPlainValue(t,!0)?N.read(arguments):t;return n===this||n&&this._class===n._class&&this._type===n._type&&this._alpha===n._alpha&&e.equals(this._components,n._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=s.instance,r=0,o=t.length;o>r;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(0>t?0:t>1?1:t))}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],1>i&&n.push(0>i?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,s=n[1],o=n[2];if(i._radial){var a=o.getDistance(s),l=n[3];if(l){var u=l.subtract(s);u.getLength()>a&&(l=s.add(u.normalize(a-.1)))}var c=l||s;e=t.createRadialGradient(c.x,c.y,0,s.x,s.y,a)}else e=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var h=0,d=r.length;d>h;h++){var f=r[h];e.addColorStop(f._rampPoint,f._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;i>n;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new N(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return e.each(t,function(t,e){this[e]=function(e){e=N.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,o=i.length;o>s;s++)r[s]=t(i[s],r[s]);return new N(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),L=e.extend({_class:"Gradient",initialize:function(t,e){this._id=a.get(),t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,n){return n.add(this,function(){return e.serialize([this._stops,this._radial],t,!0,n)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;e>t;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(e){var n=this._owners?this._owners.indexOf(e):-1;-1!=n&&(this._owners.splice(n,1),0===this._owners.length&&(this._owners=t))},clone:function(){for(var t=[],e=0,n=this._stops.length;n>e;e++)t[e]=this._stops[e].clone();return new L(t,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(this.stops)for(var n=0,i=this._stops.length;i>n;n++)this._stops[n]._owner=t;if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=R.readAll(e,0,{clone:!0});for(var n=0,i=this._stops.length;i>n;n++){var r=this._stops[n];r._owner=this,r._defaultRamp&&r.setRampPoint(n/(i-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class&&this._stops.length===t._stops.length){for(var e=0,n=this._stops.length;n>e;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),R=e.extend({_class:"GradientStop",initialize:function(e,n){if(e){var i,r;n===t&&Array.isArray(e)?(i=e[0],r=e[1]):e.color?(i=e.color,r=e.rampPoint):(i=e,r=n),this.setColor(i),this.setRampPoint(r)}},clone:function(){return new R(this._color.clone(),this._rampPoint)},_serialize:function(t,n){return e.serialize([this._color,this._rampPoint],t,!0,n)},_changed:function(){this._owner&&this._owner._changed(65)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=N.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint||!1}}),z=e.extend(new function(){var n={fillColor:t,strokeColor:t,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],windingRule:"nonzero",shadowColor:t,shadowBlur:0,shadowOffset:new l,selectedColor:t,fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,font:"sans-serif",leading:null,justification:"left"},i={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},s={_defaults:n,_textDefaults:new e(n,{fillColor:new N}),beans:!0};return e.each(n,function(n,o){var a=/Color$/.test(o),u="shadowOffset"===o,c=e.capitalize(o),h=i[o],d="set"+c,f="get"+c;s[d]=function(e){var n=this._owner,i=n&&n._children;if(i&&i.length>0&&!(n instanceof A))for(var r=0,s=i.length;s>r;r++)i[r]._style[d](e);else{var l=this._values[o];l!==e&&(a&&(l&&(l._owner=t),e&&e.constructor===N&&(e._owner&&(e=e.clone()),e._owner=n)),this._values[o]=e,n&&n._changed(h||65))}},s[f]=function(n){var i,r=this._owner,s=r&&r._children;if(!s||0===s.length||n||r instanceof A){var i=this._values[o];if(i===t)i=this._defaults[o],i&&i.clone&&(i=i.clone());else{var c=a?N:u?l:null;!c||i&&i.constructor===c||(this._values[o]=i=c.read([i],0,{readNull:!0,clone:!0}),i&&a&&(i._owner=r))}return i}for(var h=0,d=s.length;d>h;h++){var p=s[h]._style[f]();if(0===h)i=p;else if(!e.equals(i,p))return t}return i},r[f]=function(t){return this._style[f](t)},r[d]=function(t){this._style[d](t)}}),_.inject(r),s},{_class:"Style",initialize:function(t,e,n){this._values={},this._owner=e,this._project=e&&e._project||n||paper.project,e instanceof O&&(this._defaults=this._textDefaults),t&&this.set(t)},set:function(t){var e=t instanceof z,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){return t===this||t&&this._class===t._class&&e.equals(this._values,t._values)||!1},hasFill:function(){return!!this.getFillColor()},hasStroke:function(){return!!this.getStrokeColor()&&this.getStrokeWidth()>0},hasShadow:function(){return!!this.getShadowColor()&&this.getShadowBlur()>0},getView:function(){return this._project.getView()},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function wt(){var t=wt.base.call(this),e=this.getFontSize();return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),null!=t?t:1.2*e}}),F=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;6>o;o++){var a=r[o],l=a?a+s:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(o){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),l=n.top-(s.clientTop||r.clientTop||0);if(!e){var u=i.defaultView;a+=u.pageXOffset||s.scrollLeft||r.scrollLeft,l+=u.pageYOffset||s.scrollTop||r.scrollTop}return new d(a,l,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new d(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return F.getBounds(t,e).getPoint()},getSize:function(t){return F.getBounds(t,!0).getSize()},isInvisible:function(t){return F.getSize(t).equals(new c(0,0))},isInView:function(t){return!F.isInvisible(t)&&F.getViewportBounds(t).intersects(F.getBounds(t,!0))},getPrefixed:function(e,n){return t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},H={add:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;o>s;s++)t.addEventListener(r[s],i,!1)},remove:function(t,e){for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;o>s;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new l(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return H.getPoint(t).subtract(F.getOffset(e||H.getTarget(t)))},stop:function(t){t.stopPropagation(),t.preventDefault()}};H.requestAnimationFrame=new function(){function t(){for(var e=s.length-1;e>=0;e--){var a=s[e],l=a[0],u=a[1];(!u||("true"==i.getAttribute(u,"keepalive")||o)&&F.isInView(u))&&(s.splice(e,1),l())}n&&(s.length?n(t):r=!1)}var e,n=F.getPrefixed(window,"requestAnimationFrame"),r=!1,s=[],o=!0;return H.add(window,{focus:function(){o=!0},blur:function(){o=!1}}),function(i,o){s.push([i,o]),n?r||(n(t),r=!0):e||(e=setInterval(t,1e3/60))}};var B=e.extend(n,{_class:"View",initialize:function xt(t,e){function n(t){return e[t]||parseInt(e.getAttribute(t),10)}function r(){var t=F.getSize(e);return t.isNaN()||t.isZero()?new c(n("width"),n("height")):t}this._project=t,this._scope=t._scope,this._element=e;var s;this._pixelRatio||(this._pixelRatio=window.devicePixelRatio||1),this._id=e.getAttribute("id"),null==this._id&&e.setAttribute("id",this._id="view-"+xt._id++),H.add(e,this._viewEvents);var o="none";if(F.setPrefixed(e.style,{userSelect:o,touchAction:o,touchCallout:o,contentZooming:o,userDrag:o,tapHighlightColor:"rgba(0,0,0,0)"}),i.hasAttribute(e,"resize")){var a=this;H.add(window,this._windowEvents={resize:function(){a.setViewSize(r())}})}if(this._setViewSize(s=r()),i.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var l=this._stats.domElement,u=l.style,h=F.getOffset(e);u.position="absolute",u.left=h.x+"px",u.top=h.y+"px",document.body.appendChild(l)}xt._views.push(this),xt._viewsById[this._id]=this,this._viewSize=s,(this._matrix=new p)._owner=this,this._zoom=1,xt._focused||(xt._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return this._project?(B._focused===this&&(B._focused=null),B._views.splice(B._views.indexOf(this),1),delete B._viewsById[this._id],this._project._view===this&&(this._project._view=null),H.remove(this._element,this._viewEvents),H.remove(window,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0):!1},_events:e.each(["onResize","onMouseDown","onMouseUp","onMouseMove"],function(t){this[t]={install:function(t){this._installEvent(t)},uninstall:function(t){this._uninstallEvent(t)}}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,_requestFrame:function(){var t=this;H.requestAnimationFrame(function(){t._requested=!1,t._animate&&(t._requestFrame(),t._handleFrame())},this._element),this._requested=!0},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,n=this._before?t-this._before:0;this._before=t,this._handlingFrame=!0,this.emit("frame",new e({delta:n,time:this._time+=n,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var n in this._frameItems){var i=this._frameItems[n];i.item.emit("frame",new e(t,{time:i.time+=t.delta,count:i.count++}))}},_update:function(){this._project._needsUpdate=!0,this._handlingFrame||(this._animate?this._handleFrame():this.update())},_changed:function(t){1&t&&(this._project._needsUpdate=!0)},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._update()},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new h(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=c.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._viewSize.set(t.width,t.height),this._setViewSize(t),this._bounds=null,this.emit("resize",{size:t,delta:e}),this._update())},_setViewSize:function(t){var e=this._element;e.width=t.width,e.height=t.height},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new d(new l,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=l.read(arguments);this.scrollBy(t.subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new p).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return F.isInView(this._element)},scrollBy:function(){this._transform((new p).translate(l.read(arguments).negate()))},play:function(){this._animate=!0,this._requested||this._requestFrame()},pause:function(){this._animate=!1},draw:function(){this.update()},projectToView:function(){return this._matrix._transformPoint(l.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(l.read(arguments))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return"string"==typeof e&&(e=document.getElementById(e)),new q(t,e)}}},new function(){function t(t){var e=H.getTarget(t);return e.getAttribute&&B._viewsById[e.getAttribute("id")]}function e(t,e){return t.viewToProject(H.getOffset(e,t._element))}function n(){if(!B._focused||!B._focused.isVisible())for(var t=0,e=B._views.length;e>t;t++){var n=B._views[t];if(n&&n.isVisible()){B._focused=o=n;break}}}function i(t,e,n){t._handleEvent("mousemove",e,n);var i=t._scope.tool;return i&&i._handleEvent(c&&i.responds("mousedrag")?"mousedrag":"mousemove",e,n),t.update(),i}var r,s,o,a,l,u,c=!1,h=window.navigator;h.pointerEnabled||h.msPointerEnabled?(a="pointerdown MSPointerDown",l="pointermove MSPointerMove",u="pointerup pointercancel MSPointerUp MSPointerCancel"):(a="touchstart",l="touchmove",u="touchend touchcancel","ontouchstart"in window&&h.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(a+=" mousedown",l+=" mousemove",u+=" mouseup"));var d={"selectstart dragstart":function(t){c&&t.preventDefault()}},f={mouseout:function(t){var n=B._focused,r=H.getRelatedTarget(t);!n||r&&"HTML"!==r.nodeName||i(n,e(n,t),t)},scroll:n};d[a]=function(n){var i=B._focused=t(n),s=e(i,n);c=!0,i._handleEvent("mousedown",s,n),(r=i._scope.tool)&&r._handleEvent("mousedown",s,n),i.update()},f[l]=function(a){var l=B._focused;if(!c){var u=t(a);u?(l!==u&&i(l,e(l,a),a),s=l,l=B._focused=o=u):o&&o===l&&(l=B._focused=s,n())}if(l){var h=e(l,a);(c||l.getBounds().contains(h))&&(r=i(l,h,a))}},f[u]=function(t){var n=B._focused;if(n&&c){var i=e(n,t);c=!1,n._handleEvent("mouseup",i,t),r&&r._handleEvent("mouseup",i,t),n.update()}},H.add(document,f),H.add(window,{load:n});var p={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:d,_handleEvent:function(){},_installEvent:function(t){var e=this._eventCounters;if(e)for(var n in p)e[n]=(e[n]||0)+(p[n][t]||0)},_uninstallEvent:function(t){var e=this._eventCounters;if(e)for(var n in p)e[n]-=p[n][t]||0},statics:{updateFocus:n}}}),q=B.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof HTMLCanvasElement)){var n=c.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+[].slice.call(arguments,1));e=Q.getCanvas(n)}if(this._context=e.getContext("2d"),this._eventCounters={},this._pixelRatio=1,!/^off|false$/.test(i.getAttribute(e,"hidpi"))){var r=window.devicePixelRatio||1,s=F.getPrefixed(this._context,"backingStorePixelRatio")||1;this._pixelRatio=r/s}B.call(this,t,e)},_setViewSize:function(t){var e=this._element,n=this._pixelRatio,r=t.width,s=t.height;if(e.width=r*n,e.height=s*n,1!==n){if(!i.hasAttribute(e,"resize")){var o=e.style;o.width=r+"px",o.height=s+"px"}this._context.scale(n,n)}},getPixelSize:function(t){var e,n=paper.browser;if(n&&n.firefox){var i=this._element.parentNode,r=document.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(F.getStyles(r).fontSize),i.removeChild(r)}else{var s=this._context,o=s.font;s.font=t+" serif",e=parseFloat(s.font),s.font=o}return e},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,o=e.length;o>s;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,
r},update:function(t){var e=this._project;if(!e||!t&&!e._needsUpdate)return!1;var n=this._context,i=this._viewSize;return n.clearRect(0,0,i.width+1,i.height+1),e.draw(n,this._matrix,this._pixelRatio),e._needsUpdate=!1,!0}},new function(){function t(t,e,n,i,r,s){function o(t){return t.responds(e)&&(a||(a=new V(e,n,i,r,s?i.subtract(s):null)),t.emit(e,a)&&a.isStopped)?(n.preventDefault(),!0):void 0}for(var a,l=r;l;){if(o(l))return!0;l=l.getParent()}return o(t)?!0:!1}var e,n,i,r,s,o,a,l,u;return{_handleEvent:function(c,h,d){if(this._eventCounters[c]){var f=this._project,p=f.hitTest(h,{tolerance:0,fill:!0,stroke:!0}),g=p&&p.item,m=!1;switch(c){case"mousedown":for(m=t(this,c,d,h,g),l=s==g&&Date.now()-u<300,r=s=g,e=n=i=h,a=!m&&g;a&&!a.responds("mousedrag");)a=a._parent;break;case"mouseup":m=t(this,c,d,h,g,e),a&&(n&&!n.equals(h)&&t(this,"mousedrag",d,h,a,n),g!==a&&(i=h,t(this,"mousemove",d,h,g,i))),!m&&g&&g===r&&(u=Date.now(),t(this,l&&r.responds("doubleclick")?"doubleclick":"click",d,e,g),l=!1),r=a=null;break;case"mousemove":a&&(m=t(this,"mousedrag",d,h,a,n)),m||(g!==o&&(i=h),m=t(this,c,d,h,g,i)),n=i=h,g!==o&&(t(this,"mouseleave",d,h,o),o=g,t(this,"mouseenter",d,h,g))}return m}}}}),W=e.extend({_class:"Event",initialize:function(t){this.event=t},isPrevented:!1,isStopped:!1,preventDefault:function(){this.isPrevented=!0,this.event.preventDefault()},stopPropagation:function(){this.isStopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return G.modifiers}}),Y=W.extend({_class:"KeyEvent",initialize:function(t,e,n,i){W.call(this,i),this.type=t?"keydown":"keyup",this.key=e,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),G=new function(){function t(i,s,u,c){var h,d=u?String.fromCharCode(u):"",f=r[s],p=f||d.toLowerCase(),g=i?"keydown":"keyup",m=B._focused,v=m&&m.isVisible()&&m._scope,_=v&&v.tool;if(l[p]=i,i?a[s]=u:delete a[s],f&&(h=e.camelize(f))in o){o[h]=i;var y=paper.browser;if("command"===h&&y&&y.mac)if(i)n={};else{for(var b in n)b in a&&t(!1,b,n[b],c);n=null}}else i&&n&&(n[s]=u);_&&_.responds(g)&&(paper=v,_.emit(g,new Y(i,p,d,c)),m&&m.update())}var n,i,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},s={9:!0,13:!0,32:!0},o=new e({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),a={},l={};return H.add(document,{keydown:function(e){var n=e.which||e.keyCode;n in r||o.command?t(!0,n,n in s||o.command?n:0,e):i=n},keypress:function(e){null!=i&&(t(!0,i,e.which||e.keyCode,e),i=null)},keyup:function(e){var n=e.which||e.keyCode;n in a&&t(!1,n,a[n],e)}}),H.add(window,{blur:function(e){for(var n in a)t(!1,n,a[n],e)}}),{modifiers:o,isDown:function(t){return!!l[t]}}},V=W.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){W.call(this,e),this.type=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),U=W.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Z=r.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){r.call(this),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_updateEvent:function(t,e,n,i,r,s,o){if(!r){if(null!=n||null!=i){var a=null!=n?n:0,l=e.subtract(this._point),u=l.getLength();if(a>u)return!1;if(null!=i&&0!=i)if(u>i)e=this._point.add(l.normalize(i));else if(o)return!1}if(s&&e.equals(this._point))return!1}switch(this._lastPoint=r&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=r?0:this._count+1,!0},_fireEvent:function(t,e){var n=paper.project._removeSets;if(n){"mouseup"===t&&(n.mousedrag=null);var i=n[t];if(i){for(var r in i){var s=i[r];for(var o in n){var a=n[o];a&&a!=i&&delete a[s._id]}s.remove()}n[t]=null}}return this.responds(t)&&this.emit(t,new U(this,t,e))},_handleEvent:function(t,e,n){paper=this._scope;var i=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),i=this._fireEvent(t,n);break;case"mousedrag":for(var r=!1,s=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,r,s);)i=this._fireEvent(t,n)||i,r=!0,s=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&(i=this._fireEvent("mousedrag",n)),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),i=this._fireEvent(t,n)||i,this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)i=this._fireEvent(t,n)||i,this._firstMove=!1}return i&&n.preventDefault(),i}}),X={request:function(e,n,i,r){r=r===t?!0:r;var s=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return s.open(e.toUpperCase(),n,r),"overrideMimeType"in s&&s.overrideMimeType("text/plain"),s.onreadystatechange=function(){if(4===s.readyState){var t=s.status;if(0!==t&&200!==t)throw new Error("Could not load "+n+" (Error "+t+")");i.call(s,s.responseText)}},s.send(null)}},Q={canvases:[],getCanvas:function(t,e){var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),n=this.canvases.length?this.canvases.pop():document.createElement("canvas");var r=n.getContext("2d");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){var e=t.canvas?t.canvas:t;e.getContext("2d").restore(),this.canvases.push(e)}},K=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function n(e,n,i,r){var s=r-t(e,n,i);f=e+s,p=n+s,g=i+s;var r=t(f,p,g),o=m(f,p,g),a=v(f,p,g);if(0>o){var l=r-o;f=r+(f-r)*r/l,p=r+(p-r)*r/l,g=r+(g-r)*r/l}if(a>255){var u=255-r,c=a-r;f=r+(f-r)*u/c,p=r+(p-r)*u/c,g=r+(g-r)*u/c}}function i(t,e,n){return v(t,e,n)-m(t,e,n)}function r(t,e,n,i){var r,s=[t,e,n],o=v(t,e,n),a=m(t,e,n);a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2,r=0===m(a,o)?1===v(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,f=s[0],p=s[1],g=s[2]}var s,o,a,l,u,c,h,d,f,p,g,m=Math.min,v=Math.max,_=Math.abs,y={multiply:function(){f=u*s/255,p=c*o/255,g=h*a/255},screen:function(){f=u+s-u*s/255,p=c+o-c*o/255,g=h+a-h*a/255},overlay:function(){f=128>u?2*u*s/255:255-2*(255-u)*(255-s)/255,p=128>c?2*c*o/255:255-2*(255-c)*(255-o)/255,g=128>h?2*h*a/255:255-2*(255-h)*(255-a)/255},"soft-light":function(){var t=s*u/255;f=t+u*(255-(255-u)*(255-s)/255-t)/255,t=o*c/255,p=t+c*(255-(255-c)*(255-o)/255-t)/255,t=a*h/255,g=t+h*(255-(255-h)*(255-a)/255-t)/255},"hard-light":function(){f=128>s?2*s*u/255:255-2*(255-s)*(255-u)/255,p=128>o?2*o*c/255:255-2*(255-o)*(255-c)/255,g=128>a?2*a*h/255:255-2*(255-a)*(255-h)/255},"color-dodge":function(){f=0===u?0:255===s?255:m(255,255*u/(255-s)),p=0===c?0:255===o?255:m(255,255*c/(255-o)),g=0===h?0:255===a?255:m(255,255*h/(255-a))},"color-burn":function(){f=255===u?255:0===s?0:v(0,255-255*(255-u)/s),p=255===c?255:0===o?0:v(0,255-255*(255-c)/o),g=255===h?255:0===a?0:v(0,255-255*(255-h)/a)},darken:function(){f=s>u?u:s,p=o>c?c:o,g=a>h?h:a},lighten:function(){f=u>s?u:s,p=c>o?c:o,g=h>a?h:a},difference:function(){f=u-s,0>f&&(f=-f),p=c-o,0>p&&(p=-p),g=h-a,0>g&&(g=-g)},exclusion:function(){f=u+s*(255-u-u)/255,p=c+o*(255-c-c)/255,g=h+a*(255-h-h)/255},hue:function(){r(s,o,a,i(u,c,h)),n(f,p,g,t(u,c,h))},saturation:function(){r(u,c,h,i(s,o,a)),n(f,p,g,t(u,c,h))},luminosity:function(){n(u,c,h,t(s,o,a))},color:function(){n(s,o,a,t(u,c,h))},add:function(){f=m(u+s,255),p=m(c+o,255),g=m(h+a,255)},subtract:function(){f=v(u-s,0),p=v(c-o,0),g=v(h-a,0)},average:function(){f=(u+s)/2,p=(c+o)/2,g=(h+a)/2},negation:function(){f=255-_(255-s-u),p=255-_(255-o-c),g=255-_(255-a-h)}},b=this.nativeModes=e.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),w=Q.getContext(1,1);e.each(y,function(t,e){var n="darken"===e,i=!1;w.save();try{w.fillStyle=n?"#300":"#a00",w.fillRect(0,0,1,1),w.globalCompositeOperation=e,w.globalCompositeOperation===e&&(w.fillStyle=n?"#a00":"#300",w.fillRect(0,0,1,1),i=w.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}w.restore(),b[e]=i}),Q.release(w),this.process=function(t,e,n,i,r){var m=e.canvas,v="normal"===t;if(v||b[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=t),n.drawImage(m,r.x,r.y),n.restore();else{var _=y[t];if(!_)return;for(var w=n.getImageData(r.x,r.y,m.width,m.height),x=w.data,k=e.getImageData(0,0,m.width,m.height).data,C=0,S=x.length;S>C;C+=4){s=k[C],u=x[C],o=k[C+1],c=x[C+1],a=k[C+2],h=x[C+2],l=k[C+3],d=x[C+3],_();var T=l*i/255,$=1-T;x[C]=T*f+$*u,x[C+1]=T*p+$*c,x[C+2]=T*g+$*h,x[C+3]=l*i+$*d}n.putImageData(w,r.x,r.y)}}},J=e.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(t,e){return!e&&(t instanceof D||t instanceof w||t instanceof O)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","string"]},function(t,n){var i=e.capitalize(n),r=t[2];this[n]={type:t[1],property:n,attribute:t[0],toSVG:r,fromSVG:r&&e.each(r,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{}),tt={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};return new function(){function t(t,e){for(var n in e){var i=e[n],r=tt[n];"number"==typeof i&&(i=x.number(i)),r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}return t}function n(e,n){return t(document.createElementNS("http://www.w3.org/2000/svg",e),n)}function i(t,n,i){var r=new e,s=t.getTranslation();if(n){t=t.shiftless();var a=t._inverseTransform(s);r[i?"cx":"x"]=a.x,r[i?"cy":"y"]=a.y,s=null}if(!t.isIdentity()){var l=t.decompose();if(l&&!l.shearing){var u=[],c=l.rotation,h=l.scaling;s&&!s.isZero()&&u.push("translate("+x.point(s)+")"),o.isZero(h.x-1)&&o.isZero(h.y-1)||u.push("scale("+x.point(h)+")"),c&&u.push("rotate("+x.number(c)+")"),r.transform=u.join(" ")}else r.transform="matrix("+t.getValues().join(",")+")"}return r}function r(e,r){for(var s=i(e._matrix),o=e._children,a=n("g",s),l=0,u=o.length;u>l;l++){var c=o[l],h=b(c,r);if(h)if(c.isClipMask()){var d=n("clipPath");d.appendChild(h),v(c,d,"clip"),t(a,{"clip-path":"url(#"+d.id+")"})}else a.appendChild(h)}return a}function a(t,e){var r=i(t._matrix,!0),s=t.getSize(),o=t.getImage();return r.x-=s.width/2,r.y-=s.height/2,r.width=s.width,r.height=s.height,r.href=e.embedImages===!1&&o&&o.src||t.toDataURL(),n("image",r)}function l(t,e){var r=e.matchShapes;if(r){var s=t.toShape(!1);if(s)return u(s,e)}var o,a=t._segments,l=i(t._matrix);if(0===a.length)return null;if(r&&!t.hasHandles())if(a.length>=3){o=t._closed?"polygon":"polyline";for(var c=[],h=0,d=a.length;d>h;h++)c.push(x.point(a[h]._point));l.points=c.join(" ")}else{o="line";var f=a[0]._point,p=a[a.length-1]._point;l.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else o="path",l.d=t.getPathData(null,e.precision);return n(o,l)}function u(t){var e=t._type,r=t._radius,s=i(t._matrix,!0,"rectangle"!==e);if("rectangle"===e){e="rect";var o=t._size,a=o.width,l=o.height;s.x-=a/2,s.y-=l/2,s.width=a,s.height=l,r.isZero()&&(r=null)}return r&&("circle"===e?s.r=r:(s.rx=r.width,s.ry=r.height)),n(e,s)}function c(t,e){var r=i(t._matrix),s=t.getPathData(null,e.precision);return s&&(r.d=s),n("path",r)}function h(t,e){var r=i(t._matrix,!0),s=t.getSymbol(),o=g(s,"symbol"),a=s.getDefinition(),l=a.getBounds();return o||(o=n("symbol",{viewBox:x.rectangle(l)}),o.appendChild(b(a,e)),v(s,o,"symbol")),r.href="#"+o.id,r.x+=l.x,r.y+=l.y,r.width=x.number(l.width),r.height=x.number(l.height),r.overflow="visible",n("use",r)}function d(t){var e=g(t,"color");if(!e){var i,r=t.getGradient(),s=r._radial,o=t.getOrigin().transform(),a=t.getDestination().transform();if(s){i={cx:o.x,cy:o.y,r:o.getDistance(a)};var l=t.getHighlight();l&&(l=l.transform(),i.fx=l.x,i.fy=l.y)}else i={x1:o.x,y1:o.y,x2:a.x,y2:a.y};i.gradientUnits="userSpaceOnUse",e=n((s?"radial":"linear")+"Gradient",i);for(var u=r._stops,c=0,h=u.length;h>c;c++){var d=u[c],f=d._color,p=f.getAlpha();i={offset:d._rampPoint,"stop-color":f.toCSS(!0)},1>p&&(i["stop-opacity"]=p),e.appendChild(n("stop",i))}v(t,e,"color")}return"url(#"+e.id+")"}function f(t){var e=n("text",i(t._matrix,!0));return e.textContent=t._content,e}function p(n,i,r){var s={},o=!r&&n.getParent();return null!=n._name&&(s.id=n._name),e.each(J,function(t){var i=t.get,r=t.type,a=n[i]();if(t.exportFilter?t.exportFilter(n,a):!o||!e.equals(o[i](),a)){if("color"===r&&null!=a){var l=a.getAlpha();1>l&&(s[t.attribute+"-opacity"]=l)}s[t.attribute]=null==a?"none":"number"===r?x.number(a):"color"===r?a.gradient?d(a,n):a.toCSS(!0):"array"===r?a.join(","):"lookup"===r?t.toSVG[a]:a}}),1===s.opacity&&delete s.opacity,n._visible||(s.visibility="hidden"),t(i,s)}function g(t,e){return k||(k={ids:{},svgs:{}}),t&&k.svgs[e+"-"+t._id]}function v(t,e,n){k||g();var i=k.ids[n]=(k.ids[n]||0)+1;e.id=n+"-"+i,k.svgs[n+"-"+t._id]=e}function y(t,e){var i=t,r=null;if(k){i="svg"===t.nodeName.toLowerCase()&&t;for(var s in k.svgs)r||(i||(i=n("svg"),i.appendChild(t)),r=i.insertBefore(n("defs"),i.firstChild)),r.appendChild(k.svgs[s]);k=null}return e.asString?(new XMLSerializer).serializeToString(i):i}function b(t,e,n){var i=C[t._class],r=i&&i(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&p(t,r,n)}function w(t){return t||(t={}),x=new s(t.precision),t}var x,k,C={Group:r,Layer:r,Raster:a,Path:l,Shape:u,CompoundPath:c,PlacedSymbol:h,PointText:f};_.inject({exportSVG:function(t){return t=w(t),y(b(this,t,!0),t)}}),m.inject({exportSVG:function(t){t=w(t);var e=this.layers,r=this.getView(),s=r.getViewSize(),o=n("svg",{x:0,y:0,width:s.width,height:s.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),a=o,l=r._matrix;l.isIdentity()||(a=o.appendChild(n("g",i(l))));for(var u=0,c=e.length;c>u;u++)a.appendChild(b(e[u],t,!0));return y(o,t)}})},new function(){function n(t,e,n,i){var r=tt[e],s=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===s&&(s=null),null==s?i?null:n?"":0:n?s:parseFloat(s)}function i(t,e,i,r){return e=n(t,e,!1,r),i=n(t,i,!1,r),!r||null!=e&&null!=i?new l(e,i):null}function r(t,e,i,r){return e=n(t,e,!1,r),i=n(t,i,!1,r),!r||null!=e&&null!=i?new c(e,i):null}function s(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?C(t)||t:"lookup"===e?n[t]:t}function o(t,e,n,i){var r=t.childNodes,s="clippath"===e,o=new y,a=o._project,l=a._currentStyle,u=[];if(s||(o=k(o,t,i),a._currentStyle=o._style.clone()),i)for(var c=t.querySelectorAll("defs"),h=0,d=c.length;d>h;h++)S(c[h],n,!1);for(var h=0,d=r.length;d>h;h++){var f,p=r[h];1!==p.nodeType||"defs"===p.nodeName.toLowerCase()||!(f=S(p,n,!1))||f instanceof v||u.push(f)}return o.addChildren(u),s&&(o=k(o.reduce(),t,i)),a._currentStyle=l,(s||"defs"===e)&&(o.remove(),o=null),o}function a(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;s>r;r+=2)i.push(new l(parseFloat(n[r]),parseFloat(n[r+1])));var o=new j(i);return"polygon"===e&&o.closePath(),o}function u(t){var e=t.getAttribute("d"),n={pathData:e};return(e.match(/m/gi)||[]).length>1||/z\S+/i.test(e)?new A(n):new j(n)}function h(t,e){var r,s=(n(t,"href",!0)||"").substring(1),o="radialgradient"===e;if(s)r=E[s].getGradient();else{for(var a=t.childNodes,l=[],u=0,c=a.length;c>u;u++){var h=a[u];1===h.nodeType&&l.push(k(new R,h))}r=new L(l,o)}var d,f,p;return o?(d=i(t,"cx","cy"),f=d.add(n(t,"r"),0),p=i(t,"fx","fy",!0)):(d=i(t,"x1","y1"),f=i(t,"x2","y2")),k(new N(r,d,f,p),t),null}function f(t,e,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new p,o=0,a=r.length;a>o;o++){var l=r[o];if(!l)break;for(var u=l.split(/\(\s*/),c=u[0],h=u[1].split(/[\s,]+/g),d=0,f=h.length;f>d;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":s.concatenate(new p(h[0],h[1],h[2],h[3],h[4],h[5]));break;case"rotate":s.rotate(h[0],h[1],h[2]);break;case"translate":s.translate(h[0],h[1]);break;case"scale":s.scale(h);break;case"skewX":s.skew(h[0],0);break;case"skewY":s.skew(0,h[0])}}t.transform(s)}function g(t,e,n){var i=t["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(e))}function b(n,i,r){var s=n.attributes[i],o=s&&s.value;if(!o){var a=e.camelize(i);o=n.style[a],o||r.node[a]===r.parent[a]||(o=r.node[a])}return o?"none"===o?null:o:t}function k(n,i,r){var s={node:F.getStyles(i)||{},parent:!r&&F.getStyles(i.parentNode)||{}};return e.each($,function(r,o){var a=b(i,o,s);a!==t&&(n=e.pick(r(n,a,o,i,s),n))}),n}function C(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&E[e[1]]}function S(t,n,i){function r(t){paper=o;var e=S(t,n,i),r=n.onLoad,s=o.project&&o.getView();r&&r.call(this,e),s.update()}if(!t)return null;n?"function"==typeof n&&(n={onLoad:n}):n={};var s=t,o=paper;if(i)if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var a=new FileReader;return a.onload=function(){r(a.result)},a.readAsText(t)}}else{if(s=document.getElementById(t),!s)return X.request("get",t,r);t=null}if("string"==typeof t&&(s=(new DOMParser).parseFromString(t,"image/svg+xml")),!s.nodeName)throw new Error("Unsupported SVG source: "+t);var l,u=s.nodeName.toLowerCase(),c=T[u],h=s.getAttribute&&s.getAttribute("data-paper-data"),d=o.settings,f=d.applyMatrix;if(d.applyMatrix=!1,l=c&&c(s,u,n,i)||null,d.applyMatrix=f,l){"#document"===u||l instanceof y||(l=k(l,s,i));var p=n.onImport;p&&(l=p(s,l,n)||l),n.expandShapes&&l instanceof w&&(l.remove(),l=l.toPath()),h&&(l._data=JSON.parse(h))}return i&&(E={},l&&e.pick(n.applyMatrix,f)&&l.matrix.apply(!0,!0)),l}var T={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,o=r.length;o>s;s++){var a=r[s];if(1===a.nodeType){var l=a.nextSibling;document.body.appendChild(a);var u=S(a,n,i);return l?t.insertBefore(a,l):t.appendChild(a),u}}},g:o,svg:o,clippath:o,polygon:a,polyline:a,path:u,lineargradient:h,radialgradient:h,image:function(t){var e=new x(n(t,"href",!0));return e.on("load",function(){var e=r(t,"width","height");this.setSize(e);var n=this._matrix._transformPoint(i(t,"x","y").add(e.divide(2)));this.translate(n)}),e},symbol:function(t,e,n,i){return new v(o(t,e,n,i),!0)},defs:o,use:function(t){var e=(n(t,"href",!0)||"").substring(1),r=E[e],s=i(t,"x","y");return r?r instanceof v?r.place(s):r.clone().translate(s):null},circle:function(t){return new w.Circle(i(t,"cx","cy"),n(t,"r"))},ellipse:function(t){return new w.Ellipse({center:i(t,"cx","cy"),radius:r(t,"rx","ry")})},rect:function(t){var e=i(t,"x","y"),n=r(t,"width","height"),s=r(t,"rx","ry");return new w.Rectangle(new d(e,n),s)},line:function(t){return new j.Line(i(t,"x1","y1"),i(t,"x2","y2"))},text:function(t){var e=new I(i(t,"x","y").add(i(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},$=e.set(e.each(J,function(t){this[t.attribute]=function(e,n){if(e[t.set](s(n,t.type,t.fromSVG)),"color"===t.type&&e instanceof w){var i=e[t.get]();i&&i.transform((new p).translate(e.getPosition(!0).negate()))}}},{}),{id:function(t,e){E[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=C(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof y))return new y(n,t);t.insertChild(0,n)}},gradientTransform:f,transform:f,"fill-opacity":g,"stroke-opacity":g,visibility:function(t,e){t.setVisible("visible"===e)},display:function(t,e){t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n=e.match(/(.*)%$/);t.setRampPoint(n?n[1]/100:parseFloat(e))},viewBox:function(t,e,n,i,o){var a=new d(s(e,"array")),l=r(i,"width","height",!0);if(t instanceof y){var u=l?a.getSize().divide(l):1,c=(new p).translate(a.getPoint()).scale(u);t.transform(c.inverted())}else if(t instanceof v){l&&a.setSize(l);var h="visible"!=b(i,"overflow",o),f=t._definition;h&&!a.contains(f.getBounds())&&(h=new w.Rectangle(a).transform(f._matrix),h.setClipMask(!0),f.addChild(h))}}}),E={};_.inject({importSVG:function(t,e){return this.addChild(S(t,e,!0))}}),m.inject({importSVG:function(t,e){return this.activate(),S(t,e,!0)}})},e.exports.PaperScript=function(){function t(t,e,n){var i=g[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function n(t,e){var n=m[t];if(n&&e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function r(t,e){return p.acorn.parse(t,e)}function s(t,e,n){function i(t){for(var e=0,n=u.length;n>e;e++){var i=u[e];if(i[0]>=t)break;t+=i[1]}return t}function s(e){return t.substring(i(e.range[0]),i(e.range[1]))}function o(e,n){return t.substring(i(e.range[1]),i(n.range[0]))}function a(e,n){for(var r=i(e.range[0]),s=i(e.range[1]),o=0,a=u.length-1;a>=0;a--)if(r>u[a][0]){o=a+1;break}u.splice(o,0,[r,n.length-s+r]),t=t.substring(0,r)+n+t.substring(s)}function l(t,e){if(t){for(var n in t)if("range"!==n&&"loc"!==n){var i=t[n];if(Array.isArray(i))for(var r=0,u=i.length;u>r;r++)l(i[r],t);else i&&"object"==typeof i&&l(i,t)}switch(t.type){case"UnaryExpression":if(t.operator in m&&"Literal"!==t.argument.type){var c=s(t.argument);a(t,'$__("'+t.operator+'", '+c+")")}break;case"BinaryExpression":if(t.operator in g&&"Literal"!==t.left.type){var h=s(t.left),d=s(t.right),f=o(t.left,t.right),p=t.operator;a(t,"__$__("+h+","+f.replace(new RegExp("\\"+p),'"'+p+'"')+", "+d+")")}break;case"UpdateExpression":case"AssignmentExpression":var v=e&&e.type;if(!("ForStatement"===v||"BinaryExpression"===v&&/^[=!<>]/.test(e.operator)||"MemberExpression"===v&&e.computed))if("UpdateExpression"===t.type){var c=s(t.argument),_="__$__("+c+', "'+t.operator[0]+'", 1)',y=c+" = "+_;t.prefix||"AssignmentExpression"!==v&&"VariableDeclarator"!==v||(s(e.left||e.id)===c&&(y=_),y=c+"; "+y),a(t,y)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var h=s(t.left),d=s(t.right);a(t,h+" = __$__("+h+', "'+t.operator[0]+'", '+d+")")}}}}if(!t)return"";n=n||{},e=e||"";var u=[],c=null,h=paper.browser,d=h.versionNumber,f=/\r\n|\n|\r/gm;if(h.chrome&&d>=30||h.webkit&&d>=537.76||h.firefox&&d>=23){var p=0;if(0===window.location.href.indexOf(e)){var v=document.getElementsByTagName("html")[0].innerHTML;p=v.substr(0,v.indexOf(t)+1).match(f).length+1}var _=["AAAA"];_.length=(t.match(f)||[]).length+1+p,c={version:3,file:e,names:[],mappings:_.join(";AACA"),sourceRoot:"",sources:[e]};var y=n.source||!e&&t;y&&(c.sourcesContent=[y])}return l(r(t,{ranges:!0})),c&&(t=new Array(p+1).join("\n")+t+"\n//# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(c))))+"\n//# sourceURL="+(e||"paperscript")),t}function o(i,r,o,a){function u(t,e){for(var n in t)!e&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(i)||(g.push(n),m.push(t[n]))}paper=r;var c,h=r.getView(),d=/\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(i)?new Z:null,f=d?d._events:[],p=["onFrame","onResize"].concat(f),g=[],m=[];i=s(i,o,a),u({__$__:t,$__:n,paper:r,view:h,tool:d},!0),u(r),p=e.each(p,function(t){new RegExp("\\s+"+t+"\\b").test(i)&&(g.push(t),this.push(t+": "+t))},[]).join(", "),p&&(i+="\nreturn { "+p+" };");var v=paper.browser;if(v.chrome||v.firefox){var _=document.createElement("script"),y=document.head||document.getElementsByTagName("head")[0];v.firefox&&(i="\n"+i),_.appendChild(document.createTextNode("paper._execute = function("+g+") {"+i+"\n}")),y.appendChild(_),c=paper._execute,delete paper._execute,y.removeChild(_)}else c=Function(g,i);var b=c.apply(r,m)||{};e.each(f,function(t){var e=b[t];e&&(d[t]=e)}),h&&(b.onResize&&h.setOnResize(b.onResize),h.emit("resize",{size:h.size,delta:new l}),b.onFrame&&h.setOnFrame(b.onFrame),h.update())}function a(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==i.getAttribute(t,"ignore")){var e=i.getAttribute(t,"canvas"),n=document.getElementById(e),r=t.src||t.getAttribute("data-src"),s=i.hasAttribute(t,"async"),a="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var l=i.get(n.getAttribute(a))||(new i).setup(n);return n.setAttribute(a,l._id),r?X.request("get",r,function(t){o(t,l,r)},s):o(t.innerHTML,l,t.baseURI),t.setAttribute("data-paper-ignore","true"),l}}function u(){e.each(document.getElementsByTagName("script"),a)}function h(t){return t?a(t):u()}var d,f,p=this;!function(t,e){return"object"==typeof d&&"object"==typeof module?e(d):"function"==typeof f&&f.amd?f(["exports"],e):void e(t.acorn||(t.acorn={}))}(this,function(t){"use strict";function e(t){ht=t||{};for(var e in gt)Object.prototype.hasOwnProperty.call(ht,e)||(ht[e]=gt[e]);pt=ht.sourceFile||null}function n(t,e){var n=mt(dt,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=vt,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var o=i[r];n+="case "+o[0].length+":",e(o)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=St,this.column=vt-Tt}function s(){St=1,vt=Tt=0,Ct=!0,u()}function o(t,e){yt=vt,ht.locations&&(wt=new r),xt=t,u(),kt=e,Ct=t.beforeExpr}function a(){var t=ht.onComment&&ht.locations&&new r,e=vt,i=dt.indexOf("*/",vt+=2);if(-1===i&&n(vt-2,"Unterminated comment"),vt=i+2,ht.locations){Xe.lastIndex=e;for(var s;(s=Xe.exec(dt))&&s.index<vt;)++St,Tt=s.index+s[0].length}ht.onComment&&ht.onComment(!0,dt.slice(e+2,i),e,vt,t,ht.locations&&new r)}function l(){for(var t=vt,e=ht.onComment&&ht.locations&&new r,n=dt.charCodeAt(vt+=2);ft>vt&&10!==n&&13!==n&&8232!==n&&8233!==n;)++vt,n=dt.charCodeAt(vt);ht.onComment&&ht.onComment(!1,dt.slice(t+2,vt),t,vt,e,ht.locations&&new r)}function u(){for(;ft>vt;){var t=dt.charCodeAt(vt);if(32===t)++vt;else if(13===t){++vt;var e=dt.charCodeAt(vt);10===e&&++vt,ht.locations&&(++St,Tt=vt)}else if(10===t||8232===t||8233===t)++vt,ht.locations&&(++St,Tt=vt);else if(t>8&&14>t)++vt;else if(47===t){var e=dt.charCodeAt(vt+1);if(42===e)a();else{if(47!==e)break;l()}}else if(160===t)++vt;else{if(!(t>=5760&&We.test(String.fromCharCode(t))))break;++vt}}}function c(){var t=dt.charCodeAt(vt+1);return t>=48&&57>=t?C(!0):(++vt,o(be))}function h(){var t=dt.charCodeAt(vt+1);return Ct?(++vt,w()):61===t?b(Ce,2):b(xe,1)}function d(){var t=dt.charCodeAt(vt+1);return 61===t?b(Ce,2):b(Ne,1)}function f(t){var e=dt.charCodeAt(vt+1);return e===t?b(124===t?Ee:De,2):61===e?b(Ce,2):b(124===t?je:Pe,1)}function p(){var t=dt.charCodeAt(vt+1);return 61===t?b(Ce,2):b(Ae,1)}function g(t){var e=dt.charCodeAt(vt+1);return e===t?45==e&&62==dt.charCodeAt(vt+2)&&Ze.test(dt.slice(Et,vt))?(vt+=3,l(),u(),y()):b(Te,2):61===e?b(Ce,2):b(Se,1)}function m(t){var e=dt.charCodeAt(vt+1),n=1;return e===t?(n=62===t&&62===dt.charCodeAt(vt+2)?3:2,61===dt.charCodeAt(vt+n)?b(Ce,n+1):b(Ie,n)):33==e&&60==t&&45==dt.charCodeAt(vt+2)&&45==dt.charCodeAt(vt+3)?(vt+=4,l(),u(),y()):(61===e&&(n=61===dt.charCodeAt(vt+2)?3:2),b(Oe,n))}function v(t){var e=dt.charCodeAt(vt+1);return 61===e?b(Me,61===dt.charCodeAt(vt+2)?3:2):b(61===t?ke:$e,1)}function _(t){switch(t){case 46:return c();case 40:return++vt,o(ge);case 41:return++vt,o(me);case 59:return++vt,o(_e);case 44:return++vt,o(ve);case 91:return++vt,o(he);case 93:return++vt,o(de);case 123:return++vt,o(fe);case 125:return++vt,o(pe);case 58:return++vt,o(ye);case 63:return++vt,o(we);case 48:var e=dt.charCodeAt(vt+1);if(120===e||88===e)return k();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return C(!1);case 34:case 39:return S(t);case 47:return h(t);case 37:case 42:return d();case 124:case 38:return f(t);case 94:return p();case 43:case 45:return g(t);case 60:case 62:return m(t);case 61:case 33:return v(t);case 126:return b($e,1)}return!1}function y(t){if(t?vt=_t+1:_t=vt,ht.locations&&(bt=new r),t)return w();if(vt>=ft)return o(Rt);var e=dt.charCodeAt(vt);if(Qe(e)||92===e)return E();var i=_(e);if(i===!1){var s=String.fromCharCode(e);if("\\"===s||Ve.test(s))return E();n(vt,"Unexpected character '"+s+"'")}return i}function b(t,e){var n=dt.slice(vt,vt+e);vt+=e,o(t,n)}function w(){for(var t,e,i="",r=vt;;){vt>=ft&&n(r,"Unterminated regular expression");var s=dt.charAt(vt);if(Ze.test(s)&&n(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++vt}var i=dt.slice(r,vt);++vt;var a=$();return a&&!/^[gmsiy]*$/.test(a)&&n(r,"Invalid regexp flag"),o(It,new RegExp(i,a))}function x(t,e){for(var n=vt,i=0,r=0,s=null==e?1/0:e;s>r;++r){var o,a=dt.charCodeAt(vt);if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0,o>=t)break;++vt,i=i*t+o}return vt===n||null!=e&&vt-n!==e?null:i}function k(){vt+=2;var t=x(16);return null==t&&n(_t+2,"Expected hexadecimal number"),Qe(dt.charCodeAt(vt))&&n(vt,"Identifier directly after number"),o(Ot,t)}function C(t){var e=vt,i=!1,r=48===dt.charCodeAt(vt);t||null!==x(10)||n(e,"Invalid number"),46===dt.charCodeAt(vt)&&(++vt,x(10),i=!0);var s=dt.charCodeAt(vt);(69===s||101===s)&&(s=dt.charCodeAt(++vt),(43===s||45===s)&&++vt,null===x(10)&&n(e,"Invalid number"),i=!0),Qe(dt.charCodeAt(vt))&&n(vt,"Identifier directly after number");var a,l=dt.slice(e,vt);return i?a=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||Pt?n(e,"Invalid number"):a=parseInt(l,8):a=parseInt(l,10),o(Ot,a)}function S(t){vt++;for(var e="";;){vt>=ft&&n(_t,"Unterminated string constant");var i=dt.charCodeAt(vt);if(i===t)return++vt,
o(Nt,e);if(92===i){i=dt.charCodeAt(++vt);var r=/^[0-7]+/.exec(dt.slice(vt,vt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,r.length-1);if("0"===r&&(r=null),++vt,r)Pt&&n(vt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),vt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(T(2));break;case 117:e+=String.fromCharCode(T(4));break;case 85:e+=String.fromCharCode(T(8));break;case 116:e+="	";break;case 98:e+="\b";break;case 118:e+="";break;case 102:e+="\f";break;case 48:e+="\x00";break;case 13:10===dt.charCodeAt(vt)&&++vt;case 10:ht.locations&&(Tt=vt,++St);break;default:e+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8233===i)&&n(_t,"Unterminated string constant"),e+=String.fromCharCode(i),++vt}}function T(t){var e=x(16,t);return null===e&&n(_t,"Bad character escape sequence"),e}function $(){Re=!1;for(var t,e=!0,i=vt;;){var r=dt.charCodeAt(vt);if(Ke(r))Re&&(t+=dt.charAt(vt)),++vt;else{if(92!==r)break;Re||(t=dt.slice(i,vt)),Re=!0,117!=dt.charCodeAt(++vt)&&n(vt,"Expecting Unicode escape sequence \\uXXXX"),++vt;var s=T(4),o=String.fromCharCode(s);o||n(vt-1,"Invalid Unicode escape"),(e?Qe(s):Ke(s))||n(vt-4,"Invalid Unicode escape"),t+=o}e=!1}return Re?t:dt.slice(i,vt)}function E(){var t=$(),e=Lt;return Re||(qe(t)?e=ce[t]:(ht.forbidReserved&&(3===ht.ecmaVersion?ze:Fe)(t)||Pt&&He(t))&&n(_t,"The keyword '"+t+"' is reserved")),o(e,t)}function D(){$t=_t,Et=yt,Dt=wt,y()}function j(t){if(Pt=t,vt=Et,ht.locations)for(;Tt>vt;)Tt=dt.lastIndexOf("\n",Tt-2)+1,--St;u(),y()}function A(){this.type=null,this.start=_t,this.end=null}function P(){this.start=bt,this.end=null,null!==pt&&(this.source=pt)}function M(){var t=new A;return ht.locations&&(t.loc=new P),ht.ranges&&(t.range=[_t,0]),t}function O(t){var e=new A;return e.start=t.start,ht.locations&&(e.loc=new P,e.loc.start=t.loc.start),ht.ranges&&(e.range=[t.range[0],0]),e}function I(t,e){return t.type=e,t.end=Et,ht.locations&&(t.loc.end=Dt),ht.ranges&&(t.range[1]=Et),t}function N(t){return ht.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function L(t){return xt===t?(D(),!0):void 0}function R(){return!ht.strictSemicolons&&(xt===Rt||xt===pe||Ze.test(dt.slice(Et,_t)))}function z(){L(_e)||R()||H()}function F(t){xt===t?D():H()}function H(){n(_t,"Unexpected token")}function B(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),Pt&&"Identifier"===t.type&&Be(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function q(t){$t=Et=vt,ht.locations&&(Dt=new r),jt=Pt=null,At=[],y();var e=t||M(),n=!0;for(t||(e.body=[]);xt!==Rt;){var i=W();e.body.push(i),n&&N(i)&&j(!0),n=!1}return I(e,"Program")}function W(){(xt===xe||xt===Ce&&"/="==kt)&&y(!0);var t=xt,e=M();switch(t){case zt:case Bt:D();var i=t===zt;L(_e)||R()?e.label=null:xt!==Lt?H():(e.label=ct(),z());for(var r=0;r<At.length;++r){var s=At[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===At.length&&n(e.start,"Unsyntactic "+t.keyword),I(e,i?"BreakStatement":"ContinueStatement");case qt:return D(),z(),I(e,"DebuggerStatement");case Yt:return D(),At.push(Je),e.body=W(),At.pop(),F(ne),e.test=Y(),z(),I(e,"DoWhileStatement");case Ut:if(D(),At.push(Je),F(ge),xt===_e)return V(e,null);if(xt===ee){var o=M();return D(),Z(o,!0),I(o,"VariableDeclaration"),1===o.declarations.length&&L(ue)?U(e,o):V(e,o)}var o=X(!1,!0);return L(ue)?(B(o),U(e,o)):V(e,o);case Zt:return D(),lt(e,!0);case Xt:return D(),e.test=Y(),e.consequent=W(),e.alternate=L(Gt)?W():null,I(e,"IfStatement");case Qt:return jt||n(_t,"'return' outside of function"),D(),L(_e)||R()?e.argument=null:(e.argument=X(),z()),I(e,"ReturnStatement");case Kt:D(),e.discriminant=Y(),e.cases=[],F(fe),At.push(tn);for(var a,l;xt!=pe;)if(xt===Ft||xt===Wt){var u=xt===Ft;a&&I(a,"SwitchCase"),e.cases.push(a=M()),a.consequent=[],D(),u?a.test=X():(l&&n($t,"Multiple default clauses"),l=!0,a.test=null),F(ye)}else a||H(),a.consequent.push(W());return a&&I(a,"SwitchCase"),D(),At.pop(),I(e,"SwitchStatement");case Jt:return D(),Ze.test(dt.slice(Et,_t))&&n(Et,"Illegal newline after throw"),e.argument=X(),z(),I(e,"ThrowStatement");case te:if(D(),e.block=G(),e.handler=null,xt===Ht){var c=M();D(),F(ge),c.param=ct(),Pt&&Be(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),F(me),c.guard=null,c.body=G(),e.handler=I(c,"CatchClause")}return e.guardedHandlers=Mt,e.finalizer=L(Vt)?G():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),I(e,"TryStatement");case ee:return D(),Z(e),z(),I(e,"VariableDeclaration");case ne:return D(),e.test=Y(),At.push(Je),e.body=W(),At.pop(),I(e,"WhileStatement");case ie:return Pt&&n(_t,"'with' in strict mode"),D(),e.object=Y(),e.body=W(),I(e,"WithStatement");case fe:return G();case _e:return D(),I(e,"EmptyStatement");default:var h=kt,d=X();if(t===Lt&&"Identifier"===d.type&&L(ye)){for(var r=0;r<At.length;++r)At[r].name===h&&n(d.start,"Label '"+h+"' is already declared");var f=xt.isLoop?"loop":xt===Kt?"switch":null;return At.push({name:h,kind:f}),e.body=W(),At.pop(),e.label=d,I(e,"LabeledStatement")}return e.expression=d,z(),I(e,"ExpressionStatement")}}function Y(){F(ge);var t=X();return F(me),t}function G(t){var e,n=M(),i=!0,r=!1;for(n.body=[],F(fe);!L(pe);){var s=W();n.body.push(s),i&&t&&N(s)&&(e=r,j(r=!0)),i=!1}return r&&!e&&j(!1),I(n,"BlockStatement")}function V(t,e){return t.init=e,F(_e),t.test=xt===_e?null:X(),F(_e),t.update=xt===me?null:X(),F(me),t.body=W(),At.pop(),I(t,"ForStatement")}function U(t,e){return t.left=e,t.right=X(),F(me),t.body=W(),At.pop(),I(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var i=M();if(i.id=ct(),Pt&&Be(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=L(ke)?X(!0,e):null,t.declarations.push(I(i,"VariableDeclarator")),!L(ve))break}return t}function X(t,e){var n=Q(e);if(!t&&xt===ve){var i=O(n);for(i.expressions=[n];L(ve);)i.expressions.push(Q(e));return I(i,"SequenceExpression")}return n}function Q(t){var e=K(t);if(xt.isAssign){var n=O(e);return n.operator=kt,n.left=e,D(),n.right=Q(t),B(e),I(n,"AssignmentExpression")}return e}function K(t){var e=J(t);if(L(we)){var n=O(e);return n.test=e,n.consequent=X(!0),F(ye),n.alternate=X(!0,t),I(n,"ConditionalExpression")}return e}function J(t){return tt(et(),-1,t)}function tt(t,e,n){var i=xt.binop;if(null!=i&&(!n||xt!==ue)&&i>e){var r=O(t);r.left=t,r.operator=kt,D(),r.right=tt(et(),i,n);var s=I(r,/&&|\|\|/.test(r.operator)?"LogicalExpression":"BinaryExpression");return tt(s,e,n)}return t}function et(){if(xt.prefix){var t=M(),e=xt.isUpdate;return t.operator=kt,t.prefix=!0,Ct=!0,D(),t.argument=et(),e?B(t.argument):Pt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),I(t,e?"UpdateExpression":"UnaryExpression")}for(var i=nt();xt.postfix&&!R();){var t=O(i);t.operator=kt,t.prefix=!1,t.argument=i,B(i),D(),i=I(t,"UpdateExpression")}return i}function nt(){return it(rt())}function it(t,e){if(L(be)){var n=O(t);return n.object=t,n.property=ct(!0),n.computed=!1,it(I(n,"MemberExpression"),e)}if(L(he)){var n=O(t);return n.object=t,n.property=X(),n.computed=!0,F(de),it(I(n,"MemberExpression"),e)}if(!e&&L(ge)){var n=O(t);return n.callee=t,n.arguments=ut(me,!1),it(I(n,"CallExpression"),e)}return t}function rt(){switch(xt){case se:var t=M();return D(),I(t,"ThisExpression");case Lt:return ct();case Ot:case Nt:case It:var t=M();return t.value=kt,t.raw=dt.slice(_t,yt),D(),I(t,"Literal");case oe:case ae:case le:var t=M();return t.value=xt.atomValue,t.raw=xt.keyword,D(),I(t,"Literal");case ge:var e=bt,n=_t;D();var i=X();return i.start=n,i.end=yt,ht.locations&&(i.loc.start=e,i.loc.end=wt),ht.ranges&&(i.range=[n,yt]),F(me),i;case he:var t=M();return D(),t.elements=ut(de,!0,!0),I(t,"ArrayExpression");case fe:return ot();case Zt:var t=M();return D(),lt(t,!1);case re:return st();default:H()}}function st(){var t=M();return D(),t.callee=it(rt(),!0),t.arguments=L(ge)?ut(me,!1):Mt,I(t,"NewExpression")}function ot(){var t=M(),e=!0,i=!1;for(t.properties=[],D();!L(pe);){if(e)e=!1;else if(F(ve),ht.allowTrailingCommas&&L(pe))break;var r,s={key:at()},o=!1;if(L(ye)?(s.value=X(!0),r=s.kind="init"):ht.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=at(),xt!==ge&&H(),s.value=lt(M(),!1)):H(),"Identifier"===s.key.type&&(Pt||i))for(var a=0;a<t.properties.length;++a){var l=t.properties[a];if(l.key.name===s.key.name){var u=r==l.kind||o&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);u&&!Pt&&"init"===r&&"init"===l.kind&&(u=!1),u&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return I(t,"ObjectExpression")}function at(){return xt===Ot||xt===Nt?rt():ct(!0)}function lt(t,e){xt===Lt?t.id=ct():e?H():t.id=null,t.params=[];var i=!0;for(F(ge);!L(me);)i?i=!1:F(ve),t.params.push(ct());var r=jt,s=At;if(jt=!0,At=[],t.body=G(!0),jt=r,At=s,Pt||t.body.body.length&&N(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=0>o?t.id:t.params[o];if((He(a.name)||Be(a.name))&&n(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var l=0;o>l;++l)a.name===t.params[l].name&&n(a.start,"Argument name clash in strict mode")}return I(t,e?"FunctionDeclaration":"FunctionExpression")}function ut(t,e,n){for(var i=[],r=!0;!L(t);){if(r)r=!1;else if(F(ve),e&&ht.allowTrailingCommas&&L(t))break;n&&xt===ve?i.push(null):i.push(X(!0))}return i}function ct(t){var e=M();return e.name=xt===Lt?kt:t&&!ht.forbidReserved&&xt.keyword||H(),Ct=!1,D(),I(e,"Identifier")}t.version="0.4.0";var ht,dt,ft,pt;t.parse=function(t,n){return dt=String(t),ft=dt.length,e(n),s(),q(ht.program)};var gt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},mt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Xe.lastIndex=i;var r=Xe.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return y(t),r.start=_t,r.end=yt,r.startLoc=bt,r.endLoc=wt,r.type=xt,r.value=kt,r}dt=String(t),ft=dt.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(vt=t,ht.locations){St=1,Tt=Xe.lastIndex=0;for(var n;(n=Xe.exec(dt))&&n.index<t;)++St,Tt=n.index+n[0].length}Ct=e,u()},i};var vt,_t,yt,bt,wt,xt,kt,Ct,St,Tt,$t,Et,Dt,jt,At,Pt,Mt=[],Ot={type:"num"},It={type:"regexp"},Nt={type:"string"},Lt={type:"name"},Rt={type:"eof"},zt={keyword:"break"},Ft={keyword:"case",beforeExpr:!0},Ht={keyword:"catch"},Bt={keyword:"continue"},qt={keyword:"debugger"},Wt={keyword:"default"},Yt={keyword:"do",isLoop:!0},Gt={keyword:"else",beforeExpr:!0},Vt={keyword:"finally"},Ut={keyword:"for",isLoop:!0},Zt={keyword:"function"},Xt={keyword:"if"},Qt={keyword:"return",beforeExpr:!0},Kt={keyword:"switch"},Jt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ne={keyword:"while",isLoop:!0},ie={keyword:"with"},re={keyword:"new",beforeExpr:!0},se={keyword:"this"},oe={keyword:"null",atomValue:null},ae={keyword:"true",atomValue:!0},le={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},ce={"break":zt,"case":Ft,"catch":Ht,"continue":Bt,"debugger":qt,"default":Wt,"do":Yt,"else":Gt,"finally":Vt,"for":Ut,"function":Zt,"if":Xt,"return":Qt,"switch":Kt,"throw":Jt,"try":te,"var":ee,"while":ne,"with":ie,"null":oe,"true":ae,"false":le,"new":re,"in":ue,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":se,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},he={type:"[",beforeExpr:!0},de={type:"]"},fe={type:"{",beforeExpr:!0},pe={type:"}"},ge={type:"(",beforeExpr:!0},me={type:")"},ve={type:",",beforeExpr:!0},_e={type:";",beforeExpr:!0},ye={type:":",beforeExpr:!0},be={type:"."},we={type:"?",beforeExpr:!0},xe={binop:10,beforeExpr:!0},ke={isAssign:!0,beforeExpr:!0},Ce={isAssign:!0,beforeExpr:!0},Se={binop:9,prefix:!0,beforeExpr:!0},Te={postfix:!0,prefix:!0,isUpdate:!0},$e={prefix:!0,beforeExpr:!0},Ee={binop:1,beforeExpr:!0},De={binop:2,beforeExpr:!0},je={binop:3,beforeExpr:!0},Ae={binop:4,beforeExpr:!0},Pe={binop:5,beforeExpr:!0},Me={binop:6,beforeExpr:!0},Oe={binop:7,beforeExpr:!0},Ie={binop:8,beforeExpr:!0},Ne={binop:10,beforeExpr:!0};t.tokTypes={bracketL:he,bracketR:de,braceL:fe,braceR:pe,parenL:ge,parenR:me,comma:ve,semi:_e,colon:ye,dot:be,question:we,slash:xe,eq:ke,name:Lt,eof:Rt,num:Ot,regexp:It,string:Nt};for(var Le in ce)t.tokTypes["_"+Le]=ce[Le];var Re,ze=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Fe=i("class enum extends super const export import"),He=i("implements interface let package private protected public static yield"),Be=i("eval arguments"),qe=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),We=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ye="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Ge="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",Ve=new RegExp("["+Ye+"]"),Ue=new RegExp("["+Ye+Ge+"]"),Ze=/[\n\r\u2028\u2029]/,Xe=/\r\n|[\n\r\u2028\u2029]/g,Qe=t.isIdentifierStart=function(t){return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ve.test(String.fromCharCode(t))},Ke=t.isIdentifierChar=function(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&Ue.test(String.fromCharCode(t))},Je={kind:"loop"},tn={kind:"switch"}});var g={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"equals","!=":"equals"},m={"-":"__negate","+":null},v=e.each(["add","subtract","multiply","divide","modulo","negate"],function(t){this["__"+t]="#"+t},{});return l.inject(v),c.inject(v),N.inject(v),"complete"===document.readyState?setTimeout(u):H.add(window,{load:u}),{compile:s,execute:o,load:h,parse:r}}.call(this),paper=new(i.inject(e.exports,{enumerable:!0,Base:e,Numerical:o,Key:G})),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper};!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){/*!
 @package noty - jQuery Notification Plugin
 @version version: 2.3.8
 @contributors https://github.com/needim/noty/graphs/contributors

 @documentation Examples and Documentation - http://needim.github.com/noty/

 @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php
 */
"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e});var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],t.noty.themes[this.options.theme]?this.options.theme=t.noty.themes[this.options.theme]:this.options.themeClassName=this.options.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this._build(),this},_build:function(){var e=t('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;t.each(this.options.buttons,function(e,n){var r=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).attr("id",n.id?n.id:"button-"+e).attr("title",n.title).appendTo(i.$bar.find(".noty_buttons")).on("click",function(e){t.isFunction(n.onClick)&&n.onClick.call(r,i,e)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):t(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector),[e.options.within]),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),"string"==typeof e.options.animation.open?(e.$bar.css("height",e.$bar.innerHeight()),e.$bar.on("click",function(t){e.wasClicked=!0}),e.$bar.show().addClass(e.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0,e.hasOwnProperty("wasClicked")&&(e.$bar.off("click",function(t){e.wasClicked=!0}),e.close())})):e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(!this.shown&&!this.showing){var n=[];return t.each(t.noty.queue,function(t,i){i.options.id!=e.options.id&&n.push(i)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),"string"==typeof e.options.animation.close?e.$bar.addClass(e.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e),e.closeCleanUp()}):e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut(e.options.animation.fadeSpeed,function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete t.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&t.notyRenderer.render()},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},stopPropagation:function(t){t=t||window.event,"undefined"!=typeof t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},closed:!1,showing:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var i=Object.create(e).init(n);return i.options.killer&&t.noty.closeAll(),i.options.force?t.noty.queue.unshift(i):t.noty.queue.push(i),t.notyRenderer.render(),"object"==t.noty.returns?i:i.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?e.options.maxVisible>0?t(e.options.layout.container.selector+" > li").length<e.options.maxVisible&&t.notyRenderer.show(t.noty.queue.shift()):t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==t(e.options.layout.container.selector).length?t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){if(0==t(".noty_modal").length){var n=t("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&n.css(e.options.theme.modal.css),n.prependTo(t("body")).fadeIn(e.options.animation.fadeSpeed),t.inArray("backdrop",e.options.closeWith)>-1&&n.on("click",function(e){t.noty.closeAll()})}},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return t.noty.store.hasOwnProperty(e)?t.noty.store[e]:!1},t.noty.close=function(e){return t.noty.get(e)?t.noty.get(e).close():!1},t.noty.setText=function(e,n){return t.noty.get(e)?t.noty.get(e).setText(n):!1},t.noty.setType=function(e,n){return t.noty.get(e)?t.noty.get(e).setType(n):!1},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;return t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500,fadeSpeed:"fast"},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},t(window).on("resize",function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})}),window.noty=function(e){return t.notyRenderer.init(e)},t.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){t(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){t(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){t(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){t(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){t(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){t(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){t(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},t.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){t(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},t.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var e=this.options.layout.container.selector;switch(t(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},t.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){t(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){t(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},t.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){t(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){t(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},window.noty}),function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=v({},e),t[L]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in e)&&(e[i]=n[i]);V(e);for(var s in this)"_"===s.charAt(0)&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:H,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Y.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){w&&w.state!==t&&(a(w,"display",t?"none":""),!t&&w.state&&x.insertBefore(w,_),w.state=t)}function n(t,e,n){if(t){n=n||z,e=e.split(".");var i=e.shift().toUpperCase(),r=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do if(">*"===i&&t.parentNode===n||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(r)||[]).length==e.length))return t;while(t!==n&&(t=t.parentNode))}return null}function i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function r(t,e,n){t.addEventListener(e,n,!1)}function s(t,e,n){t.removeEventListener(e,n,!1)}function o(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(N," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(N," ")}}function a(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return z.defaultView&&z.defaultView.getComputedStyle?n=z.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function l(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,s=i.length;if(n)for(;s>r;r++)n(i[r],r);return i}return[]}function u(t,e,n,i,r,s,o){var a=z.createEvent("Event"),l=(t||e[L]).options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);a.initEvent(n,!0,!0),a.to=e,a.from=r||e,a.item=i||e,a.clone=w,a.oldIndex=s,a.newIndex=o,e.dispatchEvent(a),l[u]&&l[u].call(t,a)}function c(t,e,n,i,r,s){var o,a,l=t[L],u=l.options.onMove;return o=z.createEvent("Event"),o.initEvent("move",!0,!0),o.to=e,o.from=t,o.dragged=n,o.draggedRect=i,o.related=r||e,o.relatedRect=s||e.getBoundingClientRect(),t.dispatchEvent(o),u&&(a=u.call(l,o)),a}function h(t){t.draggable=!1}function d(){q=!1}function f(t,e){var n=t.lastElementChild,i=n.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&n}function p(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function g(t){var e=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function m(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function v(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var _,y,b,w,x,k,C,S,T,$,E,D,j,A,P,M,O,I={},N=/\s+/g,L="Sortable"+(new Date).getTime(),R=window,z=R.document,F=R.parseInt,H=!!("draggable"in z.createElement("div")),B=function(t){return t=z.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),q=!1,W=Math.abs,Y=([].slice,[]),G=m(function(t,e,n){if(n&&e.scroll){var i,r,s,o,a=e.scrollSensitivity,l=e.scrollSpeed,u=t.clientX,c=t.clientY,h=window.innerWidth,d=window.innerHeight;if(S!==n&&(C=e.scroll,S=n,C===!0)){C=n;do if(C.offsetWidth<C.scrollWidth||C.offsetHeight<C.scrollHeight)break;while(C=C.parentNode)}C&&(i=C,r=C.getBoundingClientRect(),s=(W(r.right-u)<=a)-(W(r.left-u)<=a),o=(W(r.bottom-c)<=a)-(W(r.top-c)<=a)),s||o||(s=(a>=h-u)-(a>=u),o=(a>=d-c)-(a>=c),(s||o)&&(i=R)),(I.vx!==s||I.vy!==o||I.el!==i)&&(I.el=i,I.vx=s,I.vy=o,clearInterval(I.pid),i&&(I.pid=setInterval(function(){i===R?R.scrollTo(R.pageXOffset+s*l,R.pageYOffset+o*l):(o&&(i.scrollTop+=o*l),s&&(i.scrollLeft+=s*l))},24)))}},30),V=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,r=this.options,s=t.type,o=t.touches&&t.touches[0],a=(o||t).target,l=a,c=r.filter;if(!("mousedown"===s&&0!==t.button||r.disabled)&&(a=n(a,r.draggable,i))){if(D=g(a),"function"==typeof c){if(c.call(this,t,a,this))return u(e,l,"filter",a,i,D),void t.preventDefault()}else if(c&&(c=c.split(",").some(function(t){return t=n(l,t.trim(),i),t?(u(e,t,"filter",a,i,D),!0):void 0})))return void t.preventDefault();(!r.handle||n(l,r.handle,i))&&this._prepareDragStart(t,o,a)}},_prepareDragStart:function(t,e,n){var i,s=this,a=s.el,u=s.options,c=a.ownerDocument;n&&!_&&n.parentNode===a&&(P=t,x=a,_=n,y=_.parentNode,k=_.nextSibling,A=u.group,i=function(){s._disableDelayedDrag(),_.draggable=!0,o(_,s.options.chosenClass,!0),s._triggerDragStart(e)},u.ignore.split(",").forEach(function(t){l(_,t.trim(),h)}),r(c,"mouseup",s._onDrop),r(c,"touchend",s._onDrop),r(c,"touchcancel",s._onDrop),u.delay?(r(c,"mouseup",s._disableDelayedDrag),r(c,"touchend",s._disableDelayedDrag),r(c,"touchcancel",s._disableDelayedDrag),r(c,"mousemove",s._disableDelayedDrag),r(c,"touchmove",s._disableDelayedDrag),s._dragStartTimer=setTimeout(i,u.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),s(t,"mouseup",this._disableDelayedDrag),s(t,"touchend",this._disableDelayedDrag),s(t,"touchcancel",this._disableDelayedDrag),s(t,"mousemove",this._disableDelayedDrag),s(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(P={target:_,clientX:t.clientX,clientY:t.clientY},this._onDragStart(P,"touch")):this.nativeDraggable?(r(_,"dragend",this),r(x,"dragstart",this._onDragStart)):this._onDragStart(P,!0);try{z.selection?z.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){x&&_&&(o(_,this.options.ghostClass,!0),t.active=this,u(this,x,"start",_,x,D))},_emulateDragOver:function(){if(M){if(this._lastX===M.clientX&&this._lastY===M.clientY)return;this._lastX=M.clientX,this._lastY=M.clientY,B||a(b,"display","none");var t=z.elementFromPoint(M.clientX,M.clientY),e=t,n=" "+this.options.group.name,i=Y.length;if(e)do{if(e[L]&&e[L].options.groups.indexOf(n)>-1){for(;i--;)Y[i]({clientX:M.clientX,clientY:M.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);B||a(b,"display","")}},_onTouchMove:function(e){if(P){t.active||this._dragStarted(),this._appendGhost();var n=e.touches?e.touches[0]:e,i=n.clientX-P.clientX,r=n.clientY-P.clientY,s=e.touches?"translate3d("+i+"px,"+r+"px,0)":"translate("+i+"px,"+r+"px)";O=!0,M=n,a(b,"webkitTransform",s),a(b,"mozTransform",s),a(b,"msTransform",s),a(b,"transform",s),e.preventDefault()}},_appendGhost:function(){if(!b){var t,e=_.getBoundingClientRect(),n=a(_);b=_.cloneNode(!0),o(b,this.options.ghostClass,!1),o(b,this.options.fallbackClass,!0),a(b,"top",e.top-F(n.marginTop,10)),a(b,"left",e.left-F(n.marginLeft,10)),a(b,"width",e.width),a(b,"height",e.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),this.options.fallbackOnBody&&z.body.appendChild(b)||x.appendChild(b),t=b.getBoundingClientRect(),a(b,"width",2*e.width-t.width),a(b,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var n=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==A.pull&&(w=_.cloneNode(!0),a(w,"display","none"),x.insertBefore(w,_)),
e?("touch"===e?(r(z,"touchmove",this._onTouchMove),r(z,"touchend",this._onDrop),r(z,"touchcancel",this._onDrop)):(r(z,"mousemove",this._onTouchMove),r(z,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,_)),r(z,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,r,s,o=this.el,l=this.options,u=l.group,h=u.put,p=A===u,g=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!l.dragoverBubble&&t.stopPropagation()),O=!0,A&&!l.disabled&&(p?g||(s=!x.contains(_)):A.pull&&h&&(A.name===u.name||h.indexOf&&~h.indexOf(A.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(G(t,l,this.el),q)return;if(i=n(t.target,l.draggable,o),r=_.getBoundingClientRect(),s)return e(!0),void(w||k?x.insertBefore(_,w||k):g||x.appendChild(_));if(0===o.children.length||o.children[0]===b||o===t.target&&(i=f(o,t))){if(i){if(i.animated)return;v=i.getBoundingClientRect()}e(p),c(x,o,_,r,i,v)!==!1&&(_.contains(o)||(o.appendChild(_),y=o),this._animate(r,_),i&&this._animate(v,i))}else if(i&&!i.animated&&i!==_&&void 0!==i.parentNode[L]){T!==i&&(T=i,$=a(i),E=a(i.parentNode));var m,v=i.getBoundingClientRect(),C=v.right-v.left,S=v.bottom-v.top,D=/left|right|inline/.test($.cssFloat+$.display)||"flex"==E.display&&0===E["flex-direction"].indexOf("row"),j=i.offsetWidth>_.offsetWidth,P=i.offsetHeight>_.offsetHeight,M=(D?(t.clientX-v.left)/C:(t.clientY-v.top)/S)>.5,I=i.nextElementSibling,N=c(x,o,_,r,i,v);if(N!==!1){if(q=!0,setTimeout(d,30),e(p),1===N||-1===N)m=1===N;else if(D){var R=_.offsetTop,z=i.offsetTop;m=R===z?i.previousElementSibling===_&&!j||M&&j:z>R}else m=I!==_&&!P||M&&P;_.contains(o)||(m&&!I?o.appendChild(_):i.parentNode.insertBefore(_,m?I:i)),y=_.parentNode,this._animate(r,_),this._animate(v,i)}}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();a(e,"transition","none"),a(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,a(e,"transition","all "+n+"ms"),a(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){a(e,"transition",""),a(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;s(z,"touchmove",this._onTouchMove),s(t,"mouseup",this._onDrop),s(t,"touchend",this._onDrop),s(t,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(I.pid),clearTimeout(this._dragStartTimer),s(z,"mousemove",this._onTouchMove),this.nativeDraggable&&(s(z,"drop",this),s(n,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(O&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),b&&b.parentNode.removeChild(b),_&&(this.nativeDraggable&&s(_,"dragend",this),h(_),o(_,this.options.ghostClass,!1),o(_,this.options.chosenClass,!1),x!==y?(j=g(_),j>=0&&(u(null,y,"sort",_,x,D,j),u(this,x,"sort",_,x,D,j),u(null,y,"add",_,x,D,j),u(this,x,"remove",_,x,D,j))):(w&&w.parentNode.removeChild(w),_.nextSibling!==k&&(j=g(_),j>=0&&(u(this,x,"update",_,x,D,j),u(this,x,"sort",_,x,D,j)))),t.active&&((null===j||-1===j)&&(j=D),u(this,x,"end",_,x,D,j),this.save())),x=_=y=b=k=w=C=S=P=M=O=j=T=$=A=t.active=null)},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?_&&(this._onDragOver(t),i(t)):("drop"===e||"dragend"===e)&&this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,r=0,s=i.length,o=this.options;s>r;r++)t=i[r],n(t,o.draggable,this.el)&&e.push(t.getAttribute(o.dataIdAttr)||p(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,r){var s=i.children[r];n(s,this.options.draggable,i)&&(e[t]=s)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return n(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:(n[t]=e,void("group"===t&&V(n)))},destroy:function(){var t=this.el;t[L]=null,s(t,"mousedown",this._onTapStart),s(t,"touchstart",this._onTapStart),this.nativeDraggable&&(s(t,"dragover",this),s(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),Y.splice(Y.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:r,off:s,css:a,find:l,is:function(t,e){return!!n(t,e,t)},extend:v,throttle:m,closest:n,toggleClass:o,index:g},t.create=function(e,n){return new t(e,n)},t.version="1.3.0",t}),function(t){var e=0,n=function(){return(new Date).getTime()+e++},i=function(t){return"["+t+"]$1"},r=function(t){return"_"+t+"_$1"};t(document).on("click",".add_fields",function(e){e.preventDefault();var s=t(this),o=s.data("association"),a=s.data("associations"),l=s.data("association-insertion-template"),u=s.data("association-insertion-method")||s.data("association-insertion-position")||"before",c=s.data("association-insertion-node"),h=s.data("association-insertion-traversal"),d=parseInt(s.data("count"),10),f=new RegExp("\\[new_"+o+"\\](.*?\\s)","g"),p=new RegExp("_new_"+o+"_(\\w*)","g"),g=n(),m=l.replace(f,i(g)),v=[];for(m==l&&(f=new RegExp("\\[new_"+a+"\\](.*?\\s)","g"),p=new RegExp("_new_"+a+"_(\\w*)","g"),m=l.replace(f,i(g))),m=m.replace(p,r(g)),v=[m],d=isNaN(d)?1:Math.max(d,1),d-=1;d;)g=n(),m=l.replace(f,i(g)),m=m.replace(p,r(g)),v.push(m),d-=1;c=c?h?s[h](c):"this"==c?s:t(c):s.parent(),t.each(v,function(e,n){var i=t(n);c.trigger("cocoon:before-insert",[i]);c[u](i);c.trigger("cocoon:after-insert",[i])})}),t(document).on("click",".remove_fields.dynamic, .remove_fields.existing",function(e){var n=t(this),i=n.data("wrapper-class")||"nested-fields",r=n.closest("."+i),s=r.parent();e.preventDefault(),s.trigger("cocoon:before-remove",[r]);var o=s.data("remove-timeout")||0;setTimeout(function(){n.hasClass("dynamic")?r.remove():(n.prev("input[type=hidden]").val("1"),r.hide()),s.trigger("cocoon:after-remove",[r])},o)}),t(".remove_fields.existing.destroyed").each(function(e,n){var i=t(this),r=i.data("wrapper-class")||"nested-fields";i.closest("."+r).hide()})}(jQuery),!function(){function t(e,n,i){var r=t.resolve(e);if(null==r){i=i||e,n=n||"root";var s=new Error('Failed to require "'+i+'" from "'+n+'"');throw s.path=i,s.parent=n,s.require=!0,s}var o=t.modules[r];if(!o._resolving&&!o.exports){var a={};a.exports={},a.client=a.component=!0,o._resolving=!0,o.call(this,a.exports,t.relative(r),a),delete o._resolving,o.exports=a.exports}return o.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;i<n.length;i++){var e=n[i];if(t.modules.hasOwnProperty(e))return e;if(t.aliases.hasOwnProperty(e))return t.aliases[e]}},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(e,n){if(!t.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');t.aliases[n]=e},t.relative=function(e){function n(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(n){var r=i.resolve(n);return t(r,e,n)}var r=t.normalize(e,"..");return i.resolve=function(i){var s=i.charAt(0);if("/"==s)return i.slice(1);if("."==s)return t.normalize(r,i);var o=e.split("/"),a=n(o,"deps")+1;return a||(a=0),i=o.slice(0,a+1).join("/")+"/deps/"+i},i.exists=function(e){return t.modules.hasOwnProperty(i.resolve(e))},i},t.register("component-classes/index.js",function(t,e,n){function i(t){if(!t)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}var r=e("indexof"),s=/\s+/,o=Object.prototype.toString;n.exports=function(t){return new i(t)},i.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array(),n=r(e,t);return~n||e.push(t),this.el.className=e.join(" "),this},i.prototype.remove=function(t){if("[object RegExp]"==o.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=r(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},i.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},i.prototype.toggle=function(t,e){return this.list?("undefined"!=typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!=typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},i.prototype.array=function(){var t=this.el.className.replace(/^\s+|\s+$/g,""),e=t.split(s);return""===e[0]&&e.shift(),e},i.prototype.has=i.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}}),t.register("segmentio-extend/index.js",function(t,e,n){n.exports=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),i=0;e=n[i];i++)if(e)for(var r in e)t[r]=e[r];return t}}),t.register("component-indexof/index.js",function(t,e,n){n.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}}),t.register("component-event/index.js",function(t){var e=window.addEventListener?"addEventListener":"attachEvent",n=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==e?"on":"";t.bind=function(t,n,r,s){return t[e](i+n,r,s||!1),r},t.unbind=function(t,e,r,s){return t[n](i+e,r,s||!1),r}}),t.register("timoxley-to-array/index.js",function(t,e,n){function i(t){return"[object Array]"===Object.prototype.toString.call(t)}n.exports=function(t){if("undefined"==typeof t)return[];if(null===t)return[null];if(t===window)return[window];if("string"==typeof t)return[t];if(i(t))return t;if("number"!=typeof t.length)return[t];if("function"==typeof t&&t instanceof Function)return[t];for(var e=[],n=0;n<t.length;n++)(Object.prototype.hasOwnProperty.call(t,n)||n in t)&&e.push(t[n]);return e.length?e:[]}}),t.register("javve-events/index.js",function(t,e){var n=e("event"),i=e("to-array");t.bind=function(t,e,r,s){t=i(t);for(var o=0;o<t.length;o++)n.bind(t[o],e,r,s)},t.unbind=function(t,e,r,s){t=i(t);for(var o=0;o<t.length;o++)n.unbind(t[o],e,r,s)}}),t.register("javve-get-by-class/index.js",function(t,e,n){n.exports=function(){return document.getElementsByClassName?function(t,e,n){return n?t.getElementsByClassName(e)[0]:t.getElementsByClassName(e)}:document.querySelector?function(t,e,n){return e="."+e,n?t.querySelector(e):t.querySelectorAll(e)}:function(t,e,n){var i=[],r="*";null==t&&(t=document);for(var s=t.getElementsByTagName(r),o=s.length,a=new RegExp("(^|\\s)"+e+"(\\s|$)"),l=0,u=0;o>l;l++)if(a.test(s[l].className)){if(n)return s[l];i[u]=s[l],u++}return i}}()}),t.register("javve-get-attribute/index.js",function(t,e,n){n.exports=function(t,e){var n=t.getAttribute&&t.getAttribute(e)||null;if(!n)for(var i=t.attributes,r=i.length,s=0;r>s;s++)void 0!==e[s]&&e[s].nodeName===e&&(n=e[s].nodeValue);return n}}),t.register("javve-natural-sort/index.js",function(t,e,n){n.exports=function(t,e,n){var i,r,s=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,o=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,n=n||{},c=function(t){return n.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(o,"")||"",d=c(e).replace(o,"")||"",f=h.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),p=d.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),g=parseInt(h.match(l))||1!=f.length&&h.match(a)&&Date.parse(h),m=parseInt(d.match(l))||g&&d.match(a)&&Date.parse(d)||null,v=n.desc?-1:1;if(m){if(m>g)return-1*v;if(g>m)return 1*v}for(var _=0,y=Math.max(f.length,p.length);y>_;_++){if(i=!(f[_]||"").match(u)&&parseFloat(f[_])||f[_]||0,r=!(p[_]||"").match(u)&&parseFloat(p[_])||p[_]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),r>i)return-1*v;if(i>r)return 1*v}return 0}}),t.register("javve-to-string/index.js",function(t,e,n){n.exports=function(t){return t=void 0===t?"":t,t=null===t?"":t,t=t.toString()}}),t.register("component-type/index.js",function(t,e,n){var i=Object.prototype.toString;n.exports=function(t){switch(i.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":typeof t.valueOf()}}),t.register("list.js/index.js",function(t,e,n){!function(t,i){"use strict";var r=t.document,s=e("get-by-class"),o=e("extend"),a=e("indexof"),l=function(t,n,u){var c,h=this,d=e("./src/item")(h),f=e("./src/add-async")(h),p=e("./src/parse")(h);c={start:function(){h.listClass="list",h.searchClass="search",h.sortClass="sort",h.page=200,h.i=1,h.items=[],h.visibleItems=[],h.matchingItems=[],h.searched=!1,h.filtered=!1,h.handlers={updated:[]},h.plugins={},h.helpers={getByClass:s,extend:o,indexOf:a},o(h,n),h.listContainer="string"==typeof t?r.getElementById(t):t,h.listContainer&&(h.list=s(h.listContainer,h.listClass,!0),h.templater=e("./src/templater")(h),h.search=e("./src/search")(h),h.filter=e("./src/filter")(h),h.sort=e("./src/sort")(h),this.items(),h.update(),this.plugins())},items:function(){p(h.list),u!==i&&h.add(u)},plugins:function(){for(var t=0;t<h.plugins.length;t++){var e=h.plugins[t];h[e.name]=e,e.init(h,l)}}},this.add=function(t,e){if(e)return void f(t,e);var n=[],r=!1;t[0]===i&&(t=[t]);for(var s=0,o=t.length;o>s;s++){var a=null;t[s]instanceof d?(a=t[s],a.reload()):(r=h.items.length>h.page?!0:!1,a=new d(t[s],i,r)),h.items.push(a),n.push(a)}return h.update(),n},this.show=function(t,e){return this.i=t,this.page=e,h.update(),h},this.remove=function(t,e,n){for(var i=0,r=0,s=h.items.length;s>r;r++)h.items[r].values()[t]==e&&(h.templater.remove(h.items[r],n),h.items.splice(r,1),s--,r--,i++);return h.update(),i},this.get=function(t,e){for(var n=[],i=0,r=h.items.length;r>i;i++){var s=h.items[i];s.values()[t]==e&&n.push(s)}return n},this.size=function(){return h.items.length},this.clear=function(){return h.templater.clear(),h.items=[],h},this.on=function(t,e){return h.handlers[t].push(e),h},this.off=function(t,e){var n=h.handlers[t],i=a(n,e);return i>-1&&n.splice(i,1),h},this.trigger=function(t){for(var e=h.handlers[t].length;e--;)h.handlers[t][e](h);return h},this.reset={filter:function(){for(var t=h.items,e=t.length;e--;)t[e].filtered=!1;return h},search:function(){for(var t=h.items,e=t.length;e--;)t[e].found=!1;return h}},this.update=function(){var t=h.items,e=t.length;h.visibleItems=[],h.matchingItems=[],h.templater.clear();for(var n=0;e>n;n++)t[n].matching()&&h.matchingItems.length+1>=h.i&&h.visibleItems.length<h.page?(t[n].show(),h.visibleItems.push(t[n]),h.matchingItems.push(t[n])):t[n].matching()?(h.matchingItems.push(t[n]),t[n].hide()):t[n].hide();return h.trigger("updated"),h},c.start()};n.exports=l}(window)}),t.register("list.js/src/search.js",function(t,e,n){var i=e("events"),r=e("get-by-class"),s=e("to-string");n.exports=function(t){var e,n,o,a,l={resetList:function(){t.i=1,t.templater.clear(),a=void 0},setOptions:function(t){2==t.length&&t[1]instanceof Array?n=t[1]:2==t.length&&"function"==typeof t[1]?a=t[1]:3==t.length&&(n=t[1],a=t[2])},setColumns:function(){n=void 0===n?l.toArray(t.items[0].values()):n},setSearchString:function(t){t=s(t).toLowerCase(),t=t.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),o=t},toArray:function(t){var e=[];for(var n in t)e.push(n);return e}},u={list:function(){for(var e=0,n=t.items.length;n>e;e++)u.item(t.items[e])},item:function(t){t.found=!1;for(var e=0,i=n.length;i>e;e++)if(u.values(t.values(),n[e]))return void(t.found=!0)},values:function(t,n){return t.hasOwnProperty(n)&&(e=s(t[n]).toLowerCase(),""!==o&&e.search(o)>-1)?!0:!1},reset:function(){t.reset.search(),t.searched=!1}},c=function(e){return t.trigger("searchStart"),l.resetList(),l.setSearchString(e),l.setOptions(arguments),l.setColumns(),""===o?u.reset():(t.searched=!0,a?a(o,n):u.list()),t.update(),t.trigger("searchComplete"),t.visibleItems};return t.handlers.searchStart=t.handlers.searchStart||[],t.handlers.searchComplete=t.handlers.searchComplete||[],i.bind(r(t.listContainer,t.searchClass),"keyup",function(e){var n=e.target||e.srcElement,i=""===n.value&&!t.searched;i||c(n.value)}),i.bind(r(t.listContainer,t.searchClass),"input",function(t){var e=t.target||t.srcElement;""===e.value&&c("")}),t.helpers.toString=s,c}}),t.register("list.js/src/sort.js",function(t,e,n){var i=e("natural-sort"),r=e("classes"),s=e("events"),o=e("get-by-class"),a=e("get-attribute");n.exports=function(t){t.sortFunction=t.sortFunction||function(t,e,n){return n.desc="desc"==n.order?!0:!1,i(t.values()[n.valueName],e.values()[n.valueName],n)};var e={els:void 0,clear:function(){for(var t=0,n=e.els.length;n>t;t++)r(e.els[t]).remove("asc"),r(e.els[t]).remove("desc")},getOrder:function(t){var e=a(t,"data-order");return"asc"==e||"desc"==e?e:r(t).has("desc")?"asc":r(t).has("asc")?"desc":"asc"},getInSensitive:function(t,e){var n=a(t,"data-insensitive");e.insensitive="true"===n?!0:!1},setOrder:function(t){for(var n=0,i=e.els.length;i>n;n++){var s=e.els[n];if(a(s,"data-sort")===t.valueName){var o=a(s,"data-order");"asc"==o||"desc"==o?o==t.order&&r(s).add(t.order):r(s).add(t.order)}}}},n=function(){t.trigger("sortStart"),options={};var n=arguments[0].currentTarget||arguments[0].srcElement||void 0;n?(options.valueName=a(n,"data-sort"),e.getInSensitive(n,options),options.order=e.getOrder(n)):(options=arguments[1]||options,options.valueName=arguments[0],options.order=options.order||"asc",options.insensitive="undefined"==typeof options.insensitive?!0:options.insensitive),e.clear(),e.setOrder(options),options.sortFunction=options.sortFunction||t.sortFunction,t.items.sort(function(t,e){return options.sortFunction(t,e,options)}),t.update(),t.trigger("sortComplete")};return t.handlers.sortStart=t.handlers.sortStart||[],t.handlers.sortComplete=t.handlers.sortComplete||[],e.els=o(t.listContainer,t.sortClass),s.bind(e.els,"click",n),t.on("searchStart",e.clear),t.on("filterStart",e.clear),t.helpers.classes=r,t.helpers.naturalSort=i,t.helpers.events=s,t.helpers.getAttribute=a,n}}),t.register("list.js/src/item.js",function(t,e,n){n.exports=function(t){return function(e,n,i){var r=this;this._values={},this.found=!1,this.filtered=!1;var s=function(e,n,i){if(void 0===n)i?r.values(e,i):r.values(e);else{r.elm=n;var s=t.templater.get(r,e);r.values(s)}};this.values=function(e,n){if(void 0===e)return r._values;for(var i in e)r._values[i]=e[i];n!==!0&&t.templater.set(r,r.values())},this.show=function(){t.templater.show(r)},this.hide=function(){t.templater.hide(r)},this.matching=function(){return t.filtered&&t.searched&&r.found&&r.filtered||t.filtered&&!t.searched&&r.filtered||!t.filtered&&t.searched&&r.found||!t.filtered&&!t.searched},this.visible=function(){return r.elm.parentNode==t.list?!0:!1},s(e,n,i)}}}),t.register("list.js/src/templater.js",function(t,e,n){var i=e("get-by-class"),r=function(t){function e(e){if(void 0===e){for(var n=t.list.childNodes,i=0,r=n.length;r>i;i++)if(void 0===n[i].data)return n[i];return null}if(-1!==e.indexOf("<")){var s=document.createElement("div");return s.innerHTML=e,s.firstChild}return document.getElementById(t.item)}var n=e(t.item),r=this;this.get=function(t,e){r.create(t);for(var n={},s=0,o=e.length;o>s;s++){var a=i(t.elm,e[s],!0);n[e[s]]=a?a.innerHTML:""}return n},this.set=function(t,e){if(!r.create(t))for(var n in e)if(e.hasOwnProperty(n)){var s=i(t.elm,n,!0);s&&("IMG"===s.tagName&&""!==e[n]?s.src=e[n]:s.innerHTML=e[n])}},this.create=function(t){if(void 0!==t.elm)return!1;var e=n.cloneNode(!0);return e.removeAttribute("id"),t.elm=e,r.set(t,t.values()),!0},this.remove=function(e){t.list.removeChild(e.elm)},this.show=function(e){r.create(e),t.list.appendChild(e.elm)},this.hide=function(e){void 0!==e.elm&&e.elm.parentNode===t.list&&t.list.removeChild(e.elm)},this.clear=function(){if(t.list.hasChildNodes())for(;t.list.childNodes.length>=1;)t.list.removeChild(t.list.firstChild)}};n.exports=function(t){return new r(t)}}),t.register("list.js/src/filter.js",function(t,e,n){n.exports=function(t){return t.handlers.filterStart=t.handlers.filterStart||[],t.handlers.filterComplete=t.handlers.filterComplete||[],function(e){if(t.trigger("filterStart"),t.i=1,t.reset.filter(),void 0===e)t.filtered=!1;else{t.filtered=!0;for(var n=t.items,i=0,r=n.length;r>i;i++){var s=n[i];s.filtered=e(s)?!0:!1}}return t.update(),t.trigger("filterComplete"),t.visibleItems}}}),t.register("list.js/src/add-async.js",function(t,e,n){n.exports=function(t){return function(e,n,i){var r=e.splice(0,100);i=i||[],i=i.concat(t.add(r)),e.length>0?setTimeout(function(){addAsync(e,n,i)},10):(t.update(),n(i))}}}),t.register("list.js/src/parse.js",function(t,e,n){n.exports=function(t){var n=e("./item")(t),i=function(t){for(var e=t.childNodes,n=[],i=0,r=e.length;r>i;i++)void 0===e[i].data&&n.push(e[i]);return n},r=function(e,i){for(var r=0,s=e.length;s>r;r++)t.items.push(new n(i,e[r]))},s=function(e,n){var i=e.splice(0,100);r(i,n),e.length>0?setTimeout(function(){init.items.indexAsync(e,n)},10):t.update()};return function(){var e=i(t.list),n=t.valueNames;t.indexAsync?s(e,n):r(e,n)}}}),t.alias("component-classes/index.js","list.js/deps/classes/index.js"),t.alias("component-classes/index.js","classes/index.js"),t.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),t.alias("segmentio-extend/index.js","list.js/deps/extend/index.js"),t.alias("segmentio-extend/index.js","extend/index.js"),t.alias("component-indexof/index.js","list.js/deps/indexof/index.js"),t.alias("component-indexof/index.js","indexof/index.js"),t.alias("javve-events/index.js","list.js/deps/events/index.js"),t.alias("javve-events/index.js","events/index.js"),t.alias("component-event/index.js","javve-events/deps/event/index.js"),t.alias("timoxley-to-array/index.js","javve-events/deps/to-array/index.js"),t.alias("javve-get-by-class/index.js","list.js/deps/get-by-class/index.js"),t.alias("javve-get-by-class/index.js","get-by-class/index.js"),t.alias("javve-get-attribute/index.js","list.js/deps/get-attribute/index.js"),t.alias("javve-get-attribute/index.js","get-attribute/index.js"),t.alias("javve-natural-sort/index.js","list.js/deps/natural-sort/index.js"),t.alias("javve-natural-sort/index.js","natural-sort/index.js"),t.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),t.alias("javve-to-string/index.js","list.js/deps/to-string/index.js"),t.alias("javve-to-string/index.js","to-string/index.js"),t.alias("javve-to-string/index.js","javve-to-string/index.js"),t.alias("component-type/index.js","list.js/deps/type/index.js"),t.alias("component-type/index.js","type/index.js"),"object"==typeof exports?module.exports=t("list.js"):"function"==typeof define&&define.amd?define(function(){return t("list.js")}):this.List=t("list.js")}(),/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var o=e||window.event,a=l.call(arguments,1),u=0,h=0,d=0,f=0,p=0,g=0;if(e=t.event.fix(o),e.type="mousewheel","detail"in o&&(d=-1*o.detail),"wheelDelta"in o&&(d=o.wheelDelta),"wheelDeltaY"in o&&(d=o.wheelDeltaY),"wheelDeltaX"in o&&(h=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(h=-1*d,d=0),u=0===d?h:d,"deltaY"in o&&(d=-1*o.deltaY,u=d),"deltaX"in o&&(h=o.deltaX,0===d&&(u=-1*h)),0!==d||0!==h){if(1===o.deltaMode){var m=t.data(this,"mousewheel-line-height");u*=m,d*=m,h*=m}else if(2===o.deltaMode){var v=t.data(this,"mousewheel-page-height");u*=v,d*=v,h*=v}if(f=Math.max(Math.abs(d),Math.abs(h)),(!s||s>f)&&(s=f,i(o,f)&&(s/=40)),i(o,f)&&(u/=40,h/=40,d/=40),u=Math[u>=1?"floor":"ceil"](u/s),h=Math[h>=1?"floor":"ceil"](h/s),d=Math[d>=1?"floor":"ceil"](d/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=e.clientX-_.left,g=e.clientY-_.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=s,e.offsetX=p,e.offsetY=g,e.deltaMode=0,a.unshift(e,u,h,d),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){s=null}function i(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var r,s,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var u=o.length;u;)t.event.fixHooks[o[--u]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),/*!
 * FullCalendar v2.1.1
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){function n(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function i(t,e){var n=e.longDateFormat("L");return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),t.isRTL?n+=" ddd":n="ddd "+n,n}function r(t){s(kt,t)}function s(e){function n(n,i){t.isPlainObject(i)&&t.isPlainObject(e[n])&&!o(n)?e[n]=s({},e[n],i):void 0!==i&&(e[n]=i)}for(var i=1;i<arguments.length;i++)t.each(arguments[i],n);return e}function o(t){return/(Time|Duration)$/.test(t)}function a(n,i){function r(t){var n=e.localeData||e.langData;return n.call(e,t)||n.call(e,"en")}function o(t){nt?h()&&(g(),f(t)):a()}function a(){it=Q.theme?"ui":"fc",n.addClass("fc"),Q.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),Q.theme?n.addClass("ui-widget"):n.addClass("fc-unthemed"),nt=t("<div class='fc-view-container'/>").prependTo(n),tt=new l(Z,Q),et=tt.render(),et&&n.prepend(et),d(Q.defaultView),Q.handleWindowResize&&(ot=M(v,Q.windowResizeDelay),t(window).resize(ot))}function c(){rt&&rt.destroy(),tt.destroy(),nt.remove(),n.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),t(window).unbind("resize",ot)}function h(){return n.is(":visible")}function d(t){f(0,t)}function f(e,n){ht++,rt&&n&&rt.name!==n&&(tt.deactivateButton(rt.name),q(),rt.start&&rt.destroy(),rt.el.remove(),rt=null),!rt&&n&&(rt=new $t[n](Z),rt.el=t("<div class='fc-view fc-"+n+"-view' />").appendTo(nt),tt.activateButton(n)),rt&&(e&&(at=rt.incrementDate(at,e)),rt.start&&!e&&at.isWithin(rt.intervalStart,rt.intervalEnd)||h()&&(q(),rt.start&&rt.destroy(),rt.render(at),W(),S(),$(),w())),W(),ht--}function p(t){return h()?(t&&m(),ht++,rt.updateSize(!0),ht--,!0):void 0}function g(){h()&&m()}function m(){st="number"==typeof Q.contentHeight?Q.contentHeight:"number"==typeof Q.height?Q.height-(et?et.outerHeight(!0):0):Math.round(nt.width()/Math.max(Q.aspectRatio,.5))}function v(t){!ht&&t.target===window&&rt.start&&p(!0)&&rt.trigger("windowResize",ct)}function _(){b(),x()}function y(){h()&&(q(),rt.destroyEvents(),rt.renderEvents(dt),W())}function b(){q(),rt.destroyEvents(),W()}function w(){!Q.lazyFetching||lt(rt.start,rt.end)?x():y()}function x(){ut(rt.start,rt.end)}function k(t){dt=t,y()}function C(){y()}function S(){tt.updateTitle(rt.title)}function $(){var t=Z.getNow();t.isWithin(rt.intervalStart,rt.intervalEnd)?tt.disableButton("today"):tt.enableButton("today")}function E(t,e){t=Z.moment(t),e=e?Z.moment(e):t.hasTime()?t.clone().add(Z.defaultTimedEventDuration):t.clone().add(Z.defaultAllDayEventDuration),rt.select(t,e)}function D(){rt&&rt.unselect()}function j(){f(-1)}function A(){f(1)}function O(){at.add(-1,"years"),f()}function I(){at.add(1,"years"),f()}function N(){at=Z.getNow(),f()}function L(t){at=Z.moment(t),f()}function z(t){at.add(e.duration(t)),f()}function F(t,e){var n,i;e&&void 0!==$t[e]||(e=e||"day",n=tt.getViewsWithButtons().join(" "),i=n.match(new RegExp("\\w+"+P(e))),i||(i=n.match(/\w+Day/)),e=i?i[0]:"agendaDay"),at=t,d(e)}function B(){return at.clone()}function q(){nt.css({width:"100%",height:nt.height(),overflow:"hidden"})}function W(){nt.css({width:"",height:"",overflow:""})}function Y(){return Z}function G(){return rt}function V(t,e){return void 0===e?Q[t]:void(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(Q[t]=e,p(!0)))}function U(t,e){return Q[t]?Q[t].apply(e||ct,Array.prototype.slice.call(arguments,2)):void 0}var Z=this;i=i||{};var X,Q=s({},kt,i);X=Q.lang in Ct?Ct[Q.lang]:Ct[kt.lang],X&&(Q=s({},kt,X,i)),Q.isRTL&&(Q=s({},kt,St,X||{},i)),Z.options=Q,Z.render=o,Z.destroy=c,Z.refetchEvents=_,Z.reportEvents=k,Z.reportEventChange=C,Z.rerenderEvents=y,Z.changeView=d,Z.select=E,Z.unselect=D,Z.prev=j,Z.next=A,Z.prevYear=O,Z.nextYear=I,Z.today=N,Z.gotoDate=L,Z.incrementDate=z,Z.zoomTo=F,Z.getDate=B,Z.getCalendar=Y,Z.getView=G,Z.option=V,Z.trigger=U;var K=T(r(Q.lang));if(Q.monthNames&&(K._months=Q.monthNames),Q.monthNamesShort&&(K._monthsShort=Q.monthNamesShort),Q.dayNames&&(K._weekdays=Q.dayNames),Q.dayNamesShort&&(K._weekdaysShort=Q.dayNamesShort),null!=Q.firstDay){var J=T(K._week);J.dow=Q.firstDay,K._week=J}Z.defaultAllDayEventDuration=e.duration(Q.defaultAllDayEventDuration),Z.defaultTimedEventDuration=e.duration(Q.defaultTimedEventDuration),Z.moment=function(){var t;return"local"===Q.timezone?(t=Tt.moment.apply(null,arguments),t.hasTime()&&t.local()):t="UTC"===Q.timezone?Tt.moment.utc.apply(null,arguments):Tt.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=K:t._lang=K,t},Z.getIsAmbigTimezone=function(){return"local"!==Q.timezone&&"UTC"!==Q.timezone},Z.rezoneDate=function(t){return Z.moment(t.toArray())},Z.getNow=function(){var t=Q.now;return"function"==typeof t&&(t=t()),Z.moment(t)},Z.calculateWeekNumber=function(t){var e=Q.weekNumberCalculation;return"function"==typeof e?e(t):"local"===e?t.week():"ISO"===e.toUpperCase()?t.isoWeek():void 0},Z.getEventEnd=function(t){return t.end?t.end.clone():Z.getDefaultEventEnd(t.allDay,t.start)},Z.getDefaultEventEnd=function(t,e){var n=e.clone();return t?n.stripTime().add(Z.defaultAllDayEventDuration):n.add(Z.defaultTimedEventDuration),Z.getIsAmbigTimezone()&&n.stripZone(),n},Z.formatRange=function(t,e,n){return"function"==typeof n&&(n=n.call(Z,Q,K)),H(t,e,n,null,Q.isRTL)},Z.formatDate=function(t,e){return"function"==typeof e&&(e=e.call(Z,Q,K)),R(t,e)},u.call(Z,Q);var tt,et,nt,it,rt,st,ot,at,lt=Z.isFetchNeeded,ut=Z.fetchEvents,ct=n[0],ht=0,dt=[];at=null!=Q.defaultDate?Z.moment(Q.defaultDate):Z.getNow(),Z.getSuggestedViewHeight=function(){return void 0===st&&g(),st},Z.isHeightAuto=function(){return"auto"===Q.contentHeight||"auto"===Q.height}}function l(e,n){function i(){var e=n.header;return f=n.theme?"ui":"fc",e?p=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>'):void 0}function r(){p.remove()}function s(i){var r=t('<div class="fc-'+i+'"/>'),s=n.header[i];return s&&t.each(s.split(" "),function(i){var s,o=t(),a=!0;t.each(this.split(","),function(i,r){var s,l,u,c,h,d,p,m;"title"==r?(o=o.add(t("<h2>&nbsp;</h2>")),a=!1):(e[r]?s=function(){e[r]()}:$t[r]&&(s=function(){e.changeView(r)},g.push(r)),s&&(l=x(n.themeButtonIcons,r),u=x(n.buttonIcons,r),c=x(n.defaultButtonText,r),h=x(n.buttonText,r),d=h?j(h):l&&n.theme?"<span class='ui-icon ui-icon-"+l+"'></span>":u&&!n.theme?"<span class='fc-icon fc-icon-"+u+"'></span>":j(c||r),p=["fc-"+r+"-button",f+"-button",f+"-state-default"],m=t('<button type="button" class="'+p.join(" ")+'">'+d+"</button>").click(function(){m.hasClass(f+"-state-disabled")||(s(),(m.hasClass(f+"-state-active")||m.hasClass(f+"-state-disabled"))&&m.removeClass(f+"-state-hover"))}).mousedown(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){m.removeClass(f+"-state-down")}).hover(function(){m.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){m.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),o=o.add(m)))}),a&&o.first().addClass(f+"-corner-left").end().last().addClass(f+"-corner-right").end(),o.length>1?(s=t("<div/>"),a&&s.addClass("fc-button-group"),s.append(o),r.append(s)):r.append(o)}),r}function o(t){p.find("h2").text(t)}function a(t){p.find(".fc-"+t+"-button").addClass(f+"-state-active")}function l(t){p.find(".fc-"+t+"-button").removeClass(f+"-state-active")}function u(t){p.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")}function c(t){p.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")}function h(){return g}var d=this;d.render=i,d.destroy=r,d.updateTitle=o,d.activateButton=a,d.deactivateButton=l,d.disableButton=u,d.enableButton=c,d.getViewsWithButtons=h;var f,p=t(),g=[]}function u(e){function n(t,e){return!C||t.clone().stripZone()<C.clone().stripZone()||e.clone().stripZone()>S.clone().stripZone()}function i(t,e){C=t,S=e,L=[];var n=++O,i=M.length;I=i;for(var s=0;i>s;s++)r(M[s],n)}function r(e,n){s(e,function(i){var r,s,o=t.isArray(e.events);if(n==O){if(i)for(r=0;r<i.length;r++)s=i[r],o||(s=y(s,e)),s&&L.push(s);I--,I||j(L)}})}function s(n,i){var r,o,a=Tt.sourceFetchers;for(r=0;r<a.length;r++){if(o=a[r].call(x,n,C.clone(),S.clone(),e.timezone,i),o===!0)return;if("object"==typeof o)return void s(o,i)}var l=n.events;if(l)t.isFunction(l)?(v(),l.call(x,C.clone(),S.clone(),e.timezone,function(t){i(t),_()})):t.isArray(l)?i(l):i();else{var u=n.url;if(u){var c,h=n.success,d=n.error,f=n.complete;c=t.isFunction(n.data)?n.data():n.data;var p=t.extend({},c||{}),g=D(n.startParam,e.startParam),m=D(n.endParam,e.endParam),y=D(n.timezoneParam,e.timezoneParam);g&&(p[g]=C.format()),m&&(p[m]=S.format()),e.timezone&&"local"!=e.timezone&&(p[y]=e.timezone),v(),t.ajax(t.extend({},Et,n,{data:p,success:function(e){e=e||[];var n=E(h,this,arguments);t.isArray(n)&&(e=n),i(e)},error:function(){E(d,this,arguments),i()},complete:function(){E(f,this,arguments),_()}}))}else i()}}function o(t){var e=a(t);e&&(M.push(e),I++,r(e,O))}function a(e){var n,i,r=Tt.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?n={events:e}:"string"==typeof e?n={url:e}:"object"==typeof e&&(n=t.extend({},e)),n){for(n.className?"string"==typeof n.className&&(n.className=n.className.split(/\s+/)):n.className=[],t.isArray(n.events)&&(n.origArray=n.events,n.events=t.map(n.events,function(t){return y(t,n)})),i=0;i<r.length;i++)r[i].call(x,n);return n}}function l(e){M=t.grep(M,function(t){return!u(t,e)}),L=t.grep(L,function(t){return!u(t.source,e)}),j(L)}function u(t,e){return t&&e&&h(t)==h(e)}function h(t){return("object"==typeof t?t.origArray||t.url||t.events:null)||t}function d(t){t.start=x.moment(t.start),t.end&&(t.end=x.moment(t.end)),b(t),f(t),j(L)}function f(t){var e,n,i,r;for(e=0;e<L.length;e++)if(n=L[e],n._id==t._id&&n!==t)for(i=0;i<R.length;i++)r=R[i],void 0!==t[r]&&(n[r]=t[r])}function p(t,e){var n=y(t);n&&(n.source||(e&&(P.events.push(n),n.source=P),L.push(n)),j(L))}function g(e){var n,i;for(null==e?e=function(){return!0}:t.isFunction(e)||(n=e+"",e=function(t){return t._id==n}),L=t.grep(L,e,!0),i=0;i<M.length;i++)t.isArray(M[i].events)&&(M[i].events=t.grep(M[i].events,e,!0));j(L)}function m(e){return t.isFunction(e)?t.grep(L,e):null!=e?(e+="",t.grep(L,function(t){return t._id==e})):L}function v(){N++||T("loading",null,!0,$())}function _(){--N||T("loading",null,!1,$())}function y(n,i){var r,s,o,a,l={};return e.eventDataTransform&&(n=e.eventDataTransform(n)),i&&i.eventDataTransform&&(n=i.eventDataTransform(n)),r=x.moment(n.start||n.date),r.isValid()&&(s=null,!n.end||(s=x.moment(n.end),s.isValid()))?(o=n.allDay,void 0===o&&(a=D(i?i.allDayDefault:void 0,e.allDayDefault),o=void 0!==a?a:!(r.hasTime()||s&&s.hasTime())),o?(r.hasTime()&&r.stripTime(),s&&s.hasTime()&&s.stripTime()):(r.hasTime()||(r=x.rezoneDate(r)),s&&!s.hasTime()&&(s=x.rezoneDate(s))),t.extend(l,n),i&&(l.source=i),l._id=n._id||(void 0===n.id?"_fc"+Dt++:n.id+""),n.className?"string"==typeof n.className?l.className=n.className.split(/\s+/):l.className=n.className:l.className=[],l.allDay=o,l.start=r,l.end=s,e.forceEventDuration&&!l.end&&(l.end=A(l)),c(l),l):void 0}function b(t,e,n){var i,r,s,o,a=t._allDay,l=t._start,u=t._end,c=!1;return e||n||(e=t.start,n=t.end),i=t.allDay!=a?t.allDay:!(e||n).hasTime(),i&&(e&&(e=e.clone().stripTime()),n&&(n=n.clone().stripTime())),e&&(r=i?k(e,l.clone().stripTime()):k(e,l)),i!=a?c=!0:n&&(s=k(n||x.getDefaultEventEnd(i,e||l),e||l).subtract(k(u||x.getDefaultEventEnd(a,l),l))),o=w(m(t._id),c,i,r,s),{dateDelta:r,durationDelta:s,undo:o}}function w(n,i,r,s,o){var a=x.getIsAmbigTimezone(),l=[];return t.each(n,function(t,n){var u=n._allDay,h=n._start,d=n._end,f=null!=r?r:u,p=h.clone(),g=!i&&d?d.clone():null;f?(p.stripTime(),g&&g.stripTime()):(p.hasTime()||(p=x.rezoneDate(p)),g&&!g.hasTime()&&(g=x.rezoneDate(g))),g||!e.forceEventDuration&&!+o||(g=x.getDefaultEventEnd(f,p)),p.add(s),g&&g.add(s).add(o),a&&(+s||+o)&&(p.stripZone(),g&&g.stripZone()),n.allDay=f,n.start=p,n.end=g,c(n),l.push(function(){n.allDay=u,n.start=h,n.end=d,c(n)})}),function(){for(var t=0;t<l.length;t++)l[t]()}}var x=this;x.isFetchNeeded=n,x.fetchEvents=i,x.addEventSource=o,x.removeEventSource=l,x.updateEvent=d,x.renderEvent=p,x.removeEvents=g,x.clientEvents=m,x.mutateEvent=b;var C,S,T=x.trigger,$=x.getView,j=x.reportEvents,A=x.getEventEnd,P={events:[]},M=[P],O=0,I=0,N=0,L=[];t.each((e.events?[e.events]:[]).concat(e.eventSources||[]),function(t,e){var n=a(e);n&&M.push(n)});var R=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"]}function c(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}function h(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function d(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function f(e,n,i){var r=Math.floor(n/e.length),s=Math.floor(n-r*(e.length-1)),o=[],a=[],l=[],u=0;p(e),e.each(function(n,i){var c=n===e.length-1?s:r,h=t(i).outerHeight(!0);c>h?(o.push(i),a.push(h),l.push(t(i).height())):u+=h}),i&&(n-=u,r=Math.floor(n/o.length),s=Math.floor(n-r*(o.length-1))),t(o).each(function(e,n){var i=e===o.length-1?s:r,u=a[e],c=l[e],h=i-(u-c);i>u&&t(n).height(h)})}function p(t){t.height("")}function g(e){var n=0;return e.find("> *").each(function(e,i){var r=t(i).outerWidth();r>n&&(n=r)}),n++,e.width(n),n}function m(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight?!0:(v(t),!1)}function v(t){t.height("").removeClass("fc-scroller")}function _(e){var n=e.css("position"),i=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&i.length?i:t(e[0].ownerDocument||document)}function y(t){var e=t.offset().left,n=e+t.width(),i=t.children(),r=i.offset().left,s=r+i.outerWidth();return{left:r-e,right:n-s}}function b(t){return 1==t.which&&!t.ctrlKey}function w(t,e,n,i){var r,s,o,a;return e>n&&i>t?(t>=n?(r=t.clone(),o=!0):(r=n.clone(),o=!1),i>=e?(s=e.clone(),a=!0):(s=i.clone(),a=!1),{start:r,end:s,isStart:o,isEnd:a}):void 0}function x(t,e){if(t=t||{},void 0!==t[e])return t[e];for(var n,i=e.split(/(?=[A-Z])/),r=i.length-1;r>=0;r--)if(n=t[i[r].toLowerCase()],void 0!==n)return n;return t["default"]}function k(t,n){return e.duration({days:t.clone().stripTime().diff(n.clone().stripTime(),"days"),ms:t.time()-n.time()})}function C(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function S(t,e){return t-e}function T(t){var e=function(){};return e.prototype=t,new e}function $(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function E(e,n,i){if(t.isFunction(e)&&(e=[e]),e){var r,s;for(r=0;r<e.length;r++)s=e[r].apply(n,i)||s;return s}}function D(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}function j(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function A(t){return t.replace(/&.*?;/g,"")}function P(t){return t.charAt(0).toUpperCase()+t.slice(1)}function M(t,e){var n,i,r,s,o=function(){var a=+new Date-s;e>a&&a>0?n=setTimeout(o,e-a):(n=null,t.apply(r,i),n||(r=i=null))};return function(){r=this,i=arguments,s=+new Date,n||(n=setTimeout(o,e))}}function O(n,i,r){var s,o,a,l,u=n[0],c=1==n.length&&"string"==typeof u;return e.isMoment(u)?(l=e.apply(null,n),u._ambigTime&&(l._ambigTime=!0),u._ambigZone&&(l._ambigZone=!0)):C(u)||void 0===u?l=e.apply(null,n):(s=!1,o=!1,c?At.test(u)?(u+="-01",n=[u],s=!0,o=!0):(a=Pt.exec(u))&&(s=!a[5],o=!0):t.isArray(u)&&(o=!0),l=i?e.utc.apply(e,n):e.apply(null,n),s?(l._ambigTime=!0,l._ambigZone=!0):r&&(o?l._ambigZone=!0:c&&l.utcOffset(u))),new I(l)}function I(t){$(this,t)}function N(t,e){var n,i=[],r=!1,s=!1;for(n=0;n<t.length;n++)i.push(Tt.moment.parseZone(t[n])),r=r||i[n]._ambigTime,s=s||i[n]._ambigZone;for(n=0;n<i.length;n++)r&&!e?i[n].stripTime():s&&i[n].stripZone();return i}function L(t,n){return e.fn.format.call(t,n)}function R(t,e){return z(t,W(e))}function z(t,e){var n,i="";for(n=0;n<e.length;n++)i+=F(t,e[n]);return i}function F(t,e){var n,i;return"string"==typeof e?e:(n=e.token)?Mt[n]?Mt[n](t):L(t,n):e.maybe&&(i=z(t,e.maybe),i.match(/[1-9]/))?i:""}function H(t,e,n,i,r){var s;return t=Tt.moment.parseZone(t),e=Tt.moment.parseZone(e),s=(t.localeData||t.lang).call(t),n=s.longDateFormat(n)||n,i=i||" - ",B(t,e,W(n),i,r)}function B(t,e,n,i,r){var s,o,a,l,u="",c="",h="",d="",f="";for(o=0;o<n.length&&(s=q(t,e,n[o]),s!==!1);o++)u+=s;for(a=n.length-1;a>o&&(s=q(t,e,n[a]),s!==!1);a--)c=s+c;for(l=o;a>=l;l++)h+=F(t,n[l]),d+=F(e,n[l]);return(h||d)&&(f=r?d+i+h:h+i+d),u+f+c}function q(t,e,n){var i,r;return"string"==typeof n?n:(i=n.token)&&(r=Ot[i.charAt(0)],r&&t.isSame(e,r))?L(t,i):!1}function W(t){return t in It?It[t]:It[t]=Y(t)}function Y(t){for(var e,n=[],i=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=i.exec(t);)e[1]?n.push(e[1]):e[2]?n.push({maybe:Y(e[2])}):e[3]?n.push({token:e[3]}):e[5]&&n.push(e[5]);return n}function G(t){this.options=t||{}}function V(t){this.grid=t}function U(t){this.coordMaps=t}function Z(t,e){this.coordMap=t,this.options=e||{}}function X(t,e){return t||e?t&&e?t.grid===e.grid&&t.row===e.row&&t.col===e.col:!1:!0}function Q(e,n){this.options=n=n||{},this.sourceEl=e,this.parentEl=n.parentEl?t(n.parentEl):e.parent()}function K(t){this.view=t}function J(t){K.call(this,t),this.coordMap=new V(this)}function tt(t,e){return(-1==t.event.className.indexOf("closed"))-(-1==e.event.className.indexOf("closed"))||t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||(t.event.title||"").localeCompare(e.event.title)}function et(t){J.call(this,t)}function nt(t,e){var n,i;for(n=0;n<e.length;n++)if(i=e[n],i.leftCol<=t.rightCol&&i.rightCol>=t.leftCol)return!0;return!1}function it(t,e){return t.leftCol-e.leftCol}function rt(t){J.call(this,t)}function st(t){var e,n,i;if(t.sort(tt),e=ot(t),at(e),n=e[0]){for(i=0;i<n.length;i++)lt(n[i]);for(i=0;i<n.length;i++)ut(n[i],0,0)}}function ot(t){var e,n,i,r=[];for(e=0;e<t.length;e++){for(n=t[e],i=0;i<r.length&&ct(n,r[i]).length;i++);n.level=i,(r[i]||(r[i]=[])).push(n)}return r}function at(t){var e,n,i,r,s;for(e=0;e<t.length;e++)for(n=t[e],i=0;i<n.length;i++)for(r=n[i],r.forwardSegs=[],s=e+1;s<t.length;s++)ct(r,t[s],r.forwardSegs)}function lt(t){var e,n,i=t.forwardSegs,r=0;if(void 0===t.forwardPressure){for(e=0;e<i.length;e++)n=i[e],lt(n),r=Math.max(r,1+n.forwardPressure);t.forwardPressure=r}}function ut(t,e,n){var i,r=t.forwardSegs;if(void 0===t.forwardCoord)for(r.length?(r.sort(dt),ut(r[0],e+1,n),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-n)/(e+1),i=0;i<r.length;i++)ut(r[i],0,t.forwardCoord)}function ct(t,e,n){n=n||[];for(var i=0;i<e.length;i++)ht(t,e[i])&&n.push(e[i]);return n}function ht(t,e){return t.bottom>e.top&&t.top<e.bottom}function dt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||tt(t,e)}function ft(n){function i(e){var n=$[e];return t.isPlainObject(n)&&!o(e)?x(n,S.name):n}function r(t,e){return n.trigger.apply(n,[t,e||S].concat(Array.prototype.slice.call(arguments,2),[S]))}function s(t){var e=t.source||{};return D(t.startEditable,e.startEditable,i("eventStartEditable"),t.editable,e.editable,i("editable"))}function a(t){var e=t.source||{};return D(t.durationEditable,e.durationEditable,i("eventDurationEditable"),t.editable,e.editable,i("editable"))}function l(t,e,i,s){var o=n.mutateEvent(e,i,null);r("eventDrop",t,e,o.dateDelta,function(){o.undo(),T()},s,{}),T()}function u(t,e,i,s){var o=n.mutateEvent(e,null,i);r("eventResize",t,e,o.durationDelta,function(){o.undo(),T()},s,{}),T()}function c(t){return e.isMoment(t)&&(t=t.day()),P[t]}function h(){return j}function d(t,e,n){var i=t.clone();for(e=e||1;P[(i.day()+(n?e:0)+7)%7];)i.add(e,"days");return i}function f(){var t=p.apply(null,arguments),e=g(t),n=m(e);return n}function p(t,e){var n=S.colCnt,i=I?-1:1,r=I?n-1:0;"object"==typeof t&&(e=t.col,t=t.row);var s=t*n+(e*i+r);return s}function g(t){var e=S.start.day();return t+=M[e],7*Math.floor(t/j)+O[(t%j+j)%j]-e}function m(t){return S.start.clone().add(t,"days")}function v(t){var e=_(t),n=y(e),i=b(n);return i}function _(t){return t.clone().stripTime().diff(S.start,"days")}function y(t){var e=S.start.day();return t+=e,Math.floor(t/7)*j+M[(t%7+7)%7]-M[e]}function b(t){var e=S.colCnt,n=I?-1:1,i=I?e-1:0,r=Math.floor(t/e),s=(t%e+e)%e*n+i;return{row:r,col:s}}function w(t,e){for(var n=S.rowCnt,i=S.colCnt,r=[],s=k(t,e),o=_(s.start),a=_(s.end),l=y(o),u=y(a)-1,c=0;n>c;c++){var h=c*i,d=h+i-1,f=Math.max(l,h),p=Math.min(u,d);if(p>=f){var m=b(f),v=b(p),w=[m.col,v.col].sort(),x=g(f)==o,C=g(p)+1==a;r.push({row:c,leftCol:w[0],rightCol:w[1],isStart:x,isEnd:C})}}return r}function k(t,e){var n,i,r=t.clone().stripTime();return e&&(n=e.clone().stripTime(),i=+e.time(),i&&i>=E&&n.add(1,"days")),(!e||r>=n)&&(n=r.clone().add(1,"days")),{start:r,end:n}}function C(t){var e=k(t.start,t.end);return e.end.diff(e.start,"days")>1}var S=this;S.calendar=n,S.opt=i,S.trigger=r,S.isEventDraggable=s,S.isEventResizable=a,S.eventDrop=l,S.eventResize=u;var T=n.reportEventChange,$=n.options,E=e.duration($.nextDayThreshold);S.init(),S.getEventTimeText=function(t,e){var r,s;return"object"==typeof t&&"object"==typeof e?(r=t,s=e,e=arguments[2]):(r=t.start,s=t.end),e=e||i("timeFormat"),s&&i("displayEventEnd")?n.formatRange(r,s,e):n.formatDate(r,e)},S.isHiddenDay=c,S.skipHiddenDays=d,S.getCellsPerWeek=h,S.dateToCell=v,S.dateToDayOffset=_,S.dayOffsetToCellOffset=y,S.cellOffsetToCell=b,S.cellToDate=f,S.cellToCellOffset=p,S.cellOffsetToDayOffset=g,S.dayOffsetToDate=m,S.rangeToSegments=w,S.isMultiDayEvent=C;var j,A=i("hiddenDays")||[],P=[],M=[],O=[],I=i("isRTL");!function(){i("weekends")===!1&&A.push(0,6);for(var e=0,n=0;7>e;e++)M[e]=n,P[e]=-1!=t.inArray(e,A),P[e]||(O[n]=e,n++);if(j=n,!j)throw"invalid hiddenDays"}()}function pt(t){ft.call(this,t),this.dayGrid=new et(this),this.coordMap=this.dayGrid.coordMap}function gt(t){pt.call(this,t)}function mt(t){pt.call(this,t)}function vt(t){pt.call(this,t)}function _t(t,e){return e.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function yt(t,e){return e.longDateFormat("LT").replace(/\s*a$/i,"")}function bt(t){ft.call(this,t),this.timeGrid=new rt(this),this.opt("allDaySlot")?(this.dayGrid=new et(this),this.coordMap=new U([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap}function wt(t){bt.call(this,t)}function xt(t){bt.call(this,t)}var kt={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:i,day:"dddd"},timeFormat:{"default":n},displayEventEnd:{month:!1,basicWeek:!1,"default":!0},isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},Ct={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}},St={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},Tt=t.fullCalendar={version:"2.1.1"},$t=Tt.views={};t.fn.fullCalendar=function(e){var n=Array.prototype.slice.call(arguments,1),i=this;return this.each(function(r,s){var o,l=t(s),u=l.data("fullCalendar");"string"==typeof e?u&&t.isFunction(u[e])&&(o=u[e].apply(u,n),r||(i=o),"destroy"===e&&l.removeData("fullCalendar")):u||(u=new a(l,e),l.data("fullCalendar",u),u.render())}),i},Tt.langs=Ct,Tt.datepickerLang=function(e,n,i){var r=Ct[e];r||(r=Ct[e]={}),s(r,{isRTL:i.isRTL,weekNumberTitle:i.weekHeader,titleFormat:{month:i.showMonthAfterYear?"YYYY["+i.yearSuffix+"] MMMM":"MMMM YYYY["+i.yearSuffix+"]"},defaultButtonText:{prev:A(i.prevText),next:A(i.nextText),today:A(i.currentText)}}),t.datepicker&&(t.datepicker.regional[n]=t.datepicker.regional[e]=i,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(i))},Tt.lang=function(t,e){var n;e&&(n=Ct[t],n||(n=Ct[t]={}),s(n,e||{})),kt.lang=t},Tt.sourceNormalizers=[],Tt.sourceFetchers=[];var Et={dataType:"json",cache:!1},Dt=1,jt=["sun","mon","tue","wed","thu","fri","sat"];Tt.applyAll=E;var At=/^\s*\d{4}-\d\d$/,Pt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;Tt.moment=function(){return O(arguments)},Tt.moment.utc=function(){var t=O(arguments,!0);return t.hasTime()&&t.utc(),t},Tt.moment.parseZone=function(){return O(arguments,!0,!0)},I.prototype=T(e.fn),I.prototype.clone=function(){return O([this])},I.prototype.time=function(t){if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});delete this._ambigTime,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var n=0;return e.isDuration(t)&&(n=24*Math.floor(t.asDays())),this.hours(n+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},I.prototype.stripTime=function(){var t=this.toArray();return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(0).minutes(0).seconds(0).milliseconds(0),this._ambigTime=!0,this._ambigZone=!0,this},I.prototype.hasTime=function(){return!this._ambigTime},I.prototype.stripZone=function(){var t=this.toArray(),n=this._ambigTime;return e.fn.utc.call(this),this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),n&&(this._ambigTime=!0),this._ambigZone=!0,this},I.prototype.hasZone=function(){return!this._ambigZone},I.prototype.zone=function(t){return null!=t&&(delete this._ambigTime,delete this._ambigZone),e.fn.zone.apply(this,arguments)},I.prototype.local=function(){var t=this.toArray(),n=this._ambigZone;return delete this._ambigTime,delete this._ambigZone,e.fn.local.apply(this,arguments),n&&this.year(t[0]).month(t[1]).date(t[2]).hours(t[3]).minutes(t[4]).seconds(t[5]).milliseconds(t[6]),this},I.prototype.utc=function(){return delete this._ambigTime,delete this._ambigZone,e.fn.utc.apply(this,arguments)},I.prototype.format=function(){return arguments[0]?R(this,arguments[0]):this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):L(this)},I.prototype.toISOString=function(){return this._ambigTime?L(this,"YYYY-MM-DD"):this._ambigZone?L(this,"YYYY-MM-DD[T]HH:mm:ss"):e.fn.toISOString.apply(this,arguments)},I.prototype.isWithin=function(t,e){var n=N([this,t,e]);return n[0]>=n[1]&&n[0]<n[2]},I.prototype.isSame=function(t,n){var i;return n?(i=N([this,t],!0),e.fn.isSame.call(i[0],i[1],n)):(t=Tt.moment.parseZone(t),e.fn.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone))},t.each(["isBefore","isAfter"],function(t,n){I.prototype[n]=function(t,i){var r=N([this,t]);return e.fn[n].call(r[0],r[1],i)}});var Mt={t:function(t){return L(t,"a").charAt(0)},T:function(t){return L(t,"A").charAt(0)}};Tt.formatRange=H;var Ot={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},It={};G.prototype={isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,n=this.options;this.el=t('<div class="fc-popover"/>').addClass(n.className||"").css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),n.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=t.proxy(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,n,i,r,s,o=this.options,a=this.el.offsetParent().offset(),l=this.el.outerWidth(),u=this.el.outerHeight(),c=t(window),h=_(this.el);r=o.top||0,s=void 0!==o.left?o.left:void 0!==o.right?o.right-l:0,h.is(window)||h.is(document)?(h=c,e=0,n=0):(i=h.offset(),e=i.top,n=i.left),e+=c.scrollTop(),n+=c.scrollLeft(),o.viewportConstrain!==!1&&(r=Math.min(r,e+h.outerHeight()-u-this.margin),r=Math.max(r,e+this.margin),s=Math.min(s,n+h.outerWidth()-l-this.margin),s=Math.max(s,n+this.margin)),this.el.css({top:r-a.top,left:s-a.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}},V.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]),this.computeBounds()},getCell:function(t,e){var n,i=null,r=this.rows,s=this.cols,o=-1,a=-1;if(this.inBounds(t,e)){for(n=0;n<r.length;n++)if(e>=r[n][0]&&e<r[n][1]){o=n;break}for(n=0;n<s.length;n++)if(t>=s[n][0]&&t<s[n][1]){a=n;break}o>=0&&a>=0&&(i={row:o,col:a},i.grid=this.grid,i.date=this.grid.getCellDate(i))}return i},computeBounds:function(){var t;this.containerEl&&(t=this.containerEl.offset(),this.minX=t.left,this.maxX=t.left+this.containerEl.outerWidth(),this.minY=t.top,this.maxY=t.top+this.containerEl.outerHeight())},inBounds:function(t,e){return this.containerEl?t>=this.minX&&t<this.maxX&&e>=this.minY&&e<this.maxY:!0}},U.prototype={coordMaps:null,build:function(){var t,e=this.coordMaps;for(t=0;t<e.length;t++)e[t].build()},getCell:function(t,e){var n,i=this.coordMaps,r=null;for(n=0;n<i.length&&!r;n++)r=i[n].getCell(t,e);return r}},Z.prototype={coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(t){b(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var n,i;this.isListening||(e&&this.options.scroll&&(n=_(t(e.target)),n.is(window)||n.is(document)||(this.scrollEl=n,this.scrollHandlerProxy=M(t.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),e&&(i=this.getCell(e),this.origCell=i,this.origDate=i?i.date:null,this.mouseX0=e.pageX,this.mouseY0=e.pageY),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=t.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",e))},computeCoords:function(){this.coordMap.build(),this.computeScrollBounds()},mousemove:function(t){var e,n;this.isDragging||(e=this.options.distance||1,n=Math.pow(t.pageX-this.mouseX0,2)+Math.pow(t.pageY-this.mouseY0,2),n>=e*e&&this.startDrag(t)),this.isDragging&&this.drag(t)},startDrag:function(t){var e;this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.trigger("dragStart",t),e=this.getCell(t),e&&this.cellOver(e,!0))},drag:function(t){var e;this.isDragging&&(e=this.getCell(t),X(e,this.cell)||(this.cell&&this.cellOut(),e&&this.cellOver(e)),this.dragScroll(t))},cellOver:function(t){this.cell=t,this.date=t.date,this.trigger("cellOver",t,t.date)},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null,this.date=null)},mouseup:function(t){this.stopDrag(t),this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",t),this.isDragging=!1)},stopListening:function(e){
this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.trigger("listenStop",e),this.origCell=this.cell=null,this.origDate=this.date=null)},getCell:function(t){return this.coordMap.getCell(t.pageX,t.pageY)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t,e=this.scrollEl;e&&(t=e.offset(),this.scrollBounds={top:t.top,left:t.left,bottom:t.top+e.outerHeight(),right:t.left+e.outerWidth()})},dragScroll:function(t){var e,n,i,r,s=this.scrollSensitivity,o=this.scrollBounds,a=0,l=0;o&&(e=(s-(t.pageY-o.top))/s,n=(s-(o.bottom-t.pageY))/s,i=(s-(t.pageX-o.left))/s,r=(s-(o.right-t.pageX))/s,e>=0&&1>=e?a=e*this.scrollSpeed*-1:n>=0&&1>=n&&(a=n*this.scrollSpeed),i>=0&&1>=i?l=i*this.scrollSpeed*-1:r>=0&&1>=r&&(l=r*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(e,n){this.scrollTopVel=e,this.scrollLeftVel=n,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(t.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}},Q.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=t.proxy(this,"mousemove")))},stop:function(e,n){function i(){this.isAnimating=!1,r.destroyEl(),this.top0=this.left0=null,n&&n()}var r=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:i})):i())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},destroyEl:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}},K.prototype={view:null,cellHtml:"<td/>",rowHtml:function(t,e){var n,i,r=this.view,s=this.getHtmlRenderer("cell",t),o="";for(e=e||0,n=0;n<r.colCnt;n++)i=r.cellToDate(e,n),o+=s(e,n,i);return o=this.bookendCells(o,t,e),"<tr>"+o+"</tr>"},bookendCells:function(t,e,n){var i=this.view,r=this.getHtmlRenderer("intro",e)(n||0),s=this.getHtmlRenderer("outro",e)(n||0),o=i.opt("isRTL"),a=o?s:r,l=o?r:s;return"string"==typeof t?a+t+l:t.prepend(a).append(l)},getHtmlRenderer:function(t,e){var n,i,r,s,o=this.view;return n=t+"Html",e&&(i=e+P(t)+"Html"),i&&(s=o[i])?r=o:i&&(s=this[i])?r=this:(s=o[n])?r=o:(s=this[n])&&(r=this),"function"==typeof s?function(t){return s.apply(r,arguments)||""}:function(){return s||""}}},J.prototype=T(K.prototype),t.extend(J.prototype,{el:null,coordMap:null,cellDuration:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(t,e){},getCellDate:function(t){},getCellDayEl:function(t){},rangeToSegs:function(t,e){},bindHandlers:function(){var e=this;this.el.on("mousedown",function(n){t(n.target).is(".fc-event-container *, .fc-more")||t(n.target).closest(".fc-popover").length||e.dayMousedown(n)}),this.bindSegHandlers()},dayMousedown:function(t){var e,n,i,r=this,s=this.view,o=s.opt("selectable"),a=null,l=new Z(this.coordMap,{scroll:s.opt("dragScroll"),dragStart:function(){s.unselect()},cellOver:function(t,s){l.origDate&&(i=r.getCellDayEl(t),a=[s,l.origDate].sort(S),e=a[0],n=a[1].clone().add(r.cellDuration),o&&r.renderSelection(e,n))},cellOut:function(t,e){a=null,r.destroySelection()},listenStop:function(t){a&&(a[0].isSame(a[1])&&s.trigger("dayClick",i[0],e,t),o&&s.reportSelection(e,n,t))}});l.mousedown(t)},renderDrag:function(t,e,n){},destroyDrag:function(){},renderResize:function(t,e,n){},destroyResize:function(){},renderRangeHelper:function(t,e,n){var i,r=this.view;!e&&r.opt("forceEventDuration")&&(e=r.calendar.getDefaultEventEnd(!t.hasTime(),t)),i=n?T(n.event):{},i.start=t,i.end=e,i.allDay=!(t.hasTime()||e&&e.hasTime()),i.className=(i.className||[]).concat("fc-helper"),n||(i.editable=!1),this.renderHelper(i,n)},renderHelper:function(t,e){},destroyHelper:function(){},renderSelection:function(t,e){this.renderHighlight(t,e)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(t,e){},destroyHighlight:function(){},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(t,e,n){var i=this.view,r=i.calendar,s=i.opt("columnFormat");return'<th class="fc-day-header '+i.widgetHeaderClass+" fc-"+jt[n.day()]+'">'+j(r.formatDate(n,s))+"</th>"},bgCellHtml:function(t,e,n){var i=this.view,r=this.getDayClasses(n);return r.unshift("fc-day",i.widgetContentClass),'<td class="'+r.join(" ")+'" data-date="'+n.format()+'"></td>'},getDayClasses:function(t){var e=this.view,n=e.calendar.getNow().stripTime(),i=["fc-"+jt[t.day()]];return"month"===e.name&&t.month()!=e.intervalStart.month()&&i.push("fc-other-month"),t.isSame(n,"day")?i.push("fc-today"):n>t?i.push("fc-past"):i.push("fc-future"),i}}),t.extend(J.prototype,{mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,renderEvents:function(t){},getSegs:function(){},destroyEvents:function(){this.triggerSegMouseout()},renderSegs:function(e,n){var i,r=this.view,s="",o=[];for(i=0;i<e.length;i++)s+=this.renderSegHtml(e[i],n);return t(s).each(function(n,i){var s=e[n],a=r.resolveEventEl(s.event,t(i));a&&(a.data("fc-seg",s),s.el=a,o.push(s))}),o},renderSegHtml:function(t,e){},eventsToSegs:function(e,n,i){var r=this;return t.map(e,function(t){return r.eventToSegs(t,n,i)})},eventToSegs:function(t,e,n){var i,r,s,o=t.start.clone().stripZone(),a=this.view.calendar.getEventEnd(t).stripZone();for(e&&n?(s=w(o,a,e,n),i=s?[s]:[]):i=this.rangeToSegs(o,a),r=0;r<i.length;r++)s=i[r],s.event=t,s.eventStartMS=+o,s.eventDurationMS=a-o;return i},bindSegHandlers:function(){var e=this,n=this.view;t.each({mouseenter:function(t,n){e.triggerSegMouseover(t,n)},mouseleave:function(t,n){e.triggerSegMouseout(t,n)},click:function(t,e){return n.trigger("eventClick",this,t.event,e)},mousedown:function(i,r){t(r.target).is(".fc-resizer")&&n.isEventResizable(i.event)?e.segResizeMousedown(i,r):n.isEventDraggable(i.event)&&e.segDragMousedown(i,r)}},function(n,i){e.el.on(n,".fc-event-container > *",function(n){var r=t(this).data("fc-seg");return!r||e.isDraggingSeg||e.isResizingSeg?void 0:i.call(this,r,n)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var n,i,r=this,s=this.view,o=t.el,a=t.event,l=new Q(t.el,{parentEl:s.el,opacity:s.opt("dragOpacity"),revertDuration:s.opt("dragRevertDuration"),zIndex:2}),u=new Z(s.coordMap,{distance:5,scroll:s.opt("dragScroll"),listenStart:function(t){l.hide(),l.start(t)},dragStart:function(e){r.triggerSegMouseout(t,e),r.isDraggingSeg=!0,s.hideEvent(a),s.trigger("eventDragStart",o[0],a,e,{})},cellOver:function(e,o){var a=t.cellDate||u.origDate,c=r.computeDraggedEventDates(t,a,o);n=c.start,i=c.end,s.renderDrag(n,i,t)?l.hide():l.show()},cellOut:function(){n=null,s.destroyDrag(),l.show()},dragStop:function(t){var e=n&&!n.isSame(a.start);l.stop(!e,function(){r.isDraggingSeg=!1,s.destroyDrag(),s.showEvent(a),s.trigger("eventDragStop",o[0],a,t,{}),e&&s.eventDrop(o[0],a,n,t)})},listenStop:function(){l.stop()}});u.mousedown(e)},computeDraggedEventDates:function(t,e,n){var i,r,s,o=this.view,a=t.event,l=a.start,u=o.calendar.getEventEnd(a);return n.hasTime()===e.hasTime()?(i=k(n,e),r=l.clone().add(i),s=null===a.end?null:u.clone().add(i)):(r=n,s=null),{start:r,end:s}},segResizeMousedown:function(t,e){function n(){r.destroyResize(),s.showEvent(a)}var i,r=this,s=this.view,o=t.el,a=t.event,l=a.start,u=s.calendar.getEventEnd(a),c=null;i=new Z(this.coordMap,{distance:5,scroll:s.opt("dragScroll"),dragStart:function(e){r.triggerSegMouseout(t,e),r.isResizingSeg=!0,s.trigger("eventResizeStart",o[0],a,e,{})},cellOver:function(e,i){i.isBefore(l)&&(i=l),c=i.clone().add(r.cellDuration),c.isSame(u)?(c=null,n()):(r.renderResize(l,c,t),s.hideEvent(a))},cellOut:function(){c=null,n()},dragStop:function(t){r.isResizingSeg=!1,n(),s.trigger("eventResizeStop",o[0],a,t,{}),c&&s.eventResize(o[0],a,c,t)}}),i.mousedown(e)},getSegClasses:function(t,e,n){var i=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(i.className,i.source?i.source.className:[]);return e&&r.push("fc-draggable"),n&&r.push("fc-resizable"),r},getEventSkinCss:function(t){var e=this.view,n=t.source||{},i=t.color,r=n.color,s=e.opt("eventColor"),o=t.backgroundColor||i||n.backgroundColor||r||e.opt("eventBackgroundColor")||s,a=t.borderColor||i||n.borderColor||r||e.opt("eventBorderColor")||s,l=t.textColor||n.textColor||e.opt("eventTextColor"),u=[];return o&&u.push("background-color:"+o),a&&u.push("border-color:"+a),l&&u.push("color:"+l),u.join(";")}}),et.prototype=T(J.prototype),t.extend(et.prototype,{numbersVisible:!1,cellDuration:e.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,highlightEls:null,render:function(e){var n,i=this.view,r="";for(n=0;n<i.rowCnt;n++)r+=this.dayRowHtml(n,e);this.el.html(r),this.rowEls=this.el.find(".fc-row"),this.dayEls=this.el.find(".fc-day"),this.dayEls.each(function(e,n){var r=i.cellToDate(Math.floor(e/i.colCnt),e%i.colCnt);i.trigger("dayRender",null,r,t(n))}),J.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(t,e){var n=this.view,i=["fc-row","fc-week",n.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",t)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(t,e,n){return this.bgCellHtml(t,e,n)},buildCoords:function(e,n){var i,r,s,o=this.view.colCnt;this.dayEls.slice(0,o).each(function(e,o){i=t(o),r=i.offset().left,e&&(s[1]=r),s=[r],n[e]=s}),s[1]=r+i.outerWidth(),this.rowEls.each(function(n,o){i=t(o),r=i.offset().top,n&&(s[1]=r),s=[r],e[n]=s}),s[1]=r+i.outerHeight()+this.bottomCoordPadding},getCellDate:function(t){return this.view.cellToDate(t)},getCellDayEl:function(t){return this.dayEls.eq(t.row*this.view.colCnt+t.col)},rangeToSegs:function(t,e){return this.view.rangeToSegments(t,e)},renderDrag:function(t,e,n){var i;return this.renderHighlight(t,e||this.view.calendar.getDefaultEventEnd(!0,t)),n&&!n.el.closest(this.el).length?(this.renderRangeHelper(t,e,n),i=this.view.opt("dragOpacity"),void 0!==i&&this.helperEls.css("opacity",i),!0):void 0},destroyDrag:function(){this.destroyHighlight(),this.destroyHelper()},renderResize:function(t,e,n){this.renderHighlight(t,e),this.renderRangeHelper(t,e,n)},destroyResize:function(){this.destroyHighlight(),this.destroyHelper()},renderHelper:function(e,n){var i=[],r=this.renderEventRows([e]);this.rowEls.each(function(e,s){var o,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');o=n&&n.row===e?n.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",o).find("table").append(r[e].tbodyEl),a.append(l),i.push(l[0])}),this.helperEls=t(i)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},renderHighlight:function(e,n){var i,r,s,o=this.rangeToSegs(e,n),a=[];for(i=0;i<o.length;i++)r=o[i],s=t(this.highlightSkeletonHtml(r.leftCol,r.rightCol+1)),s.appendTo(this.rowEls[r.row]),a.push(s[0]);this.highlightEls=t(a)},destroyHighlight:function(){this.highlightEls&&(this.highlightEls.remove(),this.highlightEls=null)},highlightSkeletonHtml:function(t,e){var n=this.view.colCnt,i="";return t>0&&(i+='<td colspan="'+t+'"/>'),e>t&&(i+='<td colspan="'+(e-t)+'" class="fc-highlight" />'),n>e&&(i+='<td colspan="'+(n-e)+'"/>'),i=this.bookendCells(i,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+i+"</tr></table></div>"}}),t.extend(et.prototype,{segs:null,rowStructs:null,renderEvents:function(e){var n=this.rowStructs=this.renderEventRows(e),i=[];this.rowEls.each(function(e,r){t(r).find(".fc-content-skeleton > table").append(n[e].tbodyEl),i.push.apply(i,n[e].segs)}),this.segs=i},getSegs:function(){return(this.segs||[]).concat(this.popoverSegs||[])},destroyEvents:function(){var t,e;for(J.prototype.destroyEvents.call(this),t=this.rowStructs||[];e=t.pop();)e.tbodyEl.remove();this.segs=null,this.destroySegPopover()},renderEventRows:function(t){var e,n,i=this.eventsToSegs(t),r=[];for(i=this.renderSegs(i),e=this.groupSegRows(i),n=0;n<e.length;n++)r.push(this.renderEventRow(n,e[n]));return r},renderSegHtml:function(t,e){var n,i=this.view,r=i.opt("isRTL"),s=t.event,o=i.isEventDraggable(s),a=!e&&s.allDay&&t.isEnd&&i.isEventResizable(s),l=this.getSegClasses(t,o,a),u=this.getEventSkinCss(s),c="";return l.unshift("fc-day-grid-event"),!s.allDay&&t.isStart&&-1==s.className.indexOf("closed")&&(c='<span class="fc-time">'+j(i.getEventTimeText(s))+"</span>"),n='<span class="fc-title">'+(j(s.title||"")||"&nbsp;")+"</span>",'<a class="'+l.join(" ")+'"'+(s.url?' href="'+j(s.url)+'"':"")+(u?' style="'+u+'"':"")+'><div class="fc-content">'+(r?n+" "+c:c+" "+n)+"</div>"+(a?'<div class="fc-resizer"/>':"")+"</a>"},renderEventRow:function(e,n){function i(e){for(;e>o;)c=(_[r-1]||[])[o],c?c.attr("rowspan",parseInt(c.attr("rowspan")||1,10)+1):(c=t("<td/>"),a.append(c)),v[r][o]=c,_[r][o]=c,o++}var r,s,o,a,l,u,c,h=this.view,d=h.colCnt,f=this.buildSegLevels(n),p=Math.max(1,f.length),g=t("<tbody/>"),m=[],v=[],_=[];for(r=0;p>r;r++){if(s=f[r],o=0,a=t("<tr/>"),m.push([]),v.push([]),_.push([]),s)for(l=0;l<s.length;l++){for(u=s[l],i(u.leftCol),c=t('<td class="fc-event-container"/>').append(u.el),u.leftCol!=u.rightCol?c.attr("colspan",u.rightCol-u.leftCol+1):_[r][o]=c;o<=u.rightCol;)v[r][o]=c,m[r][o]=u,o++;a.append(c)}i(d),this.bookendCells(a,"eventSkeleton"),g.append(a)}return{row:e,tbodyEl:g,cellMatrix:v,segMatrix:m,segLevels:f,segs:n}},buildSegLevels:function(t){var e,n,i,r=[];for(t.sort(tt),e=0;e<t.length;e++){for(n=t[e],i=0;i<r.length&&nt(n,r[i]);i++);n.level=i,(r[i]||(r[i]=[])).push(n)}for(i=0;i<r.length;i++)r[i].sort(it);return r},groupSegRows:function(t){var e,n=this.view,i=[];for(e=0;e<n.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i}}),t.extend(et.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,n,i=this.rowStructs||[];for(e=0;e<i.length;e++)this.unlimitRow(e),n=t?"number"==typeof t?t:this.computeRowLevelLimit(e):!1,n!==!1&&this.limitRow(e,n)},computeRowLevelLimit:function(t){var e,n,i=this.rowEls.eq(t),r=i.height(),s=this.rowStructs[t].tbodyEl.children();for(e=0;e<s.length;e++)if(n=s.eq(e).removeClass("fc-limited"),n.position().top+n.outerHeight()>r)return e;return!1},limitRow:function(e,n){function i(i){for(;i>C;)r={row:e,col:C},c=b.getCellSegs(r,n),c.length&&(f=o[n-1][C],y=b.renderMoreLink(r,c),_=t("<div/>").append(y),f.append(_),k.push(_[0])),C++}var r,s,o,a,l,u,c,h,d,f,p,g,m,v,_,y,b=this,w=this.view,x=this.rowStructs[e],k=[],C=0;if(n&&n<x.segLevels.length){for(s=x.segLevels[n-1],o=x.cellMatrix,a=x.tbodyEl.children().slice(n).addClass("fc-limited").get(),l=0;l<s.length;l++){for(u=s[l],i(u.leftCol),d=[],h=0;C<=u.rightCol;)r={row:e,col:C},c=this.getCellSegs(r,n),d.push(c),h+=c.length,C++;if(h){for(f=o[n-1][u.leftCol],p=f.attr("rowspan")||1,g=[],m=0;m<d.length;m++)v=t('<td class="fc-more-cell"/>').attr("rowspan",p),c=d[m],r={row:e,col:u.leftCol+m},y=this.renderMoreLink(r,[u].concat(c)),_=t("<div/>").append(y),v.append(_),g.push(v[0]),k.push(v[0]);f.addClass("fc-limited").after(t(g)),a.push(f[0])}}i(w.colCnt),x.moreEls=t(k),x.limitedEls=t(a)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,n){var i=this,r=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(s){var o=r.opt("eventLimitClick"),a=r.cellToDate(e),l=t(this),u=i.getCellDayEl(e),c=i.getCellSegs(e),h=i.resliceDaySegs(c,a),d=i.resliceDaySegs(n,a);"function"==typeof o&&(o=r.trigger("eventLimitClick",null,{date:a,dayEl:u,moreEl:l,segs:h,hiddenSegs:d},s)),"popover"===o?i.showSegPopover(a,e,l,h):"string"==typeof o&&r.calendar.zoomTo(a,o)})},showSegPopover:function(t,e,n,i){var r,s,o=this,a=this.view,l=n.parent();r=1==a.rowCnt?this.view.el:this.rowEls.eq(e.row),s={className:"fc-more-popover",content:this.renderSegPopoverContent(t,i),parentEl:this.el,top:r.offset().top,autoHide:!0,viewportConstrain:a.opt("popoverViewportConstrain"),hide:function(){o.segPopover.destroy(),o.segPopover=null,o.popoverSegs=null}},a.opt("isRTL")?s.right=l.offset().left+l.outerWidth()+1:s.left=l.offset().left-1,this.segPopover=new G(s),this.segPopover.show()},renderSegPopoverContent:function(e,n){var i,r=this.view,s=r.opt("theme"),o=e.format(r.opt("dayPopoverFormat")),a=t('<div class="fc-header '+r.widgetHeaderClass+'"><span class="fc-close '+(s?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+j(o)+'</span><div class="fc-clear"/></div><div class="fc-body '+r.widgetContentClass+'"><div class="fc-event-container"></div></div>'),l=a.find(".fc-event-container");for(n=this.renderSegs(n,!0),this.popoverSegs=n,i=0;i<n.length;i++)n[i].cellDate=e,l.append(n[i].el);return a},resliceDaySegs:function(e,n){var i=t.map(e,function(t){return t.event}),r=n.clone().stripTime(),s=r.clone().add(1,"days");return this.eventsToSegs(i,r,s)},getMoreLinkText:function(t){var e=this.view,n=e.opt("eventLimitText");return"function"==typeof n?n(t):"+"+t+" "+n},getCellSegs:function(t,e){for(var n,i=this.rowStructs[t.row].segMatrix,r=e||0,s=[];r<i.length;)n=i[r][t.col],n&&s.push(n),r++;return s}}),rt.prototype=T(J.prototype),t.extend(rt.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,highlightEl:null,helperEl:null,render:function(){this.processOptions(),this.el.html(this.renderHtml()),this.dayEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.computeSlatTops(),J.prototype.render.call(this)},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(t,e,n){return this.bgCellHtml(t,e,n)},slatRowHtml:function(){for(var t,n,i,r=this.view,s=r.calendar,o=r.opt("isRTL"),a="",l=this.slotDuration.asMinutes()%15===0,u=e.duration(+this.minTime);u<this.maxTime;)t=r.start.clone().time(u),n=t.minutes(),i='<td class="fc-axis fc-time '+r.widgetContentClass+'" '+r.axisStyleAttr()+">"+(l&&n?"":"<span>"+j(s.formatDate(t,r.opt("axisFormat")))+"</span>")+"</td>",a+="<tr "+(n?'class="fc-minor"':"")+">"+(o?"":i)+'<td class="'+r.widgetContentClass+'"/>'+(o?i:"")+"</tr>",u.add(this.slotDuration);return a},processOptions:function(){var t=this.view,n=t.opt("slotDuration"),i=t.opt("snapDuration");n=e.duration(n),i=i?e.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.cellDuration=i,this.minTime=e.duration(t.opt("minTime")),this.maxTime=e.duration(t.opt("maxTime"))},rangeToSegs:function(t,e){var n,i,r,s,o,a=this.view,l=[];for(t=t.clone().stripZone(),e=e.clone().stripZone(),i=0;i<a.colCnt;i++)r=a.cellToDate(0,i),s=r.clone().time(this.minTime),o=r.clone().time(this.maxTime),n=w(t,e,s,o),n&&(n.col=i,l.push(n));return l},resize:function(){this.computeSlatTops(),this.updateSegVerticals()},buildCoords:function(n,i){var r,s,o=this.view.colCnt,a=this.el.offset().top,l=e.duration(+this.minTime),u=null;for(this.dayEls.slice(0,o).each(function(e,n){r=t(n),s=r.offset().left,u&&(u[1]=s),u=[s],i[e]=u}),u[1]=s+r.outerWidth(),u=null;l<this.maxTime;)s=a+this.computeTimeTop(l),u&&(u[1]=s),u=[s],n.push(u),l.add(this.snapDuration);u[1]=a+this.computeTimeTop(l)},getCellDate:function(t){var e=this.view,n=e.calendar;return n.rezoneDate(e.cellToDate(0,t.col).time(this.minTime+this.snapDuration*t.row))},getCellDayEl:function(t){return this.dayEls.eq(t.col)},computeDateTop:function(t,n){return this.computeTimeTop(e.duration(t.clone().stripZone()-n.clone().stripTime()))},computeTimeTop:function(t){var e,n,i,r,s=(t-this.minTime)/this.slotDuration;return s=Math.max(0,s),s=Math.min(this.slatEls.length,s),e=Math.floor(s),n=s-e,i=this.slatTops[e],n?(r=this.slatTops[e+1],i+(r-i)*n):i},computeSlatTops:function(){var e,n=[];this.slatEls.each(function(i,r){e=t(r).position().top,n.push(e)}),n.push(e+this.slatEls.last().outerHeight()),this.slatTops=n},renderDrag:function(t,e,n){var i;return n?(this.renderRangeHelper(t,e,n),i=this.view.opt("dragOpacity"),void 0!==i&&this.helperEl.css("opacity",i),!0):void this.renderHighlight(t,e||this.view.calendar.getDefaultEventEnd(!1,t))},destroyDrag:function(){this.destroyHelper(),this.destroyHighlight()},renderResize:function(t,e,n){this.renderRangeHelper(t,e,n)},destroyResize:function(){this.destroyHelper()},renderHelper:function(e,n){var i,r,s,o=this.renderEventTable([e]),a=o.tableEl,l=o.segs;for(i=0;i<l.length;i++)r=l[i],n&&n.col===r.col&&(s=n.el,r.el.css({left:s.css("left"),right:s.css("right"),"margin-left":s.css("margin-left"),"margin-right":s.css("margin-right")}));this.helperEl=t('<div class="fc-helper-skeleton"/>').append(a).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(t,e){this.view.opt("selectHelper")?this.renderRangeHelper(t,e):this.renderHighlight(t,e)},destroySelection:function(){this.destroyHelper(),this.destroyHighlight()},renderHighlight:function(e,n){this.highlightEl=t(this.highlightSkeletonHtml(e,n)).appendTo(this.el)},destroyHighlight:function(){this.highlightEl&&(this.highlightEl.remove(),this.highlightEl=null)},highlightSkeletonHtml:function(t,e){var n,i,r,s,o,a=this.view,l=this.rangeToSegs(t,e),u="",c=0;for(n=0;n<l.length;n++)i=l[n],c<i.col&&(u+='<td colspan="'+(i.col-c)+'"/>',c=i.col),r=a.cellToDate(0,c),s=this.computeDateTop(i.start,r),o=this.computeDateTop(i.end,r),u+='<td><div class="fc-highlight-container"><div class="fc-highlight" style="top:'+s+"px;bottom:-"+o+'px"/></div></td>',c++;return c<a.colCnt&&(u+='<td colspan="'+(a.colCnt-c)+'"/>'),u=this.bookendCells(u,"highlight"),'<div class="fc-highlight-skeleton"><table><tr>'+u+"</tr></table></div>"}}),t.extend(rt.prototype,{segs:null,eventSkeletonEl:null,renderEvents:function(e){var n=this.renderEventTable(e);this.eventSkeletonEl=t('<div class="fc-content-skeleton"/>').append(n.tableEl),this.el.append(this.eventSkeletonEl),this.segs=n.segs},getSegs:function(){return this.segs||[]},destroyEvents:function(){J.prototype.destroyEvents.call(this),this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null),this.segs=null},renderEventTable:function(e){var n,i,r,s,o,a,l=t("<table><tr/></table>"),u=l.find("tr"),c=this.eventsToSegs(e);for(c=this.renderSegs(c),n=this.groupSegCols(c),this.computeSegVerticals(c),s=0;s<n.length;s++){for(o=n[s],st(o),a=t('<div class="fc-event-container"/>'),i=0;i<o.length;i++)r=o[i],r.el.css(this.generateSegPositionCss(r)),r.bottom-r.top<30&&r.el.addClass("fc-short"),a.append(r.el);u.append(t("<td/>").append(a))}return this.bookendCells(u,"eventSkeleton"),{tableEl:l,segs:c}},updateSegVerticals:function(){var t,e=this.segs;if(e)for(this.computeSegVerticals(e),t=0;t<e.length;t++)e[t].el.css(this.generateSegVerticalCss(e[t]))},computeSegVerticals:function(t){var e,n;for(e=0;e<t.length;e++)n=t[e],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},renderSegHtml:function(t,e){var n,i,r,s=this.view,o=t.event,a=s.isEventDraggable(o),l=!e&&t.isEnd&&s.isEventResizable(o),u=this.getSegClasses(t,a,l),c=this.getEventSkinCss(o);return u.unshift("fc-time-grid-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(n=s.getEventTimeText(t.start,t.end),i=s.getEventTimeText(t.start,t.end,"LT"),r=s.getEventTimeText(t.start,null)):(n=s.getEventTimeText(o),i=s.getEventTimeText(o,"LT"),r=s.getEventTimeText(o.start,null)),'<a class="'+u.join(" ")+'"'+(o.url?' href="'+j(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(-1==o.className.indexOf("closed")&&n?'<div class="fc-time" data-start="'+j(r)+'" data-full="'+j(i)+'"><span>'+j(n)+"</span></div>":"")+(o.title?'<div class="fc-title">'+j(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(l?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(t){var e,n,i=this.view,r=i.opt("isRTL"),s=i.opt("slotEventOverlap"),o=t.backwardCoord,a=t.forwardCoord,l=this.generateSegVerticalCss(t);return s&&(a=Math.min(1,o+2*(a-o))),r?(e=1-a,n=o):(e=o,n=1-a),e=0,n=0,l.zIndex=t.level+1,l.left=100*e+"%",l.right=100*n+"%",s&&t.forwardPressure&&(l[r?"marginLeft":"marginRight"]=20),l},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},groupSegCols:function(t){var e,n=this.view,i=[];for(e=0;e<n.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i}}),ft.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var e=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=e+"-widget-header",this.widgetContentClass=e+"-widget-content",this.highlightStateClass=e+"-state-highlight",this.documentMousedownProxy=t.proxy(this,"documentMousedown"),this.documentDragStartProxy=t.proxy(this,"documentDragStart")},render:function(){this.updateSize(),this.trigger("viewRender",this,this,this.el),t(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect(),this.trigger("viewDestroy",this,this,this.el),this.destroyEvents(),this.el.empty(),t(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(t,e){},updateSize:function(t){t&&this.recordScroll(),this.updateHeight(),this.updateWidth()},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(t,e){},computeScrollerHeight:function(t){var e,n=this.el.add(this.scrollerEl);return n.css({position:"relative",left:-1}),e=this.el.outerHeight()-this.scrollerEl.height(),n.css({position:"",left:""}),t-e},recordScroll:function(){this.scrollerEl&&(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderEvents:function(t){this.segEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(e,n){var i=this.trigger("eventRender",e,e,n);return i===!1?n=null:i&&i!==!0&&(n=t(i)),n},showEvent:function(t){this.segEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.segEach(function(t){t.el.css("visibility","hidden")},t)},segEach:function(t,e){var n,i=this.getSegs();for(n=0;n<i.length;n++)e&&i[n].event._id!==e._id||t.call(this,i[n])},getSegs:function(){},renderDrag:function(t,e,n){},destroyDrag:function(){},documentDragStart:function(e,n){var i,r=this,s=null;this.opt("droppable")&&(i=new Z(this.coordMap,{cellOver:function(t,e){s=e,r.renderDrag(e)},cellOut:function(){s=null,r.destroyDrag()}}),t(document).one("dragstop",function(t,e){r.destroyDrag(),s&&r.trigger("drop",t.target,s,t,e)}),i.startDrag(e))},select:function(t,e,n){this.unselect(n),this.renderSelection(t,e),this.reportSelection(t,e,n)},renderSelection:function(t,e){},reportSelection:function(t,e,n){this.isSelected=!0,this.trigger("select",null,t,e,n)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,t))},destroySelection:function(){},documentMousedown:function(e){var n;this.isSelected&&this.opt("unselectAuto")&&b(e)&&(n=this.opt("unselectCancel"),n&&t(e.target).closest(n).length||this.unselect(e))}},pt.prototype=T(ft.prototype),t.extend(pt.prototype,{dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,render:function(t,e,n){this.rowCnt=t,this.colCnt=e,this.dayNumbersVisible=n,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderHtml()),this.headRowEl=this.el.find("thead .fc-row"),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.coordMap.containerEl=this.scrollerEl,this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(this.hasRigidRows()),ft.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy(),ft.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){return this.weekNumbersVisible?'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+j(this.opt("weekNumberTitle"))+"</span></th>":void 0},numberIntroHtml:function(t){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(t,0))+"</span></td>":void 0},dayIntroHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>":void 0},introHtml:function(){return this.weekNumbersVisible?'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>":void 0},numberCellHtml:function(t,e,n){var i;return this.dayNumbersVisible?(i=this.dayGrid.getDayClasses(n),i.unshift("fc-day-number"),'<td class="'+i.join(" ")+'" data-date="'+n.format()+'">'+n.date()+"</td>"):"<td/>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=g(this.el.find(".fc-week-number")))},setHeight:function(t,e){var n,i=this.opt("eventLimit");
v(this.scrollerEl),d(this.headRowEl),this.dayGrid.destroySegPopover(),i&&"number"==typeof i&&this.dayGrid.limitRows(i),n=this.computeScrollerHeight(t),this.setGridHeight(n,e),i&&"number"!=typeof i&&this.dayGrid.limitRows(i),!e&&m(this.scrollerEl,n)&&(h(this.headRowEl,y(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n),this.restoreScroll())},setGridHeight:function(t,e){e?p(this.dayGrid.rowEls):f(this.dayGrid.rowEls,t,!0)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight(),ft.prototype.renderEvents.call(this,t)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){ft.prototype.destroyEvents.call(this),this.recordScroll(),this.dayGrid.destroyEvents()},renderDrag:function(t,e,n){return this.dayGrid.renderDrag(t,e,n)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(t,e){this.dayGrid.renderSelection(t,e)},destroySelection:function(){this.dayGrid.destroySelection()}}),r({fixedWeekCount:!0}),$t.month=gt,gt.prototype=T(pt.prototype),t.extend(gt.prototype,{name:"month",incrementDate:function(t,e){return t.clone().stripTime().add(e,"months").startOf("month")},render:function(t){var e;this.intervalStart=t.clone().stripTime().startOf("month"),this.intervalEnd=this.intervalStart.clone().add(1,"months"),this.start=this.intervalStart.clone(),this.start=this.skipHiddenDays(this.start),this.start.startOf("week"),this.start=this.skipHiddenDays(this.start),this.end=this.intervalEnd.clone(),this.end=this.skipHiddenDays(this.end,-1,!0),this.end.add((7-this.end.weekday())%7,"days"),this.end=this.skipHiddenDays(this.end,-1,!0),e=Math.ceil(this.end.diff(this.start,"weeks",!0)),this.isFixedWeeks()&&(this.end.add(6-e,"weeks"),e=6),this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat")),pt.prototype.render.call(this,e,this.getCellsPerWeek(),!0)},setGridHeight:function(t,e){e=e||"variable"===this.opt("weekMode"),e&&(t*=this.rowCnt/6),f(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}}),$t.basicWeek=mt,mt.prototype=T(pt.prototype),t.extend(mt.prototype,{name:"basicWeek",incrementDate:function(t,e){return t.clone().stripTime().add(e,"weeks").startOf("week")},render:function(t){this.intervalStart=t.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 "),pt.prototype.render.call(this,1,this.getCellsPerWeek(),!1)}}),$t.basicDay=vt,vt.prototype=T(pt.prototype),t.extend(vt.prototype,{name:"basicDay",incrementDate:function(t,e){var n=t.clone().stripTime().add(e,"days");return n=this.skipHiddenDays(n,0>e?-1:1)},render:function(t){this.start=this.intervalStart=t.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),pt.prototype.render.call(this,1,1,!1)}}),r({allDaySlot:!0,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:_t,timeFormat:{agenda:yt},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!1});var Nt=5;bt.prototype=T(ft.prototype),t.extend(bt.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(e){this.rowCnt=1,this.colCnt=e,this.el.addClass("fc-agenda-view").html(this.renderHtml()),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.coordMap.containerEl=this.scrollerEl,this.timeGrid.el=this.el.find(".fc-time-grid"),this.timeGrid.render(),this.bottomRuleEl=t('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)"),ft.prototype.render.call(this),this.resetScroll()},destroy:function(){this.timeGrid.destroy(),this.dayGrid&&this.dayGrid.destroy(),ft.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var t,e,n,i;return this.opt("weekNumbers")?(t=this.cellToDate(0,0),e=this.calendar.calculateWeekNumber(t),n=this.opt("weekNumberTitle"),i=this.opt("isRTL")?e+n:n+e,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+j(i)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||j(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(t){t&&this.timeGrid.resize(),ft.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=g(this.el.find(".fc-axis"))},setHeight:function(t,e){var n,i;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),v(this.scrollerEl),d(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.destroySegPopover(),n=this.opt("eventLimit"),n&&"number"!=typeof n&&(n=Nt),n&&this.dayGrid.limitRows(n)),e||(i=this.computeScrollerHeight(t),m(this.scrollerEl,i)?(h(this.noScrollRowEls,y(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i),this.restoreScroll()):(this.scrollerEl.height(i).css("overflow","hidden"),this.bottomRuleEl.show()))},resetScroll:function(){function t(){n.scrollerEl.scrollTop(r)}var n=this,i=e.duration(this.opt("scrollTime")),r=this.timeGrid.computeTimeTop(i);r=Math.ceil(r),r&&r++,t(),setTimeout(t,0)},renderEvents:function(t){var e,n,i=[],r=[],s=[];for(n=0;n<t.length;n++)t[n].allDay?i.push(t[n]):r.push(t[n]);e=this.timeGrid.renderEvents(r),this.dayGrid&&(s=this.dayGrid.renderEvents(i)),this.updateHeight(),ft.prototype.renderEvents.call(this,t)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){ft.prototype.destroyEvents.call(this),this.recordScroll(),this.timeGrid.destroyEvents(),this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(t,e,n){return t.hasTime()?this.timeGrid.renderDrag(t,e,n):this.dayGrid?this.dayGrid.renderDrag(t,e,n):void 0},destroyDrag:function(){this.timeGrid.destroyDrag(),this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(t,e){t.hasTime()||e.hasTime()?this.timeGrid.renderSelection(t,e):this.dayGrid&&this.dayGrid.renderSelection(t,e)},destroySelection:function(){this.timeGrid.destroySelection(),this.dayGrid&&this.dayGrid.destroySelection()}}),$t.agendaWeek=wt,wt.prototype=T(bt.prototype),t.extend(wt.prototype,{name:"agendaWeek",incrementDate:function(t,e){return t.clone().stripTime().add(e,"weeks").startOf("week")},render:function(t){this.intervalStart=t.clone().stripTime().startOf("week"),this.intervalEnd=this.intervalStart.clone().add(1,"weeks"),this.start=this.skipHiddenDays(this.intervalStart),this.end=this.skipHiddenDays(this.intervalEnd,-1,!0),this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 "),bt.prototype.render.call(this,this.getCellsPerWeek())}}),$t.agendaDay=xt,xt.prototype=T(bt.prototype),t.extend(xt.prototype,{name:"agendaDay",incrementDate:function(t,e){var n=t.clone().stripTime().add(e,"days");return n=this.skipHiddenDays(n,0>e?-1:1)},render:function(t){this.start=this.intervalStart=t.clone().stripTime(),this.end=this.intervalEnd=this.start.clone().add(1,"days"),this.title=this.calendar.formatDate(this.start,this.opt("titleFormat")),bt.prototype.render.call(this,1)}})}),/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t,e){"function"==typeof define&&define.amd?define("typeahead",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,o,a=this,l=arguments;return s=function(){i=null,n||(r=t.apply(a,l))},o=n&&!i,clearTimeout(i),i=setTimeout(s,e),o&&(r=t.apply(a,l)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var l=new Date,u=e-(l-o);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,o=l,s=t.apply(n,i)):r||(r=setTimeout(a,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";function t(t){var o,a;return a=e.mixin({},s,t),o={css:r(),classes:a,html:n(a),selectors:i(a)},{css:o.css,html:o.html,classes:o.classes,selectors:o.selectors,mixin:function(t){e.mixin(t,o)}}}function n(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}function i(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}function r(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}var s={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return t}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i,r;return i="typeahead:",r={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var r;return r=t.Event(i+e),(n=n||[]).unshift(r),this.$el.trigger.apply(this.$el,n),r},before:function(t){var e,n;return e=[].slice.call(arguments,1),n=this._trigger("before"+t,e),n.isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=r[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(l),n=i?a(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,o;if(!this._callbacks)return this;for(t=t.split(l),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=s(n.sync,this,[e].concat(i)),o=s(n.async,this,[e].concat(i)),r()&&u(o);return this}function s(t,e,n){function i(){for(var i,r=0,s=t.length;!i&&s>r;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function o(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,u=o();return{onSync:n,onAsync:e,off:i,trigger:r}}(),s=function(t){"use strict";function n(t,n,i){for(var r,s=[],o=0,a=t.length;a>o;o++)s.push(e.escapeRegExChars(t[o]));return r=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function s(e){var n,i,s;return(n=a.exec(e.data))&&(s=t.createElement(r.tagName),r.className&&(s.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),s.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(s,i)),!!n}function o(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:o(n,e)}var a;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],a=n(r.pattern,r.caseSensitive,r.wordsOnly),o(r.node,s))}}(window.document),o=function(){"use strict";function n(n,r){n=n||{},n.input||t.error("input is missing"),r.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function s(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function o(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!o(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!o(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var n,i;n=s(t,this.query),i=n?this.query.length!==t.length:!1,this.query=t,e||n?!e&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,s=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||e.defer(e.bind(s._onInput,s,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),a=function(){"use strict";function n(n,r){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!a(n.name)&&t.error("invalid dataset name: "+n.name),r.mixin(this),this.highlight=!!n.highlight,this.name=n.name||u(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(t){function n(e){return e[t]}return t=t||e.stringify,e.isFunction(t)?t:n}function o(n,i){function r(e){return t("<div>").text(i(e))}return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||r}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var l,u;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},u=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(l.obj)?{val:n.data(l.val)||"",obj:n.data(l.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function(t,e){e=e||[],e.length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){e=e||[],e.length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;n=this._getSuggestionsFragment(t,e),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var r,o=this;return r=document.createDocumentFragment(),e.each(i,function(e){var i,s;s=o._injectQuery(n,e),i=t(o.templates.suggestion(s)).data(l.obj,e).data(l.val,o.displayFn(e)).addClass(o.classes.suggestion+" "+o.classes.selectable),r.appendChild(i[0])}),this.highlight&&s({className:this.classes.highlight,node:r,pattern:n}),t(r)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){o||(o=!0,t=(t||[]).slice(0,r.limit),a=t.length,r._overwrite(e,t),a<r.limit&&r.async&&r.trigger("asyncRequested",e))}function i(n){n=n||[],!s&&a<r.limit&&(r.cancel=t.noop,a+=n.length,r._append(e,n.slice(0,r.limit-a)),r.async&&r.trigger("asyncReceived",e))}var r=this,s=!1,o=!1,a=0;this.cancel(),this.cancel=function(){s=!0,r.cancel=t.noop,r.async&&r.trigger("asyncCanceled",e)},this.source(e,n,i),!o&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),l=function(){"use strict";function n(n,i){function r(e){var n=s.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(s.$node),new a(e,i)}var s=this;n=n||{},n.node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,r)}return e.mixin(n.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function t(t){return t.isEmpty()}return e.every(this.datasets,t)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>e?this.$node.scrollTop(i+e):n>r&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,r=-1>r?e.length-1:r,-1===r?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){function n(e){e.update(t)}var i=t!==this.query;return i&&(this.query=t,e.each(this.datasets,n)),i},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(t){t.destroy()}this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,n)}}),n}(),u=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),c=function(){"use strict";function n(n,r){var s,o,a,l,u,c,h,d,f,p,g;n=n||{},n.input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),a=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),u=i(this,"isActive","_onEscKeyed"),c=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),f=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",u,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",d,this).onSync("rightKeyed",f,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,s,o;r=document.activeElement,s=i.is(r),o=i.has(r).length>0,e.isMsie()&&(s||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return t=e.isString(t)?t:this.input.getQuery()||"",t.length>=this.minLength},_updateHint:function(){var t,n,i,r,s,a,l;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=o.normalizeQuery(i),s=e.escapeRegExChars(r),a=new RegExp("^(?:"+s+")(.+$)","i"),l=a.exec(n.val),l&&this.input.setHint(i+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return e&&!this.eventBus.before("select",e.obj)?(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0):!1},autocomplete:function(t){var e,n,i;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),i=n&&e!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function(t){var e,n,i,r,s;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,s=this._minLengthMet()&&this.menu.update(e),s||this.eventBus.before("cursorchange",r)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function r(e,n){e.each(function(){var e,i=t(this);(e=i.data(g.typeahead))&&n(e,i)})}function s(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(h(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(t,e){t.data(g.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(n){}return t}function h(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function d(t){var n,i;n=t.data(g.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(g.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}function f(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),r=i?t(n).first():[],r.length?r:null}var p,g,m;p=t.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(r,h){function d(){var n,d,m,v,_,y,b,w,x,k,C;e.each(h,function(t){t.highlight=!!r.highlight}),n=t(this),d=t(p.html.wrapper),m=f(r.hint),v=f(r.menu),_=r.hint!==!1&&!m,y=r.menu!==!1&&!v,_&&(m=s(n,p)),y&&(v=t(p.html.menu).css(p.css.menu)),m&&m.val(""),n=a(n,p),(_||y)&&(d.css(p.css.wrapper),n.css(_?p.css.input:p.css.inputWithNoHint),n.wrap(d).parent().prepend(_?m:null).append(y?v:null)),C=y?u:l,b=new i({el:n}),w=new o({hint:m,input:n},p),x=new C({node:v,datasets:h},p),k=new c({input:w,menu:x,eventBus:b,minLength:r.minLength},p),n.data(g.www,p),n.data(g.typeahead,k)}var p;return h=e.isArray(h)?h:[].slice.call(arguments,1),r=r||{},p=n(r.classNames),this.each(d)},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,e){d(e),t.destroy()}),this}},t.fn.typeahead=function(t){return m[t]?m[t].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=p,this}}()}),/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,o,a=this,l=arguments;return s=function(){i=null,n||(r=t.apply(a,l))},o=n&&!i,clearTimeout(i),i=setTimeout(s,e),o&&(r=t.apply(a,l)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var l=new Date,u=e-(l-o);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,o=l,s=t.apply(n,i)):r||(r=setTimeout(a,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){"use strict";function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||a,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}function o(t){var e,n,i=[],r=a.length;for(e=0;r>e;e++)(n=a.key(e)).match(t)&&i.push(n.replace(t,""));return i}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),r(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=o(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return e.isNumber(n)&&i()>n?!0:!1}}),n}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=t.cache===!1?new r(0):a}var i=0,s={},o=6,a=new r(10);return n.setMaxPendingRequests=function(t){o=t},n.resetCache=function(){a.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return e=e||{},e.url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),c._cache.set(l,t)}function r(){e(!0)}function a(){i--,delete s[l],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var l,u,c=this;l=this._fingerprint(t),this.cancelled||l!==this.lastReq||((u=s[l])?u.done(n).fail(r):o>i?(i++,s[l]=this._send(t).done(n).fail(r).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(r=this._cache.get(s))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),a=window.SearchIndex=function(){"use strict";function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[l]=[],t[a]={},t}function s(t){for(var e={},n=[],i=0,r=t.length;r>i;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function o(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;s>n&&o>i;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}var a="c",l="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var s,o;n.datums[s=n.identify(t)]=t,o=i(n.datumTokenizer(t)),e.each(o,function(t){var e,i,o;for(e=n.trie,i=t.split("");o=i.shift();)e=e[a][o]||(e[a][o]=r()),e[l].push(s)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,r,u=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,s;if(r&&0===r.length)return!1;for(e=u.trie,n=t.split("");e&&(i=n.shift());)e=e[a][i];return e&&0===n.length?(s=e[l].slice(0),void(r=r?o(r,s):s)):(r=[],!1)}),r?e.map(s(r),function(t){return u.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){function e(){t(!0)}function n(e){t(null,r.transform(e))}var i,r=this;t&&(i=this.prepare(this._settings()),this.transport(i).fail(e).done(n))},clear:function(){return this.storage.clear(),this}}),t}(),u=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){function n(t,n){e(t?[]:r.transform(n))}var i,r=this;if(e)return t=t||"",i=this.prepare(t,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function i(i){var r;return i?(r={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,i=e.mixin(r,i),!i.url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?a(i.transport):t.ajax,i):null}function r(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,n=e.mixin(i,n),!n.url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=s(n),n.limiter=o(n),n.transport=n.transport?a(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function s(t){function e(t,e){return e.url=s(e.url,t),e}function n(t,e){return e.url=e.url.replace(o,encodeURIComponent(t)),e}function i(t,e){return e}var r,s,o;return r=t.prepare,s=t.replace,o=t.wildcard,r?r:r=s?e:t.wildcard?n:i}function o(t){function n(t){return function(n){return e.debounce(n,t)}}function i(t){return function(n){return e.throttle(n,t)}}var r,s,o;return r=t.limiter,s=t.rateLimitBy,o=t.rateLimitWait,r||(r=/^throttle$/i.test(s)?i(o):n(o)),r}function a(n){return function(i){function r(t){e.defer(function(){o.resolve(t)})}function s(t){e.defer(function(){o.reject(t)})}var o=t.Deferred();return n(i,r,s),o}}return function(n){var s,o;return s={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=e.mixin(s,n||{}),!n.datumTokenizer&&t.error("datumTokenizer is required"),!n.queryTokenizer&&t.error("queryTokenizer is required"),o=n.sorter,n.sorter=o?function(t){return t.sort(o)}:e.identity,n.local=e.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=r(n.remote),n}}(),h=function(){"use strict";function n(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new u(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),t.initialize!==!1&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){function t(t,e,i){return n.search(t,e,i)}function e(t,e){return n.search(t,e)}var n=this;return this.remote?t:e},_loadPrefetch:function(){function e(t,e){return t?n.reject():(r.add(e),r.prefetch.store(r.index.serialize()),void n.resolve())}var n,i,r=this;return n=t.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(e):n.resolve(),n.promise()},_initialize:function(){function t(){e.add(e.local)}var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(t),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){function r(t){var n=[];e.each(t,function(t){!e.some(s,function(e){return o.identify(t)===o.identify(e)})&&n.push(t)}),i&&i(n)}var s,o=this;return s=this.sorter(this.index.search(t)),n(this.remote?s.slice():s),this.remote&&s.length<this.sufficient?this.remote.get(t,r):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}();return h});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),TypeaheadSearch=function(){function t(){_classCallCheck(this,t),this.WILDCARD="%QUERY",this.form=$(".main-navbar-search"),this.input=this.form.find("input"),this.fetch_url=this.form.attr("action"),this.userUrl=this.form.attr("data-user-url"),this.input.length&&this._setupTypeahead()}return _createClass(t,[{key:"_setupTypeahead",value:function(){var t=this;this._bindEnter(),this.form.addClass("js-search");var e=this._getBloodhound();e.initialize(),this.input.typeahead({highlight:!0,hint:!0},{display:"value",source:e,templates:{suggestion:function(e){return"<a href='"+t.userUrl+e+"' class='search-suggestion-item'><div class='search-user-picture bg-image-item rounded square-xs' style='background-image: url(https://cdn.intra.42.fr/userprofil/"+e+".jpg)'></div><span>"+e+"</span></a>"}}})}},{key:"_bindEnter",value:function(){var t=this,e=function(e){13==e.keyCode&&$(t.form).submit()};this.input.on("typeahead:cursorchange",function(n,i){t.input.off("keyup",e),i||t.input.on("keyup",e)}),this.input.on("typeahead:select",function(e,n){var i=""+t.userUrl+n;document.location=i}),this.input.on("keyup",e)}},{key:"_getBloodhound",value:function(){var t=this;return new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.fetch_url+(".json?query="+this.WILDCARD),wildcard:this.WILDCARD,prepare:function(e,n){return n.xhrFields={withCredentials:!0},n.url=n.url.replace(t.WILDCARD,encodeURIComponent(e)),n}}})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),TypeaheadHelper=function(){function t(){_classCallCheck(this,t);var e=this;$(".typeahead").each(function(){var t=$(this),n=e._getBloodhound.call(this);n.initialize(),t.typeahead({highlight:!0,hint:!1},{display:"displayKey",source:n.ttAdapter()}).on("typeahead:selected",function(e,n){$("[data-typeahead-"+t.data("displayKey")+"]").val(n.value)})})}return _createClass(t,[{key:"_getBloodhound",value:function(){var t=$(this);return new Bloodhound({datumTokenizer:function(t){Bloodhound.tokenizers.whitespace(t.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:t.data("url")+"query=%QUERY",wildcard:"%QUERY",prepare:function(e,n){return console.log("prepare =>",e,n),n.xhrFields={withCredentials:!0},n.url=n.url.replace("%QUERY",encodeURIComponent(e)),_.each(t.data("url-param"),function(t,e){n.url=n.url.replace("%"+e,encodeURIComponent($(""+t).val()))}),n},transform:function(e){return $.map(e,function(e){return{displayKey:e[t.data("displayKey")],value:e[t.data("valueKey")||"id"],data:e}})}}})}}]),t}();/*!
 * Bootstrap v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if(function(t,e){"use strict";t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return t("meta[name=csrf-token]").attr("content")},csrfParam:function(){return t("meta[name=csrf-param]").attr("content")},CSRFProtection:function(t){var e=n.csrfToken();e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){t('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),r.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t[0].href},isRemote:function(t){return t.data("remote")!==e&&t.data("remote")!==!1},handleRemote:function(i){var r,s,o,a,l,u;if(n.fire(i,"ajax:before")){if(a=i.data("with-credentials")||null,l=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){r=i.data("ujs:submit-button-formmethod")||i.attr("method"),s=i.data("ujs:submit-button-formaction")||i.attr("action"),o=t(i[0]).serializeArray();var c=i.data("ujs:submit-button");c&&(o.push(c),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(r=i.data("method"),s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",s=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),s=n.href(i),o=i.data("params")||null);return u={type:r||"GET",data:o,dataType:l,beforeSend:function(t,r){return r.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[t,r])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:n.isCrossDomain(s)},a&&(u.xhrFields={withCredentials:a}),s&&(u.url=s),n.ajax(u)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||e.protocol+"//"+e.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),s=i.data("method"),o=i.attr("target"),a=n.csrfToken(),l=n.csrfParam(),u=t('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+s+'" type="hidden" />';l===e||a===e||n.isCrossDomain(r)||(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),i!==e&&(t.data("ujs:enable-with",t[n]()),t[n](i)),t.prop("disabled",!0),t.data("ujs:disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var n=t.is("button")?"html":"val";t.data("ujs:enable-with")!==e&&(t[n](t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.prop("disabled",!1),t.removeData("ujs:disabled")},allowAction:function(t){var e,i=t.data("confirm"),r=!1;if(!i)return!0;if(n.fire(t,"confirm")){try{r=n.confirm(i)}catch(s){(console.error||console.log).call(console,s.stack||s)}e=n.fire(t,"confirm:complete",[r])}return r&&e},blankInputs:function(e,n,i){var r,s,o,a,l=t(),u=n||"input,textarea",c=e.find(u),h={};return c.each(function(){r=t(this),r.is("input[type=radio]")?(a=r.attr("name"),h[a]||(0===e.find('input[type=radio]:checked[name="'+a+'"]').length&&(o=e.find('input[type=radio][name="'+a+'"]'),l=l.add(o)),h[a]=a)):(s=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):!!r.val(),s===i&&(l=l.add(r)))}),l.length?l:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");i!==e&&(t.data("ujs:enable-with",t.html()),t.html(i)),t.bind("click.railsDisable",function(t){return n.stopEverything(t)}),t.data("ujs:disabled",!0)},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable"),t.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:disabled")&&t.rails.enableElement(e)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(e){var i=t(this),r=i.data("method"),s=i.data("params"),o=e.metaKey||e.ctrlKey;if(!n.allowAction(i))return n.stopEverything(e);if(!o&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(o&&(!r||"GET"===r)&&!s)return!0;var a=n.handleRemote(i);return a===!1?n.enableElement(i):a.fail(function(){n.enableElement(i)}),!1}return r?(n.handleMethod(i),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,s,o=t(this),a=n.isRemote(o);if(!n.allowAction(o))return n.stopEverything(i);if(o.attr("novalidate")===e)if(o.data("ujs:formnovalidate-button")===e){if(r=n.blankInputs(o,n.requiredInputSelector,!1),r&&n.fire(o,"ajax:aborted:required",[r]))return n.stopEverything(i)}else o.data("ujs:formnovalidate-button",e);if(a){if(s=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null,o=i.closest("form");0===o.length&&(o=t("#"+i.attr("form"))),o.data("ujs:submit-button",s),o.data("ujs:formnovalidate-button",i.attr("formnovalidate")),o.data("ujs:submit-button-formaction",i.attr("formaction")),o.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this===e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this===e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),function(){var t,e,n,i,r,s,o,a,l,u,c,h,d,f,p;window.console&&window.console.log&&(u=function(){var t;return t=[],c(arguments).forEach(function(e){return"string"==typeof e?t=t.concat(f(e)):t.push(e)}),p.apply(window,t)},p=function(){return console.log.apply(console,c(arguments))},c=function(t){return Array.prototype.slice.call(t)},n=[{regex:/\*([^\*]+)\*/,replacer:function(t,e){return"%c"+e+"%c"},styles:function(){return["font-style: italic",""]}},{regex:/\_([^\_]+)\_/,replacer:function(t,e){return"%c"+e+"%c"},styles:function(){return["font-weight: bold",""]}},{regex:/\`([^\`]+)\`/,replacer:function(t,e){return"%c"+e+"%c"},styles:function(){return["background: rgb(255, 255, 219); padding: 1px 5px; border: 1px solid rgba(0, 0, 0, 0.1)",""]}},{regex:/\[c\=(?:\"|\')?((?:(?!(?:\"|\')\]).)*)(?:\"|\')?\]((?:(?!\[c\]).)*)\[c\]/,replacer:function(t,e,n){return"%c"+n+"%c"},styles:function(t){return[t[1],""]}}],r=function(t){var e;return e=!1,n.forEach(function(n){return n.regex.test(t)?e=!0:void 0}),e},i=function(t){var e;return e=[],n.forEach(function(n){var i;return i=t.match(n.regex),i?e.push({format:n,match:i}):void 0}),e.sort(function(t,e){return t.match.index-e.match.index})},f=function(t){var e,n,s;for(s=[];r(t);)n=i(t),e=n[0],t=t.replace(e.format.regex,e.format.replacer),s=s.concat(e.format.styles(e.match));return[t].concat(s)},l=function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)},a=function(){return/OPR/.test(navigator.userAgent)&&/Opera/.test(navigator.vendor)},s=function(){return/Firefox/.test(navigator.userAgent)},o=function(){return/MSIE/.test(navigator.userAgent)},d=function(){var t;return t=navigator.userAgent.match(/AppleWebKit\/(\d+)\.(\d+)(\.|\+|\s)/),t?537.38<=parseInt(t[1],10)+parseInt(t[2],10)/100:!1},h=function(){var t;return t=navigator.userAgent.match(/OPR\/(\d+)\./),t?15<=parseInt(t[1],10):!1},e=function(){return window.console.firebug||window.console.exception},t=o()||s()&&!e()||a()&&!h()||l()&&!d()?p:u,t.l=p,"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof exports?module.exports=t:window.log=t)}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.6
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.6
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(e){function n(){o.detach().trigger("closed.bs.alert").remove()}var r=t(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=t(s);e&&e.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.6
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.button"),s="object"==typeof e&&e;r||i.data("bs.button",r=new n(this,s)),"toggle"==e?r.toggle():e&&r.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",s=i.data();e+="Text",null==s.resetText&&i.data("resetText",i[r]()),setTimeout(t.proxy(function(){i[r](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.6
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),o="string"==typeof e?e:s.slide;r||i.data("bs.carousel",r=new n(this,s)),"number"==typeof e?r.to(e):o?r[o]():s.interval&&r.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e),i="prev"==t&&0===n||"next"==t&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var r="prev"==t?-1:1,s=(n+r)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,i){var r=this.$element.find(".item.active"),s=i||this.getItemForDirection(e,r),o=this.interval,a="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var u=s[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(s)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,r.addClass(a),s.addClass(a),r.one("bsTransitionEnd",function(){s.removeClass([e,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var r=function(n){var i,r=t(this),s=t(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=t.extend({},s.data(),r.data()),a=r.attr("data-slide-to");a&&(o.interval=!1),e.call(s,o),a&&s.data("bs.carousel").to(a),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.6
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!r&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),r||n.data("bs.collapse",r=new i(this,s)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(e=r.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),e||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var r=t(i);this.addAriaAndCollapsedClass(e(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=r,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=t(this);r.attr("data-target")||i.preventDefault();var s=e(r),o=s.data("bs.collapse"),a=o?"toggle":r.data();n.call(s,a)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.6
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(r).remove(),t(s).each(function(){var i=t(this),r=e(i),s={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(r[0],n.target)||(r.trigger(n=t.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.6",o.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var s=e(r),o=s.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var a={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=e(i),o=r.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&r.find(s).trigger("focus"),i.trigger("click");var a=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+a);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.6
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),s=r.data("bs.modal"),o=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);s||r.data("bs.modal",s=new n(this,o)),"string"==typeof e?s[e](i):o.show&&s.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,r=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&r;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),s=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,o,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.6
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),s="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||i.data("bs.tooltip",r=new n(this,s)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),s=r.length;s--;){var o=r[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(a);u&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(u){var f=a,p=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+d>p.bottom?"top":"top"==a&&c.top-d<p.top?"bottom":"right"==a&&c.right+h>p.width?"left":"left"==a&&c.left-h<p.left?"right":a,s.removeClass(f).addClass(a)}var g=this.getCalculatedOffset(a,c,h,d);this.applyPlacement(g,a);var m=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=s&&(e.top=e.top+s-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-r+l:2*c.top-s+u,f=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&s.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,s=t(this.$tip),o=t.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var s=i?{top:0,left:0}:e.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},a=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,o,a,s)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-s-o.scroll,l=e.top+s-o.scroll+i;a<o.top?r.top=o.top-a:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var u=e.left-s,c=e.left+s+n;u<o.left?r.left=o.left-u:c>o.right&&(r.left=o.left+o.width-c)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.6
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),s="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||i.data("bs.popover",r=new n(this,s)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.6
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),s="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,s)),"string"==typeof n&&r[n]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),r=e.data("target")||e.attr("href"),s=/^#./.test(r)&&t(r);return s&&s.length&&s.is(":visible")&&[[s[n]().top+i,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return o!=(t=s[s.length-1])&&this.activate(t);if(o&&e<r[0])return this.activeTarget=null,this.clear();for(t=r.length;t--;)o!=s[t]&&e>=r[t]&&(void 0===r[t+1]||e<r[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.6
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),o=t.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(s),e.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(e,i,r){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),a=r&&t.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.3.6
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.affix"),s="object"==typeof e&&e;r||i.data("bs.affix",r=new n(this,s)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var r=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=s.top?!1:"bottom":t-i>=r+o?!1:"bottom";var a=null==this.affixed,l=a?r:s.top,u=a?o:e;return null!=n&&n>=r?"top":null!=i&&l+u>=t-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,r=i.top,s=i.bottom,o=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(s=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var a=this.getState(o,e,r,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-e-s})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_Log=function(){function t(){_classCallCheck(this,t),this.writer=window.log?window.log:console.log,this._printHello()}return _createClass(t,[{key:"isBeta",value:function(){var t=document.querySelector("body").classList;return t.contains("beta")||t.contains("alpha")}},{key:"log",value:function(t,e){var n=['color: #00babc; font-size: 12px; font-family: "Noto Sans", Helvetica, Arial, sans-serif'];(this.isBeta()||e)&&this.writer("\u2139\ufe0e [c='"+n.join(";")+"']"+t+"[c]")}},{key:"warn",value:function(t,e){var n=['color: #d9af16; font-size: 12px; font-family: "Noto Sans", Helvetica, Arial, sans-serif'];(this.isBeta()||e)&&this.writer("[c='"+n.join(";")+"']"+t+"[c]")}},{key:"err",value:function(t,e){var n=['color: #a10000; font-size: 12px; font-family: "Noto Sans", Helvetica, Arial, sans-serif'];(this.isBeta()||e)&&this.writer("[c='"+n.join(";")+"']"+t+"[c]")}},{key:"_printHello",value:function(){var t=(arguments.length<=0||void 0===arguments[0]?!1:arguments[0],"[c='color: #999; font-size: 12px']"),e="[c='color: #666; font-size: 12px; font-weight: bold']",n="[c]";this.writer(e+"Seems you like to look under the hood? Help us build better services !"+n),this.writer(t+"\ud83d\ude80 Apply to the beta access program by sending us a mail to "+n+e+"intrateam@staff.42.fr"+n+t+" or via the "+n+e+"$bocal Slack channel"+n)}}]),t}();window.logger=new _Log,/*!
	Autosize 3.0.15
	license: MIT
	http://www.jacklmoore.com/autosize
*/
function(t,e){if("function"==typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var n={exports:{}};e(n.exports,n),t.autosize=n.exports}}(this,function(t,e){"use strict";function n(t){function e(){var e=window.getComputedStyle(t,null);f=e.overflowY,"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),d="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(d)&&(d=0),r()}function n(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,f=e,h&&(t.style.overflowY=e),i()}function i(){var e=window.pageYOffset,n=document.body.scrollTop,i=t.style.height;t.style.height="auto";var r=t.scrollHeight+d;return 0===t.scrollHeight?void(t.style.height=i):(t.style.height=r+"px",p=t.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=n))}function r(){var e=t.style.height;i();var r=window.getComputedStyle(t,null);if(r.height!==t.style.height?"visible"!==f&&n("visible"):"hidden"!==f&&n("hidden"),e!==t.style.height){var s=o("autosize:resized");t.dispatchEvent(s)}}var a=void 0===arguments[1]?{}:arguments[1],l=a.setOverflowX,u=void 0===l?!0:l,c=a.setOverflowY,h=void 0===c?!0:c;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!s.has(t)){var d=null,f=null,p=t.clientWidth,g=function(){t.clientWidth!==p&&r()},m=function(e){window.removeEventListener("resize",g,!1),t.removeEventListener("input",r,!1),t.removeEventListener("keyup",r,!1),t.removeEventListener("autosize:destroy",m,!1),t.removeEventListener("autosize:update",r,!1),s["delete"](t),Object.keys(e).forEach(function(n){t.style[n]=e[n]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",m,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",r,!1),window.addEventListener("resize",g,!1),t.addEventListener("input",r,!1),t.addEventListener("autosize:update",r,!1),s.add(t),u&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),e()}}function i(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=o("autosize:destroy");t.dispatchEvent(e)}}function r(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=o("autosize:update");t.dispatchEvent(e)}}var s="function"==typeof Set?new Set:function(){var t=[];return{has:function(e){return Boolean(t.indexOf(e)>-1)},add:function(e){t.push(e)},"delete":function(e){t.splice(t.indexOf(e),1)}}}(),o=function(t){return new Event(t)};try{new Event("test")}catch(a){o=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(l=function(t){return t},l.destroy=function(t){return t},l.update=function(t){return t}):(l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t,e)}),t},l.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t}),e.exports=l});var ArrayHelper=function t(){_classCallCheck(this,t),NodeList.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Array.prototype.to_rails_params=function(t){var e=arguments.length<=1||void 0===arguments[1]?"id":arguments[1];return Array.from(this,function(n){return t+"["+e.pluralize()+"][]="+n}).join("&")}};new ArrayHelper;var BootstrapHelper=function e(){_classCallCheck(this,e),$("a[rel~=popover], .has-popover").popover({trigger:"hover"}),$("a[rel~=tooltip], .has-tooltip").tooltip(),$("[data-toggle='tooltip']").tooltip()};new BootstrapHelper;var JqueryHelper=function n(){_classCallCheck(this,n),jQuery.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],$.fn.incr=function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if($(this).length){e&&(t=-t);var n=$(this).html().trim(),i=!1;return(i=n.match(/^(\d+)\s*([\D]+)$/m))?$(this).html(i[2].pluralize(parseInt(i[1],10)+t,!0)):$(this).html(parseInt(n,10)+t)}},$.fn.decr=function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return $(this).incr(-t,e)},$.fn.reverse_state=function(t){var e=$(this).attr("data-state");return $(this).attr("data-state",{"true":"false","false":"true"}[e]),e.to_bool},$.fn.state=function(t){var e=$(this).attr("data-state");return e?e.to_bool:void 0},$.fn.inputWrapper=function(t){this.text=t,this.each(function(t,e){span=$("<span data-input-wrapper>"+this.text+"</span>"),$(e).after(span).css("text-indent",$(span).outerWidth()).css("padding",0),$(e).parent().attr("data-input-container","")})},$.rails.isCrossDomain=function(t){return!1},$.signedAjax=function(t){return t.xhrFields={withCredentials:!0},$.ajax(t)},$.fn.bindBefore=function(t,e,n){this.on(t,e),this.each(function(e){var i=$._data(this,"events")[t.split(".")[0]],r=i.pop();i.splice($.inArray(n,i),0,r)})},$.fn.bindAfter=function(t,e,n){this.on(t,e),this.each(function(e){var i=$._data(this,"events")[t.split(".")[0]],r=i.pop();i.splice($.inArray(n,i)+1,0,r)})},$.fn.bindFirst=function(t,e){this.on(t,e),this.each(function(e){var n=$._data(this,"events")[t.split(".")[0]],i=n.pop();n.splice(0,0,i)})}};new JqueryHelper,function(t,e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(function(){return e()}):t.pluralize=e()}(this,function(){function t(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}function e(t){return"string"==typeof t?new RegExp("^"+t+"$","i"):t}function n(e,n){return e===e.toUpperCase()?n.toUpperCase():e[0]===e[0].toUpperCase()?t(n):n.toLowerCase()}function i(t,e){return t.replace(/\$(\d{1,2})/g,function(t,n){return e[n]||""})}function r(t,e,r){if(!t.length||u.hasOwnProperty(t))return e;for(var s=r.length;s--;){var o=r[s];if(o[0].test(e))return e.replace(o[0],function(t,e,r){var s=i(o[1],arguments);return""===t?n(r[e-1],s):n(t,s)})}return e}function s(t,e,i){return function(s){var o=s.toLowerCase();return e.hasOwnProperty(o)?n(s,o):t.hasOwnProperty(o)?n(s,t[o]):r(o,s,i)}}function o(t,e,n){var i=1===e?o.singular(t):o.plural(t);return(n?e+" ":"")+i}var a=[],l=[],u={},c={},h={};return o.plural=s(h,c,a),o.singular=s(c,h,l),o.addPluralRule=function(t,n){a.push([e(t),n])},o.addSingularRule=function(t,n){l.push([e(t),n])},o.addUncountableRule=function(t){return"string"==typeof t?void(u[t.toLowerCase()]=!0):(o.addPluralRule(t,"$0"),void o.addSingularRule(t,"$0"))},o.addIrregularRule=function(t,e){e=e.toLowerCase(),t=t.toLowerCase(),h[t]=e,c[e]=t},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["thief","thieves"],["genie","genies"],["groove","grooves"],["pickaxe","pickaxes"],["whiskey","whiskies"]].forEach(function(t){return o.addIrregularRule(t[0],t[1])}),[[/s?$/i,"s"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|tlas|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[emjzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/(m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(t){return o.addPluralRule(t[0],t[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(?:sis|ses)$/i,"$1sis"],[/(^analy)(?:sis|ses)$/i,"$1sis"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(^[pl]|zomb|^(?:neck)?t|[aeo][lt]|cut)ies$/i,"$1ie"],[/(\b(?:mon|smil))ies$/i,"$1ey"],[/(m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|tlas|gas|(?:her|at|gr)o|ris)(?:es)?$/i,"$1"],[/(e[mn]u)s?$/i,"$1"],[/(movie|twelve)s$/i,"$1"],[/(cris|test|diagnos)(?:is|es)$/i,"$1is"],[/(alumn|syllab|octop|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(t){return o.addSingularRule(t[0],t[1])}),["advice","adulthood","agenda","aid","alcohol","ammo","athletics","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","commerce","cod","cooperation","corps","digestion","debris","diabetes","energy","equipment","elk","excretion","expertise","flounder","fun","gallows","garbage","graffiti","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","media","mews","moose","music","news","pike","plankton","pliers","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","species","staff","swine","trout","traffic","transporation","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pox$/i,/ois$/i,/deer$/i,/fish$/i,/sheep$/i,/measles$/i,/[^aeiou]ese$/i].forEach(o.addUncountableRule),o});var StringHelper=function i(){_classCallCheck(this,i),Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(){var t=arguments.length<=0||void 0===arguments[0]?42:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return pluralize(this,t,e)}};new StringHelper;var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),CallbackBase=function(){function t(){_classCallCheck(this,t);var e=this;$("body").on("click","a[data-uid], [data-uid] a",function(t){var n=void 0,i=void 0,r=void 0;$(this).is("[data-uid]")?(n=this,i=this,r=$(n).data("uid")):(n=this,i=$(n).parents("[data-uid]"),r=$(i).data("uid"));var s="click_"+r;return e.call_callback(e,s,"before",n,i),$.ajax($(n).attr("href")).success(function(t){e.call_callback(e,s,"success",n,i,t)}).error(function(t){e.call_callback(e,s,"error",n,i)}).done(function(t){e.call_callback(e,s,"done",n,i)}),t.stopPropagation(),!1})}return _createClass(t,[{key:"call_callback",value:function(t,e,n,i,r,s){"function"==typeof t[n+"_"+e]&&t[n+"_"+e](i,r,s)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function(t,e,n){for(var i=!0;i;){var r=t,s=e,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=o,i=!0,a=u=void 0}},CallbackMessage=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"before_click_star",value:function(t){$("#favorite_count").incr(1,$(t).reverse_state())}},{key:"before_click_pin",value:function(t){$(t).addClass("active")}},{key:"before_click_lock",value:function(t){$(t).addClass("active")}},{key:"before_click_upvote",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];console.log("Before !",this,$),n&&$(e).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,$(e).siblings("[data-uid=downvote]"),!1);var i=$(e).reverse_state();$(e).find("span.count").incr(1,i),$(e).siblings(".vote-summary").incr(1,i),$(e).parents(".reply-actions").length&&($(e).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),$(e).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",$(e).parents(".reply-actions").siblings(".reply-vote-summary").html()))}},{key:"before_click_downvote",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];console.log(e),n&&$(e).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,$(e).siblings("[data-uid=upvote]"),!1);var i=$(e).reverse_state();$(e).find("span.count").incr(1,i),$(e).siblings(".vote-summary").incr(1,!i),$(e).parents(".reply-actions").length&&($(e).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),$(e).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",$(e).parents(".reply-actions").siblings(".reply-vote-summary").html()))}},{key:"before_click_trollvote",value:function(t,e){$(e).find("span.count").incr(1,$(e).reverse_state())}},{key:"before_click_problem",value:function(t,e){$(e).find("span.count").incr(1,$(e).reverse_state())}},{key:"success_click_upvote",value:function(t,e,n){$(e).find("span.count").html(n.upvote_count),$(e).siblings(".vote-summary").length&&$(e).siblings(".vote-summary").html(n.totalvote_count),$(e).parents(".reply-actions").length&&($(e).parents(".reply-actions").siblings(".reply-vote-summary").html(n.totalvote_count),$(e).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",$(e).parents(".reply-actions").siblings(".reply-vote-summary").html())),$(e).siblings("[data-uid=downvote]").find("span.count").html(n.downvote_count)}},{key:"success_click_downvote",value:function(t,e,n){$(e).find("span.count").html(n.downvote_count),$(e).siblings(".vote-summary").length&&$(e).siblings(".vote-summary").html(n.totalvote_count),$(e).parents(".reply-actions").length&&($(e).parents(".reply-actions").siblings(".reply-vote-summary").html(n.totalvote_count),$(e).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",$(e).parents(".reply-actions").siblings(".reply-vote-summary").html())),$(e).siblings("[data-uid=upvote]").find("span.count").html(n.upvote_count)}},{key:"success_click_trollvote",value:function(t,e,n){$(e).find("span.count").html(n.kind_count)}},{key:"success_click_problem",value:function(t,e,n){$(e).find("span.count").html(n.kind_count)}},{key:"success_click_pin",value:function(t,e,n){return"OK"==n&&$(t).reverse_state(),$(t).state()?$(t).addClass("active"):$(t).removeClass("active")}},{key:"success_click_lock",value:function(t,e,n){return"OK"==n&&$(t).reverse_state(),$(t).state()?$(t).addClass("active icon-lock").removeClass("icon-unlock"):$(t).removeClass("active icon-lock").addClass("icon-unlock")}},{key:"success_click_star",value:function(t,e,n){if("Topic"==n.kind)return n.starred?$(t).html("Unwatch"):$(t).html("Watch");if(n.starred){var i=$(t).parent().clone();i.attr("data-tag-kind","starred"),$("[data-tag-kind='starred']").last().after(i)}else $("[data-tag-kind='starred'][data-tag-name='"+n.name+"']").remove()}}]),e}(CallbackBase);$(function(t){$("ul.pagination li a[href*=messages]").each(function(){$(this).attr("href",$(this).attr("href").replace("messages/timed","messages/pagination/timed"))})});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Smart=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,t);var n={selector:"data-smart-modal",url:"data-url",container:"data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"};this.opts=_.extend(n,e),this._bind()}return _createClass(t,[{key:"_bind",value:function(){var t=this,e=function(t){return"["+t+"]"};$(e(this.opts.selector)).each(function(e,n){var i=$(n).attr(t.opts.url),r=$(n).attr(t.opts.container)||".container-item",s=$(n).attr(t.opts.titleSelector),o=$(n).attr(t.opts.footerSelector);i?$(n).click(function(){$.signedAjax({url:i,method:"GET"}).done(function(e){var n=$(e).find(r).html(),i=s?$(e).find(s).html():!1,a=o?$(e).find(o).html():!1;$(t.opts.modal).find(".modal-body").html(n),i?$(t.opts.modal).find(".modal-header").html(i).show():$(t.opts.modal).find(".modal-header").html("").hide(),a?$(t.opts.modal).find(".modal-footer").html(a).show():$(t.opts.modal).find(".modal-footer").html("").hide(),$(t.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",n)})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ModalHelper=function(){function t(){var e=this;_classCallCheck(this,t);var n=this;$("input[data-modal-id]").on("click",function(t){var i=!0,r=$(e).data("condition");if(r&&require(r)){var s=require($(e).data("condition"));s.modalCondition&&(i=s.modalCondition())}var o=$(".modal[data-modal-id='"+$(e).data("modal-id")+"']");n._initModal(o,$(e).data("confirmation")),i&&(t.preventDefault(),o.modal("show"))})}return _createClass(t,[{key:"_initModal",value:function(t,e){e&&t.one("click",".btn-primary",function(t){var n=require(e);n.modalConfirmation&&smodule.modalConfirmation()})}}]),t}();new ModalHelper;var SimpleFormArray=function r(){var t=this;_classCallCheck(this,r),$("input.array, textarea.array").after('<a href="javascript:;" class="input_remove_elem">x</a>'),_.each($(".form-group:has(input.array), .form-group:has(textarea.array)"),function(e){$(e).find("input.array + a.input_remove_elem:last, textarea.array + a.input_remove_elem:last").after('<a class="input_add_elem" href="javascript:;">+</a>');var n=$(e).find("input.array:last, textarea.array:last")[0].cloneNode();$(e).find("a.input_add_elem").on("click",function(){var e=t.parentElement.insertBefore(n.cloneNode(),t);$(e).after('<a href="javascript:;" class="input_remove_elem">x</a>')})}),$(".form-group").on("click","a.input_remove_elem",function(e){t.previousSibling.remove(),t.remove()})};new SimpleFormArray,/*! version : 4.7.14
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
/*
 The MIT License (MIT)

 Copyright (c) 2015 Jonathan Peterson

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
function(t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";t(jQuery,moment)}}(function(t,e){"use strict";if(!e)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,i){var r,s,o,a,l,u={},c=e().startOf("d"),h=c.clone(),d=!0,f=!1,p=!1,g=0,m=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],v=["days","months","years"],_=["top","bottom","auto"],y=["left","right","auto"],b=["default","top","bottom"],w={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},x={},k=function(t){if("string"!=typeof t||t.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(t){case"y":return-1!==o.indexOf("Y");case"M":return-1!==o.indexOf("M");case"d":return-1!==o.toLowerCase().indexOf("d");case"h":case"H":return-1!==o.toLowerCase().indexOf("h");case"m":return-1!==o.indexOf("m");case"s":return-1!==o.indexOf("s");default:return!1}},C=function(){return k("h")||k("m")||k("s")},S=function(){return k("y")||k("M")||k("d")},T=function(){var e=t("<thead>").append(t("<tr>").append(t("<th>").addClass("prev").attr("data-action","previous").append(t("<span>").addClass(i.icons.previous))).append(t("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",i.calendarWeeks?"6":"5")).append(t("<th>").addClass("next").attr("data-action","next").append(t("<span>").addClass(i.icons.next)))),n=t("<tbody>").append(t("<tr>").append(t("<td>").attr("colspan",i.calendarWeeks?"8":"7")));return[t("<div>").addClass("datepicker-days").append(t("<table>").addClass("table-condensed").append(e).append(t("<tbody>"))),t("<div>").addClass("datepicker-months").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone())),t("<div>").addClass("datepicker-years").append(t("<table>").addClass("table-condensed").append(e.clone()).append(n.clone()))]},$=function(){var e=t("<tr>"),n=t("<tr>"),r=t("<tr>");return k("h")&&(e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementHours").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementHours").append(t("<span>").addClass(i.icons.down))))),k("m")&&(k("h")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),r.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementMinutes").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementMinutes").append(t("<span>").addClass(i.icons.down))))),k("s")&&(k("m")&&(e.append(t("<td>").addClass("separator")),n.append(t("<td>").addClass("separator").html(":")),r.append(t("<td>").addClass("separator"))),e.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementSeconds").append(t("<span>").addClass(i.icons.up)))),n.append(t("<td>").append(t("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),r.append(t("<td>").append(t("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementSeconds").append(t("<span>").addClass(i.icons.down))))),s||(e.append(t("<td>").addClass("separator")),n.append(t("<td>").append(t("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),r.append(t("<td>").addClass("separator"))),t("<div>").addClass("timepicker-picker").append(t("<table>").addClass("table-condensed").append([e,n,r]))},E=function(){var e=t("<div>").addClass("timepicker-hours").append(t("<table>").addClass("table-condensed")),n=t("<div>").addClass("timepicker-minutes").append(t("<table>").addClass("table-condensed")),i=t("<div>").addClass("timepicker-seconds").append(t("<table>").addClass("table-condensed")),r=[$()];return k("h")&&r.push(e),k("m")&&r.push(n),k("s")&&r.push(i),r},D=function(){var e=[];return i.showTodayButton&&e.push(t("<td>").append(t("<a>").attr("data-action","today").append(t("<span>").addClass(i.icons.today)))),!i.sideBySide&&S()&&C()&&e.push(t("<td>").append(t("<a>").attr("data-action","togglePicker").append(t("<span>").addClass(i.icons.time)))),i.showClear&&e.push(t("<td>").append(t("<a>").attr("data-action","clear").append(t("<span>").addClass(i.icons.clear)))),i.showClose&&e.push(t("<td>").append(t("<a>").attr("data-action","close").append(t("<span>").addClass(i.icons.close)))),t("<table>").addClass("table-condensed").append(t("<tbody>").append(t("<tr>").append(e)))},j=function(){var e=t("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=t("<div>").addClass("datepicker").append(T()),r=t("<div>").addClass("timepicker").append(E()),o=t("<ul>").addClass("list-unstyled"),a=t("<li>").addClass("picker-switch"+(i.collapse?" accordion-toggle":"")).append(D());return i.inline&&e.removeClass("dropdown-menu"),s&&e.addClass("usetwentyfour"),i.sideBySide&&S()&&C()?(e.addClass("timepicker-sbs"),e.append(t("<div>").addClass("row").append(n.addClass("col-sm-6")).append(r.addClass("col-sm-6"))),e.append(a),e):("top"===i.toolbarPlacement&&o.append(a),S()&&o.append(t("<li>").addClass(i.collapse&&C()?"collapse in":"").append(n)),"default"===i.toolbarPlacement&&o.append(a),C()&&o.append(t("<li>").addClass(i.collapse&&S()?"collapse":"").append(r)),"bottom"===i.toolbarPlacement&&o.append(a),e.append(o))},A=function(){var e,r={};return e=n.is("input")||i.inline?n.data():n.find("input").data(),e.dateOptions&&e.dateOptions instanceof Object&&(r=t.extend(!0,r,e.dateOptions)),t.each(i,function(t){var n="date"+t.charAt(0).toUpperCase()+t.slice(1);void 0!==e[n]&&(r[t]=e[n])}),r},P=function(){var e,r=(f||n).position(),s=(f||n).offset(),o=i.widgetPositioning.vertical,a=i.widgetPositioning.horizontal;if(i.widgetParent)e=i.widgetParent.append(p);else if(n.is("input"))e=n.parent().append(p);else{if(i.inline)return void(e=n.append(p));e=n,n.children().first().after(p)}if("auto"===o&&(o=s.top+1.5*p.height()>=t(window).height()+t(window).scrollTop()&&p.height()+n.outerHeight()<s.top?"top":"bottom"),"auto"===a&&(a=e.width()<s.left+p.outerWidth()/2&&s.left+p.outerWidth()>t(window).width()?"right":"left"),"top"===o?p.addClass("top").removeClass("bottom"):p.addClass("bottom").removeClass("top"),"right"===a?p.addClass("pull-right"):p.removeClass("pull-right"),"relative"!==e.css("position")&&(e=e.parents().filter(function(){return"relative"===t(this).css("position")}).first()),0===e.length)throw new Error("datetimepicker component should be placed within a relative positioned container");p.css({top:"top"===o?"auto":r.top+n.outerHeight(),bottom:"top"===o?r.top+n.outerHeight():"auto",left:"left"===a?e.css("padding-left"):"auto",right:"left"===a?"auto":e.width()-n.outerWidth()})},M=function(t){"dp.change"===t.type&&(t.date&&t.date.isSame(t.oldDate)||!t.date&&!t.oldDate)||n.trigger(t)},O=function(t){p&&(t&&(l=Math.max(g,Math.min(2,l+t))),p.find(".datepicker > div").hide().filter(".datepicker-"+m[l].clsName).show())},I=function(){var e=t("<tr>"),n=h.clone().startOf("w");for(i.calendarWeeks===!0&&e.append(t("<th>").addClass("cw").text("#"));n.isBefore(h.clone().endOf("w"));)e.append(t("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");p.find(".datepicker-days thead").append(e)},N=function(t){return i.disabledDates[t.format("YYYY-MM-DD")]===!0},L=function(t){return i.enabledDates[t.format("YYYY-MM-DD")]===!0},R=function(t,e){return t.isValid()?i.disabledDates&&N(t)&&"M"!==e?!1:i.enabledDates&&!L(t)&&"M"!==e?!1:i.minDate&&t.isBefore(i.minDate,e)?!1:i.maxDate&&t.isAfter(i.maxDate,e)?!1:"d"===e&&-1!==i.daysOfWeekDisabled.indexOf(t.day())?!1:!0:!1},z=function(){for(var e=[],n=h.clone().startOf("y").hour(12);n.isSame(h,"y");)e.push(t("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");p.find(".datepicker-months td").empty().append(e)},F=function(){var e=p.find(".datepicker-months"),n=e.find("th"),i=e.find("tbody").find("span");e.find(".disabled").removeClass("disabled"),R(h.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(h.year()),R(h.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),i.removeClass("active"),c.isSame(h,"y")&&i.eq(c.month()).addClass("active"),i.each(function(e){R(h.clone().month(e),"M")||t(this).addClass("disabled")})},H=function(){var t=p.find(".datepicker-years"),e=t.find("th"),n=h.clone().subtract(5,"y"),r=h.clone().add(6,"y"),s="";for(t.find(".disabled").removeClass("disabled"),i.minDate&&i.minDate.isAfter(n,"y")&&e.eq(0).addClass("disabled"),e.eq(1).text(n.year()+"-"+r.year()),i.maxDate&&i.maxDate.isBefore(r,"y")&&e.eq(2).addClass("disabled");!n.isAfter(r,"y");)s+='<span data-action="selectYear" class="year'+(n.isSame(c,"y")?" active":"")+(R(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");t.find("td").html(s)},B=function(){var n,r,s,o=p.find(".datepicker-days"),a=o.find("th"),l=[];if(S()){for(o.find(".disabled").removeClass("disabled"),a.eq(1).text(h.format(i.dayViewHeaderFormat)),R(h.clone().subtract(1,"M"),"M")||a.eq(0).addClass("disabled"),R(h.clone().add(1,"M"),"M")||a.eq(2).addClass("disabled"),n=h.clone().startOf("M").startOf("week");!h.clone().endOf("M").endOf("w").isBefore(n,"d");)0===n.weekday()&&(r=t("<tr>"),i.calendarWeeks&&r.append('<td class="cw">'+n.week()+"</td>"),l.push(r)),s="",n.isBefore(h,"M")&&(s+=" old"),n.isAfter(h,"M")&&(s+=" new"),n.isSame(c,"d")&&!d&&(s+=" active"),R(n,"d")||(s+=" disabled"),n.isSame(e(),"d")&&(s+=" today"),(0===n.day()||6===n.day())&&(s+=" weekend"),r.append('<td data-action="selectDay" class="day'+s+'">'+n.date()+"</td>"),n.add(1,"d");o.find("tbody").empty().append(l),F(),H()}},q=function(){var e=p.find(".timepicker-hours table"),n=h.clone().startOf("d"),i=[],r=t("<tr>");for(h.hour()>11&&!s&&n.hour(12);n.isSame(h,"d")&&(s||h.hour()<12&&n.hour()<12||h.hour()>11);)n.hour()%4===0&&(r=t("<tr>"),i.push(r)),r.append('<td data-action="selectHour" class="hour'+(R(n,"h")?"":" disabled")+'">'+n.format(s?"HH":"hh")+"</td>"),n.add(1,"h");e.empty().append(i)},W=function(){for(var e=p.find(".timepicker-minutes table"),n=h.clone().startOf("h"),r=[],s=t("<tr>"),o=1===i.stepping?5:i.stepping;h.isSame(n,"h");)n.minute()%(4*o)===0&&(s=t("<tr>"),r.push(s)),s.append('<td data-action="selectMinute" class="minute'+(R(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(o,"m");e.empty().append(r)},Y=function(){for(var e=p.find(".timepicker-seconds table"),n=h.clone().startOf("m"),i=[],r=t("<tr>");h.isSame(n,"m");)n.second()%20===0&&(r=t("<tr>"),i.push(r)),r.append('<td data-action="selectSecond" class="second'+(R(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");e.empty().append(i)},G=function(){var t=p.find(".timepicker span[data-time-component]");s||p.find(".timepicker [data-action=togglePeriod]").text(c.format("A")),t.filter("[data-time-component=hours]").text(c.format(s?"HH":"hh")),t.filter("[data-time-component=minutes]").text(c.format("mm")),t.filter("[data-time-component=seconds]").text(c.format("ss")),q(),W(),Y()},V=function(){p&&(B(),G())},U=function(t){var e=d?null:c;return t?(t=t.clone().locale(i.locale),1!==i.stepping&&t.minutes(Math.round(t.minutes()/i.stepping)*i.stepping%60).seconds(0),void(R(t)?(c=t,h=c.clone(),r.val(c.format(o)),n.data("date",c.format(o)),V(),d=!1,M({type:"dp.change",date:c.clone(),oldDate:e})):(i.keepInvalid||r.val(d?"":c.format(o)),M({type:"dp.error",date:t})))):(d=!0,r.val(""),n.data("date",""),M({type:"dp.change",date:null,oldDate:e}),void V())},Z=function(){var e=!1;return p?(p.find(".collapse").each(function(){var n=t(this).data("collapse");return n&&n.transitioning?(e=!0,!1):!0}),e?u:(f&&f.hasClass("btn")&&f.toggleClass("active"),p.hide(),t(window).off("resize",P),p.off("click","[data-action]"),p.off("mousedown",!1),p.remove(),p=!1,M({type:"dp.hide",date:c.clone()}),u)):u},X=function(){U(null)},Q={next:function(){h.add(m[l].navStep,m[l].navFnc),B()},previous:function(){h.subtract(m[l].navStep,m[l].navFnc),B()},pickerSwitch:function(){O(1)},selectMonth:function(e){var n=t(e.target).closest("tbody").find("span").index(t(e.target));h.month(n),l===g?(U(c.clone().year(h.year()).month(h.month())),i.inline||Z()):(O(-1),B())},selectYear:function(e){var n=parseInt(t(e.target).text(),10)||0;h.year(n),l===g?(U(c.clone().year(h.year())),i.inline||Z()):(O(-1),B())},selectDay:function(e){var n=h.clone();t(e.target).is(".old")&&n.subtract(1,"M"),t(e.target).is(".new")&&n.add(1,"M"),U(n.date(parseInt(t(e.target).text(),10))),C()||i.keepOpen||i.inline||Z()},incrementHours:function(){U(c.clone().add(1,"h"))},incrementMinutes:function(){U(c.clone().add(i.stepping,"m"))},incrementSeconds:function(){U(c.clone().add(1,"s"))},decrementHours:function(){U(c.clone().subtract(1,"h"))},decrementMinutes:function(){U(c.clone().subtract(i.stepping,"m"))},decrementSeconds:function(){U(c.clone().subtract(1,"s"))},togglePeriod:function(){U(c.clone().add(c.hours()>=12?-12:12,"h"))},togglePicker:function(e){var n,r=t(e.target),s=r.closest("ul"),o=s.find(".in"),a=s.find(".collapse:not(.in)");if(o&&o.length){if(n=o.data("collapse"),n&&n.transitioning)return;o.collapse?(o.collapse("hide"),a.collapse("show")):(o.removeClass("in"),a.addClass("in")),r.is("span")?r.toggleClass(i.icons.time+" "+i.icons.date):r.find("span").toggleClass(i.icons.time+" "+i.icons.date)}},showPicker:function(){p.find(".timepicker > div:not(.timepicker-picker)").hide(),p.find(".timepicker .timepicker-picker").show()},showHours:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-hours").show()},showMinutes:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){p.find(".timepicker .timepicker-picker").hide(),p.find(".timepicker .timepicker-seconds").show()},selectHour:function(e){var n=parseInt(t(e.target).text(),10);s||(c.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),U(c.clone().hours(n)),Q.showPicker.call(u)},selectMinute:function(e){U(c.clone().minutes(parseInt(t(e.target).text(),10))),Q.showPicker.call(u)},selectSecond:function(e){U(c.clone().seconds(parseInt(t(e.target).text(),10))),Q.showPicker.call(u)},clear:X,today:function(){U(e())},close:Z},K=function(e){return t(e.currentTarget).is(".disabled")?!1:(Q[t(e.currentTarget).data("action")].apply(u,arguments),!1)},J=function(){var n,s={year:function(t){return t.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(t){return t.date(1).hours(0).seconds(0).minutes(0)},day:function(t){return t.hours(0).seconds(0).minutes(0)},hour:function(t){return t.seconds(0).minutes(0)},minute:function(t){return t.seconds(0)}};return r.prop("disabled")||!i.ignoreReadonly&&r.prop("readonly")||p?u:(i.useCurrent&&d&&(r.is("input")&&0===r.val().trim().length||i.inline)&&(n=e(),"string"==typeof i.useCurrent&&(n=s[i.useCurrent](n)),U(n)),p=j(),I(),z(),p.find(".timepicker-hours").hide(),p.find(".timepicker-minutes").hide(),p.find(".timepicker-seconds").hide(),V(),O(),t(window).on("resize",P),p.on("click","[data-action]",K),p.on("mousedown",!1),f&&f.hasClass("btn")&&f.toggleClass("active"),p.show(),P(),r.is(":focus")||r.focus(),M({type:"dp.show"}),u)},tt=function(){return p?Z():J()},et=function(t){return t=e.isMoment(t)||t instanceof Date?e(t):e(t,a,i.useStrict),t.locale(i.locale),t},nt=function(t){var e,n,r,s,o=null,a=[],l={},c=t.which,h="p";x[c]=h;for(e in x)x.hasOwnProperty(e)&&x[e]===h&&(a.push(e),parseInt(e,10)!==c&&(l[e]=!0));for(e in i.keyBinds)if(i.keyBinds.hasOwnProperty(e)&&"function"==typeof i.keyBinds[e]&&(r=e.split(" "),r.length===a.length&&w[c]===r[r.length-1])){for(s=!0,n=r.length-2;n>=0;n--)if(!(w[r[n]]in l)){s=!1;break}if(s){o=i.keyBinds[e];break}}o&&(o.call(u,p),t.stopPropagation(),t.preventDefault())},it=function(t){x[t.which]="r",t.stopPropagation(),t.preventDefault()},rt=function(e){var n=t(e.target).val().trim(),i=n?et(n):null;return U(i),e.stopImmediatePropagation(),!1},st=function(){r.on({change:rt,blur:i.debug?"":Z,keydown:nt,keyup:it}),n.is("input")?r.on({focus:J}):f&&(f.on("click",tt),f.on("mousedown",!1))},ot=function(){r.off({change:rt,blur:Z,keydown:nt,keyup:it}),n.is("input")?r.off({focus:J}):f&&(f.off("click",tt),f.off("mousedown",!1))},at=function(e){var n={};return t.each(e,function(){var t=et(this);t.isValid()&&(n[t.format("YYYY-MM-DD")]=!0)}),Object.keys(n).length?n:!1},lt=function(){var t=i.format||"L LT";o=t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){var e=c.localeData().longDateFormat(t)||t;return e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(t){return c.localeData().longDateFormat(t)||t})}),a=i.extraFormats?i.extraFormats.slice():[],a.indexOf(t)<0&&a.indexOf(o)<0&&a.push(o),s=o.toLowerCase().indexOf("a")<1&&o.indexOf("h")<1,k("y")&&(g=2),k("M")&&(g=1),k("d")&&(g=0),l=Math.max(g,l),d||U(c)};if(u.destroy=function(){Z(),ot(),n.removeData("DateTimePicker"),n.removeData("date")},u.toggle=tt,u.show=J,u.hide=Z,u.disable=function(){return Z(),f&&f.hasClass("btn")&&f.addClass("disabled"),r.prop("disabled",!0),u},u.enable=function(){return f&&f.hasClass("btn")&&f.removeClass("disabled"),r.prop("disabled",!1),u},u.ignoreReadonly=function(t){if(0===arguments.length)return i.ignoreReadonly;if("boolean"!=typeof t)throw new TypeError("ignoreReadonly () expects a boolean parameter");return i.ignoreReadonly=t,u},u.options=function(e){if(0===arguments.length)return t.extend(!0,{},i);if(!(e instanceof Object))throw new TypeError("options() options parameter should be an object");return t.extend(!0,i,e),t.each(i,function(t,e){if(void 0===u[t])throw new TypeError("option "+t+" is not recognized!");u[t](e)}),u},u.date=function(t){if(0===arguments.length)return d?null:c.clone();if(!(null===t||"string"==typeof t||e.isMoment(t)||t instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return U(null===t?null:et(t)),u},u.format=function(t){if(0===arguments.length)return i.format;if("string"!=typeof t&&("boolean"!=typeof t||t!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+t);return i.format=t,o&&lt(),u},u.dayViewHeaderFormat=function(t){if(0===arguments.length)return i.dayViewHeaderFormat;if("string"!=typeof t)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return i.dayViewHeaderFormat=t,u},u.extraFormats=function(t){if(0===arguments.length)return i.extraFormats;if(t!==!1&&!(t instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return i.extraFormats=t,a&&lt(),u},u.disabledDates=function(e){if(0===arguments.length)return i.disabledDates?t.extend({},i.disabledDates):i.disabledDates;if(!e)return i.disabledDates=!1,V(),u;if(!(e instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return i.disabledDates=at(e),i.enabledDates=!1,V(),u},u.enabledDates=function(e){if(0===arguments.length)return i.enabledDates?t.extend({},i.enabledDates):i.enabledDates;if(!e)return i.enabledDates=!1,V(),u;if(!(e instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return i.enabledDates=at(e),i.disabledDates=!1,V(),u},u.daysOfWeekDisabled=function(t){if(0===arguments.length)return i.daysOfWeekDisabled.splice(0);if(!(t instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return i.daysOfWeekDisabled=t.reduce(function(t,e){return e=parseInt(e,10),e>6||0>e||isNaN(e)?t:(-1===t.indexOf(e)&&t.push(e),t)},[]).sort(),V(),u},u.maxDate=function(t){if(0===arguments.length)return i.maxDate?i.maxDate.clone():i.maxDate;if("boolean"==typeof t&&t===!1)return i.maxDate=!1,V(),u;"string"==typeof t&&("now"===t||"moment"===t)&&(t=e());var n=et(t);if(!n.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+t);if(i.minDate&&n.isBefore(i.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+n.format(o));return i.maxDate=n,i.maxDate.isBefore(t)&&U(i.maxDate),h.isAfter(n)&&(h=n.clone()),V(),u},u.minDate=function(t){if(0===arguments.length)return i.minDate?i.minDate.clone():i.minDate;if("boolean"==typeof t&&t===!1)return i.minDate=!1,V(),u;"string"==typeof t&&("now"===t||"moment"===t)&&(t=e());var n=et(t);if(!n.isValid())throw new TypeError("minDate() Could not parse date parameter: "+t);if(i.maxDate&&n.isAfter(i.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+n.format(o));return i.minDate=n,i.minDate.isAfter(t)&&U(i.minDate),h.isBefore(n)&&(h=n.clone()),V(),u},u.defaultDate=function(t){if(0===arguments.length)return i.defaultDate?i.defaultDate.clone():i.defaultDate;if(!t)return i.defaultDate=!1,u;"string"==typeof t&&("now"===t||"moment"===t)&&(t=e());var n=et(t);if(!n.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+t);if(!R(n))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return i.defaultDate=n,i.defaultDate&&""===r.val().trim()&&void 0===r.attr("placeholder")&&U(i.defaultDate),u},u.locale=function(t){if(0===arguments.length)return i.locale;if(!e.localeData(t))throw new TypeError("locale() locale "+t+" is not loaded from moment locales!");return i.locale=t,c.locale(i.locale),h.locale(i.locale),o&&lt(),p&&(Z(),J()),u},u.stepping=function(t){return 0===arguments.length?i.stepping:(t=parseInt(t,10),(isNaN(t)||1>t)&&(t=1),i.stepping=t,u)},u.useCurrent=function(t){var e=["year","month","day","hour","minute"];if(0===arguments.length)return i.useCurrent;if("boolean"!=typeof t&&"string"!=typeof t)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof t&&-1===e.indexOf(t.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+e.join(", "));return i.useCurrent=t,u},u.collapse=function(t){if(0===arguments.length)return i.collapse;if("boolean"!=typeof t)throw new TypeError("collapse() expects a boolean parameter");return i.collapse===t?u:(i.collapse=t,p&&(Z(),J()),u)},u.icons=function(e){if(0===arguments.length)return t.extend({},i.icons);if(!(e instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return t.extend(i.icons,e),p&&(Z(),J()),u},u.useStrict=function(t){if(0===arguments.length)return i.useStrict;if("boolean"!=typeof t)throw new TypeError("useStrict() expects a boolean parameter");return i.useStrict=t,u},u.sideBySide=function(t){if(0===arguments.length)return i.sideBySide;if("boolean"!=typeof t)throw new TypeError("sideBySide() expects a boolean parameter");return i.sideBySide=t,p&&(Z(),J()),u},u.viewMode=function(t){if(0===arguments.length)return i.viewMode;if("string"!=typeof t)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(t))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return i.viewMode=t,l=Math.max(v.indexOf(t),g),O(),u},u.toolbarPlacement=function(t){if(0===arguments.length)return i.toolbarPlacement;if("string"!=typeof t)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===b.indexOf(t))throw new TypeError("toolbarPlacement() parameter must be one of ("+b.join(", ")+") value");return i.toolbarPlacement=t,p&&(Z(),J()),u},u.widgetPositioning=function(e){if(0===arguments.length)return t.extend({},i.widgetPositioning);if("[object Object]"!=={}.toString.call(e))throw new TypeError("widgetPositioning() expects an object variable");if(e.horizontal){if("string"!=typeof e.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(e.horizontal=e.horizontal.toLowerCase(),-1===y.indexOf(e.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+y.join(", ")+")");i.widgetPositioning.horizontal=e.horizontal}if(e.vertical){if("string"!=typeof e.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(e.vertical=e.vertical.toLowerCase(),-1===_.indexOf(e.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+_.join(", ")+")");i.widgetPositioning.vertical=e.vertical}return V(),u},u.calendarWeeks=function(t){if(0===arguments.length)return i.calendarWeeks;if("boolean"!=typeof t)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return i.calendarWeeks=t,V(),u},u.showTodayButton=function(t){if(0===arguments.length)return i.showTodayButton;if("boolean"!=typeof t)throw new TypeError("showTodayButton() expects a boolean parameter");return i.showTodayButton=t,p&&(Z(),J()),u},u.showClear=function(t){if(0===arguments.length)return i.showClear;if("boolean"!=typeof t)throw new TypeError("showClear() expects a boolean parameter");return i.showClear=t,p&&(Z(),J()),u},u.widgetParent=function(e){if(0===arguments.length)return i.widgetParent;if("string"==typeof e&&(e=t(e)),null!==e&&"string"!=typeof e&&!(e instanceof t))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return i.widgetParent=e,p&&(Z(),J()),u},u.keepOpen=function(t){if(0===arguments.length)return i.keepOpen;if("boolean"!=typeof t)throw new TypeError("keepOpen() expects a boolean parameter");return i.keepOpen=t,u},u.inline=function(t){if(0===arguments.length)return i.inline;if("boolean"!=typeof t)throw new TypeError("inline() expects a boolean parameter");return i.inline=t,u},u.clear=function(){return X(),u},u.keyBinds=function(t){return i.keyBinds=t,u},u.debug=function(t){if("boolean"!=typeof t)throw new TypeError("debug() expects a boolean parameter");return i.debug=t,u},u.showClose=function(t){if(0===arguments.length)return i.showClose;if("boolean"!=typeof t)throw new TypeError("showClose() expects a boolean parameter");return i.showClose=t,u},u.keepInvalid=function(t){if(0===arguments.length)return i.keepInvalid;if("boolean"!=typeof t)throw new TypeError("keepInvalid() expects a boolean parameter");return i.keepInvalid=t,u},u.datepickerInput=function(t){if(0===arguments.length)return i.datepickerInput;if("string"!=typeof t)throw new TypeError("datepickerInput() expects a string parameter");return i.datepickerInput=t,u},n.is("input"))r=n;else if(r=n.find(i.datepickerInput),0===r.size())r=n.find("input");else if(!r.is("input"))throw new Error('CSS class "'+i.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(f=0===n.find(".datepickerbutton").size()?n.find('[class^="input-group-"]'):n.find(".datepickerbutton")),!i.inline&&!r.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return t.extend(!0,i,A()),u.options(i),lt(),st(),r.prop("disabled")&&u.disable(),r.is("input")&&0!==r.val().trim().length?U(et(r.val().trim())):i.defaultDate&&void 0===r.attr("placeholder")&&U(i.defaultDate),i.inline&&J(),u};t.fn.datetimepicker=function(e){return this.each(function(){var i=t(this);i.data("DateTimePicker")||(e=t.extend(!0,{},t.fn.datetimepicker.defaults,e),i.data("DateTimePicker",n(i,e)))})},t.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:e.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")?this.date(n.clone().subtract(7,"d")):this.date(n.clone().add(1,"m"))}},down:function(t){if(!t)return void this.show();var n=this.date()||e();t.find(".datepicker").is(":visible")?this.date(n.clone().add(7,"d")):this.date(n.clone().subtract(1,"m"))},"control up":function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")?this.date(n.clone().subtract(1,"y")):this.date(n.clone().add(1,"h"))}},"control down":function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")?this.date(n.clone().add(1,"y")):this.date(n.clone().subtract(1,"h"))}},left:function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(n.clone().subtract(1,"d"))}},right:function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(n.clone().add(1,"d"))}},pageUp:function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(n.clone().subtract(1,"M"))}},pageDown:function(t){if(t){var n=this.date()||e();t.find(".datepicker").is(":visible")&&this.date(n.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(t){t.find(".timepicker").is(":visible")&&t.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(e())},"delete":function(){this.clear()}},debug:!1}});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),SimpleFormDatePicker=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,t),this.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},this.opts=_.merge(this.DEFAULTS,e),$.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),$(document).on("nested:fieldAdded",this._bindAll.bind(this)),$(document).on("cocoon:after-insert",this._bindAll.bind(this)))}return _createClass(t,[{key:"_bindAll",value:function(){this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")}},{key:"_setDefaults",value:function(){_.merge($.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})}},{key:"_bindDateTimePicker",value:function(t){var e=this;$(t).each(function(t,n){$(n).datetimepicker(e._computeOptions(n))})}},{key:"_bindDatePicker",value:function(t){var e=this;$(t).each(function(t,n){$(n).datetimepicker(e._computeOptions(n))})}},{key:"_computeOptions",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if($(t).attr(this.opts.excludeDateAttr)){var n=$.parseJSON($(t).attr(this.opts.excludeDateAttr));e.disabledDates=_.map(n,function(t){return moment(t)})}if($(t).attr(this.opts.includeDateAttr)){var i=$.parseJSON($(t).attr(this.opts.includeDateAttr));e.enabledDates=_.map(i,function(t){return moment(t)})}return $(t).attr(this.opts.minDateAttr)&&(e.minDate=moment($(t).attr(this.opts.minDateAttr))),$(t).attr(this.opts.maxDateAttr)&&(e.maxDate=moment($(t).attr(this.opts.maxDateAttr))),void 0!=$(t).attr(this.opts.noWeekends)&&(e.daysOfWeekDisabled=[0,6]),e}}]),t}();(function(){var t,e,n,i,r,s={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,r,s,o;
for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),title:t.title?t.title:void 0,children:0,disabled:t.disabled,classes:t.className}),s=t.childNodes,o=[],i=0,r=s.length;r>i;i++)n=s[i],o.push(this.add_option(n,e,t.disabled));return o},t.prototype.add_option=function(t,e,n){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,title:t.title?t.title:void 0,selected:t.selected,disabled:n===!0?n:t.disabled,group_array_index:e,group_label:null!=e?this.parsed[e].label:null,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,n;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,n,r,s,o;for(n=new i,o=t.childNodes,r=0,s=o.length;s>r;r++)e=o[r],n.add_node(e);return n.parsed},e=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.choice_label=function(t){return this.include_group_label_in_selected&&null!=t.group_label?"<b class='group-name'>"+t.group_label+"</b>"+t.html:t.html},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},t.prototype.results_option_build=function(t){var e,n,i,r,s,o,a;for(e="",r=0,a=this.results_data,s=0,o=a.length;o>s&&(n=a[s],i="",i=n.group?this.result_add_group(n):this.result_add_option(n),""!==i&&(r++,e+=i),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(n))),!(r>=this.max_shown_results));s++);return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,t.title&&(n.title=t.title),this.outerHTML(n)):""},t.prototype.result_add_group=function(t){var e,n;return(t.search_match||t.group_match)&&t.active_options>0?(e=[],e.push("group-result"),t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.innerHTML=t.search_text,t.title&&(n.title=t.title),this.outerHTML(n)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,n,i,r;for(i=this.results_data,r=[],e=0,n=i.length;n>e;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,i,r,s,o,a,l,u,c,h;for(this.no_results_clear(),i=0,s=this.get_search_text(),t=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),n=this.get_search_regex(t),h=this.results_data,u=0,c=h.length;c>u;u++)e=h[u],e.search_match=!1,r=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(r=this.results_data[e.group_array_index],0===r.active_options&&r.search_match&&(i+=1),r.active_options+=1),e.search_text=e.group?e.label:e.html,(!e.group||this.group_search)&&(e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(i+=1),e.search_match?(s.length&&(o=e.search_text.search(l),a=e.search_text.substr(0,o+s.length)+"</em>"+e.search_text.substr(o+s.length),e.search_text=a.substr(0,o)+"<em>"+a.substr(o)),null!=r&&(r.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>i&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var n,i,r,s;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,s=i.length;s>r;r++)if(n=i[r],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,n=i.length;n>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(t){var e=this;return setTimeout(function(){return e.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:/IEMobile/i.test(window.navigator.userAgent)?!1:/Windows Phone/i.test(window.navigator.userAgent)?!1:/BlackBerry/i.test(window.navigator.userAgent)?!1:/BB10/i.test(window.navigator.userAgent)?!1:"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(e){var r,s;return r=t(this),s=r.data("chosen"),"destroy"===i?void(s instanceof n&&s.destroy()):void(s instanceof n||r.data("chosen",new n(this,i)))}):this}}),n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var e,n;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},n.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){return t.container_mousedown(e),e.preventDefault()}),this.container.bind("touchend.chosen",function(e){return t.container_mouseup(e),e.preventDefault()}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},n.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(t){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){var n;return n=t(e.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,i,r,s;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),r=i+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),e=n+this.result_highlight.outerHeight(),e>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(s>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(t){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},n.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(e),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(e){var n,i,r=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(e)+"</span>"),e.disabled?n.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,n;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),e.addClass("result-selected"),n=this.results_data[e[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(this.choice_label(n)),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,t.preventDefault(),this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return t("<div/>").text(t.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},n.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,n,i,r,s,o,a,l,u;if(this.is_multiple){for(i=0,a=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,u=o.length;u>l;l++)r=o[l],s+=r+":"+this.search_field.css(r)+";";return e=t("<div />",{style:s}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),n=this.container.outerWidth(),a>n-10&&(a=n-10),this.search_field.css({width:a+"px"})}},n}(e)}).call(this);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ChosenWrapper=function(){function t(){_classCallCheck(this,t),$(document).on("nested:fieldAdded",this._bind),$(document).on("cocoon:after-insert",this._bind),this._bind()}return _createClass(t,[{key:"_bind",value:function(){$(".chosen-select").each(function(){$(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:$(this).width()+"px"})})}}]),t}(),Limit=function s(){var t=this;_classCallCheck(this,s),$("[data-limit]").each(function(e){$(t).maxlength({maxCharacters:$(t).data("limit"),zeroStatusText:$(t).data("zero"),oneStatusText:$(t).data("one"),moreStatusText:$(t).data("more")})})};new Limit;var Textarea=function o(){var t=this;_classCallCheck(this,o),$("textarea").keydown(function(e){if(9==e.keyCode){var n=t.selectionStart,i=t.selectionEnd,r=$(t),s=r.val();r.val(s.substring(0,n)+"	"+s.substring(i)),t.selectionStart=t.selectionEnd=n+1,e.preventDefault()}})};new Textarea;var FormGroup=function a(){var t=this;_classCallCheck(this,a),$(".form-group.other").each(function(e){var n=$(t).find("select"),i=$(n).next("input");$(n).find("option:selected").html()!=$(n).find("option:last").html()&&$(i).hide(),n.change(function(t){$(n).find("option:selected").html()==$(n).find("option:last").html()?i.show():i.hide()})})};new FormGroup;var SimpleForm=function l(){_classCallCheck(this,l),new SimpleFormDatePicker};$(function(){new SimpleForm,new ChosenWrapper});var Cache=function u(){_classCallCheck(this,u);var t=$("[data-cache]");t.find("[data-cache-target]").each(function(){var t=$(this),e=$(""+t.data("cache-target"));e.html(t.html())})};/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2009-2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.2.0
 */
!function(t,e){"use strict";var n,i,r,s=t,o=s.document,a=s.navigator,l=s.setTimeout,u=s.clearTimeout,c=s.setInterval,h=s.clearInterval,d=s.getComputedStyle,f=s.encodeURIComponent,p=s.ActiveXObject,g=s.Error,m=s.Number.parseInt||s.parseInt,v=s.Number.parseFloat||s.parseFloat,_=s.Number.isNaN||s.isNaN,y=s.Date.now,b=s.Object.keys,w=s.Object.defineProperty,x=s.Object.prototype.hasOwnProperty,k=s.Array.prototype.slice,C=function(){var t=function(t){return t};if("function"==typeof s.wrap&&"function"==typeof s.unwrap)try{var e=o.createElement("div"),n=s.unwrap(e);1===e.nodeType&&n&&1===n.nodeType&&(t=s.unwrap)}catch(i){}return t}(),S=function(t){return k.call(t,0)},T=function(){var t,n,i,r,s,o,a=S(arguments),l=a[0]||{};for(t=1,n=a.length;n>t;t++)if(null!=(i=a[t]))for(r in i)x.call(i,r)&&(s=l[r],o=i[r],l!==o&&o!==e&&(l[r]=o));return l},$=function(t){var e,n,i,r;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if("number"==typeof t.length)for(e=[],n=0,i=t.length;i>n;n++)x.call(t,n)&&(e[n]=$(t[n]));else{e={};for(r in t)x.call(t,r)&&(e[r]=$(t[r]))}return e},E=function(t,e){for(var n={},i=0,r=e.length;r>i;i++)e[i]in t&&(n[e[i]]=t[e[i]]);return n},D=function(t,e){var n={};for(var i in t)-1===e.indexOf(i)&&(n[i]=t[i]);return n},j=function(t){if(t)for(var e in t)x.call(t,e)&&delete t[e];return t},A=function(t,e){if(t&&1===t.nodeType&&t.ownerDocument&&e&&(1===e.nodeType&&e.ownerDocument&&e.ownerDocument===t.ownerDocument||9===e.nodeType&&!e.ownerDocument&&e===t.ownerDocument))do{if(t===e)return!0;t=t.parentNode}while(t);return!1},P=function(t){var e;return"string"==typeof t&&t&&(e=t.split("#")[0].split("?")[0],e=t.slice(0,t.lastIndexOf("/")+1)),e},M=function(t){var e,n;return"string"==typeof t&&t&&(n=t.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?e=n[1]:(n=t.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(e=n[1]))),e},O=function(){var t,e;try{throw new g}catch(n){e=n}return e&&(t=e.sourceURL||e.fileName||M(e.stack)),t},I=function(){var t,n,i;if(o.currentScript&&(t=o.currentScript.src))return t;if(n=o.getElementsByTagName("script"),1===n.length)return n[0].src||e;if("readyState"in n[0])for(i=n.length;i--;)if("interactive"===n[i].readyState&&(t=n[i].src))return t;return"loading"===o.readyState&&(t=n[n.length-1].src)?t:(t=O())?t:e},N=function(){var t,n,i,r=o.getElementsByTagName("script");for(t=r.length;t--;){if(!(i=r[t].src)){n=null;break}if(i=P(i),null==n)n=i;else if(n!==i){n=null;break}}return n||e},L=function(){var t=P(I())||N()||"";return t+"ZeroClipboard.swf"},R=function(){return null==t.opener&&(!!t.top&&t!=t.top||!!t.parent&&t!=t.parent)}(),z={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},F="11.0.0",H={},B={},q=null,W=0,Y=0,G={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},V=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],U=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],Z=new RegExp("^flash-("+U.map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),X=new RegExp("^flash-("+U.slice(1).map(function(t){return t.replace(/^flash-/,"")}).join("|")+")$"),Q={swfPath:L(),trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},K=function(t){if("object"==typeof t&&null!==t)for(var e in t)if(x.call(t,e))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(e))Q[e]=t[e];else if(null==z.bridge)if("containerId"===e||"swfObjectId"===e){if(!ft(t[e]))throw new Error("The specified `"+e+"` value is not valid as an HTML4 Element ID");Q[e]=t[e]}else Q[e]=t[e];{if("string"!=typeof t||!t)return $(Q);if(x.call(Q,t))return Q[t]}},J=function(){return Yt(),{browser:E(a,["userAgent","platform","appName"]),flash:D(z,["bridge"]),zeroclipboard:{version:Vt.version,config:Vt.config()}}},tt=function(){return!!(z.disabled||z.outdated||z.sandboxed||z.unavailable||z.degraded||z.deactivated)},et=function(t,i){var r,s,o,a={};if("string"==typeof t&&t)o=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof i)for(r in t)x.call(t,r)&&"string"==typeof r&&r&&"function"==typeof t[r]&&Vt.on(r,t[r]);if(o&&o.length){for(r=0,s=o.length;s>r;r++)t=o[r].replace(/^on/,""),a[t]=!0,H[t]||(H[t]=[]),H[t].push(i);if(a.ready&&z.ready&&Vt.emit({type:"ready"}),a.error){for(r=0,s=U.length;s>r;r++)if(z[U[r].replace(/^flash-/,"")]===!0){Vt.emit({type:"error",name:U[r]});break}n!==e&&Vt.version!==n&&Vt.emit({type:"error",name:"version-mismatch",jsVersion:Vt.version,swfVersion:n})}}return Vt},nt=function(t,e){var n,i,r,s,o;if(0===arguments.length)s=b(H);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)x.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&Vt.off(n,t[n]);if(s&&s.length)for(n=0,i=s.length;i>n;n++)if(t=s[n].toLowerCase().replace(/^on/,""),o=H[t],o&&o.length)if(e)for(r=o.indexOf(e);-1!==r;)o.splice(r,1),r=o.indexOf(e,r);else o.length=0;return Vt},it=function(t){var e;return e="string"==typeof t&&t?$(H[t])||null:$(H)},rt=function(t){var e,n,i;return t=pt(t),t&&!wt(t)?"ready"===t.type&&z.overdue===!0?Vt.emit({type:"error",name:"flash-overdue"}):(e=T({},t),yt.call(this,e),"copy"===t.type&&(i=Dt(B),n=i.data,q=i.formatMap),n):void 0},st=function(){var t=z.sandboxed;if(Yt(),"boolean"!=typeof z.ready&&(z.ready=!1),z.sandboxed!==t&&z.sandboxed===!0)z.ready=!1,Vt.emit({type:"error",name:"flash-sandboxed"});else if(!Vt.isFlashUnusable()&&null===z.bridge){var e=Q.flashLoadTimeout;"number"==typeof e&&e>=0&&(W=l(function(){"boolean"!=typeof z.deactivated&&(z.deactivated=!0),z.deactivated===!0&&Vt.emit({type:"error",name:"flash-deactivated"})},e)),z.overdue=!1,$t()}},ot=function(){Vt.clearData(),Vt.blur(),Vt.emit("destroy"),Et(),Vt.off()},at=function(t,e){var n;if("object"==typeof t&&t&&"undefined"==typeof e)n=t,Vt.clearData();else{if("string"!=typeof t||!t)return;n={},n[t]=e}for(var i in n)"string"==typeof i&&i&&x.call(n,i)&&"string"==typeof n[i]&&n[i]&&(B[i]=n[i])},lt=function(t){"undefined"==typeof t?(j(B),q=null):"string"==typeof t&&x.call(B,t)&&delete B[t]},ut=function(t){return"undefined"==typeof t?$(B):"string"==typeof t&&x.call(B,t)?B[t]:void 0},ct=function(t){if(t&&1===t.nodeType){i&&(Lt(i,Q.activeClass),i!==t&&Lt(i,Q.hoverClass)),i=t,Nt(t,Q.hoverClass);var e=t.getAttribute("title")||Q.title;if("string"==typeof e&&e){var n=Tt(z.bridge);n&&n.setAttribute("title",e)}var r=Q.forceHandCursor===!0||"pointer"===Rt(t,"cursor");qt(r),Bt()}},ht=function(){var t=Tt(z.bridge);t&&(t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px"),i&&(Lt(i,Q.hoverClass),Lt(i,Q.activeClass),i=null)},dt=function(){return i||null},ft=function(t){return"string"==typeof t&&t&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(t)},pt=function(t){var e;if("string"==typeof t&&t?(e=t,t={}):"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(e=t.type),e){e=e.toLowerCase(),!t.target&&(/^(copy|aftercopy|_click)$/.test(e)||"error"===e&&"clipboard-error"===t.name)&&(t.target=r),T(t,{type:e,target:t.target||i||null,relatedTarget:t.relatedTarget||null,currentTarget:z&&z.bridge||null,timeStamp:t.timeStamp||y()||null});var n=G[t.type];return"error"===t.type&&t.name&&n&&(n=n[t.name]),n&&(t.message=n),"ready"===t.type&&T(t,{target:null,version:z.version}),"error"===t.type&&(Z.test(t.name)&&T(t,{target:null,minimumVersion:F}),X.test(t.name)&&T(t,{version:z.version})),"copy"===t.type&&(t.clipboardData={setData:Vt.setData,clearData:Vt.clearData}),"aftercopy"===t.type&&(t=jt(t,q)),t.target&&!t.relatedTarget&&(t.relatedTarget=gt(t.target)),mt(t)}},gt=function(t){var e=t&&t.getAttribute&&t.getAttribute("data-clipboard-target");return e?o.getElementById(e):null},mt=function(t){if(t&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)){var n=t.target,i="_mouseover"===t.type&&t.relatedTarget?t.relatedTarget:e,r="_mouseout"===t.type&&t.relatedTarget?t.relatedTarget:e,a=zt(n),l=s.screenLeft||s.screenX||0,u=s.screenTop||s.screenY||0,c=o.body.scrollLeft+o.documentElement.scrollLeft,h=o.body.scrollTop+o.documentElement.scrollTop,d=a.left+("number"==typeof t._stageX?t._stageX:0),f=a.top+("number"==typeof t._stageY?t._stageY:0),p=d-c,g=f-h,m=l+p,v=u+g,_="number"==typeof t.movementX?t.movementX:0,y="number"==typeof t.movementY?t.movementY:0;delete t._stageX,delete t._stageY,T(t,{srcElement:n,fromElement:i,toElement:r,screenX:m,screenY:v,pageX:d,pageY:f,clientX:p,clientY:g,x:p,y:g,movementX:_,movementY:y,offsetX:0,offsetY:0,layerX:0,layerY:0})}return t},vt=function(t){var e=t&&"string"==typeof t.type&&t.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(e)},_t=function(t,e,n,i){i?l(function(){t.apply(e,n)},0):t.apply(e,n)},yt=function(t){if("object"==typeof t&&t&&t.type){var e=vt(t),n=H["*"]||[],i=H[t.type]||[],r=n.concat(i);if(r&&r.length){var o,a,l,u,c,h=this;for(o=0,a=r.length;a>o;o++)l=r[o],u=h,"string"==typeof l&&"function"==typeof s[l]&&(l=s[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=T({},t),_t(l,u,[c],e))}return this}},bt=function(t){var e=null;return(R===!1||t&&"error"===t.type&&t.name&&-1!==V.indexOf(t.name))&&(e=!1),e},wt=function(t){var e=t.target||i||null,s="swf"===t._source;switch(delete t._source,t.type){case"error":var o="flash-sandboxed"===t.name||bt(t);"boolean"==typeof o&&(z.sandboxed=o),-1!==U.indexOf(t.name)?T(z,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,degraded:"flash-degraded"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1}):"version-mismatch"===t.name&&(n=t.swfVersion,T(z,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Ht();break;case"ready":n=t.swfVersion;var a=z.deactivated===!0;T(z,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:a,ready:!a}),Ht();break;case"beforecopy":r=e;break;case"copy":var l,u,c=t.relatedTarget;!B["text/html"]&&!B["text/plain"]&&c&&(u=c.value||c.outerHTML||c.innerHTML)&&(l=c.value||c.textContent||c.innerText)?(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l),u!==l&&t.clipboardData.setData("text/html",u)):!B["text/plain"]&&t.target&&(l=t.target.getAttribute("data-clipboard-text"))&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",l));break;case"aftercopy":xt(t),Vt.clearData(),e&&e!==It()&&e.focus&&e.focus();break;case"_mouseover":Vt.focus(e),Q.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!A(t.relatedTarget,e)&&kt(T({},t,{type:"mouseenter",bubbles:!1,cancelable:!1})),kt(T({},t,{type:"mouseover"})));break;case"_mouseout":Vt.blur(),Q.bubbleEvents===!0&&s&&(e&&e!==t.relatedTarget&&!A(t.relatedTarget,e)&&kt(T({},t,{type:"mouseleave",bubbles:!1,cancelable:!1})),kt(T({},t,{type:"mouseout"})));break;case"_mousedown":Nt(e,Q.activeClass),Q.bubbleEvents===!0&&s&&kt(T({},t,{type:t.type.slice(1)}));break;case"_mouseup":Lt(e,Q.activeClass),Q.bubbleEvents===!0&&s&&kt(T({},t,{type:t.type.slice(1)}));break;case"_click":r=null,Q.bubbleEvents===!0&&s&&kt(T({},t,{type:t.type.slice(1)}));break;case"_mousemove":Q.bubbleEvents===!0&&s&&kt(T({},t,{type:t.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)?!0:void 0},xt=function(t){if(t.errors&&t.errors.length>0){var e=$(t);T(e,{type:"error",name:"clipboard-error"}),delete e.success,l(function(){Vt.emit(e)},0)}},kt=function(t){if(t&&"string"==typeof t.type&&t){var e,n=t.target||null,i=n&&n.ownerDocument||o,r={view:i.defaultView||s,canBubble:!0,cancelable:!0,detail:"click"===t.type?1:0,button:"number"==typeof t.which?t.which-1:"number"==typeof t.button?t.button:i.createEvent?0:1},a=T(r,t);n&&i.createEvent&&n.dispatchEvent&&(a=[a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget],e=i.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,a),e._source="js",n.dispatchEvent(e)))}},Ct=function(){var t=Q.flashLoadTimeout;if("number"==typeof t&&t>=0){var e=Math.min(1e3,t/10),n=Q.swfObjectId+"_fallbackContent";Y=c(function(){var t=o.getElementById(n);Ft(t)&&(Ht(),z.deactivated=null,Vt.emit({type:"error",name:"swf-not-found"}))},e)}},St=function(){var t=o.createElement("div");return t.id=Q.containerId,t.className=Q.containerClass,t.style.position="absolute",t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",t.style.zIndex=""+Wt(Q.zIndex),t},Tt=function(t){for(var e=t&&t.parentNode;e&&"OBJECT"===e.nodeName&&e.parentNode;)e=e.parentNode;return e||null},$t=function(){var t,e=z.bridge,n=Tt(e);if(!e){var i=Ot(s.location.host,Q),r="never"===i?"none":"all",a=Pt(T({jsVersion:Vt.version},Q)),l=Q.swfPath+At(Q.swfPath,Q);n=St();var u=o.createElement("div");n.appendChild(u),o.body.appendChild(n);var c=o.createElement("div"),h="activex"===z.pluginType;c.innerHTML='<object id="'+Q.swfObjectId+'" name="'+Q.swfObjectId+'" width="100%" height="100%" '+(h?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(h?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+a+'"/><div id="'+Q.swfObjectId+'_fallbackContent">&nbsp;</div></object>',e=c.firstChild,c=null,C(e).ZeroClipboard=Vt,n.replaceChild(e,u),Ct()}return e||(e=o[Q.swfObjectId],e&&(t=e.length)&&(e=e[t-1]),!e&&n&&(e=n.firstChild)),z.bridge=e||null,e},Et=function(){var t=z.bridge;if(t){var i=Tt(t);i&&("activex"===z.pluginType&&"readyState"in t?(t.style.display="none",function r(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i)}else l(r,10)}()):(t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i))),Ht(),z.ready=null,z.bridge=null,z.deactivated=null,n=e}},Dt=function(t){var e={},n={};if("object"==typeof t&&t){for(var i in t)if(i&&x.call(t,i)&&"string"==typeof t[i]&&t[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=t[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=t[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=t[i],n.rtf=i}return{data:e,formatMap:n}}},jt=function(t,e){if("object"!=typeof t||!t||"object"!=typeof e||!e)return t;var n={};for(var i in t)if(x.call(t,i))if("errors"===i){n[i]=t[i]?t[i].slice():[];for(var r=0,s=n[i].length;s>r;r++)n[i][r].format=e[n[i][r].format]}else if("success"!==i&&"data"!==i)n[i]=t[i];else{n[i]={};var o=t[i];for(var a in o)a&&x.call(o,a)&&x.call(e,a)&&(n[i][e[a]]=o[a])}return n},At=function(t,e){var n=null==e||e&&e.cacheBust===!0;return n?(-1===t.indexOf("?")?"?":"&")+"noCache="+y():""},Pt=function(t){var e,n,i,r,o="",a=[];if(t.trustedDomains&&("string"==typeof t.trustedDomains?r=[t.trustedDomains]:"object"==typeof t.trustedDomains&&"length"in t.trustedDomains&&(r=t.trustedDomains)),r&&r.length)for(e=0,n=r.length;n>e;e++)if(x.call(r,e)&&r[e]&&"string"==typeof r[e]){if(i=Mt(r[e]),!i)continue;if("*"===i){a.length=0,a.push(i);break}a.push.apply(a,[i,"//"+i,s.location.protocol+"//"+i])}return a.length&&(o+="trustedOrigins="+f(a.join(","))),t.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof t.swfObjectId&&t.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+f(t.swfObjectId)),"string"==typeof t.jsVersion&&t.jsVersion&&(o+=(o?"&":"")+"jsVersion="+f(t.jsVersion)),o},Mt=function(t){if(null==t||""===t)return null;if(t=t.replace(/^\s+|\s+$/g,""),""===t)return null;var e=t.indexOf("//");t=-1===e?t:t.slice(e+2);var n=t.indexOf("/");return t=-1===n?t:-1===e||0===n?null:t.slice(0,n),t&&".swf"===t.slice(-4).toLowerCase()?null:t||null},Ot=function(){var t=function(t){var e,n,i,r=[];if("string"==typeof t&&(t=[t]),"object"!=typeof t||!t||"number"!=typeof t.length)return r;for(e=0,n=t.length;n>e;e++)if(x.call(t,e)&&(i=Mt(t[e]))){if("*"===i){r.length=0,r.push("*");break}-1===r.indexOf(i)&&r.push(i)}return r};return function(e,n){var i=Mt(n.swfPath);null===i&&(i=e);var r=t(n.trustedDomains),s=r.length;if(s>0){if(1===s&&"*"===r[0])return"always";if(-1!==r.indexOf(e))return 1===s&&e===i?"sameDomain":"always"}return"never"}}(),It=function(){try{return o.activeElement}catch(t){return null}},Nt=function(t,e){var n,i,r,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList)for(n=0,i=s.length;i>n;n++)t.classList.add(s[n]);else if(t.hasOwnProperty("className")){for(r=" "+t.className+" ",n=0,i=s.length;i>n;n++)-1===r.indexOf(" "+s[n]+" ")&&(r+=s[n]+" ");t.className=r.replace(/^\s+|\s+$/g,"")}return t},Lt=function(t,e){var n,i,r,s=[];if("string"==typeof e&&e&&(s=e.split(/\s+/)),t&&1===t.nodeType&&s.length>0)if(t.classList&&t.classList.length>0)for(n=0,i=s.length;i>n;n++)t.classList.remove(s[n]);else if(t.className){for(r=(" "+t.className+" ").replace(/[\r\n\t]/g," "),n=0,i=s.length;i>n;n++)r=r.replace(" "+s[n]+" "," ");t.className=r.replace(/^\s+|\s+$/g,"")}return t},Rt=function(t,e){var n=d(t,null).getPropertyValue(e);return"cursor"!==e||n&&"auto"!==n||"A"!==t.nodeName?n:"pointer"},zt=function(t){var e={left:0,top:0,width:0,height:0};if(t.getBoundingClientRect){var n=t.getBoundingClientRect(),i=s.pageXOffset,r=s.pageYOffset,a=o.documentElement.clientLeft||0,l=o.documentElement.clientTop||0,u=0,c=0;if("relative"===Rt(o.body,"position")){var h=o.body.getBoundingClientRect(),d=o.documentElement.getBoundingClientRect();u=h.left-d.left||0,c=h.top-d.top||0}e.left=n.left+i-a-u,e.top=n.top+r-l-c,e.width="width"in n?n.width:n.right-n.left,e.height="height"in n?n.height:n.bottom-n.top}return e},Ft=function(t){if(!t)return!1;var e=d(t,null),n=v(e.height)>0,i=v(e.width)>0,r=v(e.top)>=0,s=v(e.left)>=0,o=n&&i&&r&&s,a=o?null:zt(t),l="none"!==e.display&&"collapse"!==e.visibility&&(o||!!a&&(n||a.height>0)&&(i||a.width>0)&&(r||a.top>=0)&&(s||a.left>=0));return l},Ht=function(){u(W),W=0,h(Y),Y=0},Bt=function(){var t;if(i&&(t=Tt(z.bridge))){var e=zt(i);T(t.style,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",zIndex:""+Wt(Q.zIndex)})}},qt=function(t){z.ready===!0&&(z.bridge&&"function"==typeof z.bridge.setHandCursor?z.bridge.setHandCursor(t):z.ready=!1)},Wt=function(t){if(/^(?:auto|inherit)$/.test(t))return t;var e;return"number"!=typeof t||_(t)?"string"==typeof t&&(e=Wt(m(t,10))):e=t,"number"==typeof e?e:"auto"},Yt=function(e){var n,i,r,s=z.sandboxed,o=null;if(e=e===!0,R===!1)o=!1;else{try{i=t.frameElement||null}catch(a){r={name:a.name,message:a.message}}if(i&&1===i.nodeType&&"IFRAME"===i.nodeName)try{o=i.hasAttribute("sandbox")}catch(a){o=null}else{try{n=document.domain||null}catch(a){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(o=!0)}}return z.sandboxed=o,s===o||e||Gt(p),o},Gt=function(t){function e(t){var e=t.match(/[\d]+/g);return e.length=3,e.join(".")}function n(t){return!!t&&(t=t.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(t)||"chrome.plugin"===t.slice(-13))}function i(t){t&&(l=!0,t.version&&(h=e(t.version)),!h&&t.description&&(h=e(t.description)),t.filename&&(c=n(t.filename)))}var r,s,o,l=!1,u=!1,c=!1,h="";if(a.plugins&&a.plugins.length)r=a.plugins["Shockwave Flash"],i(r),a.plugins["Shockwave Flash 2.0"]&&(l=!0,h="2.0.0.11");else if(a.mimeTypes&&a.mimeTypes.length)o=a.mimeTypes["application/x-shockwave-flash"],r=o&&o.enabledPlugin,i(r);else if("undefined"!=typeof t){u=!0;try{s=new t("ShockwaveFlash.ShockwaveFlash.7"),l=!0,h=e(s.GetVariable("$version"))}catch(d){try{s=new t("ShockwaveFlash.ShockwaveFlash.6"),l=!0,h="6.0.21"}catch(f){try{s=new t("ShockwaveFlash.ShockwaveFlash"),l=!0,h=e(s.GetVariable("$version"))}catch(p){u=!1}}}}z.disabled=l!==!0,z.outdated=h&&v(h)<v(F),z.version=h||"0.0.0",z.pluginType=c?"pepper":u?"activex":l?"netscape":"unknown"};Gt(p),Yt(!0);var Vt=function(){return this instanceof Vt?void("function"==typeof Vt._createClient&&Vt._createClient.apply(this,S(arguments))):new Vt};w(Vt,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Vt.config=function(){return K.apply(this,S(arguments))},Vt.state=function(){return J.apply(this,S(arguments))},Vt.isFlashUnusable=function(){return tt.apply(this,S(arguments))},Vt.on=function(){return et.apply(this,S(arguments))},Vt.off=function(){return nt.apply(this,S(arguments))},Vt.handlers=function(){return it.apply(this,S(arguments))},Vt.emit=function(){return rt.apply(this,S(arguments))},Vt.create=function(){return st.apply(this,S(arguments))},Vt.destroy=function(){return ot.apply(this,S(arguments))},Vt.setData=function(){return at.apply(this,S(arguments))},Vt.clearData=function(){return lt.apply(this,S(arguments))},Vt.getData=function(){return ut.apply(this,S(arguments))},Vt.focus=Vt.activate=function(){return ct.apply(this,S(arguments))},Vt.blur=Vt.deactivate=function(){return ht.apply(this,S(arguments))},Vt.activeElement=function(){return dt.apply(this,S(arguments))};var Ut=0,Zt={},Xt=0,Qt={},Kt={};T(Q,{autoActivate:!0});var Jt=function(t){var e=this;e.id=""+Ut++,Zt[e.id]={instance:e,elements:[],handlers:{}},t&&e.clip(t),Vt.on("*",function(t){return e.emit(t)}),Vt.on("destroy",function(){e.destroy()}),Vt.create()},te=function(t,i){var r,s,o,a={},l=Zt[this.id],u=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof t&&t)o=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof i)for(r in t)x.call(t,r)&&"string"==typeof r&&r&&"function"==typeof t[r]&&this.on(r,t[r]);if(o&&o.length){for(r=0,s=o.length;s>r;r++)t=o[r].replace(/^on/,""),a[t]=!0,u[t]||(u[t]=[]),u[t].push(i);if(a.ready&&z.ready&&this.emit({type:"ready",client:this}),a.error){for(r=0,s=U.length;s>r;r++)if(z[U[r].replace(/^flash-/,"")]){this.emit({type:"error",name:U[r],client:this});break}n!==e&&Vt.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Vt.version,swfVersion:n})}}return this},ee=function(t,e){var n,i,r,s,o,a=Zt[this.id],l=a&&a.handlers;if(!l)return this;if(0===arguments.length)s=b(l);else if("string"==typeof t&&t)s=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)x.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.off(n,t[n]);if(s&&s.length)for(n=0,i=s.length;i>n;n++)if(t=s[n].toLowerCase().replace(/^on/,""),o=l[t],o&&o.length)if(e)for(r=o.indexOf(e);-1!==r;)o.splice(r,1),r=o.indexOf(e,r);else o.length=0;return this},ne=function(t){var e=null,n=Zt[this.id]&&Zt[this.id].handlers;return n&&(e="string"==typeof t&&t?n[t]?n[t].slice(0):[]:$(n)),e},ie=function(t){if(le.call(this,t)){"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(t=T({},t));var e=T({},pt(t),{client:this});ue.call(this,e)}return this},re=function(t){if(!Zt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");t=ce(t);for(var e=0;e<t.length;e++)if(x.call(t,e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?-1===Qt[t[e].zcClippingId].indexOf(this.id)&&Qt[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+Xt++,Qt[t[e].zcClippingId]=[this.id],Q.autoActivate===!0&&he(t[e]));var n=Zt[this.id]&&Zt[this.id].elements;-1===n.indexOf(t[e])&&n.push(t[e])}return this},se=function(t){var e=Zt[this.id];if(!e)return this;var n,i=e.elements;t="undefined"==typeof t?i.slice(0):ce(t);for(var r=t.length;r--;)if(x.call(t,r)&&t[r]&&1===t[r].nodeType){for(n=0;-1!==(n=i.indexOf(t[r],n));)i.splice(n,1);var s=Qt[t[r].zcClippingId];if(s){for(n=0;-1!==(n=s.indexOf(this.id,n));)s.splice(n,1);0===s.length&&(Q.autoActivate===!0&&de(t[r]),delete t[r].zcClippingId)}}return this},oe=function(){var t=Zt[this.id];return t&&t.elements?t.elements.slice(0):[]},ae=function(){Zt[this.id]&&(this.unclip(),this.off(),delete Zt[this.id])},le=function(t){if(!t||!t.type)return!1;if(t.client&&t.client!==this)return!1;var e=Zt[this.id],n=e&&e.elements,i=!!n&&n.length>0,r=!t.target||i&&-1!==n.indexOf(t.target),s=t.relatedTarget&&i&&-1!==n.indexOf(t.relatedTarget),o=t.client&&t.client===this;return e&&(r||s||o)?!0:!1},ue=function(t){var e=Zt[this.id];if("object"==typeof t&&t&&t.type&&e){var n=vt(t),i=e&&e.handlers["*"]||[],r=e&&e.handlers[t.type]||[],o=i.concat(r);if(o&&o.length){var a,l,u,c,h,d=this;for(a=0,l=o.length;l>a;a++)u=o[a],c=d,"string"==typeof u&&"function"==typeof s[u]&&(u=s[u]),"object"==typeof u&&u&&"function"==typeof u.handleEvent&&(c=u,u=u.handleEvent),"function"==typeof u&&(h=T({},t),_t(u,c,[h],n))}}},ce=function(t){return"string"==typeof t&&(t=[]),"number"!=typeof t.length?[t]:t},he=function(t){if(t&&1===t.nodeType){var e=function(t){(t||(t=s.event))&&("js"!==t._source&&(t.stopImmediatePropagation(),t.preventDefault()),delete t._source)},n=function(n){(n||(n=s.event))&&(e(n),Vt.focus(t))};t.addEventListener("mouseover",n,!1),t.addEventListener("mouseout",e,!1),t.addEventListener("mouseenter",e,!1),t.addEventListener("mouseleave",e,!1),t.addEventListener("mousemove",e,!1),Kt[t.zcClippingId]={mouseover:n,mouseout:e,mouseenter:e,mouseleave:e,mousemove:e}}},de=function(t){if(t&&1===t.nodeType){var e=Kt[t.zcClippingId];if("object"==typeof e&&e){for(var n,i,r=["move","leave","enter","out","over"],s=0,o=r.length;o>s;s++)n="mouse"+r[s],i=e[n],"function"==typeof i&&t.removeEventListener(n,i,!1);delete Kt[t.zcClippingId]}}};Vt._createClient=function(){Jt.apply(this,S(arguments))},Vt.prototype.on=function(){return te.apply(this,S(arguments))},Vt.prototype.off=function(){return ee.apply(this,S(arguments))},Vt.prototype.handlers=function(){return ne.apply(this,S(arguments))},Vt.prototype.emit=function(){return ie.apply(this,S(arguments))},Vt.prototype.clip=function(){return re.apply(this,S(arguments))},Vt.prototype.unclip=function(){return se.apply(this,S(arguments))},Vt.prototype.elements=function(){return oe.apply(this,S(arguments))},Vt.prototype.destroy=function(){return ae.apply(this,S(arguments))},Vt.prototype.setText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.setData("text/plain",t),this},Vt.prototype.setHtml=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.setData("text/html",t),this},Vt.prototype.setRichText=function(t){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.setData("application/rtf",t),this},Vt.prototype.setData=function(){if(!Zt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.setData.apply(this,S(arguments)),this},Vt.prototype.clearData=function(){if(!Zt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.clearData.apply(this,S(arguments)),this},Vt.prototype.getData=function(){if(!Zt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Vt.getData.apply(this,S(arguments))},"function"==typeof define&&define.amd?define(function(){return Vt}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Vt:t.ZeroClipboard=Vt}(function(){return this||window}());var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Copy=function(){function t(){var e=this;_classCallCheck(this,t),ZeroClipboard.config({swfPath:"/assets/clipboard-eec56f47f17c747710021e35aee59177a7e451c374b6d8ef11508bb25edf5125.swf"}),$("[data-copy]").each(function(t,n){e._initCopy(n)})}return _createClass(t,[{key:"_initCopy",value:function(t){var e=new ZeroClipboard(t);e.on("ready",function(n){e.on("copy",function(e){var n=$(""+$(t).data("copy")).val(),i=$(t).data("copy-type")||"text/plain";e.clipboardData.setData(i,n),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),DataEvents=function(){function t(){_classCallCheck(this,t),this.refresh()}return _createClass(t,[{key:"refresh",value:function(){this.attachFocusEvents(),this.attachToggleEvents()}},{key:"attachFocusEvents",value:function(){$("[data-event-focus]").click(function(){$($(this).attr("data-event-focus")).focus()})}},{key:"attachToggleEvents",value:function(){$("[data-event-toggle]").each(function(){var t=this,e=$(this).attr("data-event-container"),n=$(this).attr("data-event-toggle"),i=e?$(this).parents(e):$(this).parent();$(i).find(n).addClass("hidden"),$(this).click(function(e){return e.stopImmediatePropagation(),$(i).find(n).toggleClass("hidden"),$(t).toggleClass("active"),!1})})}}]),t}();DataEvents.singleton=void 0,DataEvents.refresh=function(){void 0===DataEvents.singleton&&(DataEvents.singleton=new DataEvents),DataEvents.singleton.refresh()},function(){var t,e,n,i,r,s,o;s=1e3,r=6e4,n=36e5,t=864e5,o=6048e5,e={seconds:{"short":"s","long":" sec"},minutes:{"short":"m","long":" min"},hours:{"short":"h","long":" hr"},days:{"short":"d","long":" day"}},i=function(i){var a;return a=function(a){var l,u,c,h;if(l=Math.abs(this.diff(i())),c=null,u=null,s>=l)c="seconds",u=1;else if(r>l)c="seconds";else if(n>l)c="minutes";else if(t>l)c="hours";else{if("short"!==a)return this.format("MMM D");if(!(o>l))return this.format("M/D/YY");c="days"}return u&&c||(u=i.duration(l)[c]()),h=c=e[c][a],"long"===a&&u>1&&(h+="s"),u+h},i.fn.twitterLong=function(){return a.call(this,"long")},i.fn.twitter=i.fn.twitterShort=function(){return a.call(this,"short")},i},"function"==typeof define&&define.amd?define("moment-twitter",["moment"],function(t){return this.moment=i(t)}):"undefined"!=typeof module?module.exports=i(require("moment")):"undefined"!=typeof window&&window.moment&&(this.moment=i(this.moment))}.call(this);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),DataDate=function(){function t(){var e=this;
_classCallCheck(this,t),this._updateAll(),this.handler=setInterval(function(t){e._updateAll()},15e3)}return _createClass(t,[{key:"_makeTheMoment",value:function(t){t=t.replace("UTC","+0000");var e=moment(t,"YYYY-MM-DD HH:mm:ss Z");return e.isValid()?e:(e=moment(t,"YYYY-MM-DD HH:mm Z"),e.isValid()?e:(e=moment(new Date(t)),e.isValid()?e:(console.warn(t+" date is invalid !",e),e)))}},{key:"_updateAll",value:function(){var e=this===window?t.get():this;$("[data-long-date]").each(function(){$(this).html(e._makeTheMoment($(this).attr("data-long-date")).fromNow())}),$("[data-short-date]").each(function(){$(this).html(e._makeTheMoment($(this).attr("data-short-date")).twitter())}),$("[data-cal-date]").each(function(){$(this).html(e._makeTheMoment($(this).attr("data-cal-date")).calendar())})}},{key:"refresh",value:function(){this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,15e3)}}]),t}();DataDate.singleton=void 0,DataDate.get=function(){return void 0===DataDate.singleton&&(DataDate.singleton=new DataDate),DataDate.singleton.refresh(),DataDate.singleton},DataDate.refresh=function(){DataDate.get().refresh()};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Importer=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,t),this.opts=_.merge({errorsSelector:"data-import-errors",textSelector:"data-import-text"},e),this.target=document.querySelector("["+this.opts.errorsSelector+"]["+this.opts.textSelector+"]"),this.target){if(this.text=this.target.getAttribute(this.opts.textSelector),this.errors=JSON.parse(this.target.getAttribute(this.opts.errorsSelector)),!this.text)throw"Unable to find params text for ["+this.opts.textSelector+"]";this.displayErrors()}}return _createClass(t,[{key:"displayErrors",value:function(){console.log("Displaying errors for data: ",this.errors),this.renderText()}},{key:"renderText",value:function(){var t=this,e=this.text.split("\n");e=_.map(e,function(t){return t.split(",")}),console.log("Parsed: ",e);var n=_.map(e,function(e,n){if(t.errors[n]){var i=_.map(e,function(e,i){return field_errors=[],_(t.errors[n]).filter(function(t){t.meta}).each(function(t){console.log("For field "+e+", "+t.meta.index+" == "+i),t.meta.index==i&&field_errors.push(t.error)}).value(),field_errors.length>0?"<b class='text-danger' data-toggle='tooltip' data-placement='top' title='"+field_errors.join(", ")+"'>"+e+"</b>":"<span>"+e+"</span>"}).join(",");return"<span class='text-danger'>"+i+"</span>"}return console.log("No errors on line "+n),"<span class='text-success'>"+e.join(",")+"</span>"}).join("</br>"),i='<div class="js-import-results">'+n+"</div>";$(this.target).append(i),$('[data-toggle="tooltip"]').tooltip()}}]),t}();/*! emojify.js - v1.0.1 - 
 * Copyright (c) Hassan Khan 2015
 */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.emojify=e()}(this,function(){"use strict";var t=function(){function t(){var t={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,frowning:/:-?\(/g,sob:/:['\u2019]-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g};return p.ignore_emoticons&&(t={named:/:([a-z0-9A-Z_-]+):/,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g}),Object.keys(t).map(function(e){return[t[e],e]})}function e(){var t=u.map(function(t){var e=t[0],n=e.source||e;return n=n.replace(/(^|[^\[])\^/g,"$1"),"("+n+")"}).join("|");return new RegExp(t,"gi")}function n(t){return" "===t||"	"===t||"\r"===t||"\n"===t||""===t||t===String.fromCharCode(160)}function i(t){var e=null;if(t.replacer)e=t.replacer.apply({config:p},[":"+t.emojiName+":",t.emojiName]);else{var n=p.tag_type||g[p.mode];e=t.win.document.createElement(n),"img"!==n?e.setAttribute("class","emoji emoji-"+t.emojiName):(e.setAttribute("align","absmiddle"),e.setAttribute("alt",":"+t.emojiName+":"),e.setAttribute("class","emoji"),e.setAttribute("src",p.img_dir+"/"+t.emojiName+".png")),e.setAttribute("title",":"+t.emojiName+":")}t.node.splitText(t.match.index),t.node.nextSibling.nodeValue=t.node.nextSibling.nodeValue.substr(t.match[0].length,t.node.nextSibling.nodeValue.length),e.appendChild(t.node.splitText(t.match.index)),t.node.parentNode.insertBefore(e,t.node.nextSibling)}function r(t){if(t[1]&&t[2]){var e=t[2];if(f[e])return e}else for(var n=3;n<t.length-1;n++)if(t[n])return u[n-2][1]}function s(t,e){var n=this.config.tag_type||g[this.config.mode];return"img"!==n?"<"+n+" class='emoji emoji-"+e+"' title=':"+e+":'></"+n+">":"<img align='absmiddle' alt=':"+e+":' class='emoji' src='"+this.config.img_dir+"/"+e+".png' title=':"+e+":' />"}function o(){this.lastEmojiTerminatedAt=-1}function a(n,i){if(!n)return n;i||(i=s),u=t(),c=e();var r=new o;return n.replace(c,function(){var t=Array.prototype.slice.call(arguments,0,-2),e=arguments[arguments.length-2],n=arguments[arguments.length-1],s=r.validate(t,e,n);return s?i.apply({config:p},[arguments[0],s]):arguments[0]})}function l(n,s){"undefined"==typeof n&&(n=p.only_crawl_id?document.getElementById(p.only_crawl_id):document.body);var a=n.ownerDocument,l=a.defaultView||a.parentWindow,h=function(t,e){var n;if(t.hasChildNodes())for(n=t.firstChild;n;)e(n)&&h(n,e),n=n.nextSibling},d=function(t){for(var e,n=[],a=new o;null!==(e=c.exec(t.data));)a.validate(e,e.index,e.input)&&n.push(e);for(var u=n.length;u-->0;){var h=r(n[u]);i({node:t,match:n[u],emojiName:h,replacer:s,win:l})}};u=t(),c=e();var f=[],g=new RegExp(p.blacklist.elements.join("|"),"i"),m=new RegExp(p.blacklist.classes.join("|"),"i");if("undefined"!=typeof l.document.createTreeWalker)for(var v,_=l.document.createTreeWalker(n,l.NodeFilter.SHOW_TEXT|l.NodeFilter.SHOW_ELEMENT,function(t){return 1!==t.nodeType?l.NodeFilter.FILTER_ACCEPT:t.tagName.match(g)||"svg"===t.tagName||t.className.match(m)?l.NodeFilter.FILTER_REJECT:l.NodeFilter.FILTER_SKIP},!1);null!==(v=_.nextNode());)f.push(v);else h(n,function(t){return"undefined"!=typeof t.tagName&&t.tagName.match(g)||"undefined"!=typeof t.className&&t.className.match(m)?!1:1===t.nodeType?!0:(f.push(t),!0)});f.forEach(d)}var u,c,h="+1,-1,100,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,back,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_medium_small_square,black_medium_square,black_nib,black_small_square,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,package,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkle,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_large_square,white_medium_small_square,white_medium_square,white_small_square,white_square_button,wind_chime,wine_glass,wink,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",d=h.split(/,/),f=d.reduce(function(t,e){return t[e]=!0,t},{}),p={blacklist:{ids:[],classes:["no-emojify"],elements:["script","textarea","a","pre","code"]},tag_type:null,only_crawl_id:null,img_dir:"images/emoji",ignore_emoticons:!1,mode:"img"},g={img:"img",sprite:"span","data-uri":"span"};return o.prototype={validate:function(t,e,i){function s(){return o.lastEmojiTerminatedAt=u+e,a}var o=this,a=r(t);if(a){var l=t[0],u=l.length;if(0===e)return s();if(i.length===l.length+e)return s();var c=this.lastEmojiTerminatedAt===e;if(c)return s();if(n(i.charAt(e-1)))return s();var h=n(i.charAt(l.length+e));return h&&c?s():void 0}}},{defaultConfig:p,emojiNames:d,setConfig:function(t){Object.keys(p).forEach(function(e){e in t&&(p[e]=t[e])})},replace:a,run:l}}();return t});var Emojis=function c(){_classCallCheck(this,c),emojify.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir:"/images/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),c.refresh()};Emojis.refresh=function(){for(var t=["messages","changelogs"],e=0;e<t.length;e++){var n=t[e],i=document.getElementsByClassName(n+"-list")[0];emojify&&i&&emojify.run(i)}};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Flashes=function(){function t(){var e=this;_classCallCheck(this,t),this.lock=!1,this.base_url=$("[data-flashes-url]").attr("data-flashes-url"),this.flashes=_.map(_flashes,function(t){return t.seen=!1,t.selector=t.selector||"body",t}),this.modal=$("#flashModal"),this.modal.on("hidden.bs.modal",function(t){e.lock=!1,logger.log("\ud83d\udd13Lock is unlocked"),e._try_to_display()}),this._try_to_display()}return _createClass(t,[{key:"_try_to_display",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.flashes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;!this._isFlashOnPage(s)||s.seen||this.lock?logger.log("Flash "+s.selector+" is seen or isn't on page..."):this._display(s)}}catch(o){e=!0,n=o}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}}},{key:"_display",value:function(t){this.lock=!0,log("\ud83d\udd12Lock is locked"),t.seen=!0,this._show_modal(t),this._mark_as_seen(t)}},{key:"_isFlashOnPage",value:function(t){return""==t.selector||$(t.selector).length>0}},{key:"_mark_as_seen",value:function(t){$.signedAjax({url:this.base_url+"/"+t.id+"/read",method:"POST"}).success(function(t){logger.log("\ud83d\udc40 Readed !",t)}).error(function(t){console.warn("Error in flash",t)})}},{key:"_show_modal",value:function(t){t.title&&this.modal.find("#flashModalLabel").html(t.title),this.modal.find(".modal-body").html(_.unescape(t.content)),this.modal.modal("show")}}]),t}(),Fullscreen=function h(){var t=this;_classCallCheck(this,h),$.fn.setFullScreen=function(e){t[0]&&(t[0].requestFullscreen?t[0].requestFullscreen():t[0].mozRequestFullScreen?t[0].mozRequestFullScreen():t[0].webkitRequestFullscreen&&t[0].webkitRequestFullscreen())},$("[data-toggle-fullscreen]").click(function(t){$(".page-content").setFullScreen()})},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),InfiniteScroll=function(){function t(e){_classCallCheck(this,t);var n={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",selectorName:"messages",itemContainer:".messages-list",loading:function(t){return"Loading "+(t?"previous":"next")+" "+n.selectorName+"..."},limit:250};e=e||{},this.options=_.extend(n,e),this._refreshValues(),this.nav=$(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),this._getNextItems(!0),$(document).scroll(this.paginate.bind(this)),e.onRefresh&&this.onRefresh(e.onRefresh)}return _createClass(t,[{key:"_setupReferences",value:function(){var t=$(this.options.itemContainer+" "+this.options.itemSelector).first(),e=$(this.options.itemContainer+" "+this.options.itemSelector).last();this.start=t?t.attr("data-index"):0,this.end=e?e.attr("data-index"):0}},{key:"paginate",value:function(t){var e=this._isScrollUp();return e&&0==$(document).scrollTop()&&this.scroll>350?(t.preventDefault(),t.stopImmediatePropagation(),$("body").scrollTop(this.scroll),!1):(this._refreshValues(),void(this._needMoreContent(e)&&this._getNextItems(e)))}},{key:"_needMoreContent",value:function(t){if(t)return this.scroll<this.options.limit;var e=this.docHeight-(this.winHeight+this.scroll);return e<this.options.limit}},{key:"onRefresh",value:function(t){this.callbacks.push(t)}},{key:"_addLoader",value:function(t){var e='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n      '+this.options.loading(t)+"\n    </h1>";t?$(this.options.itemContainer).prepend(e):$(this.options.itemContainer).append(e),t?$("[data-load-previous]").remove():$("[data-load-next]").remove()}},{key:"_removeLoader",value:function(){$(this.options.itemContainer+" .infinite-loader").remove()}},{key:"_generateManualButtons",value:function(){return $(this.options.prevSelector).length>0&&$(this.options.itemContainer).prepend($('<div class="btn btn-block btn-primary" data-load-previous>Load previous '+this.options.selectorName+"</div>")),$(this.options.nextSelector).length>0&&$(this.options.itemContainer).append($('<div class="btn btn-block btn-primary" data-load-next>Load next '+this.options.selectorName+"</div>")),this}},{key:"_clearManualButtons",value:function(){$("[data-load-previous], [data-load-next]").remove()}},{key:"_bindManualButtons",value:function(){var t=this;$(document).on("click","[data-load-previous]",function(e){t._getNextItems(!0)}),$(document).on("click","[data-load-next]",function(e){t._getNextItems(!1)})}},{key:"_getNextItems",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],n=e?this.options.prevSelector:this.options.nextSelector;if(!($(n).length>0))return!1;var i=function(){var i=$(n).first(),r=$(i).attr("href");return!t.lock&&r?(i.remove(),t._addLoader(e),t.lock=!0,$.get(r,function(r){var s=$(r).find(n).parent();t.nav.append(s),t.nav=$(t.options.navSelector);var o=$(r).find(t.options.itemSelector);if(e){var a=$(t.options.itemContainer+" "+t.options.itemSelector).first(),l=-document.querySelector("[data-id='"+a.attr("data-id")+"']").getBoundingClientRect().top;a.before(o),a.prevAll().each(function(){l+=$(this).outerHeight()}),$("body").scrollTop(l)}else{var u=$(t.options.itemContainer+" fantom-item").detach(),c=$(t.options.itemContainer+" [data-id='virtual']").detach();$(t.options.itemContainer+" "+t.options.itemSelector).last().after(o),$(t.options.itemContainer+" "+t.options.itemSelector).last().after(u),$(t.options.itemContainer+" "+t.options.itemSelector).last().after(c)}t.lock=!1,t._removeLoader(),t._generateManualButtons(),_.each(t.callbacks,function(t){return t(i[0])})}),{v:!0}):void 0}();return"object"==typeof i?i.v:void 0}},{key:"_isScrollUp",value:function(){return this.scroll>$(document).scrollTop()}},{key:"_refreshValues",value:function(){this.docHeight=$(document).innerHeight(),this.winHeight=$(window).innerHeight(),this.scroll=$(document).scrollTop()}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Lockable=function(){function t(){var e=this;_classCallCheck(this,t);var n=this._form_to_data;$("[data-lockable-url]").length&&setInterval(function(t){return e._synchronize_locked($("[data-lockable-url]").data("lockable-url"))},1e4),$("[data-check-lock-url]").length&&setInterval(function(t){return e._check_locked($("[data-check-lock-url]").data("check-lock-url"))},1e4),$("#lock_taken .roger").click(function(t){$("form").submit(function(t){return $.ajax({url:$(e).attr("action"),data:n($("form")),type:"POST",dataType:"JSON"}).success(function(t){document.location.href=$("#lock_taken .roger").attr("href")}),!1}),$("form").submit()})}return _createClass(t,[{key:"_synchronize_locked",value:function(t){$.getScript(t)}},{key:"_check_locked",value:function(t){$.getJSON(t,function(t){"OK"!=t.res&&($("#lock_taken .modal-body").html(t.res||""),$("#lock_taken").modal("show"))})}},{key:"_form_to_data",value:function(t){$.map($(t).find("input, select, textarea"),function(t){return $(t).attr("name")+"="+$(t).val()}).join("&")}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ManageAttachments=function(){function t(){var e=this;_classCallCheck(this,t),$.getJSON($("[data-attachments-url]").data("attachments-url"),function(t){e.values=t,$("form .attachment_kind input:hidden").each(function(t,n){0==$(n).parents("form").find(".attachment_fields input").length&&e.changed(n,$(n).val())})}),$("form").on("change","#attachment_select",function(t){e.changed(t.target)})}return _createClass(t,[{key:"changed",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?$(t).find("option:checked").html().toLowerCase():arguments[1];return function(){var n=$(t).parents(".form-group").siblings(".attachment_fields"),i=(new Date).getTime(),r=$(t).attr("name"),s="<div class='form-group input optional project_attachements'>";_.each(this.values[e],function(n,o){if(s+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+e+"' name='"+r.replace("[kind]","[attachable_attributes]["+i+"][attachable_type]]")+"' /></div>",s+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+i+"_"+o+"'>"+o+"</label>",s+="<div class='col-sm-10'>","string"==n)s+="<input class='input optional form-control' id='project_attachements_attributes_"+i+"_"+o+"' name='"+r.replace("[kind]","[attachable_attributes]["+i+"]["+o+"]")+"' />";else if("text"==n)s+="<textarea class='text optional form-control' id='project_attachements_attributes_"+i+"_"+o+"' name='"+r.replace("[kind]","[attachable_attributes]["+i+"]["+o+"]")+"' />";else if("upload"==n){s+="<input class='file optional form-control' type='file' id='project_attachements_attributes_"+i+"_"+o+"' name='"+r.replace("[kind]","[attachable_attributes]["+i+"]["+o+"]")+"' />";var a=$(t).parents("form").first();a&&a.attr("enctype","multipart/form-data")}s+="</div>"}),s+="</div>",$(n).html(s)}.apply(this,arguments)}}]),t}();(function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||u.defaults,this.rules=c.normal,this.options.gfm&&(this.options.tables?this.rules=c.tables:this.rules=c.gfm)}function e(t,e){if(this.options=e||u.defaults,this.links=t,this.rules=h.normal,this.renderer=this.options.renderer||new n,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=h.breaks:this.rules=h.gfm:this.options.pedantic&&(this.rules=h.pedantic)}function n(t){this.options=t||{}}function i(t){this.tokens=[],this.token=null,this.options=t||u.defaults,this.options.renderer=this.options.renderer||new n,this.renderer=this.options.renderer,this.renderer.options=this.options}function r(t,e){return t.replace(e?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(t){return t.replace(/&([#\w]+);/g,function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function o(t,e){return t=t.source,e=e||"",function n(i,r){return i?(r=r.source||r,r=r.replace(/(^|[^\[])\^/g,"$1"),t=t.replace(i,r),n):new RegExp(t,e)}}function a(){}function l(t){for(var e,n,i=1;i<arguments.length;i++){e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}function u(e,n,s){if(s||"function"==typeof n){s||(s=n,n=null),n=l({},u.defaults,n||{});var o,a,c=n.highlight,h=0;try{o=t.lex(e,n)}catch(d){return s(d)}a=o.length;var f=function(t){if(t)return n.highlight=c,s(t);var e;try{e=i.parse(o,n)}catch(r){t=r}return n.highlight=c,t?s(t):s(null,e)};if(!c||c.length<3)return f();if(delete n.highlight,!a)return f();for(;h<o.length;h++)!function(t){return"code"!==t.type?--a||f():c(t.text,t.lang,function(e,n){return e?f(e):null==n||n===t.text?--a||f():(t.text=n,t.escaped=!0,void(--a||f()))})}(o[h])}else try{return n&&(n=l({},u.defaults,n)),i.parse(t.lex(e,n),n)}catch(d){if(d.message+="\nPlease report this to https://github.com/chjj/marked.",(n||u.defaults).silent)return"<p>An error occured:</p><pre>"+r(d.message+"",!0)+"</pre>";throw d}}var c={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:a,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};c.bullet=/(?:[*+-]|\d+\.)/,c.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,c.item=o(c.item,"gm")(/bull/g,c.bullet)(),c.list=o(c.list)(/bull/g,c.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+c.def.source+")")(),c.blockquote=o(c.blockquote)("def",c.def)(),c._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",c.html=o(c.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,c._tag)(),c.paragraph=o(c.paragraph)("hr",c.hr)("heading",c.heading)("lheading",c.lheading)("blockquote",c.blockquote)("tag","<"+c._tag)("def",c.def)(),c.normal=l({},c),c.gfm=l({},c.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),c.gfm.paragraph=o(c.paragraph)("(?!","(?!"+c.gfm.fences.source.replace("\\1","\\2")+"|"+c.list.source.replace("\\1","\\3")+"|")(),c.tables=l({},c.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=c,t.lex=function(e,n){var i=new t(n);return i.lex(e)},t.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},t.prototype.token=function(t,e,n){for(var i,r,s,o,a,l,u,h,d,t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t))t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(e&&(s=this.rules.nptable.exec(t))){for(t=t.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].split(/ *\| */);this.tokens.push(l)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),i=!1,d=s.length,h=0;d>h;h++)l=s[h],u=l.length,l=l.replace(/^ *([*+-]|\d+\.) +/,""),~l.indexOf("\n ")&&(u-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&h!==d-1&&(a=c.bullet.exec(s[h+1])[0],o===a||o.length>1&&a.length>1||(t=s.slice(h+1).join("\n")+t,h=d-1)),r=i||/\n\n(?!\s*$)/.test(l),h!==d-1&&(i="\n"===l.charAt(l.length-1),r||(r=i)),this.tokens.push({type:r?"loose_item_start":"list_item_start"}),this.token(l,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(e&&(s=this.rules.table.exec(t))){for(t=t.substring(s[0].length),l={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},h=0;h<l.align.length;h++)/^ *-+: *$/.test(l.align[h])?l.align[h]="right":/^ *:-+: *$/.test(l.align[h])?l.align[h]="center":/^ *:-+ *$/.test(l.align[h])?l.align[h]="left":l.align[h]=null;for(h=0;h<l.cells.length;h++)l.cells[h]=l.cells[h].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(l)}else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var h={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};h._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,h._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,h.link=o(h.link)("inside",h._inside)("href",h._href)(),h.reflink=o(h.reflink)("inside",h._inside)(),h.normal=l({},h),h.pedantic=l({},h.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),h.gfm=l({},h.normal,{escape:o(h.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(h.text)("]|","~]|")("|","|https?://|")()}),h.breaks=l({},h.gfm,{br:o(h.br)("{2,}","*")(),text:o(h.gfm.text)("{2,}","*")()}),e.rules=h,e.output=function(t,n,i){var r=new e(n,i);return r.output(t)},e.prototype.output=function(t){for(var e,n,i,s,o="";t;)if(s=this.rules.escape.exec(t))t=t.substring(s[0].length),o+=s[1];else if(s=this.rules.autolink.exec(t))t=t.substring(s[0].length),"@"===s[2]?(n=":"===s[1].charAt(6)?this.mangle(s[1].substring(7)):this.mangle(s[1]),i=this.mangle("mailto:")+n):(n=r(s[1]),i=n),o+=this.renderer.link(i,null,n);else if(this.inLink||!(s=this.rules.url.exec(t))){if(s=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),
t=t.substring(s[0].length),o+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):r(s[0]):s[0];else if(s=this.rules.link.exec(t))t=t.substring(s[0].length),this.inLink=!0,o+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;else if((s=this.rules.reflink.exec(t))||(s=this.rules.nolink.exec(t))){if(t=t.substring(s[0].length),e=(s[2]||s[1]).replace(/\s+/g," "),e=this.links[e.toLowerCase()],!e||!e.href){o+=s[0].charAt(0),t=s[0].substring(1)+t;continue}this.inLink=!0,o+=this.outputLink(s,e),this.inLink=!1}else if(s=this.rules.strong.exec(t))t=t.substring(s[0].length),o+=this.renderer.strong(this.output(s[2]||s[1]));else if(s=this.rules.em.exec(t))t=t.substring(s[0].length),o+=this.renderer.em(this.output(s[2]||s[1]));else if(s=this.rules.code.exec(t))t=t.substring(s[0].length),o+=this.renderer.codespan(r(s[2],!0));else if(s=this.rules.br.exec(t))t=t.substring(s[0].length),o+=this.renderer.br();else if(s=this.rules.del.exec(t))t=t.substring(s[0].length),o+=this.renderer.del(this.output(s[1]));else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),o+=this.renderer.text(r(this.smartypants(s[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else t=t.substring(s[0].length),n=r(s[1]),i=n,o+=this.renderer.link(i,null,n);return o},e.prototype.outputLink=function(t,e){var n=r(e.href),i=e.title?r(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,i,this.output(t[1])):this.renderer.image(n,i,r(t[1]))},e.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026"):t},e.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",i=t.length,r=0;i>r;r++)e=t.charCodeAt(r),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},n.prototype.code=function(t,e,n){if(this.options.highlight){var i=this.options.highlight(t,e);null!=i&&i!==t&&(n=!0,t=i)}return e?'<pre><code class="'+this.options.langPrefix+r(e,!0)+'">'+(n?t:r(t,!0))+"\n</code></pre>\n":"<pre><code>"+(n?t:r(t,!0))+"\n</code></pre>"},n.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},n.prototype.html=function(t){return t},n.prototype.heading=function(t,e,n){return"<h"+e+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+t+"</h"+e+">\n"},n.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.prototype.list=function(t,e){var n=e?"ol":"ul";return"<"+n+">\n"+t+"</"+n+">\n"},n.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},n.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},n.prototype.table=function(t,e){return"<table>\n<thead>\n"+t+"</thead>\n<tbody>\n"+e+"</tbody>\n</table>\n"},n.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},n.prototype.tablecell=function(t,e){var n=e.header?"th":"td",i=e.align?"<"+n+' style="text-align:'+e.align+'">':"<"+n+">";return i+t+"</"+n+">\n"},n.prototype.strong=function(t){return"<strong>"+t+"</strong>"},n.prototype.em=function(t){return"<em>"+t+"</em>"},n.prototype.codespan=function(t){return"<code>"+t+"</code>"},n.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.prototype.del=function(t){return"<del>"+t+"</del>"},n.prototype.link=function(t,e,n){if(this.options.sanitize){try{var i=decodeURIComponent(s(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(r){return""}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:"))return""}var o='<a href="'+t+'"';return e&&(o+=' title="'+e+'"'),o+=">"+n+"</a>"},n.prototype.image=function(t,e,n){var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+=this.options.xhtml?"/>":">"},n.prototype.text=function(t){return t},i.parse=function(t,e,n){var r=new i(e,n);return r.parse(t)},i.prototype.parse=function(t){this.inline=new e(t.links,this.options,this.renderer),this.tokens=t.reverse();for(var n="";this.next();)n+=this.tok();return n},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,i,r,s="",o="";for(n="",t=0;t<this.token.header.length;t++)i={header:!0,align:this.token.align[t]},n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(s+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});o+=this.renderer.tablerow(n)}return this.renderer.table(s,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",a=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,a);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var l=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(l);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},a.exec=a,u.options=u.setOptions=function(t){return l(u.defaults,t),u},u.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new n,xhtml:!1},u.Parser=i,u.parser=i.parse,u.Renderer=n,u.Lexer=t,u.lexer=t.lex,u.InlineLexer=e,u.inlineLexer=e.output,u.parse=u,"undefined"!=typeof module&&"object"==typeof exports?module.exports=u:"function"==typeof define&&define.amd?define(function(){return u}):this.marked=u}).call(function(){return this||("undefined"!=typeof window?window:global)}());var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Markdownable=function(){function t(e){if(_classCallCheck(this,t),void 0==marked)logger.warn("Unable to find marked for client-side markdown compilation.");else{var n={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"};this.opts=_.extend(n,e),this._generateMarkdown()}}return _createClass(t,[{key:"_generateMarkdown",value:function(){var t=this;$(this.opts.markdownSelector).each(function(){$(this).html(marked($(this).attr(t.opts.markdownAttribute).trim()))})}}]),t}();Markdownable.singleton=void 0,Markdownable.get=function(){return void 0===Markdownable.singleton&&(Markdownable.singleton=new Markdownable),Markdownable.singleton},Markdownable._generateMarkdown=function(){Markdownable.get()._generateMarkdown()};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),MultipleActions=function(){function t(){_classCallCheck(this,t),this.selector=".table.admin_table",$(this.selector).length&&(this.bindAll(),$(this.selector).find(".btns").hide(),this.on_select_click())}return _createClass(t,[{key:"bindAll",value:function(){$(this.selector).on("click",".select.all",this.on_select_all_click.bind(this)),$(this.selector).on("click",".select.one",this.on_select_one_click.bind(this)),$(this.selector).on("click",".select",this.on_select_click.bind(this))}},{key:"on_select_click",value:function(t){var e=this;void 0!=t&&($(t.target).parents(this.selector).find(".btns")[$(t.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),$(t.target).parents(this.selector).find(".btns a").each(function(n,i){var r=Array.from($(t.target).parents(e.selector).find(".select.one").filter(":checked"),function(t){return $(t).data("id")});r=r.to_rails_params($(t.target).parents(e.selector).data("model")),$(i).attr("href",$(i).attr("href").split("?")[0]+"?"+r)}))}},{key:"on_select_all_click",value:function(t){$(t.target).parents(this.selector).find(".select.one").prop("checked",!$(t.target).parents(this.selector).find(".select.one").filter(":checked").length),$(t.target).prop("checked",$(t.target).parents(this.selector).find(".select.one").filter(":checked").length)}},{key:"on_select_one_click",value:function(t){$(t.target).parents(this.selector).find(".select.all").prop("checked",!$(t.target).parents(this.selector).find(".select.one").not(":checked").length)}}]),t}(),Overlay=function d(t){var e=this;_classCallCheck(this,d);var n={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"};this.opts=_.extend(n,t),$("["+this.opts.trigger+"]").click(function(t){(0==$("["+e.opts.widthSelector+"]").length||$(window).width()<=parseInt($("["+e.opts.widthSelector+"]").attr(e.opts.widthSelector)))&&$("["+e.opts.selector+"]").toggleClass(""+e.opts.openClass)}),$("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(t){$("["+e.opts.selector+"]").removeClass(""+e.opts.openClass)})},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),RemotePagination=function(){function t(){_classCallCheck(this,t),$("a[data-remote]").parents("[data-scroll]").length>0&&$(window).scroll(function(t){url=$(".pagination a[rel=next]").attr("href"),url&&$(window).scrollTop()>$(document).height()-$(window).height()-50&&($(".pagination").html("<li><span>Loading...</span></li>"),$.getScript(url+"?scroll=true"))}),this.loading_animation(),$(document).ajaxComplete(this.loading_animation)}return _createClass(t,[{key:"loading_animation",value:function(){var t=this;0!=$(".pagination a[data-remote]").length&&($("a[data-remote]").length>0&&0==$("a[data-remote]").parents("[data-scroll]").length&&$(".pagination").on("click","a[data-remote=true]",function(e){history.pushState("","New URL: "+$(t).attr("href"),$(t).attr("href")),$("ul.pagination").empty().html("<li><span>Loading...</span></li>"),$(window).scrollTop()>$("#main-container").offset().top-50&&$("html, body").animate({scrollTop:$("#main-container").offset().top-50},"fast")}),$("a[data-remote]").parents("[data-scroll]").length>0&&$(".pagination").hide())}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),MenuTrigger=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];_classCallCheck(this,t),this.enabled=e,this._registerEvents()}return _createClass(t,[{key:"_registerEvents",value:function(){var t=this;this.enabled?$("[data-trigger-menu]").on("click",function(e){$(".left-main-container").toggleClass("opened"),$(t).toggleClass("closed")}):$("[data-trigger-menu]").hide()}}]),t}(),ScrollSpy=function f(){_classCallCheck(this,f),$("body").scrollspy({target:"#navbar-scale",offset:30})},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Tags=function(){function t(){_classCallCheck(this,t),$("[data-filter-tags]").keyup(function(){var t=_.snakeCase($(this).val().toLowerCase());$(".sidebar-tag-item").show(),t.length>0&&$(".sidebar-tag-item:not([data-tag-name*='"+t+"'])").hide()}),$("[data-tag-collapse]").each(this.onCollapse()),$("[data-tag-collapse]").click(this.onCollapse())}return _createClass(t,[{key:"onCollapse",value:function(){var t="iconf-minus-1",e="iconf-add-1";return function(){$(this).hasClass(e)?$(this).removeClass(e).addClass(t):$(this).removeClass(t).addClass(e);var n=$(this).parent().attr("data-tag-kind");$(".sidebar-tag-item[data-tag-kind='"+n+"']").toggle()}}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),UserLink=function(){function t(e){_classCallCheck(this,t);var n={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:$(".main-left-navbar a").first().attr("href")};this.opts=_.extend(n,e),this._bindUserLinks()}return _createClass(t,[{key:"_bindUserLinks",value:function(){$(this.opts.linkSelector).hover(this._onHover,this._onLeave)}},{key:"_onHover",value:function(t){var e=$(t.target),n=e.attr(this.opts.loginAttr);$("body").append(this._getPopupTemplate(n)),this._showBubbleFor(n,e)}},{key:"_getTriggerPosition",value:function(t,e){return{left:$(t).offset().left+$(t).innerWidth()/2-$(e).innerWidth()/2,top:$(t).offset().top-$(e).innerHeight()}}},{key:"_onLeave",value:function(t){var e=$(t.target),n=e.attr(this.opts.loginAttr);$("[data-user-popup='"+n+"']").remove()}},{key:"_showBubbleFor",value:function(t,e){var n=this;$.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",url:this.opts.profileBaseUrl+"/users/"+t+".json",done:function(i){$("[data-user-popup='"+t+"']").html(n._getPopupContent(i.user)),newPopover=$("[data-user-popup='"+t+"']"),newPopover.css(n._getTriggerPosition(e,newPopover))}})}},{key:"_getPopupTemplate",value:function(t){return'\n    <div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+t+'" style="position: absolute">\n      <h3 class="marked-title">Loading...</h3>\n    </div>\n    '}},{key:"_getPopupContent",value:function(t){return'\n        <div class="user-popup-image" style="background-image: url(https://cdn.intra.42.fr/userprofil/'+t.login+'.jpg)">\n        </div>\n        <div class="user-popup-info">\n          <h3 class="user-popup-login">'+t.full_name+'</h3>\n          <span class="user-popup-email marked-title">\n            <span class="icon-envelope"></span>\n            '+t.email+'\n          </span>\n          <h5 class="user-popup-location">\n            <span data-user-location="'+t.location+'" class="icon-circle"></span>\n            '+(t.location||"unavailable")+"\n          </h5>\n        </div>\n        "}}]),t}(),MarkdownPreview=function p(t){_classCallCheck(this,p);var e={bindSelector:"data-markdown-preview"};this.opts=_.extend(e,t);var n=this;$("["+this.opts.bindSelector+"]").each(function(t){var e=this,i=$(this).attr(n.opts.bindSelector);i&&($(e).html(marked($(i).val())),$(i).keyup(function(){$(e).html(marked($(this).val()))}))})},SimplePreview=function g(t){_classCallCheck(this,g);var e={bindSelector:"data-simple-preview"};this.opts=_.extend(e,t);var n=this;$("["+this.opts.bindSelector+"]").each(function(t){var e=this,i=$(this).attr(n.opts.bindSelector);i&&$(i).keyup(function(){$(e).html($(this).val())})})},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),UserTooltip=function(){function t(){_classCallCheck(this,t);var e=this,n=500,i=null;$(".page").on("mouseenter","[data-tooltip-login]",function(){var t=$(this).data("tooltip-login"),r=$(this).data("tooltip-url"),s=$(this);i=setTimeout(function(n){0==$("[data-tooltip="+t+"]").length?0==e.checkIfOldTooltip(s,t)&&e.request(s,t,r):e.displayTooltip(s)},n)}),$(".page").on("mouseout","[data-tooltip-login]",function(){clearTimeout(i),$("[data-tooltip="+$(this).data("tooltip-login")+"]").css("visibility","hidden"),$("[data-tooltip]").css("visibility","hidden")})}return _createClass(t,[{key:"displayTooltip",value:function(t){$("[data-tooltip]").css("visibility","hidden");var e=t.data("tooltip-login");if(void 0!=$("[data-tooltip-login="+e+"]:hover")[0]){var n=t.first().offset(),i=t.first().innerWidth(),r=$("[data-tooltip="+e+"]").innerWidth();$("[data-tooltip="+e+"]").css("top",n.top-90+"px").css("left",n.left-r/2+i/2+"px").css("position","absolute").css("visibility","visible")}}},{key:"checkIfOldTooltip",value:function(t,e){var n=JSON.parse(sessionStorage.getItem(e));return null==n?!1:(this.addTooltipTemplate(n),this.displayTooltip(t),!0)}},{key:"request",value:function(t,e,n){var i=this;$.ajax({url:n+"/users/"+e+".json?ams=true",xhrFields:{withCredentials:!0},async:!0,success:function(e){i.addUserTooltip(e),i.displayTooltip(t)},error:function(t){return console.error("ajax error "+e+":"),console.log(t),null}})}},{key:"cleanInfo",value:function(t){var e=!1;if(t.location&&null!=t.location||(t.location="unavailable"),t.groups.length>0){var n=_.pluck(t.groups,"name").join(", ");t.groups=" \u2013 "+n,n.search("staff")>=0&&(e=!0,t.cursus=n,t.groups="")}if(t.cursus.length>0&&!e){var i=_.map(t.cursus,function(t){var e=_.keys(t)[0],n=Math.round(100*t[e].level)/100;return e+": lvl "+n}).join(", ");t.cursus=i}return t}},{key:"addTooltipTemplate",value:function(t){$("body").append("<div data-tooltip='"+t.login+"' class='tooltip-content'>\n		<div class='tooltip-img bg-image-item rounded' style='background-image: url("+t.image_url+")'></div>\n		<small><p class='tooltip-title'>"+t.full_name+"</p>\n		<p>"+t.location+"\n		"+t.groups+"</br>\n		"+t.cursus+"</p></small></div>")}},{key:"addUserTooltip",value:function(t){var e=this.cleanInfo(t);sessionStorage.setItem(e.login,JSON.stringify(e)),this.addTooltipTemplate(e)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Common=function(){function t(){var e=this;_classCallCheck(this,t),$(document).ready(function(t){e._ready()})}return _createClass(t,[{key:"_ready",value:function(){new ScrollSpy,new SimpleForm,new DataDate,new Importer,new Markdownable,new MarkdownPreview,new SimplePreview,void 0!=_flashes&&new Flashes,new Cache,new Copy,new Emojis,$("[data-attachments-url]").length&&new ManageAttachments,new Lockable,new Markdownable,new MultipleActions,new Overlay,new RemotePagination,new MenuTrigger,new Tags,new UserLink,new UserTooltip,new Fullscreen,new Smart,new TypeaheadHelper,new TypeaheadSearch,new CallbackMessage,this._emitReady(),autosize(document.querySelectorAll("textarea")),DataEvents.refresh()}},{key:"_emitReady",value:function(){document.dispatchEvent(new Event("intra.ready")),$(".js-hidden").addClass("js-active").removeClass("js-hidden"),this.ready()}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),BaseComponent=function(){function t(e,n){_classCallCheck(this,t),this.name=e,this.root=n,this.data=[],this._renderTemplate(),this.verbose=!0,this.bindEvents=["new","update","progress"],this.counterClass=".labeled",this.dispatcher=window.dispatcher||!1}return _createClass(t,[{key:"_channelNameFor",value:function(t){return this.name+"."+t}},{key:"_renderTemplate",value:function(){return""}},{key:"bind",value:function(t){switch(t){case"new":return this._onNew;case"update":return this._onUpdate;case"progress":return this._onProgress;default:return console.warn("Event "+t+" can't be binded on component..."),!1}}},{key:"_onNew",value:function(t){log("[new] requested !",t)}},{key:"_onUpdate",value:function(t){log("[update] requested !",t)}},{key:"_onProgress",value:function(t){this.verbose&&log("["+this.name+"] Progress "+this.name+" requested !",t)}},{key:"bindHandlers",value:function(t){var e=(arguments.length<=1||void 0===arguments[1]?"?":arguments[1],!0),n=!1,i=void 0;try{for(var r,s=this.bindEvents[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;t.bind(this._channelNameFor(o),this.bind(o))}}catch(a){n=!0,i=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw i}}}},{key:"bindPublicHandlers",value:function(t){this.dispatcher=t,this.bindHandlers(t.subscribe("global"),"global")}},{key:"_incrementCounters",value:function(){if(void 0!=this.root&&$(this.root).find(this.counterClass).length>0){var t=parseInt($(this.root).find(this.counterClass).text());$(this.root).find(this.counterClass).html(t+1),$(this.root).find(this.counterClass).attr("data-counter-count",t+1)}}},{key:"_resetCounters",value:function(){void 0!=this.root&&$(this.root).find(this.counterClass).length>0&&($(this.root).find(this.counterClass).html(0),$(this.root).find(this.counterClass).attr("data-counter-count",0))}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function(t,e,n){for(var i=!0;i;){var r=t,s=e,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=o,i=!0,a=u=void 0}},DropComponent=function(t){function e(t,n){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.dateEvents=DataDate.get(),this.containerSelector=".notifications-container",this.url=$(this.containerSelector).attr("data-notifications-url"),this.data=[],this._handleEvents(),this._askForNotifications(function(t){console.info("Notifications")}),this.render()}return _inherits(e,t),_createClass(e,[{key:"render",value:function(){this.data=_.sortBy(this.data,function(t){return t.updated_at||t.text||t.progress}).reverse(),$(this.containerSelector).html(this._renderTemplate()),this.dateEvents&&this.dateEvents._updateAll(),this._position()}},{key:"_renderTemplate",value:function(){return this.template='\n      <header class="notifications--header">\n        <span>notifications</span>\n        <a href="'+this.url+'">See all notifications</a>\n      </header>\n      <ul class="menu-drop-list">'+_.map(this.data,this._renderCellTemplate).join("")+"</ul>\n    ",this.template}},{key:"_renderCellTemplate",value:function(t){return'\n    <li class="menu-drop-item dancer '+(t.read?"read":"unread")+'">\n      <a href="'+(t.link||"#")+'">\n    '+(t.image?'<div class="menu-drop-image full-bg square-s" style="background-image: url('+t.image+')"></div>':"")+('\n        <div class="menu-drop-content">\n        '+(t.title?'<div class="menu-drop-title">'+t.title+"</div>":"")+"\n        "+(t.text?'<div class="menu-drop-text">'+t.text+"</div>":"")+"\n        "+(t.updated_at?'<span class="menu-drop-created" data-short-date="'+t.updated_at+'">'+t.updated_at+"</span>":"")+"\n        "+(t.progress?'<div class="menu-drop-progress"><div class="progress"><div class="progress-bar" style="width:'+t.progress+'%"></div></div></div>':"")+"\n        </div>\n      </a>\n    </li>\n    ")}},{key:"_onNew",value:function(t){this.verbose&&log("["+this.name+"] New "+this.name+" requested !",t),this._addItem(t),this._createNotification(t)}},{key:"_onUpdate",value:function(t){this.verbose&&log("["+this.name+"] Update "+this.name+" requested !",t),this._updateItem(t)}},{key:"_onProgress",value:function(t){if(this.verbose&&log("["+this.name+"] Progress "+this.name+" requested !",t),t.progress){var e=_.findWhere(_notifications.read,{concern:t.concern});e&&(e.progress=t.progress,this._updateItem(t))}}},{key:"_askForNotifications",value:function(t){return"granted"==Notification.permission?!0:("denied"!=Notification.permission&&Notification.requestPermission(t),"granted"==Notification.permission)}},{key:"_createNotification",value:function(t){return content=t.title+": "+t.text,"Notification"in window?"granted"==Notification.permission?(notification=new Notification(content),notification.onClick=function(e){document.location=t.link}):"denied"!=Notification.permission&&this._askForNotifications(function(e){notification=new Notification(content),notification.onClick=function(e){document.location=t.link}}):console.warn("This browser does not support desktop notification"),"granted"==Notification.permission}},{key:"_addItem",value:function(t){t=this._filterObject(t),t.onCurrentPage()||(this.data.unshift(t),this.render(),t.read||this._incrementCounters())}},{key:"_updateItem",value:function(t){if(t.read=!1,t=this._filterObject(t),!t.onCurrentPage()){var e=_.findWhere(this.data,{title:t.title,concern:t.concern});e&&(this.data=_.reject(this.data,{title:t.title,concern:t.concern}),this.data.unshift(t),this.render(),e&&e.read&&this._incrementCounters())}}},{key:"_onOpen",value:function(){var t=this;$(this.containerSelector).addClass("open"),this.data.length>0&&(this.readingTimeout=setTimeout(function(e){var n=!0,i=!1,r=void 0;try{for(var s,o=t.data[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){s.value;t.data.read=!0}}catch(a){i=!0,r=a}finally{try{!n&&o["return"]&&o["return"]()}finally{if(i)throw r}}$(t.containerSelector+" .unread").addClass("read").removeClass("unread"),t._resetCounters(),t.readingTimeout=!1,t._markAllAsRead()},1e3))}},{key:"_onClose",value:function(){$(this.containerSelector).removeClass("open"),this.readingTimeout&&clearTimeout(this.readingTimeout)}},{key:"_markAllAsRead",value:function(){$.signedAjax({url:this.url+"/read_all",method:"POST"}).done(function(t){log("Sucessfully read all !",t)})}},{key:"_handleEvents",value:function(){var t=this;$(document).on("click",this.root,function(e){$(t.containerSelector).hasClass("open")?t._onClose():t._onOpen(),e.stopImmediatePropagation()}),$(document).on("click",function(e){$(t.containerSelector).removeClass("open")})}},{key:"_position",value:function(){var t=$(".main-navbar").height(),e=$(this.root).offset().left-265;$(this.containerSelector).css({top:t,left:e})}},{key:"_filterObject",value:function(t){var e=this;return t.read||(t.read=!1),t.progress||(t.progress=!1),t.image&&void 0!=t.image.url&&(t.image=t.image.url),t.markAsRead=function(n){e.dispatcher&&e.dispatcher.trigger("notifications.read",{concern:t.concern,title:t.title})},t.onCurrentPage=function(n){return t.concern&&$("[data-concern='"+e.concern+"']").length>0?(e.markAsRead(),!0):!1},t}}]),e}(BaseComponent),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_get=function(t,e,n){for(var i=!0;i;){var r=t,s=e,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;t=u,e=s,n=o,i=!0,a=u=void 0}},FtNotification=function(t){function e(){_classCallCheck(this,e),$("[data-notification-drop]").length?(_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,"notification","[data-notification-drop]"),$(".dropdown").on("click",function(t){$(".notifications-container.open").removeClass("open")}),$("[data-notification-drop]").on("click",function(t){$(".dropdown.open").removeClass("open")}),this.manageExistingNotifications()):console.error("[FtNotification] Unable to find notifiable aera")}return _inherits(e,t),_createClass(e,[{key:"manageExistingNotifications",value:function(){if(void 0!=_notifications){var t=!0,e=!1,n=void 0;try{for(var i,r=_notifications.unread[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this._addItem(s)}}catch(o){e=!0,n=o}finally{try{!t&&r["return"]&&r["return"]()}finally{if(e)throw n}}var a=!0,l=!1,u=void 0;try{for(var c,h=_notifications.read[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var s=c.value;this._addItem(s)}}catch(o){l=!0,u=o}finally{try{!a&&h["return"]&&h["return"]()}finally{if(l)throw u}}}}}]),e}(DropComponent);$(document).ready(function(){var t=[];t.push(new FtNotification)});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),FormOptions=function(){function t(){_classCallCheck(this,t),self=this,parentForms=[];var e=!0,n=!1,i=void 0;try{for(var r,s=$("[data-hide-unless-form]")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;parentForms.push($("form #"+o.dataset.hideUnlessForm))}}catch(a){n=!0,i=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var h,d=parentForms[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var f=h.value;f.on("change",self.hideForms)}}catch(a){u=!0,c=a}finally{try{!l&&d["return"]&&d["return"]()}finally{if(u)throw c}}form.trigger("change")}return _createClass(t,[{key:"hideForms",value:function(){""==$(this).val()?$("[data-hide-unless-value]").closest(".form-group").show():($('[data-hide-unless-form=#{$(this).attr("id")}]').closest(".form-group").hide(),$("[data-hide-unless-value~="+$(this).val()+"]").closest(".form-group").show())}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),QuestsUser=function(){function t(){var e=this;_classCallCheck(this,t),$("[data-table-url]").on("keyup",".filter-search-input",function(t){$.getScript(e.make_request($(".filter-search-input").val()))}),$("[data-table-url]").on("click",".filter-search-input ~ span button",function(t){window.location.href=e.make_request($(".filter-search-input").val()).replace(".js","")})}return _createClass(t,[{key:"make_request",value:function(t){var e=$("[data-table-url]").data("table-url");return e+(-1==e.indexOf("?")?"?search=":"&search=")+encodeURI(t)}}]),t}(),Answer=function m(){_classCallCheck(this,m),$(document).on("change","[data-star-range]",function(){$(this).attr("data-star-range",$(this).val())})},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Calendar=function(){function t(){var e=this;_classCallCheck(this,t);var n=this;this._$modal=$("#slotSelectionModalContainer"),this._$calendar=$("#calendar"),this._$loading=$("#loading"),this._waitingAjax=!1,this.calendar=this._$calendar.fullCalendar({header:{left:"",center:"title",right:"today prev next"},axisFormat:"h:mm a",defaultDate:moment(),defaultView:"agendaWeek",firstDay:1,allDaySlot:!1,slotEventOverlap:!1,selectable:!1,selectHelper:!0,slotDuration:"00:30:00",snapDuration:"00:15:00",eventClick:function(t){if(!e._waitingAjax){var i=t.ids.split(",").map(function(t){return t>>0});n._populateModal(i,t),n._$modal.modal("show")}},loading:function(t){e._isLoading=t,e._isLoading?(e._intervalHandler=clearInterval(e._intervalHandler),e._timeOutHandler=setTimeout(function(t){e._loadingEnable=!0,e._$loading.show(),e._intervalHandler=setInterval(function(t){e._isLoading||(e._$loading.fadeOut(),e._loadingEnable=!1,e._intervalHandler=clearInterval(e._intervalHandler))},1e3)},100)):e._loadingEnable||clearTimeout(e._timeOutHandler)},events:function(t,e,i,r){var s={start:t.format(),end:e.format()};$.getJSON(n._$calendar.data("index-url"),s,function(t){r(t)})}}),this._bind()}return _createClass(t,[{key:"_bind",value:function(){this._$modal.on("hidden.bs.modal",".btn-primary",function(){
$(this).off(".modal")}),this._$modal.on("click.modal",".btn-primary:not(.disable)",this._sendSelectedSession.bind(this))}},{key:"_sendSelectedSession",value:function(){var t=this,e=this._$modal.find(".modal-body select"),n=e.val()>>0,i=e.data("ids").split(",").slice(n,n+this._$calendar.data("duration")).join(","),r=this._$calendar.data("update-url").replace(":ids",i);this._waitingAjax=!0,this._$loading.show(),this._$modal.find(".btn-primary").addClass("disable"),$.ajax({url:r,type:"post",dataType:"json",data:{start:this._$calendar.fullCalendar("getView").start.format(),end:this._$calendar.fullCalendar("getView").end.format(),_method:"put"},success:function(e){200==e.status&&(document.location=t._$calendar.data("reload-url"))},complete:function(e){t._showNotification(e),t._$loading.fadeOut(),t._waitingAjax=!1},error:function(e){t._$modal.find(".btn-primary").removeClass("disable")}})}},{key:"_populateModal",value:function(t,e){var n=moment(e._start),i=this._$calendar.data("duration"),r=15,s=this._$modal.find(".modal-body select"),o=t.length-i,a=0;for(s.empty();o>a;)s.append($('<option value="'+a+'"> From '+e._start.format("LT")+" to "+e._start.add(r*i,"m").format("LT")+" </option>")),e._start.subtract((i-1)*r,"m"),a+=1;e._start=n,s.data("ids",t.join(","))}},{key:"_showNotification",value:function(t){t=t.responseJSON?t.responseJSON:{status:500,message:"Error"},noty({layout:"topRight",type:200==t.status?"success":"error",text:t.message,timeout:4e3})}}],[{key:"isCalendar",value:function(){return $("#calendar").length}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),OPTIONS=["name","duration","recommendation","registration"],SELECTOR="projects-list-container",ProjectsList=function(){function t(){_classCallCheck(this,t),this.options={valueNames:_.map(OPTIONS,function(t){return"project-"+t}),sortFunction:this._sort.bind(this)},$("[data-toggle=tooltip]").tooltip(),this.projectsList=new List(SELECTOR,this.options),this._bindSearch(),this._bindFilters()}return _createClass(t,[{key:"_bindSearch",value:function(){var t=this,e=document.getElementsByClassName("projects-list--search")[0];e&&e.addEventListener("keyup",function(n){t.projectsList.search(e.value,["project-name"])})}},{key:"_bindFilters",value:function(){var t=document.getElementsByClassName("projects-list--header")[0];if(t){var e=!0,n=!1,i=void 0;try{for(var r,s=t.getElementsByClassName("filter-trigger")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;o.addEventListener("click",this._filter(o))}}catch(a){n=!0,i=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw i}}}}},{key:"_escapeValue",value:function(t){_.snakeCase(_.trim(_.deburr(t)))}},{key:"_cmp",value:function(t,e){if("project-duration"==e)return parseInt(t.elm.attributes.getNamedItem("data-"+e.slice(8)).value);var n=t.elm.attributes.getNamedItem("data-"+e.slice(8));return(n?n.value:"_")+t.elm.attributes.getNamedItem("data-name").value}},{key:"_sort",value:function(t,e,n){var i="asc"==n.order?1:-1;return this._cmp(t,n.valueName)<this._cmp(e,n.valueName)?-1*i:this._cmp(t,n.valueName)>this._cmp(e,n.valueName)?1*i:0}},{key:"_filter",value:function(t){var e=this;return function(n){if(t.classList.contains("active"))t.classList.remove("active"),t.parentElement.getElementsByClassName("filter-trigger")[0].classList.add("active"),e.projectsList.filter(e._filterClear);else{var i=!0,r=!1,s=void 0;try{for(var o,a=t.parentElement.getElementsByClassName("filter-trigger")[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;l.classList.remove("active")}}catch(u){r=!0,s=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw s}}t.classList.add("active");var c=e["_filter"+_.capitalize(_.camelCase(t.attributes.getNamedItem("data-filter").value))];e.projectsList.filter(c)}}}},{key:"_filterRecommendedProjects",value:function(t){return"a_recommended"==t.elm.attributes.getNamedItem("data-recommendation").value&&"znot_registered"==t.elm.attributes.getNamedItem("data-registration").value}},{key:"_filterClear",value:function(t){return!0}}],[{key:"isProjectsList",value:function(){return void 0!=document.getElementById(SELECTOR)}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Scales=function(){function t(){_classCallCheck(this,t),this._sliderSlt='input[type="range"]',this._skillSummaryCtnSlt=".skillSummary",this._typeInputInputSlt="[data-skill-type]",this._questionKindInputSlt="[data-question-kind]",this._addSkillStl="[data-association='questions_skills'].add_nested_fields",this._getSummarySkills(),this._createSliders(),this._bind(),$(this._sliderSlt).parents(".form-group").show(),this._updateLimits(),this._updateSummary()}return _createClass(t,[{key:"_createSliders",value:function(){var t=this,e=this;console.log(this._sliderSlt),console.log($(this._sliderSlt).length),$(this._sliderSlt).not(".slided").each(function(n,i){var r=$(i),s=r.data("kind");r.attr("max","standard"==s?100:25),r.rangeslider({polyfill:!1,onSlide:function(){e._checkLimit.apply(e,$.merge(arguments,this.$element))},onSlideEnd:function(e){t._updateLimits(),t._updateSummary()}}),r.addClass("slided")})}},{key:"_bind",value:function(){var t=this;$(document).on("change",this._questionKindInputSlt,this._onQuestionKindChange),$(document).on("change",this._typeInputInputSlt,this._onSkillIdChange),$(document).on("nested:fieldRemoved",function(e){t._updateLimits(),t._updateSummary()}),$(document).on("nested:fieldAdded:questions",function(e){e.field.find(""+t._questionKindInputSlt).change()}),$(document).on("nested:fieldAdded:questions_skills",function(e){var n=$(t._sliderSlt).not(".slided"),i=n.parents(".fields:eq(1)").find(""+t._questionKindInputSlt).val();n.data("kind",i),t._createSliders(),n.parents(".fields:eq(0)").find("[data-skill-type]").change()})}},{key:"_onQuestionKindChange",value:function(t){var e=$(t.currentTarget),n=e.parents(".fields").first(),i=n.find(this._sliderSlt);i.data("kind",e.val()),i.val(0),i.rangeslider("destroy").removeClass("slided"),this._createSliders(),this._updateLimits(),this._updateSummary()}},{key:"_onSkillIdChange",value:function(t){var e=$(t.currentTarget),n=e.val(),i=e.parents(".form-group").next(),r=i.find(this._sliderSlt);n?(i.fadeIn("slow"),r.attr("data-slider-id",n)):i.fadeOut("slow"),r.val(0),this._updateLimits(),n&&r.val(r.data("slider-limit")).change(),this._updateLimits(),this._updateSummary()}},{key:"_checkLimit",value:function(t,e,n){$(n).next().find(".rangeslider__handle").html(""+e);var i=$(n).data("slider-limit");e>i&&$(n).val(i).change()}},{key:"_updateLimits",value:function(){var t=this._getUniqSliders();t.each(function(t,e){var n=$(e).attr("data-slider-id"),i=$(e).data("kind"),r=$(e).attr("max")>>0,s=$(e).attr("min")>>0,o=$(this._sliderSlt+":visible[data-slider-id="+n+"]").filter(function(t,e){return $(e).data("kind")==i}),a=r;o.each(function(t,e){a-=$(e).val()>>0}),s>a&&(a=s),o.each(function(t,e){$(e).data("slider-limit",a+($(e).val()>>0))})})}},{key:"_getUniqSliders",value:function(){var t=$(this._sliderSlt+":visible.slided"),e={standard:[],bonus:[]};return t.filter(function(t,n){var i=$(n).attr("data-slider-id"),r=$(n).data("kind");return-1==e[r].indexOf(i)?(e[r].push(i),!0):!1})}},{key:"_getSummarySkills",value:function(){return this._summarySkills=$(this._skillSummaryCtnSlt+" [data-skill-id]").map(function(t,e){return{id:$(e).attr("data-skill-id"),$element:$(e)}}),this._summarySkills}},{key:"_updateSummary",value:function(){var t=this;this._summarySkills.each(function(e,n){var i={standard:0,bonus:0};if(n.id){var r=$(t._sliderSlt+":visible[data-slider-id="+n.id+"]");r.each(function(t,e){var n=$(e).data("kind");i[n]+=$(e).val()>>0})}n.$element.find(".standard .value").html(i.standard),n.$element.find(".bonus .value").html(i.bonus)})}}],[{key:"isScales",value:function(){return $(".skillSummary").length}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Radios=function(){function t(){_classCallCheck(this,t);var e=this;$("[data-radio-item] label").each(function(){var t=this,n=this;$("#"+$(this).attr("for")).on("change",function(t){return e._activate(n)}),$(this).on("click",function(n){return e._activate(t)})})}return _createClass(t,[{key:"_activate",value:function(t){var e=$(t).parent().attr("data-radio-item");$("[data-radio-item='"+e+"'] label").removeClass("active"),$(t).addClass("active"),$(t).hasClass("negative")?$(".scale-section-answers").addClass("hidden"):$(".scale-section-answers").removeClass("hidden")}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Rules=function(){function t(){var e=this;_classCallCheck(this,t),this.reg=/(([^ ]|\\ )*)$/,this._save="",$("form .autocomplete").map(function(t,n){return e._bindAutoComplete(n)}),this.url=$("[data-select-url]").data("select-url"),$(".rules_select").each(function(){0==$(this).find("option:checked").attr("value").length&&$(this).parents(".form-group").siblings(".params_fields").html("")}),$("form").on("change",".rules_select",function(t){return e.changed(t.target)})}return _createClass(t,[{key:"_bindAutoComplete",value:function(t){var e=this,n=$(t),i=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:location.origin+"/completions.json?query=%QUERY",wildcard:"%QUERY",prepare:function(t,n){return t=t.substring(e.reg.exec(t).index),n.url=n.url.replace("%QUERY",encodeURIComponent(t)),n},transform:function(t){return _.flatten(_.chain(t).values().map(function(e,n){return _.map(e,function(e){return e.cat=_.keys(t)[n],e.value=e.name.replace(" ","\\ "),e}).value()}))}}});i.initialize(),n.typeahead({highlight:!1,hint:!1},{display:"value",source:i.ttAdapter(),templates:{suggestion:function(t){return"<p><span class='label label-primary'> "+t.cat+" </span> &nbsp; "+t.name+"</p>"}}}),n.on("typeahead:active, typeahead:idle",function(t){$(t.currentTarget).val()&&$(t.currentTarget).val(e._value)}),n.on("typeahead:render",function(t){e._value=$(t.currentTarget).val()}),n.on("typeahead:cursorchange",function(t,n){$(t.currentTarget).val(e._value)}),n.on("typeahead:select",function(t,n){setTimeout(function(i){e._value=e._value.substring(0,e.reg.exec(e._value).index),e._value+=n?n.value:"",$(t.currentTarget).val(e._value)},0)}),n.on("typeahead:change",function(t){setTimeout(function(n){$(t.currentTarget).val()&&$(t.currentTarget).val(e._value)},0)})}},{key:"changed",value:function(t){var e=this;console.log(t);var n=$(t).parents(".form-group").siblings(".params_fields"),i=function(t){n.find(".autocomplete").typeahead("destroy"),n.html("")};fetch=function(i){$.getJSON(i,function(i){var r=$("<div class='form-group input optional project_projects_rules_rule'></div>"),s=$(t).attr("name");$.each(i,function(t,e){var n=(new Date).getTime(),i="<label class='select optional col-sm-2 control-label' for='project_projects_rules_attributes_params_attributes_"+n+"_rule_id'>"+e.name+"</label>";i+=-1!=["projects","skill","cursus"].indexOf(e.name)?"<div class='col-sm-10'><input class='input optional autocomplete form-control' data-completion-url='"+location.origin+"/completions.json' value='"+e.default_value.replace(/(')/g,"&#39;")+"' id='project_projects_rules_attributes_params_attributes_"+n+"_value' name='"+s.replace("[rule_id]","[params_project_sessions_rules_attributes]["+n+t+"][value]")+"' /></div>":"<div class='col-sm-10'><input class='input optional form-control' value='"+e.default_value.replace(/(')/g,"&#39;")+"' id='project_projects_rules_attributes_params_attributes_"+n+"_value' name='"+s.replace("[rule_id]","[params_project_sessions_rules_attributes]["+n+t+"][value]")+"' /></div>",i+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+e.id+"' name='"+s.replace("[rule_id]","[params_project_sessions_rules_attributes]["+n+t+"][param_id]")+"' /></div>",r.append(i)}),console.log(n[0],r),n.empty().append(r),r.find(".autocomplete").map(function(t,n){return e._bindAutoComplete(n)})})},0==$(t).find("option:checked").attr("value").length?i(n):fetch(this.url.replace(":id",$(t).find("option:checked").attr("value")))}}],[{key:"hasRules",value:function(){return $("[data-select-url]").length}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Skills=function(){function t(){var e=this;_classCallCheck(this,t),$("[data-add-skill]").length&&(this._$form=$("form"),this._rangeSlt='input[type="range"]:visible',this._$difficulty=$("[data-difficulty]"),this._updateLimits(),console.log("Heeere"),$(this._rangeSlt).each(function(t,n){e._initSlider($(n))}),this._$difficulty.on("change",function(t){return e._updateRanges($(e._rangeSlt))}),$(document).on("nested:fieldRemoved:projects_skills",function(t){return e._updateLimits()}),$(document).on("nested:fieldAdded:projects_skills",function(t){return e._updateRanges($(e._rangeSlt).not(".slided"))}),$(document).on("nested:fieldRemoved:partnerships_skills",function(t){return e._updateLimits()}),$(document).on("nested:fieldAdded:partnerships_skills",function(t){return e._updateRanges($(e._rangeSlt).not(".slided"))}),$(document).on("cocoon:after-remove",function(t){return e._updateLimits()}),$(document).on("cocoon:after-insert",function(t){return e._updateRanges($(e._rangeSlt).not(".slided"))}),$(document).on("cocoon:after-remove",function(t){return e._updateLimits()}),$(document).on("cocoon:after-insert",function(t){return e._updateRanges($(e._rangeSlt).not(".slided"))}))}return _createClass(t,[{key:"_updateRanges",value:function(t){var e=this,n="0"==$("[data-difficulty]").val()?100:$("[data-difficulty]").val(),i=parseFloat(n);t.each(function(t,n){var r=$(n),s=r.attr("max"),o=i*r.val()/s,a=i/100;r.attr("max",i).attr("step",a),r.rangeslider("destroy"),r.val(o),e._initSlider(r),r.val(o)}),this._updateLimits()}},{key:"_initSlider",value:function(t){var e=this;t.rangeslider({polyfill:!1,onSlide:this._checkLimit,onSlideEnd:function(t){return e._updateLimits()}}),t.addClass("slided")}},{key:"_checkLimit",value:function(t,e){var n="0"==$("[data-difficulty]").val()?100:$("[data-difficulty]").val(),i=100*e/parseFloat(n);this.$element.next().find(".rangeslider__handle").attr("data-percent",i);var r=this.$element.data("rangeUntil");e>r&&this.$element.val(r).change()}},{key:"_updateLimits",value:function(){var t="0"==$("[data-difficulty]").val()?100:$("[data-difficulty]").val(),e=parseFloat(t);$(this._rangeSlt).each(function(t,n){e-=parseFloat($(n).val())}),0>e&&(e=0),$(this._rangeSlt).each(function(t,n){$(n).data("rangeUntil",parseFloat($(n).val())+e)})}},{key:"modalCondition",value:function(){var t=0;return $(""+this._rangeSlt).each(function(e,n){t+=$(n).next().find(".rangeslider__handle").data("percent")>>0}),100!=t&&"0"!=$("[data-difficulty]").val()}},{key:"modalConfirmation",value:function(){this._$form.submit()}}],[{key:"hasSkills",value:function(){return $("[data-add-skill]").length>0}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Form=function(){function t(){_classCallCheck(this,t),console.log("constructor"),$(".new_project, .edit_project").length>0&&this._bindProject(),$(".new_scale, .edit_scale").length>0&&this._bindScale()}return _createClass(t,[{key:"_bindProject",value:function(){console.log("_bindProject"),this._bindNameCheck(),this._hideDependancies(),this._bindEstimations(),this._bindRules(),this._initRules(),this._updateSelectSkills(),$(document).on("change",".project_projects_skills_skill select",this._updateSelectSkills.bind(this)),$(document).on("cocoon:after-insert",this._updateSelectSkills.bind(this)),$(document).on("cocoon:after-remove",this._updateSelectSkills.bind(this)),$("#project_cursus_ids").change(this._updateSelectSkills.bind(this))}},{key:"_bindNameCheck",value:function(){console.log("_bindNameCheck");var t=this;$("#project_name").keyup(function(){var e=this,n=$(this);$(this).val().length>0?!function(){var i=$(e).val();$.getJSON("#{location.origin}/projects.json",function(e){var r=_.findWhere(e,{name:i});r?(t._updateNextHelp(n,"#{name} is already taken"),t._updateNextHelp("#project_tag_ids","")):(t._updateNextHelp(n,"#{name} seems to be a nice name !"),t._updateNextHelp("#project_tag_ids","The tag #{name} will also be automaticaly created."))})}():(t._updateNextHelp(n,""),t._updateNextHelp("#project_tag_ids",""))})}},{key:"_bindEstimations",value:function(){console.log("_bindEstimations"),$("#project_estimate_time").val("604800")}},{key:"_initRules",value:function(){console.log("_initRules"),$(".rules_select").each(this._setRuleTemplate)}},{key:"_bindRules",value:function(){console.log("_bindRules"),$(document).on("change",".rules_select",this._setRuleTemplate)}},{key:"_setRuleTemplate",value:function(){console.log("_setRuleTemplate");var t=_.template("\n      <div class=\"col-sm-12 lead\">\n        <h4><%= kind.toUpperCase() %>: Rule <%= name %>\n          <small>\n            <%= description || 'No description' %>\n          </small>\n        </h4>\n      </div>\n    "),e=$(this).parents(".fields").find(".rule-description").first(),n=_.findWhere(rules_description,{id:parseInt($(this).val())});n.kind&&n.name&&e.html(t(n))}},{key:"_hideDependancies",value:function(){console.log("_hideDependancies"),""==$("#project_parent_id").val()&&$(".project_inherited_team").hide(),$("#project_parent_id").change(function(){""!=$(this).val()?$(".project_inherited_team").show():$(".project_inherited_team").hide()})}},{key:"_updateNextHelp",value:function(t,e){var n=$(t).parent().find(".help-block").last();$(n).length>0&&$(n).html(e)}},{key:"_bindScale",value:function(){var t=this;console.log("_bindScale"),this._bindMarkdownPreviews(),this._checkScales(),this._bindNavbarArchi(),$(document).on("cocoon:after-insert",function(e){t._bindNavbarArchi()}),$(".section-counter-item input[type='text']").keyup(function(e){t._bindNavbarArchi()})}},{key:"_checkScales",value:function(){console.log("_checkScales");var t=_.template("\n      <p class='text-warning primary-warning'>An other scale (<%= name %>) is already set as <b>primary</b>. You can <a href='<%= link %>/edit' target='_blank'>edit it now</a></p>\n    "),e=_.template("\n      <p class='text-warning primary-warning'>There is no other scale defined as primary for this project. Don't forget to set this scale as primary later if you want to use it for defenses.</a></p>\n    ");existing_scales&&$("#scale_is_primary").parents(".checkbox").after(t(existing_scales)),$("#scale_is_primary").change(function(){var n=this.checked;$(".primary-warning").detach(),n&&existing_scales?$("#scale_is_primary").parents(".checkbox").after(t(existing_scales)):n||existing_scales||$("#scale_is_primary").parents(".checkbox").after(e())})}},{key:"_bindMarkdownPreviews",value:function(){console.log("_bindMarkdownPreviews"),$("[data-markdown-preview]").each(function(t){var e=$("<div class='markdown-preview-container'></div>");$(this).after(e),$(this).keyup(function(){$(e).html(marked($(this).val()))})})}},{key:"_bindNavbarArchi",value:function(){var t=this;console.log("_bindNavbarArchi");var e=$("#navbar-scale-edit .nav .sections-list");e.html("<li><h5 class='marked-title'><a href='#sections'>Sections <small>("+$(".section-counter-item").length+" defined)</small></a></h5><ol class='section-root'></ol></li>"),$(".section-counter-item").each(function(n){var i=$(t).find(".scale_sections_name input"),r=$("<li><a href='#"+i.attr("id")+"'>"+i.val()+"</a></li>");$(t).find(".question-item").length>0&&(q_list=$("<ol></ol>"),$(t).find(".question-item").each(function(e){var n=$(t).find(".scale_sections_questions_name input"),i=$("<li><a href='#"+n.attr("id")+"'>"+n.val()+"</a></li>");q_list.append(i)}),r.append(q_list)),e.find(".section-root").append(r)})}},{key:"_getValuesSelectSkillInputs",value:function(){_.map($(".fields:visible .project_projects_skills_skill select.chosen"),function(t){return parseInt($(t).val(),10)})}},{key:"_getAvailableSkills",value:function(){var t,e=$("#project_cursus_ids").val()||[],n=_.map(e,function(t){return available_skills[parseInt(t,10)]});(t=_).merge.apply(t,_toConsumableArray(n))}},{key:"_updateSelectSkills",value:function(){console.log("!!! _updateSelectSkills");var t=this._getValuesSelectSkillInputs(),e=this._getAvailableSkills();console.log("selected_skills",t),console.log("skills",e),e&&(e=_.without(e,t),console.log("filtered skills",e),$(".fields:visible .project_projects_skills_skill select.chosen").each(function(t,n){$(n).children(":not(:selected)").each(function(t,n){var i=parseInt($(n).val(),10);$(n).prop("disabled",-1==e.indexOf(i))}),$(n).trigger("chosen:updated")}))}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Sort=function(){function t(){var e=this;_classCallCheck(this,t),this.sortables=[];var n=this._update;$("ul[data-sortable]").each(function(t,i){var r=$(i),s=r.data("group"),o={group:s,onUpdate:function(){n(r.data("update-url"),s,this.toArray())}};e.sortables.push(new Sortable(i,o))})}return _createClass(t,[{key:"_update",value:function(t,e,n){var i={};i[e]=n,$.post(t,i,function(t){noty({layout:"topRight",type:"success",text:"Updated",timeout:4e3})})}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ProjectUserList=function(){function t(){_classCallCheck(this,t),this.OPTIONS=["project-user--user","project-user--startedat","project-user--mark"],this.SELECTOR="projectuser-list-container",this.options={valueNames:this.OPTIONS,sortFunction:this._sort,page:500},this.projectUserList=new List(this.SELECTOR,this.options),this._bindSearch(),this._bindFilters()}return _createClass(t,[{key:"_bindSearch",value:function(){var t=this,e=document.getElementsByClassName("projects-list--search")[0];e&&e.addEventListener("keyup",function(n){t.projectUserList.search(e.value,["project-user--user","project-user--mark"])})}},{key:"_bindFilters",value:function(){var t=document.getElementsByClassName("projects-list--header")[0];if(t){var e=!0,n=!1,i=void 0;try{for(var r,s=t.getElementsByClassName("filter-trigger")[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;o.addEventListener("click",this._filter(o))}}catch(a){n=!0,i=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw i}}}}},{key:"_filter",value:function(t){var e=this;return function(n){if(t.classList.contains("active"))t.classList.remove("active"),t.parentElement.getElementsByClassName("filter-trigger")[0].classList.add("active"),e.projectUserList.filter(e._filterClear);else{var i=!0,r=!1,s=void 0;try{for(var o,a=t.parentElement.getElementsByClassName("filter-trigger")[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var l=o.value;l.classList.remove("active")}}catch(u){r=!0,s=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw s}}t.classList.add("active");e["_filter"+_.capitalize(_.camelCase(t.attributes.getNamedItem("data-filter").value))];e.projectUserList.filter(e._filterProjectUserList)}}}},{key:"_escapeValue",value:function(t){_.snakeCase(_.trim(_.deburr(t)))}},{key:"_cmp",value:function(t,e){return t.elm.attributes.getNamedItem("data-#{key}").value+t.elm.attributes.getNamedItem("data-pu-user").value}},{key:"_sort",value:function(t,e,n){var i="asc"==n.order?1:-1;return this._cmp(t,n.valueName)<this._cmp(e,n.valueName)?-1*i:this._cmp(t,n.valueName)>this._cmp(e,n.valueName)?1*i:0}},{key:"_filterProjectUserList",value:function(t){return filter=$(".filter-trigger.active").data("filter"),filter&&"clear"!=filter?t.elm.attributes.getNamedItem("data-status").value==filter:!0}},{key:"_filterClear",value:function(t){return!0}}],[{key:"isProjectUserList",value:function(){return void 0!=document.getElementById("projectuser-list-container")}}]),t}(),Project=function v(){_classCallCheck(this,v),Scales.isScales()&&new Scales,Calendar.isCalendar()&&new Calendar,Rules.hasRules()&&new Rules,new Answer,new Radios,Skills.hasSkills()&&new Skills,ProjectsList.isProjectsList()&&new ProjectsList,ProjectUserList.isProjectUserList()&&new ProjectUserList,new Sort,new Form};"object"!=typeof window.Graph&&(window.Graph={}),Graph.data={},Graph.colors={grid:{fill:"#19191e"},unavailable:{fill:"#46484c",stroke:"#6f7278",strokeSize:3,text:"#6f7278",link:"#666666"},available:{fill:"#46464c",stroke:"white",strokeSize:10,text:"white",link:"white"},done:{fill:"#00BABC",stroke:"#00BABC",strokeSize:10,text:"white",link:"#00BABC"},fail:{fill:"#cc6256",stroke:"#cc6256",strokeSize:3,text:"white",link:"#cc6256"},in_progress:{fill:"#46464c",stroke:"#00BABC",strokeSize:3,text:"#00BABC",link:"#00BABC"}},Graph.styles={unavailable:{strokeColor:Graph.colors.unavailable.stroke,strokeWidth:3,fillColor:Graph.colors.unavailable.fill,text:{fontFamily:"Noto Sans",fontWeight:"bold",fontSize:20,fillColor:Graph.colors.unavailable.text,justification:"center"}},available:{strokeColor:Graph.colors.available.stroke,strokeWidth:10,fillColor:Graph.colors.available.fill,text:{fontFamily:"Noto Sans",fontWeight:"bold",fontSize:20,fillColor:Graph.colors.available.text,justification:"center"}},done:{strokeColor:Graph.colors.done.stroke,strokeWidth:10,fillColor:Graph.colors.done.fill,text:{fontFamily:"Noto Sans",fontWeight:"bold",fontSize:20,fillColor:Graph.colors.done.text,justification:"center"}},fail:{strokeColor:Graph.colors.fail.stroke,strokeWidth:3,fillColor:Graph.colors.fail.fill,text:{fontFamily:"Noto Sans",fontWeight:"bold",fontSize:20,fillColor:Graph.colors.fail.text,justification:"center"}},in_progress:{strokeColor:Graph.colors.in_progress.stroke,strokeWidth:3,fillColor:Graph.colors.in_progress.fill,text:{fontFamily:"Noto Sans",fontWeight:"bold",fontSize:20,fillColor:Graph.colors.in_progress.text,justification:"center"}}},Graph.grid={draw:function(t,e,n){t.activate(),new paper.Path.Rectangle({from:[0,0],to:[e,n]})}};var lastMousePosition=null,scaling=!1,scaling_distance=null,changeZoom=function(t,e,n){var i=t.viewToProject(n),r=getNewZoom(t,e),s=t.zoom/r,o=i.subtract(t.center),a=i.subtract(o.multiply(s)).subtract(t.center);t.zoom=r,e>0&&changeOffset(t,a),t.center=t.center.add(a)},getNewZoom=function(t,e){var n=1.08,i=getMinZoom(t),r=getMaxZoom(t);return 0>e?t.zoom*n>r?r:t.zoom*n:e>0?t.zoom/n<i?i:t.zoom/n:t.zoom},getMinZoom=function(t){return t.viewSize.height/t._project._activeLayer.getBounds().height},getMaxZoom=function(t){return 1.8},changeOffset=function(t,e){var n=t.getBounds(),i=t._project._activeLayer.getBounds();t.center.y+e.y<n.height/2&&(e.y=n.height/2-t.center.y),t.center.y+e.y+n.height/2>i.height&&(e.y=i.height-t.center.y-n.height/2),t.center.x+e.x<n.width/2&&(e.x=n.width/2-t.center.x),t.center.x+e.x+n.width/2>i.width&&(e.x=i.width-t.center.x-n.width/2),n.width>i.width&&(e.x=e.x+(n.width-i.width)/2),n.height>i.height&&(e.y=e.y+(n.height-i.height)/2)},on_frame_callback=[];Graph.zoom_handler={on_frame:function(){_.each(on_frame_callback,function(t){return t()})},zoom_to:function(t,e){var n=getMaxZoom(paper.view),i=e&&paper.view.zoom*e<n?paper.view.zoom*e:n,r=function s(){var e=paper.view.zoom;e>=i?on_frame_callback=on_frame_callback.slice(on_frame_callback.indexOf(s),0):(i>e&&Graph.zoom_handler.zoom_in(),Graph.zoom_handler.changeCenter(paper.view,t.subtract(paper.view.center),.3))};on_frame_callback.push(r)},zoom_in:function(){var t=arguments.length<=0||void 0===arguments[0]?1.08:arguments[0],e=paper.view.zoom*t,n=getMaxZoom(paper.view);paper.view.zoom=e>n?n:e},zoom_out:function(){var t=paper.view.zoom+paper.view.zoom*-.08,e=getMinZoom(paper.view);paper.view.zoom=e>t?e:t},reset_zoom:function(t){paper.view.center=t,paper.view.zoom=getMinZoom(paper.view)},changeCenter:function(t,e,n){e=e.multiply(n),changeOffset(t,e),t.center=t.center.add(e)},bind:function(t){t.mousewheel(function(t){t.shiftKey?(Graph.zoom_handler.changeCenter(paper.view,new paper.Point(t.deltaX,-t.deltaY),t.deltaFactor),t.preventDefault()):(lastMousePosition=new paper.Point(t.offsetX,t.offsetY),changeZoom(paper.view,-1*t.deltaY,lastMousePosition),t.preventDefault(),paper.view.draw())}),paper.view.onresize=function(){changeZoom(paper.view,0,lastMousePosition),paper.view.draw()},t.on("touchstart",function(t){2===t.originalEvent.touches.length&&(scaling=!0)}),t.on("touchmove",function(t){if(scaling){var e=t.originalEvent.touches,n=Math.sqrt((e[0].pageX-e[1].pageX)*(e[0].pageX-e[1].pageX)+(e[0].pageY-e[1].pageY)*(e[0].pageY-e[1].pageY));scaling_distance&&(n>scaling_distance&&Graph.zoom_handler.zoom_in(),scaling_distance>n&&Graph.zoom_handler.zoom_out(),scaling_distance=n)}}),t.on("touchend",function(t){scaling=!1,scaling_distance=null})}};var limit_double_click=200,mouse_down_point=null,last_mouse_up_time=new Date;Graph.mouse_handler={on_mouse_move:function(t){this.projects_layer.contains(t.point)?document.body.style.cursor="pointer":document.body.style.cursor="default"},on_mouse_up:function(t){if(mouse_down_point=null,this.projects_layer.contains(t.point)){var e=_.filter(Graph.data.projects,function(e){return e.$box.contains(t.point)});Graph.project.select(e,new Date-last_mouse_up_time<limit_double_click)}else{if(new Date-last_mouse_up_time<limit_double_click){var n=new paper.Point(t.event.offsetX,t.event.offsetY);Graph.zoom_handler.zoom_to(paper.view.viewToProject(n),3)}Graph.project.unselect()}last_mouse_up_time=new Date,Graph.help.hide(),Graph.search.hide()},on_mouse_drag:function(t){var e=t.point.subtract(mouse_down_point),n=-1*paper.view.zoom/2;Graph.zoom_handler.changeCenter(paper.view,e,n)},onMouseDown:function(t){mouse_down_point=t.point},bind:function(t){t.tool.onMouseDrag=Graph.mouse_handler.on_mouse_drag,t.tool.onMouseMove=Graph.mouse_handler.on_mouse_move.bind(t),t.tool.onMouseUp=Graph.mouse_handler.on_mouse_up.bind(t),t.tool.onMouseDown=Graph.mouse_handler.onMouseDown.bind(t)}};var $intra_search=$('.search-input[name="query"]'),keys_pressed={shift:!1,"+":!1,"-":!1,up:!1,down:!1,left:!1,right:!1},target_is_on_graph=function(t){return t.event.target!=$intra_search[0]},on_escape=function(){Graph.project.unselect(),Graph.search.on_escape(),Graph.help.hide()},on_key_up=function(t){target_is_on_graph(t)&&(_.isUndefined(keys_pressed[t.key])||(keys_pressed[t.key]=!1),"escape"===t.key?on_escape():"h"===t.key||"?"==t.key?Graph.help.toggle():"s"===t.key||"/"==t.key?Graph.search.show():"c"===t.key?Graph.cursus.toggle():"enter"===t.key&&Graph.description.click_on_link())},on_key_down=function(t){target_is_on_graph(t)&&(_.isUndefined(keys_pressed[t.key])||(keys_pressed[t.key]=!0))};Graph.key_handler={refresh_vars:function(){$intra_search=$('.search-input[name="query"]')},is_pressed:function(t){return keys_pressed[t]},bind:function(t){t.tool.onKeyUp=on_key_up,t.tool.onKeyDown=on_key_down}};var point=null,onFrame=function(t){Graph.key_handler.is_pressed("shift")&&(Graph.key_handler.is_pressed("up")&&Graph.zoom_handler.changeCenter(paper.view,point.set(0,-10),1),Graph.key_handler.is_pressed("down")&&Graph.zoom_handler.changeCenter(paper.view,point.set(0,10),1),Graph.key_handler.is_pressed("left")&&Graph.zoom_handler.changeCenter(paper.view,point.set(-10,0),1),Graph.key_handler.is_pressed("right")&&Graph.zoom_handler.changeCenter(paper.view,point.set(10,0),1)),Graph.key_handler.is_pressed("+")&&Graph.zoom_handler.zoom_in(),Graph.key_handler.is_pressed("-")&&Graph.zoom_handler.zoom_out(),Graph.zoom_handler.on_frame()};Graph.animation_handler={bind:function(){point=new paper.Point(0,0),paper.view.onFrame=onFrame;
}};var _slicedToArray=function(){function t(t,e){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(l){r=!0,s=l}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),is_an_internship=function(t){return"internship"===t.kind.slice(-10)},glow=function(t,e){var n={shadowBlur:0,shadowColor:null,shadowOffset:null};e&&(n={shadowBlur:180*paper.view.zoom,shadowColor:Graph.colors[t.state].stroke,shadowOffset:new paper.Point(0,0)}),t.$box.set(n),t.$box_internship&&t.$box_internship.set(n),paper.view.draw()};Graph.project={draw:function(t,e){var n=e[is_an_internship(t)?"internship":"project"];n.activate(),t.selected=!1,Graph.project["draw_"+t.kind](t,function(n){e.project.activate(),Graph.project.draw_label(t),Graph.project.set_style(t,n)})},set_style:function(t,e){t.$box&&(t.$box.style=Graph.styles[t.state])},draw_first_internship:function(t,e){t.$box_internship=new paper.Path.Circle({center:[t.x,t.y],radius:1e3,style:_.assign(_.cloneDeep(Graph.styles[t.state]),{fillColor:null})}),e()},draw_second_internship:function(t,e){t.$box_internship=new paper.Path.Circle({center:[t.x,t.y],radius:2200,style:_.assign(_.cloneDeep(Graph.styles[t.state]),{fillColor:null})}),e()},draw_rush:function(t,e){t.$box=new paper.Path.Rectangle({center:[t.x,t.y],size:new paper.Size(120,60),radius:25}),e()},draw_exam:function(t,e){t.$box=new paper.Path.Circle({center:[t.x,t.y],radius:80}),e()},draw_part_time:function(t,e){t.$box=new paper.Path.Circle({center:[t.x,t.y],radius:150}),e()},draw_project:function(t,e){t.$box=new paper.Path.Circle({center:[t.x,t.y],radius:50}),e()},draw_big_project:function(t,e){t.$box=new paper.Path.Circle({center:[t.x,t.y],radius:70}),e()},draw_piscine:function(t,e){t.$box=new paper.Path.Rectangle({center:[t.x,t.y],size:new paper.Size(180,60)}),e()},draw_label:function(t){var e=function(t,e,n,i){return new paper.Point([parseInt(n*Math.cos(i*Math.PI/180),10)+t,parseInt(n*Math.sin(i*Math.PI/180),10)+e])},n=function(t,e){t.scale(t.bounds.width>e.width-10?100*(e.width-10)/t.bounds.width/100:1)},i=function(t,e,i){t.y+=5;var r=new paper.PointText({point:t,content:i.name,style:Graph.styles[i.state].text});n(r,e)},r=function(){switch(t.kind){case"first_internship":return[e(3e3,3e3,1e3,45),new paper.Size(2e3,2e3)];case"second_internship":return[e(3e3,3e3,2200,45),new paper.Size(4400,4400)];default:return[new paper.Point(t.x,t.y),new paper.Size(t.$box.getBounds())]}}(),s=_slicedToArray(r,2),o=s[0],a=s[1];is_an_internship(t)&&(t.$box=new paper.Path.Circle({center:o,radius:100,style:Graph.styles[t.state]})),i(o,a,t)},select:function(t,e){Graph.project.unselect().then(function(){Graph.search.hide(),1===t.length&&Graph.description.show(t[0].project_id),_.each(t,function(t){t.selected=!0,glow(t,!0)}),e&&Graph.zoom_handler.zoom_to(_.last(t).$box.position)})},unselect:function(){return new Promise(function(t){Graph.description.hide(),_.each(_.filter(Graph.data.projects,{selected:!0}),function(t){t.selected=!1,glow(t,!1)}),t()})}};var get_style=function(t,e){var n=_.find(Graph.data.projects,"project_id",e.parent_id);return{strokeWidth:10,strokeColor:n&&"done"===n.state?Graph.colors[t.state].link:Graph.colors.unavailable.link}};Graph.link={draw:function(t,e){void 0!==e.by&&(t.activate(),e.$links=[],_.each(e.by,function(t){e.$links.push(new paper.Path({segments:t.points,style:get_style(e,t)}))}))}};var $description=$("#graph_description"),_template=_.template($("script.graph_description_template").html()),set_time_out_handler=null;Graph.description={refresh_vars:function(){$description=$("#graph_description"),_template=_.template($("script.graph_description_template").html())},show:function(t){var e=_.find(Graph.data.projects,{project_id:t});clearTimeout(set_time_out_handler),set_time_out_handler=setTimeout(function(){$description.html(_template(e)).fadeIn("fast")},200)},hide:function(){$description.fadeOut(0,function(){$description.empty()})},is_visible:function(){return $description.is(":visible")},click_on_link:function(){$description.is(":visible")&&(document.location=$description.find(".header > a")[0].href)}};var $search=$("#graph_search.typeahead"),$icon=$("#graph_search_icon"),on_select_project=function(t,e){return Graph.project.select(_.filter(Graph.data.projects,{project_id:e.value}),!0)};Graph.search={refresh_vars:function(){$search=$("#graph_search.typeahead"),$icon=$("#graph_search_icon")},show:function(){Graph.description.hide(),Graph.help.hide(),$search.fadeIn("fast").focus(),$icon.fadeTo(200,0)},hide:function(){$search.typeahead("val",""),$search.fadeOut("fast"),$icon.fadeTo(200,1)},is_visible:function(){return $search.is(":visible")},toggle:function(){Graph.search.is_visible()?Graph.search.hide():Graph.search.show()},on_escape:function(){Graph.search.is_visible()&&(0===$search.typeahead("val").length?Graph.search.hide():$search.typeahead("val",""))},bind:function(){$("#graph_search.typeahead").on("typeahead:selected",on_select_project),$("#graph_search_icon").on("click",Graph.search.show)}};var $help=$("#graph_help"),$helpIcon=$("#graph_help_icon");Graph.help={refresh_vars:function(){$help=$("#graph_help");$("#graph_help_icon")},show:function(t){Graph.search.is_visible()||(Graph.project.unselect(),$help.fadeIn("fast"),Graph.search.hide())},hide:function(){Graph.help.is_visible()&&$help.fadeOut("fast")},toggle:function(){Graph.help.is_visible()?Graph.help.hide():Graph.help.show()},is_visible:function(){return $help.is(":visible")},bind:function(){$helpIcon.on("click",Graph.help.toggle)}};var $cursus_selector=$("#graph_cursus");Graph.cursus={refresh_vars:function(){$cursus_selector=$("#graph_cursus")},show:function(){if(!Graph.search.is_visible())if(Graph.description.hide(),Graph.help.hide(),document.createEvent){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),$cursus_selector[0].dispatchEvent(t)}else element.fireEvent&&$cursus_selector.trigger("onmousedown")},toggle:function(){Graph.cursus.is_visible()||Graph.cursus.show()},is_visible:function(){return $cursus_selector.is(":selected")}};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),HEIGHT=6e3,WIDTH=6e3,center_point=new paper.Point(WIDTH/2,HEIGHT/2),$window=$(window),$navbar=$(".main-navbar"),$ctn=$(".view_ctn"),$canvas=$("canvas#view"),$cursus_selector=$("#graph_cursus"),$campus_selector=$("#graph_campus"),ProjectGraph=function(){function t(e){_classCallCheck(this,t),this.fetch_url=e,this.refresh_vars(),this.$canvas=$canvas,this.$cursus_selector=$cursus_selector,this.$campus_selector=$campus_selector,this.set_ctn_height(),paper.setup($canvas[0]),this.tool=new paper.Tool,this.main_layer=paper.project.activeLayer,this.links_layer=new paper.Layer,this.internship_layer=new paper.Layer,this.projects_layer=new paper.Layer,Graph.grid.draw(this.main_layer,WIDTH,HEIGHT),this.bind(),$cursus_selector.trigger("change")}return _createClass(t,[{key:"refresh_vars",value:function(){$window=$(window),$navbar=$(".main-navbar"),$ctn=$(".view_ctn"),$canvas=$("canvas#view"),$cursus_selector=$("#graph_cursus"),$campus_selector=$("#graph_campus"),Graph.description.refresh_vars(),Graph.help.refresh_vars(),Graph.search.refresh_vars(),Graph.cursus.refresh_vars(),Graph.key_handler.refresh_vars()}},{key:"set_ctn_height",value:function(){$ctn.height($window.height()-$navbar.height())}},{key:"populate",value:function(t){var e=this;return new Promise(function(n,i){e.links_layer.removeChildren(),e.projects_layer.removeChildren(),e.internship_layer.removeChildren(),_.each(t,function(t){Graph.link.draw(e.links_layer,t),Graph.project.draw(t,{project:e.projects_layer,internship:e.internship_layer})}),n()})}},{key:"getData",value:function(){var t=this;return new Promise(function(e,n){return $.ajax({url:t.fetch_url.replace("%cursus_id",$("#graph_cursus").val()).replace("%campus_id",$("#graph_campus").val()),success:e,error:n})})}},{key:"bind",value:function(){$cursus_selector.on("change",this.on_cursus_selector_change.bind(this)),$campus_selector.on("change",this.on_cursus_selector_change.bind(this)),$window.on("resize",this.set_ctn_height),Graph.zoom_handler.bind($canvas),Graph.mouse_handler.bind(this),Graph.key_handler.bind(this),Graph.search.bind(this),Graph.help.bind(this),Graph.animation_handler.bind()}},{key:"on_cursus_selector_change",value:function(t){var e=this;Graph.zoom_handler.reset_zoom(center_point),this.getData(t.currentTarget.value).then(function(t){Graph.data.projects=t,e.populate(Graph.data.projects),e.main_layer.activate(),paper.view.draw()})}}]),t}();/*! rangeslider.js - v1.0.0 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function e(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}function n(t,e){var n=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)}function i(t,e){return e=e||100,function(){if(!t.debouncing){var n=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,n),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},e),t.lastReturnVal}}function r(t){return 0===t.offsetWidth||0===t.offsetHeight||t.open===!1?!0:!1}function s(t){for(var e=[],n=t.parentNode;r(n);)e.push(n),n=n.parentNode;return e}function o(t,e){function n(t){"undefined"!=typeof t.open&&(t.open=t.open?!1:!0)}var i=s(t),r=i.length,o=[],a=t[e];if(r){for(var l=0;r>l;l++)o[l]=i[l].style.display,i[l].style.display="block",i[l].style.height="0",i[l].style.overflow="hidden",i[l].style.visibility="hidden",n(i[l]);a=t[e];for(var u=0;r>u;u++)n(i[u]),i[u].style.display=o[u],i[u].style.height="",i[u].style.overflow="",i[u].style.visibility=""}return a}function a(e,r){if(this.$window=t(window),this.$document=t(document),this.$element=t(e),this.options=t.extend({},h,r),this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&c)return!1;this.identifier="js-"+l+"-"+u++,this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier,this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier,this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=t('<div class="'+this.options.fillClass+'" />'),this.$handle=t('<div class="'+this.options.handleClass+'" />'),this.$range=t('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=t.proxy(this.handleDown,this),this.handleMove=t.proxy(this.handleMove,this),this.handleEnd=t.proxy(this.handleEnd,this),this.init();var s=this;this.$window.on("resize."+this.identifier,i(function(){n(function(){s.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+this.identifier,function(t,e){if(!e||e.origin!==s.identifier){var n=t.target.value,i=s.getPositionFromValue(n);s.setPosition(i)}})}var l="rangeslider",u=0,c=e(),h={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};a.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},a.prototype.update=function(){this.handleWidth=o(this.$handle[0],"offsetWidth"),this.rangeWidth=o(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},a.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var e=this.getRelativePosition(t),n=this.$range[0].getBoundingClientRect().left,i=this.getPositionFromNode(this.$handle[0])-n;this.setPosition(e-this.grabX),e>=i&&e<i+this.handleWidth&&(this.grabX=e-i)}},a.prototype.handleMove=function(t){t.preventDefault();var e=this.getRelativePosition(t);this.setPosition(e-this.grabX)},a.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.$element.trigger("change",{origin:this.identifier}),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},a.prototype.cap=function(t,e,n){return e>t?e:t>n?n:t},a.prototype.setPosition=function(t){var e,n;e=this.getValueFromPosition(this.cap(t,0,this.maxHandleX)),n=this.getPositionFromValue(e),this.$fill[0].style.width=n+this.grabX+"px",this.$handle[0].style.left=n+"px",this.setValue(e),this.position=n,this.value=e,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(n,e)},a.prototype.getPositionFromNode=function(t){for(var e=0;null!==t;)e+=t.offsetLeft,t=t.offsetParent;return e},a.prototype.getRelativePosition=function(t){var e=this.$range[0].getBoundingClientRect().left,n=0;return"undefined"!=typeof t.pageX?n=t.pageX:"undefined"!=typeof t.originalEvent.clientX?n=t.originalEvent.clientX:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0].clientX?n=t.originalEvent.touches[0].clientX:t.currentPoint&&"undefined"!=typeof t.currentPoint.x&&(n=t.currentPoint.x),n-e},a.prototype.getPositionFromValue=function(t){var e,n;return e=(t-this.min)/(this.max-this.min),n=e*this.maxHandleX},a.prototype.getValueFromPosition=function(t){var e,n;return e=t/(this.maxHandleX||1),n=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min,Number(n.toFixed(this.toFixed))},a.prototype.setValue=function(t){t!==this.value&&this.$element.val(t).trigger("input",{origin:this.identifier})},a.prototype.destroy=function(){this.$document.off("."+this.identifier),this.$window.off("."+this.identifier),this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+l),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0])},t.fn[l]=function(e){return this.each(function(){var n=t(this),i=n.data("plugin_"+l);i||n.data("plugin_"+l,i=new a(this,e)),"string"==typeof e&&i[e]()})}});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ScaleTeamUsers=function(){function t(e){_classCallCheck(this,t);var n={selector:"data-scale-team",userId:$("body").attr("data-id"),publicChannelName:"global",queryEvent:"scale_team_user.checkin"};this.opts=_.extend(n,e),console.log("Boot stu"),this.ws=!1,void 0!=dispatcher?(this.ws=dispatcher,this._bindWsHandler()):(console.warn("No websocket handler found :/"),this._bindAjaxHandler())}return _createClass(t,[{key:"_bindWsHandler",value:function(){var t=this;public_channel=this.ws.subscribe(this.opts.publicChannelName),public_channel.bind(this.opts.queryEvent,function(e){console.log("Checking event !",e),t._checkinFor(e.user_id,e.scale_team_id,e.login)})}},{key:"_bindAjaxHandler",value:function(){console.log("Ajax fallback :'(")}},{key:"_checkinFor",value:function(t,e,n){elt=$("[data-checkin-id='"+e+"-"+t+"']"),elt.attr("data-checkin-present","true"),noty({layout:"topRight",type:"success",text:n+" just checked in",timeout:4e3})}}],[{key:"isOnScaleTeamPage",value:function(){$("[data-scale-team]").length>0}}]),t}();(function(){var t,e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};new(t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.ready=function(){return $("select.select:not(.chosen)").each(function(){return $(this).val($(this).find("option[selected='selected']").val())}),$("canvas.graph-canvas").length?(new ProjectGraph($("canvas#view").data("fetch-url")),sessionStorage.getItem("seenHelp")||($("#graph_help").show(),sessionStorage.setItem("seenHelp",!0))):new ProjectGraph,new TypeaheadHelper,$(".scale-section-answers, .scale_team_feedback").length>0&&$('input[type="range"]').rangeslider({polyfill:!1}),ScaleTeamUsers.isOnScaleTeamPage()&&new ScaleTeamUsers,$("select#quest_kind").length>0&&new QuestFormOptions,new QuestsUser,new Project},e}(Common))}).call(this);