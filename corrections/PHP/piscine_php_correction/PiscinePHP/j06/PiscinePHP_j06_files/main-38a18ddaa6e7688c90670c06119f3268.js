/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("Flags",["Logger","lodash"],function(t,n){var r;return r=function(){function r(){this._availableFlags=["Debug","Experiments"],this._flags=n.zipObject(this._availableFlags,n.map(this._availableFlags,function(e){return sessionStorage[e]==="true"||!1}))}return r.prototype.enable=function(n){return e.call(this._availableFlags,n)>=0?(sessionStorage[n]="true",this._flags[n]=!0,t.log(n+" is now enabled")):console.warn("Unable to enable "+n+" (available: ["+this._availableFlags+"])")},r.prototype.disable=function(n){return e.call(this._availableFlags,n)>=0&&(sessionStorage[n]=null,this._flags[n]=!1,t.log(n+" is now disabled")),t.warn("Unable to disable "+n+" (available: ["+this._availableFlags+"])")},r.prototype.get=function(e){return this._flags[e]},r}(),new r})}).call(this),function(){define("Logger",["log","Flags"],function(e,t){var n;return n=function(){function n(){if(!e)return;window.log=this.log,t.get("Debug")&&this._printHello()}return n.prototype.log=function(n,r){var i;i=['color: #000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.warn=function(n,r){var i;i=['color: #d9af16; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.err=function(n,r){var i;i=['color: #a10000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype._printHello=function(){var t;return t=["height: 60px","width: 60px","display: block",'font-size: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"background-color:transparent","padding: 30px 40px 30px 70px","line-height: 50px","background-image: url('data:image/png;base64,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')","background-repeat: no-repeat","background-position: 0% 50%","background-size: auto 80%"],e("[c='"+t.join(";")+"']DEBUG MODE[c]")},n}(),new n})}.call(this),function(){define("common/add_on/array",[],function(){var e;return e=function(){function e(){Array.prototype.to_rails_params=function(e,t){var n;return t==null&&(t="id"),function(){var r,i,s;s=[];for(r=0,i=this.length;r<i;r++)n=this[r],s.push(e+"["+t.pluralize()+"][]="+n);return s}.call(this).join("&")}}return e}(),new e})}.call(this),function(){define("common/add_on/bootstrap",["jquery","bootstrap"],function(e){var t;return t=function(){function t(){e("a[rel~=popover], .has-popover").popover({trigger:"hover"}),e("a[rel~=tooltip], .has-tooltip").tooltip(),e("[data-toggle='tooltip']").tooltip()}return t}(),new t})}.call(this),function(){define("common/add_on/jquery",["common/add_on/bootstrap"],function(){var e;return e=function(){function e(){$.fn.incr=function(e,t){var n,r;e==null&&(e=1),t==null&&(t=!1);if(!$(this).length)return;return t&&(e=-e),n=$(this).html().trim(),(r=n.match(/^(\d+)\s*([\D]+)$/m))?$(this).html(r[2].pluralize(parseInt(r[1],10)+e,!0)):$(this).html(parseInt(n,10)+e)},$.fn.decr=function(e,t){return e==null&&(e=1),t==null&&(t=!1),$(this).incr(-e,t)},$.fn.reverse_state=function(){var e;return e=$(this).attr("data-state"),$(this).attr("data-state",{"true":"false","false":"true"}[e]),e.to_bool},$.fn.state=function(){var e;return e=$(this).attr("data-state"),e?e.to_bool:void 0},$.fn.inputWrapper=function(e){return this.text=e,this.each(function(e){return function(t,n){var r;return r=$("<span data-input-wrapper>"+e.text+"</span>"),$(n).after(r).css("text-indent",$(r).outerWidth()).css("padding",0),$(n).parent().attr("data-input-container","")}}(this))}}return e}(),new e})}.call(this),function(){define("common/add_on/string",["pluralize"],function(e){var t;return t=function(){function t(){Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(t,n){return t==null&&(t=42),n==null&&(n=!1),e(this,t,n)}}return t}(),new t})}.call(this),function(){define("common/add_on/main",["common/add_on/array","common/add_on/bootstrap","common/add_on/jquery","common/add_on/string"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){define("common/callback/base",[],function(){var e;return e=function(){function e(){var e;e=this,$("body").on("click","a[data-uid], [data-uid] a",function(t){var n,r,i,s;return $(this).is("[data-uid]")?(r=this,s=this,i=$(r).data("uid")):(r=this,s=$(r).parents("[data-uid]"),i=$(s).data("uid")),n="click_"+i,e.call_callback(e,n,"before",r,s),$.ajax($(r).attr("href")).success(function(t){return e.call_callback(e,n,"success",r,s,t)}).error(function(){return e.call_callback(e,n,"error",r,s)}).done(function(){return e.call_callback(e,n,"done",r,s)}),t.stopPropagation(),!1})}return e.prototype.call_callback=function(e,t,n,r,i,s){if(typeof e[n+"_"+t]=="function")return e[n+"_"+t](r,i,s)},e}()})}.call(this),function(){var e=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},t={}.hasOwnProperty;define("common/callback/message",["jquery","common/callback/base"],function(t,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype.before_click_star=function(e){return t("#favorite_count").incr(1,t(e).reverse_state())},r.prototype.before_click_pin=function(e){return t(e).reverse_state()},r.prototype.before_click_lock=function(e){return t(e).reverse_state()},r.prototype.before_click_upvote=function(e,n,r){var i;r==null&&(r=!0),r&&t(n).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,t(n).siblings("[data-uid=downvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,i);if(t(n).parents(".reply-actions").length)return t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_downvote=function(e,n,r){var i;r==null&&(r=!0),r&&t(n).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,t(n).siblings("[data-uid=upvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,!i);if(t(n).parents(".reply-actions").length)return t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_trollvote=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},r.prototype.before_click_problem=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},r.prototype.success_click_upvote=function(e,n,r){return t(n).find("span.count").html(r.upvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=downvote]").find("span.count").html(r.downvote_count)},r.prototype.success_click_downvote=function(e,n,r){return t(n).find("span.count").html(r.downvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=upvote]").find("span.count").html(r.upvote_count)},r.prototype.success_click_trollvote=function(e,n,r){return t(n).find("span.count").html(r.kind_count)},r.prototype.success_click_problem=function(e,n,r){return t(n).find("span.count").html(r.kind_count)},r.prototype.success_click_pin=function(e,n,r){if(r==="OK")return t(e).toggleClass("active")},r.prototype.success_click_lock=function(e,n,r){if(r==="OK")return t(e).toggleClass("active").toggleClass("icon-lock").toggleClass("icon-unlock")},r}(n),new r})}.call(this),function(){define("common/callback/main",["common/callback/message"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/modal/smart",["jquery","lodash","bootstrap"],function(t,n){var r;return r=function(){function r(t){var r;t==null&&(t={}),this._bind=e(this._bind,this),r={selector:"data-smart-modal",url:"data-url",container:"data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"},this.opts=n.extend(r,t),this._bind()}return r.prototype._bind=function(){var e;return e=function(e){return"["+e+"]"},t(e(this.opts.selector)).each(function(e){return function(n,r){var i,s,o,u;return u=t(r).attr(e.opts.url),i=t(r).attr(e.opts.container)||".container-item",o=t(r).attr(e.opts.titleSelector),s=t(r).attr(e.opts.footerSelector),u?t(r).click(function(){return log("Clicked "+r),t.get(u,function(n){var r,u,a;return log("Received data for modal"),u=t(n).find(i).html(),a=o?t(n).find(o).html():!1,r=s?t(n).find(s).html():!1,t(e.opts.modal).find(".modal-body").html(u),a?t(e.opts.modal).find(".modal-header").html(a).show():t(e.opts.modal).find(".modal-header").html("").hide(),r?t(e.opts.modal).find(".modal-footer").html(r).show():t(e.opts.modal).find(".modal-footer").html("").hide(),t(e.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",r)}}(this))},r}(),new r})}.call(this),function(){define("common/modal/main",["require","jquery","bootstrap","common/modal/smart"],function(e,t){var n;return n=function(){function n(){var n;n=this,t("input[data-modal-id]").on("click",function(r){var i,s,o,u;s=!0,o=t(this).data("condition"),o&&e(o)&&(u=e(t(this).data("condition")),u.modalCondition&&(s=u.modalCondition())),i=t(".modal[data-modal-id='"+t(this).data("modal-id")+"']"),n._initModal(i,t(this).data("confirmation"));if(s)return r.preventDefault(),i.modal("show")})}return n.prototype._initModal=function(t,n){if(n)return t.one("click",".btn-primary",function(t){return function(){var t,r;t=e(n),r=new t;if(r.modalConfirmation)return r.modalConfirmation()}}(this))},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/simple_form/date_picker",["jquery","lodash","datetimepicker"],function(t,n){var r;return r=function(){function r(r){r==null&&(r={}),this._bindAll=e(this._bindAll,this),this.opts=n.merge(this.DEFAULTS,r),t.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),t(document).on("nested:fieldAdded",this._bindAll))}return r.prototype.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},r.prototype._bindAll=function(){return this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")},r.prototype._setDefaults=function(){return n.merge(t.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})},r.prototype._bindDateTimePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._bindDatePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._computeOptions=function(e,r){var i,s;return r==null&&(r={}),t(e).attr(this.opts.excludeDateAttr)&&(i=t.parseJSON(t(e).attr(this.opts.excludeDateAttr)),r.disabledDates=n.map(i,function(e){return moment(e)})),t(e).attr(this.opts.includeDateAttr)&&(s=t.parseJSON(t(e).attr(this.opts.includeDateAttr)),r.enabledDates=n.map(s,function(e){return moment(e)})),t(e).attr(this.opts.minDateAttr)&&(r.minDate=moment(t(e).attr(this.opts.minDateAttr))),t(e).attr(this.opts.maxDateAttr)&&(r.maxDate=moment(t(e).attr(this.opts.maxDateAttr))),t(e).attr(this.opts.noWeekends)!=null&&(r.daysOfWeekDisabled=[0,6]),r},r}(),new r})}.call(this),function(){define("common/simple_form/chosen",["jquery","chosen-jquery"],function(e){var t;return t=function(){function t(){e(document).on("nested:fieldAdded",this._bind),this._bind()}return t.prototype._bind=function(){return e(".chosen-select").each(function(){return e(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:e(this).width()+"px"})})},t}(),new t})}.call(this),function(){define("common/simple_form/limit",["jquery","maxlength"],function(e){var t;return t=function(){function t(){e("[data-limit]").each(function(){return e(this).maxlength({maxCharacters:e(this).data("limit"),zeroStatusText:e(this).data("zero"),oneStatusText:e(this).data("one"),moreStatusText:e(this).data("more")})})}return t}(),new t})}.call(this),function(){define("common/simple_form/textarea",["jquery"],function(e){var t;return t=function(){function t(){e("textarea").keydown(function(t){var n,r,i,s;if(t.keyCode===9)return i=this.selectionStart,r=this.selectionEnd,n=e(this),s=n.val(),n.val(s.substring(0,i)+"	"+s.substring(r)),this.selectionStart=this.selectionEnd=i+1,t.preventDefault()})}return t}(),new t})}.call(this),function(){define("common/simple_form/form_group",["jquery"],function(e){var t;return t=function(){function t(){e(".form-group.other").each(function(){var t,n;return n=e(this).find("select"),t=e(n).next("input"),e(n).find("option:selected").html()!==e(n).find("option:last").html()&&e(t).hide(),n.change(function(){return e(n).find("option:selected").html()===e(n).find("option:last").html()?t.show():t.hide()})})}return t}(),new t})}.call(this),function(){define("common/simple_form/main",["common/simple_form/date_picker","common/simple_form/chosen","common/simple_form/limit","common/simple_form/textarea","common/simple_form/form_group"],function(){var e;return e=function(){function e(){}return e}()})}.call(this),function(e){var t=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return typeof e=="string"},isNumber:function(e){return typeof e=="number"},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return typeof e=="undefined"},toStr:function(n){return t.isUndefined(n)||n===null?"":n+""},bind:e.proxy,each:function(t,n){function r(e,t){return n(t,e)}e.each(t,r)},map:e.map,filter:e.grep,every:function(t,n){var r=!0;return t?(e.each(t,function(e,i){if(!(r=n.call(null,i,e,t)))return!1}),!!r):r},some:function(t,n){var r=!1;return t?(e.each(t,function(e,i){if(r=n.call(null,i,e,t))return!1}),!!r):r},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(n){function r(){return String(n)}return e.isFunction(n)?n:r},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r,i;return function(){var s=this,o=arguments,u,a;return u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r,clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},throttle:function(e,t){var n,r,i,s,o,u;return o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)},function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},noop:function(){}}}(),n="0.10.5",r=function(){function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function r(e){return function(){var r=[].slice.call(arguments,0);return function(i){var s=[];return t.each(r,function(n){s=s.concat(e(t.toStr(i[n])))}),s}}}return{nonword:n,whitespace:e,obj:{nonword:r(n),whitespace:r(e)}}}(),i=function(){function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function r(){this.head=this.tail=null}function i(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(t,n){var r=this.list.tail,s;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key]),(s=this.hash[t])?(s.val=n,this.list.moveToFront(s)):(s=new i(t,n),this.list.add(s),this.hash[t]=s,this.size++)},get:function(t){var n=this.hash[t];if(n)return this.list.moveToFront(n),n.val},reset:function(){this.size=0,this.hash={},this.list=new r}}),t.mixin(r.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),s=function(){function i(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function s(){return(new Date).getTime()}function o(e){return JSON.stringify(t.isUndefined(e)?null:e)}function u(e){return JSON.parse(e)}var e,n;try{e=window.localStorage,e.setItem("~~~","!"),e.removeItem("~~~")}catch(r){e=null}return e&&window.JSON?n={_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),u(e.getItem(this._prefix(t)))},set:function(n,r,i){return t.isNumber(i)?e.setItem(this._ttlKey(n),o(s()+i)):e.removeItem(this._ttlKey(n)),e.setItem(this._prefix(n),o(r))},remove:function(t){return e.removeItem(this._ttlKey(t)),e.removeItem(this._prefix(t)),this},clear:function(){var t,n,r=[],i=e.length;for(t=0;t<i;t++)(n=e.key(t)).match(this.keyMatcher)&&r.push(n.replace(this.keyMatcher,""));for(t=r.length;t--;)this.remove(r[t]);return this},isExpired:function(n){var r=u(e.getItem(this._ttlKey(n)));return t.isNumber(r)&&s()>r?!0:!1}}:n={get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(i.prototype,n),i}(),o=function(){function u(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?a(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new i(0):o}function a(n){return function(i,s){function u(e){t.defer(function(){o.resolve(e)})}function a(e){t.defer(function(){o.reject(e)})}var o=e.Deferred();return n(i,s,u,a),o}}var n=0,r={},s=6,o=new i(10);return u.setMaxPendingRequests=function(t){s=t},u.resetCache=function(){o.reset()},t.mixin(u.prototype,{_get:function(e,t,i){function a(t){i&&i(null,t),o._cache.set(e,t)}function f(){i&&i(!0)}function l(){n--,delete r[e],o.onDeckRequestArgs&&(o._get.apply(o,o.onDeckRequestArgs),o.onDeckRequestArgs=null)}var o=this,u;if(this.cancelled||e!==this.lastUrl)return;(u=r[e])?u.done(a).fail(f):n<s?(n++,r[e]=this._send(e,t).done(a).fail(f).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(e,n,r){var i;return t.isFunction(n)&&(r=n,n={}),this.cancelled=!1,this.lastUrl=e,(i=this._cache.get(e))?t.defer(function(){r&&r(null,i)}):this._get(e,n,r),!!i},cancel:function(){this.cancelled=!0}}),u}(),u=function(){function n(t){t=t||{},(!t.datumTokenizer||!t.queryTokenizer)&&e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function r(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()}),e}function i(){return{ids:[],children:{}}}function s(e){var t={},n=[];for(var r=0,i=e.length;r<i;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function o(e,t){function u(e,t){return e-t}var n=0,r=0,i=[];e=e.sort(u),t=t.sort(u);var s=e.length,o=t.length;while(n<s&&r<o)e[n]<t[r]?n++:e[n]>t[r]?r++:(i.push(e[n]),n++,r++);return i}return t.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var s,o;s=n.datums.push(e)-1,o=r(n.datumTokenizer(e)),t.each(o,function(e){var t,r,o;t=n.trie,r=e.split("");while(o=r.shift())t=t.children[o]||(t.children[o]=i()),t.ids.push(s)})})},get:function(n){var i=this,u,a;return u=r(this.queryTokenizer(n)),t.each(u,function(e){var t,n,r,s;if(a&&a.length===0)return!1;t=i.trie,n=e.split("");while(t&&(r=n.shift()))t=t.children[r];if(!t||n.length!==0)return a=[],!1;s=t.ids.slice(0),a=a?o(a,s):s}),a?t.map(s(a),function(e){return i.datums[e]}):[]},reset:function(){this.datums=[],this.trie=i()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),a=function(){function r(e){return e.local||null}function i(r){var i,s;s={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}};if(i=r.prefetch||null)i=t.isString(i)?{url:i}:i,i=t.mixin(s,i),i.thumbprint=n+i.thumbprint,i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",!i.url&&e.error("prefetch requires url to be set");return i}function s(n){function s(e){return function(n){return t.debounce(n,e)}}function o(e){return function(n){return t.throttle(n,e)}}var r,i;i={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(r=n.remote||null)r=t.isString(r)?{url:r}:r,r=t.mixin(i,r),r.rateLimiter=/^throttle$/i.test(r.rateLimitBy)?o(r.rateLimitWait):s(r.rateLimitWait),r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",delete r.rateLimitBy,delete r.rateLimitWait,!r.url&&e.error("remote requires url to be set");return r}return{local:r,prefetch:i,remote:s}}();(function(n){function l(t){(!t||!t.local&&!t.prefetch&&!t.remote)&&e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=c(t.sorter),this.dupDetector=t.dupDetector||h,this.local=a.local(t),this.prefetch=a.prefetch(t),this.remote=a.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new u({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new s(this.cacheKey):null}function c(e){function n(t){return t.sort(e)}function r(e){return e}return t.isFunction(e)?n:r}function h(){return!1}var i,f;return i=n.Bloodhound,f={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=l,l.noConflict=function(){return n.Bloodhound=i,l},l.tokenizers=r,t.mixin(l.prototype,{_loadPrefetch:function(n){function o(e){r.clear(),r.add(n.filter?n.filter(e):e),r._saveToStorage(r.index.serialize(),n.thumbprint,n.ttl)}var r=this,i,s;return(i=this._readFromStorage(n.thumbprint))?(this.index.bootstrap(i),s=e.Deferred().resolve()):s=e.ajax(n.url,n.ajax).done(o),s},_getFromRemote:function(t,n){function o(e,t){e?n([]):n(r.remote.filter?r.remote.filter(t):t)}var r=this,i,s;if(!this.transport)return;return t=t||"",s=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,s),this.transport.get(i,this.remote.ajax,o)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(t,n,r){this.storage&&(this.storage.set(f.data,t,r),this.storage.set(f.protocol,location.protocol,r),this.storage.set(f.thumbprint,n,r))},_readFromStorage:function(t){var n={},r;return this.storage&&(n.data=this.storage.get(f.data),n.protocol=this.storage.get(f.protocol),n.thumbprint=this.storage.get(f.thumbprint)),r=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!r?n.data:null},_initialize:function(){function u(){r.add(t.isFunction(i)?i():i)}var r=this,i=this.local,s;return s=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),i&&s.done(u),this.transport=this.remote?new o(this.remote):null,this.initPromise=s.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(n,r){function u(e){var n=s.slice(0);t.each(e,function(e){var r;return r=t.some(n,function(t){return i.dupDetector(e,t)}),!r&&n.push(e),n.length<i.limit}),r&&r(i.sorter(n))}var i=this,s=[],o=!1;s=this.index.get(n),s=this.sorter(s).slice(0,this.limit),s.length<this.limit?o=this._getFromRemote(n,u):this._cancelLastRemoteRequest(),o||(s.length>0||!this.transport)&&r&&r(s)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&o.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),l})(this)}(window.jQuery),define("bloodhound",["jquery"],function(e){return function(){var t,n;return t||e.Bloodhound}}(this)),function(){define("common/typeahead/search",["jquery","typeahead","bloodhound"],function(e,t){var n;return n=function(){function t(){this.form=e(".main-navbar-search"),this.input=this.form.find("input"),this.fetch_url=this.form.attr("action"),this.userUrl=this.form.attr("data-user-url"),this.input.length&&this._setupTypeahead()}return t.prototype._setupTypeahead=function(){var e,t;return t=this,this._bindEnter(),this.form.addClass("js-search"),e=this._getBloodhound(),e.initialize(),this.input.typeahead({highlight:!0,hint:!0},{displayKey:"value",source:e.ttAdapter(),templates:{suggestion:function(e){return"<a href='"+t.userUrl+e.value+"' class='search-suggestion-item'><div class='search-user-picture bg-image-item rounded square-xs' style='background-image: url(https://cdn.42.fr/userprofil/profilview/"+e.value+".jpg)'></div><span>"+e.value+"</span></a>"}}})},t.prototype._bindEnter=function(){var t;return t=this,this.form.find("input[name='query']").keyup(function(n){if(n.keyCode===13)return e(t.form).submit()})},t.prototype._getBloodhound=function(){return new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.fetch_url+".json?query=*%QUERY*",filter:function(e){return _.map(e,function(e){return{value:e}})}}})},t}(),new n})}.call(this),function(){define("common/typeahead/main",["jquery","typeahead","bloodhound","common/typeahead/search"],function(e){var t;return t=function(){function t(){var t;t=this,e(".typeahead").each(function(){var n,r;return n=e(this),r=t._getBloodhound.call(this),r.initialize(),n.typeahead({highlight:!0,hint:!1},{displayKey:"displayKey",source:r.ttAdapter()}).on("typeahead:selected",function(e,t){return n.parents("form").find('input[type="hidden"][data-typeahead-'+n.data("displayKey")+"]").val(t.value)})})}return t.prototype._getBloodhound=function(){var t;return t=e(this),new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:t.data("url")+"?query=%QUERY",filter:function(n){return e.map(n,function(e){return{displayKey:e[t.data("displayKey")],value:e[t.data("valueKey")||"id"],data:e}})}}})},t}(),new t})}.call(this),function(){define("common/bug_report",["Logger","jquery","bootstrap"],function(e,t){var n;return n=function(){function n(){var e,n;e=undefined,n=this,t("a#help").click(function(){return t("#bugModalContainer").modal("show"),e=t(this).attr("id"),t(this).attr("data-request")!=="ok"?t.ajax(t(this).data("url"),{jsonp:"callback",dataType:"jsonp",success:function(e){return function(e){return t("a#help").attr("data-request","ok"),t("#bugModalContainer .modal-body").html(e.form),n.update_attr(t("form#new_bug")),t("#bugModalContainer").on("click",".send",n.send_email)}}(this)}):t("#bugModalContainer").modal("show"),!1})}return n.prototype.update_attr=function(e){return t(e).find("input#bug_subject").val("[BUGS] "),t(e).find("input#bug_os").val(t.os.name),t(e).find("input#bug_browser").val(t.browser.name+(" (version "+t.browser.version+")")),t(e).find("input#bug_action").val(t("a#help").data("action")),t(e).find("input#bug_controller").val(t("a#help").data("controller")),t(e).find("input#bug_link").val(t(location).attr("href")),t(e).find("textarea#bug_content").val("Bonjour,\n\nJe suis "+t("[data-login]").data("login")+" et je suis actuellement sur la page "+t(location).attr("href")+".\nJe suis sous "+t.os.name+" avec "+t.browser.name+" (version "+t.browser.version+") \n\n\nVoici mon problème : \n")},n.prototype.send_email=function(){var n,r;return r=t("form#new_bug"),n="",t("#text_mail").length===0&&t("#bug .modal-footer").prepend("<span id='text_mail' style='margin-right: 20%; font-weight: bold;'>Envoi en cours!<img src='/assets/ajax-loader.gif' style='margin-left: 20px'/></span>"),t("#bug .modal-footer .send").hide(),r.find("input, textarea").each(function(){var e;return e=t(this).attr("name")+"="+encodeURIComponent(t(this).val()),n===""?n=e:n+="&"+e}),t.ajax(r.attr("action"),{jsonp:"callback",dataType:"jsonp",data:n,success:function(n){return e.log(n.success),t("#bugModalContainer #text_mail").fadeOut("slow",function(){return t("#bugModalContainer #text_mail").remove(),t("#bugModalContainer .modal-footer .send").show()}),n.status==="OK"?(noty({layout:"topRight",type:"success",text:"Your bug has been reported. Thanks !",timeout:4e3}),t("#bugModalContainer").modal("hide")):(e.log(n),noty({layout:"topRight",type:"error",text:n.error,timeout:4e3})),t("#bugModalContainer").modal("hide")}})},n}(),new n})}.call(this),function(){define("common/cache",["jquery"],function(e){var t;return t=function(){function t(){this._$element=e("[data-cache]"),this._$element.find("[data-cache-target]").each(function(){var t,n;return t=e(this),n=e(""+t.data("cache-target")),n.html(t.html())})}return t}(),new t})}.call(this),function(){define("common/copy",["jquery","zeroclipboard"],function(e,t){var n;return n=function(){function n(){t.config({swfPath:"/assets/clipboard-8d300934b0e6dbff620155650e9246a4.swf"}),e("[data-copy]").each(function(e){return function(t,n){return e._initCopy(n)}}(this))}return n.prototype._initCopy=function(n){var r;return r=new t(n),r.on("ready",function(){return r.on("copy",function(t){var r,i;return i=e(""+e(n).data("copy")).val(),r=e(n).data("copy-type")||"text/plain",t.clipboardData.setData(r,i),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/data_bindings",["jquery","lodash"],function(t,n){var r;return r=function(){function r(t){this._refreshSumTargetsFor=e(this._refreshSumTargetsFor,this);var r;r={bindSelector:"data-bind",sumSelector:"data-sum"},this.opts=n.extend(r,t),this._bindInitialEvents()}return r.prototype._bindInitialEvents=function(){var e;return e=this,t("["+e.opts.bindSelector+"]").bind("DOMSubtreeModified",function(n){var r;return n.stopImmediatePropagation(),r=t("["+e.opts.sumSelector+"='"+t(this).attr(e.opts.bindSelector)+"']"),t("["+e.opts.bindSelector+"='"+t(this).attr(e.opts.bindSelector)+"']").html(t(this).html()),e._refreshSumTargetsFor(t(this).attr(e.opts.bindSelector))})},r.prototype._refreshSumTargetsFor=function(e){var r,i,s,o,u,a;e=e.split(".")[0],u=t("["+this.opts.sumSelector+"^='"+e+"']");if(u.length>0)return a=u.attr(""+this.opts.sumSelector),i=a[a.length-1]==="*"?"^=":"=",r="["+this.opts.bindSelector+i+"'"+e+"']",s=t("["+this.opts.bindSelector+i+"'"+e+"']"),o=n.reduce(s,function(e,n){return e+parseInt(t(n).html())||0},0),u.html(o)},r.prototype._observeDOM=function(){var e,t;return e=window.MutationObserver||window.WebKitMutationObserver,t=window.addEventListener,function(n,r){var i;e?(i=new e(function(e,t){(e[0].addedNodes.length||e[0].removedNodes.length)&&r()}),i.observe(n,{childList:!0,subtree:!0})):t&&(n.addEventListener("DOMNodeInserted",r,!1),n.addEventListener("DOMNodeRemoved",r,!1))}},r}(),new r})}.call(this),function(){define("common/data_events",["jquery"],function(e){var t;return t=function(){function t(){this.refresh()}return t.prototype.refresh=function(){return this.attachFocusEvents(),this.attachToggleEvents()},t.prototype.attachFocusEvents=function(){return e("[data-event-focus]").click(function(){return e(e(this).attr("data-event-focus")).focus()})},t.prototype.attachToggleEvents=function(){return e("[data-event-toggle]").each(function(){var t,n,r;return t=e(this).attr("data-event-container"),r=e(this).attr("data-event-toggle"),n=t?e(this).parents(t):e(this).parent(),e(n).find(r).addClass("hidden"),e(this).click(function(t){return t.stopImmediatePropagation(),e(n).find(r).toggleClass("hidden"),e(this).toggleClass("active"),!1})})},t}(),new t})}.call(this),function(){define("common/data_date",["jquery","moment-twitter"],function(e,t){var n;return n=function(){function n(){this._updateAll(),this.handler=setInterval(this._updateAll,61e3)}return n.prototype._updateAll=function(){return e("[data-long-date]").each(function(){return e(this).html(t(e(this).attr("data-long-date"),"YYYY-MM-DD HH:mm Z").fromNow())}),e("[data-short-date]").each(function(){return e(this).html(t(e(this).attr("data-short-date"),"YYYY-MM-DD HH:mm Z").twitter())}),e("[data-cal-date]").each(function(){return e(this).html(t(e(this).attr("data-cal-date"),"YYYY-MM-DD HH:mm Z").calendar())})},n.prototype.refresh=function(){return this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,61e3)},n}()})}.call(this),function(){define("common/emojify",["emojify"],function(e){var t;return t=function(){function t(){e.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir:"/images/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),this.refresh()}return t.prototype.refresh=function(){var t,n,r,i,s,o;i=["messages","changelogs"],s=[];for(n=0,r=i.length;n<r;n++)o=i[n],t=document.getElementsByClassName(o+"-list")[0],e&&t!=null?s.push(e.run(t)):s.push(void 0);return s},t}(),new t})}.call(this),function(){define("common/fullscreen",["jquery"],function(e){var t;return t=function(){function t(){e("[data-toggle-fullscreen]").click(function(){var t;t=e(".page-content")[0];if(t){if(t.requestFullscreen)return t.requestFullscreen();if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen()}}),document.addEventListener("webkitfullscreenchange",function(){return e("html").toggleClass("fullscreen")},!1)}return t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/infinite_scroll",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._bindManualButtons=e(this._bindManualButtons,this),this._clearManualButtons=e(this._clearManualButtons,this),this._generateManualButtons=e(this._generateManualButtons,this),this.paginate=e(this.paginate,this);var i;i={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",itemContainer:".messages-list",loading:function(e){return"Loading "+(e?"previous":"next")+" messages..."},limit:250},r||(r={}),this.options=n.extend(i,r),this._refreshValues(),this.nav=t(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),t(document).scroll(this.paginate),r.onRefresh&&this.onRefresh(r.onRefresh)}return r.prototype._setupReferences=function(){var e,n;return e=t(this.options.itemContainer+" "+this.options.itemSelector).first(),n=t(this.options.itemContainer+" "+this.options.itemSelector).last(),this.start=e?e.attr("data-index"):0,this.end=n?n.attr("data-index"):0},r.prototype.paginate=function(e){var n;n=this._isScrollUp();if(n&&t(document).scrollTop()===0&&this.scroll>350)return e.preventDefault(),e.stopImmediatePropagation(),t("body").scrollTop(this.scroll),!1;this._refreshValues();if(this._needMoreContent(n))return this._getNextItems(n)},r.prototype._needMoreContent=function(e){var t;return e?this.scroll<this.options.limit:(t=this.docHeight-(this.winHeight+this.scroll),t<this.options.limit)},r.prototype.onRefresh=function(e){return this.callbacks.push(e)},r.prototype._addLoader=function(e){var n;return n='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n  '+this.options.loading(e)+"\n</h1>",e?t(""+this.options.itemContainer).prepend(n):t(""+this.options.itemContainer).append(n),e?t("[data-load-previous]").remove():t("[data-load-next]").remove()},r.prototype._removeLoader=function(){return t(this.options.itemContainer+" .infinite-loader").remove()},r.prototype._generateManualButtons=function(){return t(this.options.prevSelector).length>0&&t(this.options.itemContainer).prepend(t('<div class="btn btn-block btn-primary" data-load-previous>Load previous messages</div>')),t(this.options.nextSelector).length>0&&t(this.options.itemContainer).append(t('<div class="btn btn-block btn-primary" data-load-next>Load next messages</div>')),this},r.prototype._clearManualButtons=function(){return t("[data-load-previous], [data-load-next]").remove()},r.prototype._bindManualButtons=function(){return t(document).on("click","[data-load-previous]",function(e){return function(){return e._getNextItems(!0)}}(this)),t(document).on("click","[data-load-next]",function(e){return function(){return e._getNextItems(!1)}}(this))},r.prototype._getNextItems=function(e){var r,i,s;return e==null&&(e=!1),s=e?this.options.prevSelector:this.options.nextSelector,t(s).length>0?(r=t(s).first(),i=t(r).attr("href"),!this.lock&&i&&(r.remove(),this._addLoader(e),this.lock=!0,t.get(i,function(r){return function(i){var o,u,a,f,l;return f=t(i).find(r.options.navSelector),a=t(i).find(s).parent(),r.nav.append(a),r.nav=t(r.options.navSelector),u=t(i).find(r.options.itemSelector),e?(o=t(r.options.itemContainer+" "+r.options.itemSelector).first(),l=-document.querySelector("[data-id='"+o.attr("data-id")+"']").getBoundingClientRect().top,o.before(u),o.prevAll().each(function(){return l+=t(this).outerHeight()}),t("body").scrollTop(l)):t(r.options.itemContainer+" "+r.options.itemSelector).last().after(u),r.lock=!1,r._removeLoader(),r._generateManualButtons(),n.each(r.callbacks,function(e){return e()})}}(this))),!0):!1},r.prototype._isScrollUp=function(){return this.scroll>t(document).scrollTop()},r.prototype._refreshValues=function(){return this.docHeight=t(document).innerHeight(),this.winHeight=t(window).innerHeight(),this.scroll=t(document).scrollTop()},r}()})}.call(this),function(){define("common/lockable",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this._form_to_data,e("[data-lockable-url]").length&&setInterval(function(t){return function(){return t._synchronize_locked(e("[data-lockable-url]").data("lockable-url"))}}(this),1e4),e("[data-check-lock-url]").length&&(setInterval(function(t){return function(){return t._check_locked(e("[data-check-lock-url]").data("check-lock-url"))}}(this),1e4),e("#lock_taken .roger").click(function(n){return function(){return e("form").submit(function(){return e.ajax({url:e(this).attr("action"),data:t(e("form")),type:"POST",dataType:"JSON"}).success(function(t){return document.location.href=e("#lock_taken .roger").attr("href")}),!1}),e("form").submit()}}(this)))}return t.prototype._synchronize_locked=function(t){return e.getScript(t)},t.prototype._check_locked=function(t){return e.getJSON(t,function(t){var n;if(t.res!=="OK")return e("#lock_taken .modal-body").html((n=t["res"])!=null?n:""),e("#lock_taken").modal("show")})},t.prototype._form_to_data=function(t){return e.map(e(t).find("input, select, textarea"),function(t){return e(t).attr("name")+"="+e(t).val()}).join("&")},t}(),new t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/manage_attachment",["jquery"],function(t){var n;n=function(){function n(){this.changed=e(this.changed,this),t.getJSON(t("[data-attachments-url]").data("attachments-url"),function(e){return function(t){return e.values=t}}(this)),t("form").on("change","#attachment_select",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e){var n,r,i,s,o,u,a,f;o=t(e).find("option:checked").html().toLowerCase(),n=t(e).parents(".form-group").siblings(".attachment_fields"),a=(new Date).getTime(),r=t(e).attr("name"),i="<div class='form-group input optional project_attachements'>",u=this.values[o];for(s in u)f=u[s],i+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+o+"' name='"+r.replace("[kind]","[attachable_attributes]["+a+"][attachable_type]]")+"' /></div>",i+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+a+"_"+s+"'>"+s+"</label>",i+="<div class='col-sm-10'>",f==="string"?i+="<input class='input optional form-control' id='project_attachements_attributes_"+a+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+a+"]["+s+"]")+"' />":f==="text"?i+="<textarea class='text optional form-control' id='project_attachements_attributes_"+a+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+a+"]["+s+"]")+"' />":f==="upload"&&(i+="<input class='file optional form-control' type='file' id='project_attachements_attributes_"+a+"_"+s+"' name='"+r.replace("[kind]","[attachable_attributes]["+a+"]["+s+"]")+"' />"),i+="</div>";return i+="</div>",t(n).html(i)},n}();if(t("[data-attachments-url]").length)return new n})}.call(this),function(){define("common/markdownable",["jquery","marked","Logger"],function(e,t,n){var r;return r=function(){function r(e){var r;t==null?n.warn("Unable to find marked for client-side markdown compilation."):(r={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"},this.opts=_.extend(r,e),this._generateMarkdown())}return r.prototype._generateMarkdown=function(){var n;return n=this,e(this.opts.markdownSelector).each(function(){return e(this).html(t(e(this).attr(n.opts.markdownAttribute).trim()))})},r}(),new r})}.call(this),function(){define("common/mobilize",["lodash","fastclick"],function(e,t){var n;return n=function(){function n(n){var r;r={fastclick:!0,overscroll:!0,overscrollTarget:".page"},this.opts=e.extend(r,n),this.opts.fastclick&&t.attach(document.body),this.opts.overscroll&&this._overscroll(this.opts.overscrollTarget)}return n.prototype._overscroll=function(e){var t;return t=function(e){e.addEventListener("touchstart",function(){var t,n,r;n=e.scrollTop,r=e.scrollHeight,t=n+e.offsetHeight,n===0?e.scrollTop=1:t===r&&(e.scrollTop=n-1)}),e.addEventListener("touchmove",function(t){e.offsetHeight<e.scrollHeight&&(t._isScroller=!0)})},document.querySelector(e)&&t(document.querySelector(e)),document.body.addEventListener("touchmove",function(e){e._isScroller||e.preventDefault()})},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/multiple_actions",["jquery"],function(t){var n;return n=function(){function n(){this.on_select_one_click=e(this.on_select_one_click,this),this.on_select_all_click=e(this.on_select_all_click,this),this.on_select_click=e(this.on_select_click,this),this.selector=".table.admin_table",t(this.selector).length&&(this.bindAll(),t(this.selector).find(".btns").hide(),this.on_select_click())}return n.prototype.bindAll=function(){var e;return e=this,t(this.selector).on("click",".select.all",this.on_select_all_click),t(this.selector).on("click",".select.one",this.on_select_one_click),t(this.selector).on("click",".select",this.on_select_click)},n.prototype.on_select_click=function(e){if(!e)return;return t(e.target).parents(this.selector).find(".btns")[t(e.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),t(e.target).parents(this.selector).find(".btns a").each(function(n){return function(r,i){var s;return s=t(e.target).parents(n.selector).find(".select.one").filter(":checked").map(function(){return t(this).data("id")}).toArray(),s=s.to_rails_params(t(e.target).parents(n.selector).data("model")),t(i).attr("href",t(i).attr("href").split("?")[0]+"?"+s)}}(this))},n.prototype.on_select_all_click=function(e){return t(e.target).parents(this.selector).find(".select.one").prop("checked",!t(e.target).parents(this.selector).find(".select.one").filter(":checked").length),t(e.target).prop("checked",t(e.target).parents(this.selector).find(".select.one").filter(":checked").length)},n.prototype.on_select_one_click=function(e){return t(e.target).parents(this.selector).find(".select.all").prop("checked",!t(e.target).parents(this.selector).find(".select.one").not(":checked").length)},n}(),new n})}.call(this),function(){define("common/notifications_manager",["jquery","tinycon"],function(e,t){var n;return n=function(){function n(t){if(!window.webkitNotifications||window.webkitNotifications.checkPermission()===0||e("body[data-id]").length!==0)return;this._setDefaultOptions(),t=e.extend(this.default_notif_options,t),e("#browser_notification").on("click",function(){return e(this).parents(".alert").remove(),window.webkitNotifications.requestPermission()}),this.alert("Configure browser notifications : <a href='#' id='browser_notification'>Let's Go!</a>",t.alert)}return n.prototype._setDefaultOptions=function(){var n;return n=e("title").html(),this.default_alert_options={parent:".span9","class":"success",fct:"prepend",template:"<div class='alert fade in alert-$class'><button class='close' data-dismiss='alert'>x</button>$msg</div>"},this.default_notif_options={image:e("link[rel='shortcut icon']").attr("href"),onclick:function(){return window.focus()},title:n,timeout:5e3,alert:{"class":"info"}},this.default_blink_title_options={title:n},this.blink_titles=[n],this.blink_interval=null,this.blink_index=1,t.setOptions({width:7,height:9,font:"10px arial",colour:"#FFFFFF",background:"#FF0000",fallback:!0})},n.prototype.alert=function(t,n){return n=e.extend(this.default_alert_options,n),e(n.parent)[n.fct](e(n.template.replace("$class",n["class"]).replace("$msg",t)))},n.prototype.blink_title=function(t,n){if(!e("body").hasClass("hidden"))return;return n=e.extend(this.default_blink_title_options,n),this.blink_titles.push(t),this.blink_fct=function(t){return function(){return e("title").html(t.blink_titles[t.blink_index]),t.blink_index=(t.blink_index+1)%t.blink_titles.length}}(this),this.blink_interval||(this.blink_interval=setInterval(this.blink_fct,700)),e(window).one("focus",function(t){return function(){return clearInterval(t.blink_interval),t.blink_interval=null,e("title").text(n.title),t.blink_titles=[t.default_blink_title_options.title],t.blink_index=1}}(this))},n.prototype.set_focus_favicon=function(){return e(window).one("focus",function(e){return function(){return t.reset(),e.value=void 0}}(this))},n.prototype.incr_favicon=function(e){return this.value==null&&(this.value=0),this.value+=1,t.setBubble(this.value),this.set_focus_favicon()},n.prototype.update_favicon=function(e,n){return this.value=e,e!=null?t.setBubble(e):(t.reset(),this.set_focus_favicon())},n.prototype.display_notif=function(t,n){var r;n=e.extend(this.default_notif_options,n);if(window.webkitNotifications&&window.webkitNotifications.checkPermission()===0)return r=window.webkitNotifications.createNotification(n.image,n.title,t),r.onclick=n.onclick,r.show(),setTimeout(function(){return r.cancel()},n.timeout)},n}(),new n})}.call(this),function(){define("common/overlay",["jquery","lodash"],function(e,t){var n;return n=function(){function n(n){var r;r={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"},this.opts=t.extend(r,n),e("["+this.opts.trigger+"]").click(function(t){return function(){if(e("["+t.opts.widthSelector+"]").length===0||e(window).width()<=parseInt(e("["+t.opts.widthSelector+"]").attr(t.opts.widthSelector)))return e("["+t.opts.selector+"]").toggleClass(""+t.opts.openClass)}}(this)),e("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(t){return function(){return e("["+t.opts.selector+"]").removeClass(""+t.opts.openClass)}}(this))}return n}(),new n})}.call(this),function(){define("common/remote_pagination",["jquery"],function(e){var t;return t=function(){function t(){e("a[data-remote]").parents("[data-scroll]").length>0&&e(window).scroll(function(){var t;t=e("nav.pagination a[rel=next]").attr("href");if(t&&e(window).scrollTop()>e(document).height()-e(window).height()-50)return e(".pagination").html("<li><span>Loading...</span></li>"),e.getScript(t+"?scroll=true")}),this.loading_animation(),e(document).ajaxComplete(this.loading_animation)}return t.prototype.loading_animation=function(){if(!e("nav.pagination a[data-remote]").length)return;e("a[data-remote]").length>0&&e("a[data-remote]").parents("[data-scroll]").length===0&&e("nav.pagination").on("click","a[data-remote=true]",function(t){history.pushState("","New URL: "+e(this).attr("href"),e(this).attr("href")),e("nav.pagination ul").empty().html("<li><span>Loading...</span></li>");if(e(window).scrollTop()>e("#main-container").offset().top-50)return e("html, body").animate({scrollTop:e("#main-container").offset().top-50},"fast")});if(e("a[data-remote]").parents("[data-scroll]").length>0)return e("nav.pagination").hide()},t}(),new t})}.call(this),function(){define("common/responsive_menu",["jquery"],function(e){var t;return t=function(){function t(e){this.enabled=e!=null?e:!0,this._registerEvents(),this}return t.prototype._registerEvents=function(){return this.enabled?e("[data-trigger-menu]").on("click",function(){return e(".left-main-container").toggleClass("opened"),e(this).toggleClass("closed")}):e("[data-trigger-menu]").hide()},t}(),new t})}.call(this),function(){define("common/scroll_spy",["jquery","scrollspy"],function(e){var t;return t=function(){function t(){e("body").scrollspy({target:"#navbar-scale",offset:30})}return t}()})}.call(this),function(){define("common/spinner",["jquery","odometer"],function(e,t){var n;return n=function(){function n(){e("[data-spinner-value]").each(function(){var n,r,i;return i=parseInt(e(this).attr("data-spinner-value")),n=this,r=new t({el:n,value:0}),setTimeout(function(){return r.update(i)},1e3)})}return n}()})}.call(this),function(){define("common/tags",["jquery","lodash"],function(e,t){var n;return n=function(){function n(){e("[data-filter-tags]").keyup(function(){var n;n=t.snakeCase(e(this).val().toLowerCase()),e(".sidebar-tag-item").show();if(n.length>0)return e(".sidebar-tag-item:not([data-tag-name*='"+n+"'])").hide()})}return n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/user_link",["jquery","lodash"],function(t,n){var r;return r=function(){function r(r){this._onLeave=e(this._onLeave,this),this._getTriggerPosition=e(this._getTriggerPosition,this),this._onHover=e(this._onHover,this);var i;i={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:t(".main-left-navbar a").first().attr("href")},this.opts=n.extend(i,r),this._bindUserLinks()}return r.prototype._bindUserLinks=function(){var e;return e=this,t(this.opts.linkSelector).hover(this._onHover,this._onLeave)},r.prototype._onHover=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("body").append(this._getPopupTemplate(r)),this._showBubbleFor(r,n)},r.prototype._getTriggerPosition=function(e,n){return{left:t(e).offset().left+t(e).innerWidth()/2-t(n).innerWidth()/2,top:t(e).offset().top-t(n).innerHeight()}},r.prototype._onLeave=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("[data-user-popup='"+r+"']").remove()},r.prototype._showBubbleFor=function(e,n){return t.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",url:this.opts.profileBaseUrl+"/users/"+e+".json",done:function(r){return function(i){var s;return t("[data-user-popup='"+e+"']").html(r._getPopupContent(i.user)),s=t("[data-user-popup='"+e+"']"),s.css(r._getTriggerPosition(n,s))}}(this)})},r.prototype._getPopupTemplate=function(e){return'<div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+e+'" style="position: absolute">\n  <h3 class="marked-title">Loading...</h3>\n</div>'},r.prototype._getPopupContent=function(e){return'<div class="user-popup-image" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+e.login+'.jpg)">\n</div>\n<div class="user-popup-info">\n  <h3 class="user-popup-login">'+e.full_name+'</h3>\n  <span class="user-popup-email marked-title">\n    <span class="icon-envelope"></span>\n    '+e.email+'\n  </span>\n  <h5 class="user-popup-location">\n    <span data-user-location="'+e.location+'" class="icon-circle"></span>\n    '+(e.location||"unavailable")+"\n  </h5>\n</div>"},r}(),new r})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("common/window_focus",[],function(){var t;return t=function(){function t(){var t,n,r,i,s;t="hidden",n=function(e){var n,r,i;e=e||window.event,i="visible",r="hidden",n={focus:i,focusin:i,pageshow:i,blur:r,focusout:r,pagehide:r},e.type in n?document.body.className=n[e.type]:document.body.className=this[t]?r:i},e.call(document,t)>=0?document.addEventListener("visibilitychange",n):(r=t="mozHidden",e.call(document,r)>=0)?document.addEventListener("mozvisibilitychange",n):(i=t="webkitHidden",e.call(document,i)>=0)?document.addEventListener("webkitvisibilitychange",n):(s=t="msHidden",e.call(document,s)>=0)?document.addEventListener("msvisibilitychange",n):e.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n}return t}()})}.call(this),function(){define("common/markdown_preview",["jquery","lodash","marked"],function(e,t,n){var r;return r=function(){function r(r){var i,s;i={bindSelector:"data-markdown-preview"},this.opts=t.extend(i,r),s=this,e("["+this.opts.bindSelector+"]").each(function(t){var r,i;i=this,r=e(this).attr(s.opts.bindSelector);if(r)return e(r).keyup(function(){return e(i).html(n(e(this).val()))})})}return r}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/main",["require","jquery","Logger","common/add_on","common/callback","common/modal","common/simple_form","common/typeahead","common/bug_report","common/cache","common/copy","common/data_bindings","common/data_events","common/data_date","common/emojify","common/fullscreen","common/infinite_scroll","common/lockable","common/manage_attachment","common/markdownable","common/mobilize","common/multiple_actions","common/notifications_manager","common/overlay","common/remote_pagination","common/responsive_menu","common/scroll_spy","common/spinner","common/tags","common/user_link","common/window_focus","common/markdown_preview"],function(t,n){var r;return r=function(){function r(){this._emitReady=e(this._emitReady,this),this._ready=e(this._ready,this),n(this._ready)}return r.prototype._ready=function(){var e,n,r,i;return r=t("common/scroll_spy"),new r,i=t("common/simple_form"),new i,e=t("common/data_date"),new e,n=t("common/markdown_preview"),new n,this._emitReady()},r.prototype._emitReady=function(){return n(document).trigger("intra.ready"),this.ready()},r}()})}.call(this),define("common",["common/main"],function(e){return e});