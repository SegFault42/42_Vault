/* Chosen v1.4.2 | (c) 2011-2015 by Harvest | MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md */

(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("Flags",["lodash"],function(n){var r;return r=function(){function r(){this.is_beta=e(this.is_beta,this),this._availableFlags=["Debug","Experiments"],this._flags=n.zipObject(this._availableFlags,n.map(this._availableFlags,function(e){return sessionStorage[e]==="true"||!1}))}return r.prototype.enable=function(e){return t.call(this._availableFlags,e)>=0?(sessionStorage[e]="true",this._flags[e]=!0):console.warn("Unable to enable "+e+" (available: ["+this._availableFlags+"])")},r.prototype.disable=function(e){if(t.call(this._availableFlags,e)>=0)return sessionStorage[e]=null,this._flags[e]=!1},r.prototype.get=function(e){return this._flags[e]},r.is_beta=function(){return $("body").is(".beta")||$("body").is(".basic-staff")},r.prototype.is_beta=function(){return $("body").is(".beta")||$("body").is(".ba
 sic-staff")},r}(),window.is_beta=r.is_beta,new r})}).call(this),function(){define("Logger",["log","Flags"],function(e,t){var n;return n=function(){function n(){if(!e)return;window.log=this.log,t.disable("Debug"),t.is_beta()&&t.enable("Debug"),this._printHello(t.get("Debug"))}return n.prototype.log=function(n,r){var i;i=['color: #000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.warn=function(n,r){var i;i=['color: #d9af16; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype.err=function(n,r){var i;i=['color: #a10000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'];if(r||t.get("Debug"))return e("[c='"+i.join(";")+"']"+n+"[c]")},n.prototype._printHello=function(t){var n;return t==null&&(t=!1),n=["height: 60px","width: 60px","display: block",'font
 -size: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"background-color:transparent","padding: 30px 40px 30px 70px","line-height: 50px","background-image: url('data:image/png;base64,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')","background-repeat: no-repeat","background-position: 0% 50%","background-size: auto 80%"],e("[c='"+n.join(";")+"']"+(t?"DEBUG MODE":"")+"[c]")},n}(),new n})}.call(this),function(){define("common/add_on/array",[],function(){var e;return e=function(){function e(){Array.prototype.to_rails_params=function(e,t){var n;return t==null&&(t="id"),function(){var r,i,s;s=[];for(r=0,i=this.length;r<i;r++)n=this[r],s.push(""+e+"["+t.pluralize()+"][]="+n);return s}.call(this).join("&")}}return e}(),new e})}.call(this),function(){define("common/add_on/bootstrap
 ",["jquery","bootstrap"],function(e){var t;return t=function(){function t(){e("a[rel~=popover], .has-popover").popover({trigger:"hover"}),e("a[rel~=tooltip], .has-tooltip").tooltip(),e("[data-toggle='tooltip']").tooltip()}return t}(),new t})}.call(this),function(){define("common/add_on/jquery",["common/add_on/bootstrap"],function(){var e;return e=function(){function e(){$.fn.incr=function(e,t){var n,r;e==null&&(e=1),t==null&&(t=!1);if(!$(this).length)return;return t&&(e=-e),n=$(this).html().trim(),(r=n.match(/^(\d+)\s*([\D]+)$/m))?$(this).html(r[2].pluralize(parseInt(r[1],10)+e,!0)):$(this).html(parseInt(n,10)+e)},$.fn.decr=function(e,t){return e==null&&(e=1),t==null&&(t=!1),$(this).incr(-e,t)},$.fn.reverse_state=function(){var e;return e=$(this).attr("data-state"),$(this).attr("data-state",{"true":"false","false":"true"}[e]),e.to_bool},$.fn.state=function(){var e;return e=$(this).attr("data-state"),e?e.to_bool:void 0},$.fn.inputWrapper=function(e){return this.text=e,this.each(funct
 ion(e){return function(t,n){var r;return r=$("<span data-input-wrapper>"+e.text+"</span>"),$(n).after(r).css("text-indent",$(r).outerWidth()).css("padding",0),$(n).parent().attr("data-input-container","")}}(this))}}return e}(),new e})}.call(this),function(){define("common/add_on/string",["pluralize"],function(e){var t;return t=function(){function t(){Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(t,n){return t==null&&(t=42),n==null&&(n=!1),e(this,t,n)}}return t}(),new t})}.call(this),function(){define("common/add_on/main",["common/add_on/array","common/add_on/bootstrap","common/add_on/jquery","common/add_on/string"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),define("common/add_on",["common/add_on/main"],function(e){return e}),function(){define("common/callback/base",[],function(){var e;return e=function(){function e(){var e;e=this,$("body").on("click","a[da
 ta-uid], [data-uid] a",function(t){var n,r,i,s;return $(this).is("[data-uid]")?(r=this,s=this,i=$(r).data("uid")):(r=this,s=$(r).parents("[data-uid]"),i=$(s).data("uid")),n="click_"+i,e.call_callback(e,n,"before",r,s),$.ajax($(r).attr("href")).success(function(t){return e.call_callback(e,n,"success",r,s,t)}).error(function(){return e.call_callback(e,n,"error",r,s)}).done(function(){return e.call_callback(e,n,"done",r,s)}),t.stopPropagation(),!1})}return e.prototype.call_callback=function(e,t,n,r,i,s){if(typeof e[""+n+"_"+t]=="function")return e[""+n+"_"+t](r,i,s)},e}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("common/callback/message",["jquery","common/callback/base"],function(e,n){var r;return r=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.before_c
 lick_star=function(t){return e("#favorite_count").incr(1,e(t).reverse_state())},r.prototype.before_click_pin=function(t){return e(t).reverse_state()},r.prototype.before_click_lock=function(t){return e(t).reverse_state()},r.prototype.before_click_upvote=function(t,n,r){var i;r==null&&(r=!0),r&&e(n).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,e(n).siblings("[data-uid=downvote]"),!1),i=e(n).reverse_state(),e(n).find("span.count").incr(1,i),e(n).siblings(".vote-summary").incr(1,i);if(e(n).parents(".reply-actions").length)return e(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_downvote=function(t,n,r){var i;r==null&&(r=!0),r&&e(n).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,e(n).siblings("[data-uid=upvote]"),!1),i=e(n).reverse_
 state(),e(n).find("span.count").incr(1,i),e(n).siblings(".vote-summary").incr(1,!i);if(e(n).parents(".reply-actions").length)return e(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())},r.prototype.before_click_trollvote=function(t,n){return e(n).find("span.count").incr(1,e(n).reverse_state())},r.prototype.before_click_problem=function(t,n){return e(n).find("span.count").incr(1,e(n).reverse_state())},r.prototype.success_click_upvote=function(t,n,r){return e(n).find("span.count").html(r.upvote_count),e(n).siblings(".vote-summary").length&&e(n).siblings(".vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").length&&(e(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).pa
 rents(".reply-actions").siblings(".reply-vote-summary").html())),e(n).siblings("[data-uid=downvote]").find("span.count").html(r.downvote_count)},r.prototype.success_click_downvote=function(t,n,r){return e(n).find("span.count").html(r.downvote_count),e(n).siblings(".vote-summary").length&&e(n).siblings(".vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").length&&(e(n).parents(".reply-actions").siblings(".reply-vote-summary").html(r.totalvote_count),e(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",e(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),e(n).siblings("[data-uid=upvote]").find("span.count").html(r.upvote_count)},r.prototype.success_click_trollvote=function(t,n,r){return e(n).find("span.count").html(r.kind_count)},r.prototype.success_click_problem=function(t,n,r){return e(n).find("span.count").html(r.kind_count)},r.prototype.success_click_pin=function(t,n,r){if(r==="OK")return e(t).toggleClass("activ
 e")},r.prototype.success_click_lock=function(t,n,r){if(r==="OK")return e(t).toggleClass("active").toggleClass("icon-lock").toggleClass("icon-unlock")},r.prototype.success_click_star=function(t,n,r){var i;if(r.kind!=="Topic")return r.starred?(i=e(t).parent().clone(),i.attr("data-tag-kind","starred"),e("[data-tag-kind='starred']").last().after(i)):e("[data-tag-kind='starred'][data-tag-name='"+r.name+"']").remove(),log("Success star !",t,n,r)},r}(n),new r})}.call(this),function(){define("common/callback/main",["common/callback/message"],function(){var e;return e=function(){function e(){}return e}(),new e})}.call(this),define("common/callback",["common/callback/main"],function(e){return e}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/modal/smart",["jquery","lodash","bootstrap"],function(t,n){var r;return r=function(){function r(t){var r;t==null&&(t={}),this._bind=e(this._bind,this),r={selector:"data-smart-modal",url:"data-url",container:
 "data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"},this.opts=n.extend(r,t),this._bind()}return r.prototype._bind=function(){var e;return e=function(e){return"["+e+"]"},t(e(this.opts.selector)).each(function(e){return function(n,r){var i,s,o,u;return u=t(r).attr(e.opts.url),i=t(r).attr(e.opts.container)||".container-item",o=t(r).attr(e.opts.titleSelector),s=t(r).attr(e.opts.footerSelector),u?t(r).click(function(){return log("Clicked "+r),t.get(u,function(n){var r,u,a;return log("Received data for modal"),u=t(n).find(i).html(),a=o?t(n).find(o).html():!1,r=s?t(n).find(s).html():!1,t(e.opts.modal).find(".modal-body").html(u),a?t(e.opts.modal).find(".modal-header").html(a).show():t(e.opts.modal).find(".modal-header").html("").hide(),r?t(e.opts.modal).find(".modal-footer").html(r).show():t(e.opts.modal).find(".modal-footer").html("").hide(),t(e.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",r)}}(this))},r}(),new r})}.call(
 this),function(){define("common/modal/main",["require","jquery","bootstrap","common/modal/smart"],function(e,t){var n;return n=function(){function n(){var n;n=this,t("input[data-modal-id]").on("click",function(r){var i,s,o,u;s=!0,o=t(this).data("condition"),o&&e(o)&&(u=e(t(this).data("condition")),u.modalCondition&&(s=u.modalCondition())),i=t(".modal[data-modal-id='"+t(this).data("modal-id")+"']"),n._initModal(i,t(this).data("confirmation"));if(s)return r.preventDefault(),i.modal("show")})}return n.prototype._initModal=function(t,n){if(n)return t.one("click",".btn-primary",function(t){return function(){var t,r;t=e(n),r=new t;if(r.modalConfirmation)return r.modalConfirmation()}}(this))},n}(),new n})}.call(this),define("common/modal",["common/modal/main"],function(e){return e}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/simple_form/date_picker",["jquery","lodash","datetimepicker"],function(t,n){var r;return r=function(){function r(r){
 r==null&&(r={}),this._bindAll=e(this._bindAll,this),this.opts=n.merge(this.DEFAULTS,r),t.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),t(document).on("nested:fieldAdded",this._bindAll))}return r.prototype.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},r.prototype._bindAll=function(){return this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")},r.prototype._setDefaults=function(){return n.merge(t.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})},r.prototype._bindDateTimePicker=function(e){return t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._bindDatePicker=function(e){retu
 rn t(e).each(function(e){return function(n,r){return t(r).datetimepicker(e._computeOptions(r))}}(this))},r.prototype._computeOptions=function(e,r){var i,s;return r==null&&(r={}),t(e).attr(this.opts.excludeDateAttr)&&(i=t.parseJSON(t(e).attr(this.opts.excludeDateAttr)),r.disabledDates=n.map(i,function(e){return moment(e)})),t(e).attr(this.opts.includeDateAttr)&&(s=t.parseJSON(t(e).attr(this.opts.includeDateAttr)),r.enabledDates=n.map(s,function(e){return moment(e)})),t(e).attr(this.opts.minDateAttr)&&(r.minDate=moment(t(e).attr(this.opts.minDateAttr))),t(e).attr(this.opts.maxDateAttr)&&(r.maxDate=moment(t(e).attr(this.opts.maxDateAttr))),t(e).attr(this.opts.noWeekends)!=null&&(r.daysOfWeekDisabled=[0,6]),r},r}(),new r})}.call(this),function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};r=function(){function e(){this.options_index=0,
 this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),s=e.childNodes,o=[],r=0,i=s.length;i>r;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_in
 dex,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,n;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(n,function(e){return t[e]||"&amp;"})):e},e}(),r.select_to_array=function(e){var t,n,i,s,o;for(n=new r,o=e.childNodes,i=0,s=o.length;s>i;i++)t=o[i],n.add_node(t);return n.parsed},t=function(){function e(t,n){this.form_field=t,this.options=null!=n?n:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.al
 low_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.displ
 ay_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+e.group_label+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_f
 ield)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,n,r,i,s;for(t="",s=this.results_data,r=0,i=s.length;i>r;r++)n=s[r],t+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=e?e.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(n)));return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.cl
 asses),n=document.createElement("li"),n.className=t.join(" "),n.style.cssText=e.style,n.setAttribute("data-option-array-index",e.array_index),n.innerHTML=e.search_text,e.title&&(n.title=e.title),this.outerHTML(n)):""},e.prototype.result_add_group=function(e){var t,n;return(e.search_match||e.group_match)&&e.active_options>0?(t=[],t.push("group-result"),e.classes&&t.push(e.classes),n=document.createElement("li"),n.className=t.join(" "),n.innerHTML=e.search_text,e.title&&(n.title=e.title),this.outerHTML(n)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,n,r,i;for(r=this.results_data,i=[],t=0,n=r.length;n>t;t++)e=r[t],i.push(e.selected?e.selected=!1:void 0);return i},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide()
 :this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,n,r,i,s,o,u,a,f,l,c;for(this.no_results_clear(),r=0,s=this.get_search_text(),e=s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=new RegExp(e,"i"),n=this.get_search_regex(e),c=this.results_data,f=0,l=c.length;l>f;f++)t=c[f],t.search_match=!1,i=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(i=this.results_data[t.group_array_index],0===i.active_options&&i.search_match&&(r+=1),i.active_options+=1),t.search_text=t.group?t.label:t.html,(!t.group||this.group_search)&&(t.search_match=this.search_string_match(t.search_text,n),t.search_match&&!t.group&&(r+=1),t.search_match?(s.length&&(o=t.search_text.search(a),u=t.search_text.substr(0,o+s.length)+"</em>"+t.search_text.substr(o+s.length),t.search_text=u.substr(0,o
 )+"<em>"+u.substr(o)),null!=i&&(i.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>r&&s.length?(this.update_results_content(""),this.no_results(s)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var n,r,i,s;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(r=e.replace(/\[|\]/g,"").split(" "),r.length))for(i=0,s=r.length;s>i;i++)if(n=r[i],t.test(n))return!0},e.prototype.choices_count=function(){var e,t,n,r;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,r=this.form_field.options,t=0,n=r.length;n>t;t++)e=r[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_
 count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return t
 his.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}
 (),e=jQuery,e.fn.extend({chosen:function(r){return t.browser_is_supported()?this.each(function(){var t,i;t=e(this),i=t.data("chosen"),"destroy"===r&&i instanceof n?i.destroy():i instanceof n||t.data("chosen",new n(this,r))}):this}}),n=function(t){function n(){return i=n.__super__.constructor.apply(this,arguments)}return o(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var t,n;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.contai
 ner.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(th
 is.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},n.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){return e.container_mousedown(t),t.preventDefault()}),this.container.bind("touchend.chosen",function(t){return e.container_mouseup(t),t.preventDefault()}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function
 (t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydow
 n.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},n.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.ac
 tivate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelt
 a||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){var n;return n=e(t.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=fu
 nction(){return this.parsing=!0,this.selected_option_count=null,this.results_data=r.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this
 .search_results.scrollTop(),t=n+this.result_highlight.outerHeight(),t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(s>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:
 hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},n.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;return n=e(t.target).hasClass("active-result"
 )?e(t.target):e(t.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(t),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(t){var n;return n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(t){var n,r,i=this;return n=e("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?n.addClass("search-choice-disabled"):(r=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),r.bind("click.chosen",function(e){return i.choice_destroy_link_click(e)}),n.append(r)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 
 0:this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.fo
 rm_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),n=this.results_data[t[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(this.choice_label(n)),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),
 this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return e("<div/>").text(e.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multipl
 e?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},n.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.
 result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(e){var t,n;switch(t=null!=(n=e.which)?n:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.
 results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,f,l;if(this.is_multiple){for(r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],f=0,l=o.length;l>f;f++)i=o[f],s+=i+":"+this.search_field.css(i)+";";return t=e("<div />",{style:s}),t.text(this.search_field.val()),e("body").append(t),u=t.width()+25,t.remove(),n=this.container.outerWidth(),u>n-10&&(u=n-10),this.search_field.css({width:u+"px"})}},n}(t)}.call(this),define("chosen",function(){}),function(){define("common/simple_form/chosen",["jquery","chosen"],function(e){var t;return t=function(){function t(){e(document).on("nested:fieldAdded",this._bind),this._bind()}return t.prototype._bind=function(){retur
 n e(".chosen-select").each(function(){return e(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:e(this).width()+"px"})})},t}(),new t})}.call(this),function(){define("common/simple_form/limit",["jquery","maxlength"],function(e){var t;return t=function(){function t(){e("[data-limit]").each(function(){return e(this).maxlength({maxCharacters:e(this).data("limit"),zeroStatusText:e(this).data("zero"),oneStatusText:e(this).data("one"),moreStatusText:e(this).data("more")})})}return t}(),new t})}.call(this),function(){define("common/simple_form/textarea",["jquery"],function(e){var t;return t=function(){function t(){e("textarea").keydown(function(t){var n,r,i,s;if(t.keyCode===9)return i=this.selectionStart,r=this.selectionEnd,n=e(this),s=n.val(),n.val(s.substring(0,i)+"	"+s.substring(r)),this.selectionStart=this.selectionEnd=i+1,t.preventDefault()})}return t}(),new t})}.call(this),function(){define("common/simple_form/form_group",["jquery"],function(e){var t;r
 eturn t=function(){function t(){e(".form-group.other").each(function(){var t,n;return n=e(this).find("select"),t=e(n).next("input"),e(n).find("option:selected").html()!==e(n).find("option:last").html()&&e(t).hide(),n.change(function(){return e(n).find("option:selected").html()===e(n).find("option:last").html()?t.show():t.hide()})})}return t}(),new t})}.call(this),function(){define("common/simple_form/main",["common/simple_form/date_picker","common/simple_form/chosen","common/simple_form/limit","common/simple_form/textarea","common/simple_form/form_group"],function(){var e;return e=function(){function e(){}return e}()})}.call(this),define("common/simple_form",["common/simple_form/main"],function(e){return e}),function(){define("common/typeahead/search",["jquery","bloodhound"],function(e){var t;return t=function(){function t(){this.form=e(".main-navbar-search"),this.input=this.form.find("input"),this.fetch_url=this.form.attr("action"),this.userUrl=this.form.attr("data-user-url"),this.
 input.length&&this._setupTypeahead()}return t.prototype._setupTypeahead=function(){var e,t;return t=this,this._bindEnter(),this.form.addClass("js-search"),e=this._getBloodhound(),e.initialize(),this.input.typeahead({highlight:!0,hint:!0},{display:"value",source:e,templates:{suggestion:function(e){return"<a href='"+t.userUrl+e+"' class='search-suggestion-item'><div class='search-user-picture bg-image-item rounded square-xs' style='background-image: url(https://cdn.42.fr/userprofil/profilview/"+e+".jpg)'></div><span>"+e+"</span></a>"}}})},t.prototype._bindEnter=function(){var t;return t=function(t){return function(n){if(n.keyCode===13)return e(t.form).submit()}}(this),this.input.on("typeahead:cursorchange",function(e){return function(n,r){e.input.off("keyup",t);if(!r)return e.input.on("keyup",t)}}(this)),this.input.on("typeahead:select",function(e){return function(t,n){var r;return r=""+(e.userUrl+n),document.location=r}}(this)),this.input.on("keyup",t)},t.prototype._getBloodhound=fun
 ction(){return new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.fetch_url+".json?query=%QUERY",wildcard:"%QUERY"}})},t}(),new t})}.call(this),function(){define("common/typeahead/main",["jquery","common/typeahead/search"],function(e){var t;return t=function(){function t(){var t;t=this,e(".typeahead").each(function(){var n,r;return n=e(this),r=t._getBloodhound.call(this),r.initialize(),n.typeahead({highlight:!0,hint:!1},{display:"displayKey",source:r.ttAdapter()}).on("typeahead:selected",function(e,t){return n.parents("form").find('input[type="hidden"][data-typeahead-'+n.data("displayKey")+"]").val(t.value)})})}return t.prototype._getBloodhound=function(){var t;return t=e(this),new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:t.data("url")+"?query=%QUERY",wildcard:"%QUERY",transform:fun
 ction(n){return e.map(n,function(e){return{displayKey:e[t.data("displayKey")],value:e[t.data("valueKey")||"id"],data:e}})}}})},t}(),new t})}.call(this),define("common/typeahead",["common/typeahead/main"],function(e){return e}),function(){define("common/cache",["jquery"],function(e){var t;return t=function(){function t(){this._$element=e("[data-cache]"),this._$element.find("[data-cache-target]").each(function(){var t,n;return t=e(this),n=e(""+t.data("cache-target")),n.html(t.html())})}return t}(),new t})}.call(this),function(){define("common/copy",["jquery","zeroclipboard"],function(e,t){var n;return n=function(){function n(){t.config({swfPath:"/assets/clipboard-eec56f47f17c747710021e35aee59177a7e451c374b6d8ef11508bb25edf5125.swf"}),e("[data-copy]").each(function(e){return function(t,n){return e._initCopy(n)}}(this))}return n.prototype._initCopy=function(n){var r;return r=new t(n),r.on("ready",function(){return r.on("copy",function(t){var r,i;return i=e(""+e(n).data("copy")).val(),r=
 e(n).data("copy-type")||"text/plain",t.clipboardData.setData(r,i),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})},n}(),new n})}.call(this),function(){define("common/data_events",["jquery"],function(e){var t;return t=function(){function t(){this.refresh()}return t.prototype.refresh=function(){return this.attachFocusEvents(),this.attachToggleEvents()},t.prototype.attachFocusEvents=function(){return e("[data-event-focus]").click(function(){return e(e(this).attr("data-event-focus")).focus()})},t.prototype.attachToggleEvents=function(){return e("[data-event-toggle]").each(function(){var t,n,r;return t=e(this).attr("data-event-container"),r=e(this).attr("data-event-toggle"),n=t?e(this).parents(t):e(this).parent(),e(n).find(r).addClass("hidden"),e(this).click(function(t){return t.stopImmediatePropagation(),e(n).find(r).toggleClass("hidden"),e(this).toggleClass("active"),!1})})},t}(),new t})}.call(this),function(){define("common/data_date",["jquery","moment-twitter"]
 ,function(e,t){var n;return n=function(){function n(){this._updateAll(),this.handler=setInterval(this._updateAll,61e3)}return n.prototype._updateAll=function(){return e("[data-long-date]").each(function(){return e(this).html(t(e(this).attr("data-long-date"),"YYYY-MM-DD HH:mm Z").fromNow())}),e("[data-short-date]").each(function(){return e(this).html(t(e(this).attr("data-short-date"),"YYYY-MM-DD HH:mm Z").twitter())}),e("[data-cal-date]").each(function(){return e(this).html(t(e(this).attr("data-cal-date"),"YYYY-MM-DD HH:mm Z").calendar())})},n.prototype.refresh=function(){return this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,61e3)},n.refresh=function(){var e;return window.__||(window.__={}),(e=window.__).date||(e.date=new this),window.__.date.refresh()},n}()})}.call(this),function(){define("common/emojify",["emojify"],function(e){var t;return t=function(){function t(){e.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir
 :"/images/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),this.refresh()}return t.prototype.refresh=function(){var t,n,r,i,s,o;s=["messages","changelogs"],o=[];for(r=0,i=s.length;r<i;r++)n=s[r],t=document.getElementsByClassName(""+n+"-list")[0],e&&t!=null?o.push(e.run(t)):o.push(void 0);return o},t}(),new t})}.call(this),function(){define("common/fullscreen",["jquery"],function(e){var t;return t=function(){function t(){e("[data-toggle-fullscreen]").click(function(){var t;t=e(".page-content")[0];if(t){if(t.requestFullscreen)return t.requestFullscreen();if(t.mozRequestFullScreen)return t.mozRequestFullScreen();if(t.webkitRequestFullscreen)return t.webkitRequestFullscreen()}}),document.addEventListener("webkitfullscreenchange",function(){return e("html").toggleClass("fullscreen")},!1)}return t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/infinite_scroll",["jquery","lodash"],function(t,n){var r;return r=
 function(){function r(r){this._bindManualButtons=e(this._bindManualButtons,this),this._clearManualButtons=e(this._clearManualButtons,this),this._generateManualButtons=e(this._generateManualButtons,this),this.paginate=e(this.paginate,this);var i;i={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",itemContainer:".messages-list",loading:function(e){return"Loading "+(e?"previous":"next")+" messages..."},limit:250},r||(r={}),this.options=n.extend(i,r),this._refreshValues(),this.nav=t(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),this._getNextItems(!0),t(document).scroll(this.paginate),r.onRefresh&&this.onRefresh(r.onRefresh)}return r.prototype._setupReferences=function(){var e,n;return e=t(""+this.options.itemContainer+" "+this.options.itemSelector).first(),n=t(""+this.op
 tions.itemContainer+" "+this.options.itemSelector).last(),this.start=e?e.attr("data-index"):0,this.end=n?n.attr("data-index"):0},r.prototype.paginate=function(e){var n;n=this._isScrollUp();if(n&&t(document).scrollTop()===0&&this.scroll>350)return e.preventDefault(),e.stopImmediatePropagation(),t("body").scrollTop(this.scroll),!1;this._refreshValues();if(this._needMoreContent(n))return this._getNextItems(n)},r.prototype._needMoreContent=function(e){var t;return e?this.scroll<this.options.limit:(t=this.docHeight-(this.winHeight+this.scroll),t<this.options.limit)},r.prototype.onRefresh=function(e){return this.callbacks.push(e)},r.prototype._addLoader=function(e){var n;return n='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n  '+this.options.loading(e)+"\n</h1>",e?t(""+this.options.itemContainer).prepend(n):t(""+this.options.itemContainer).append(n),e?t("[data-load-previous]").remove():t("[data-load-next]").remove()},r.prototype._removeLoader=fun
 ction(){return t(""+this.options.itemContainer+" .infinite-loader").remove()},r.prototype._generateManualButtons=function(){return t(this.options.prevSelector).length>0&&t(this.options.itemContainer).prepend(t('<div class="btn btn-block btn-primary" data-load-previous>Load previous messages</div>')),t(this.options.nextSelector).length>0&&t(this.options.itemContainer).append(t('<div class="btn btn-block btn-primary" data-load-next>Load next messages</div>')),this},r.prototype._clearManualButtons=function(){return t("[data-load-previous], [data-load-next]").remove()},r.prototype._bindManualButtons=function(){return t(document).on("click","[data-load-previous]",function(e){return function(){return e._getNextItems(!0)}}(this)),t(document).on("click","[data-load-next]",function(e){return function(){return e._getNextItems(!1)}}(this))},r.prototype._getNextItems=function(e){var r,i,s;return e==null&&(e=!1),s=e?this.options.prevSelector:this.options.nextSelector,t(s).length>0?(r=t(s).first(
 ),i=t(r).attr("href"),!this.lock&&i&&(r.remove(),this._addLoader(e),this.lock=!0,t.get(i,function(r){return function(i){var o,u,a,f,l,c,h;return l=t(i).find(r.options.navSelector),f=t(i).find(s).parent(),r.nav.append(f),r.nav=t(r.options.navSelector),u=t(i).find(r.options.itemSelector),e?(o=t(""+r.options.itemContainer+" "+r.options.itemSelector).first(),c=-document.querySelector("[data-id='"+o.attr("data-id")+"']").getBoundingClientRect().top,o.before(u),o.prevAll().each(function(){return c+=t(this).outerHeight()}),t("body").scrollTop(c)):(a=t(""+r.options.itemContainer+" fantom-item").detach(),h=t(""+r.options.itemContainer+" [data-id='virtual']").detach(),t(""+r.options.itemContainer+" "+r.options.itemSelector).last().after(u),t(""+r.options.itemContainer+" "+r.options.itemSelector).last().after(a),t(""+r.options.itemContainer+" "+r.options.itemSelector).last().after(h)),r.lock=!1,r._removeLoader(),r._generateManualButtons(),n.each(r.callbacks,function(e){return e()})}}(this))),!
 0):!1},r.prototype._isScrollUp=function(){return this.scroll>t(document).scrollTop()},r.prototype._refreshValues=function(){return this.docHeight=t(document).innerHeight(),this.winHeight=t(window).innerHeight(),this.scroll=t(document).scrollTop()},r}()})}.call(this),function(){define("common/lockable",["jquery"],function(e){var t;return t=function(){function t(){var t;t=this._form_to_data,e("[data-lockable-url]").length&&setInterval(function(t){return function(){return t._synchronize_locked(e("[data-lockable-url]").data("lockable-url"))}}(this),1e4),e("[data-check-lock-url]").length&&(setInterval(function(t){return function(){return t._check_locked(e("[data-check-lock-url]").data("check-lock-url"))}}(this),1e4),e("#lock_taken .roger").click(function(n){return function(){return e("form").submit(function(){return e.ajax({url:e(this).attr("action"),data:t(e("form")),type:"POST",dataType:"JSON"}).success(function(t){return document.location.href=e("#lock_taken .roger").attr("href")}),!1
 }),e("form").submit()}}(this)))}return t.prototype._synchronize_locked=function(t){return e.getScript(t)},t.prototype._check_locked=function(t){return e.getJSON(t,function(t){var n;if(t.res!=="OK")return e("#lock_taken .modal-body").html((n=t["res"])!=null?n:""),e("#lock_taken").modal("show")})},t.prototype._form_to_data=function(t){return e.map(e(t).find("input, select, textarea"),function(t){return e(t).attr("name")+"="+e(t).val()}).join("&")},t}(),new t})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/manage_attachment",["jquery"],function(t){var n;n=function(){function n(){this.changed=e(this.changed,this),t.getJSON(t("[data-attachments-url]").data("attachments-url"),function(e){return function(n){return e.values=n,t("form .attachment_kind input:hidden").each(function(n,r){if(t(r).parents("form").find(".attachment_fields input").length===0)return e.changed(r,t(r).val())})}}(this)),t("form").on("change","#attachment_selec
 t",function(e){return function(t){return e.changed(t.target)}}(this))}return n.prototype.changed=function(e,n){var r,i,s,o,u,a,f;n==null&&(n=t(e).find("option:checked").html().toLowerCase()),r=t(e).parents(".form-group").siblings(".attachment_fields"),u=(new Date).getTime(),i=t(e).attr("name"),s="<div class='form-group input optional project_attachements'>",f=this.values[n];for(o in f)a=f[o],s+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+n+"' name='"+i.replace("[kind]","[attachable_attributes]["+u+"][attachable_type]]")+"' /></div>",s+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+u+"_"+o+"'>"+o+"</label>",s+="<div class='col-sm-10'>",a==="string"?s+="<input class='input optional form-control' id='project_attachements_attributes_"+u+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+u+"]["+o+"]")+"' />":a==="text"?s+="<textarea class='text optional form-control' id='project_attachements_attr
 ibutes_"+u+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+u+"]["+o+"]")+"' />":a==="upload"&&(s+="<input class='file optional form-control' type='file' id='project_attachements_attributes_"+u+"_"+o+"' name='"+i.replace("[kind]","[attachable_attributes]["+u+"]["+o+"]")+"' />"),s+="</div>";return s+="</div>",t(r).html(s)},n}();if(t("[data-attachments-url]").length)return new n})}.call(this),function(){define("common/markdownable",["jquery","lodash","marked","Logger"],function(e,t,n,r){var i;return i=function(){function i(e){var i;n==null?r.warn("Unable to find marked for client-side markdown compilation."):(i={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"},this.opts=t.extend(i,e),this._generateMarkdown())}return i.prototype._generateMarkdown=function(){var t;return t=this,e(this.opts.markdownSelector).each(function(){return e(this).html(n(e(this).attr(t.opts.markdownAttribute).trim()))})},i}(),new i})}.call(this),function(){var e=function
 (e,t){return function(){return e.apply(t,arguments)}};define("common/multiple_actions",["jquery"],function(t){var n;return n=function(){function n(){this.on_select_one_click=e(this.on_select_one_click,this),this.on_select_all_click=e(this.on_select_all_click,this),this.on_select_click=e(this.on_select_click,this),this.selector=".table.admin_table",t(this.selector).length&&(this.bindAll(),t(this.selector).find(".btns").hide(),this.on_select_click())}return n.prototype.bindAll=function(){var e;return e=this,t(this.selector).on("click",".select.all",this.on_select_all_click),t(this.selector).on("click",".select.one",this.on_select_one_click),t(this.selector).on("click",".select",this.on_select_click)},n.prototype.on_select_click=function(e){if(!e)return;return t(e.target).parents(this.selector).find(".btns")[t(e.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),t(e.target).parents(this.selector).find(".btns a").each(function(n){return functio
 n(r,i){var s;return s=t(e.target).parents(n.selector).find(".select.one").filter(":checked").map(function(){return t(this).data("id")}).toArray(),s=s.to_rails_params(t(e.target).parents(n.selector).data("model")),t(i).attr("href",""+t(i).attr("href").split("?")[0]+"?"+s)}}(this))},n.prototype.on_select_all_click=function(e){return t(e.target).parents(this.selector).find(".select.one").prop("checked",!t(e.target).parents(this.selector).find(".select.one").filter(":checked").length),t(e.target).prop("checked",t(e.target).parents(this.selector).find(".select.one").filter(":checked").length)},n.prototype.on_select_one_click=function(e){return t(e.target).parents(this.selector).find(".select.all").prop("checked",!t(e.target).parents(this.selector).find(".select.one").not(":checked").length)},n}(),new n})}.call(this),function(){define("common/notifications_manager",["jquery","tinycon"],function(e,t){var n;return n=function(){function n(t){if(!window.webkitNotifications||window.webkitNotif
 ications.checkPermission()===0||e("body[data-id]").length!==0)return;this._setDefaultOptions(),t=e.extend(this.default_notif_options,t),e("#browser_notification").on("click",function(){return e(this).parents(".alert").remove(),window.webkitNotifications.requestPermission()}),this.alert("Configure browser notifications : <a href='#' id='browser_notification'>Let's Go!</a>",t.alert)}return n.prototype._setDefaultOptions=function(){var n;return n=e("title").html(),this.default_alert_options={parent:".span9","class":"success",fct:"prepend",template:"<div class='alert fade in alert-$class'><button class='close' data-dismiss='alert'>x</button>$msg</div>"},this.default_notif_options={image:e("link[rel='shortcut icon']").attr("href"),onclick:function(){return window.focus()},title:n,timeout:5e3,alert:{"class":"info"}},this.default_blink_title_options={title:n},this.blink_titles=[n],this.blink_interval=null,this.blink_index=1,t.setOptions({width:7,height:9,font:"10px arial",colour:"#FFFFFF",
 background:"#FF0000",fallback:!0})},n.prototype.alert=function(t,n){return n=e.extend(this.default_alert_options,n),e(n.parent)[n.fct](e(n.template.replace("$class",n["class"]).replace("$msg",t)))},n.prototype.blink_title=function(t,n){if(!e("body").hasClass("hidden"))return;return n=e.extend(this.default_blink_title_options,n),this.blink_titles.push(t),this.blink_fct=function(t){return function(){return e("title").html(t.blink_titles[t.blink_index]),t.blink_index=(t.blink_index+1)%t.blink_titles.length}}(this),this.blink_interval||(this.blink_interval=setInterval(this.blink_fct,700)),e(window).one("focus",function(t){return function(){return clearInterval(t.blink_interval),t.blink_interval=null,e("title").text(n.title),t.blink_titles=[t.default_blink_title_options.title],t.blink_index=1}}(this))},n.prototype.set_focus_favicon=function(){return e(window).one("focus",function(e){return function(){return t.reset(),e.value=void 0}}(this))},n.prototype.incr_favicon=function(e){return th
 is.value==null&&(this.value=0),this.value+=1,t.setBubble(this.value),this.set_focus_favicon()},n.prototype.update_favicon=function(e,n){return this.value=e,e!=null?t.setBubble(e):(t.reset(),this.set_focus_favicon())},n.prototype.display_notif=function(t,n){var r;n=e.extend(this.default_notif_options,n);if(window.webkitNotifications&&window.webkitNotifications.checkPermission()===0)return r=window.webkitNotifications.createNotification(n.image,n.title,t),r.onclick=n.onclick,r.show(),setTimeout(function(){return r.cancel()},n.timeout)},n}(),new n})}.call(this),function(){define("common/overlay",["jquery","lodash"],function(e,t){var n;return n=function(){function n(n){var r;r={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"},this.opts=t.extend(r,n),e("["+this.opts.trigger+"]").click(function(t){return function(){if(e("["+t.opts.widthSelector+"]").length===0||e(window).width()<=parseInt(e("["+t.opts.widthS
 elector+"]").attr(t.opts.widthSelector)))return e("["+t.opts.selector+"]").toggleClass(""+t.opts.openClass)}}(this)),e("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(t){return function(){return e("["+t.opts.selector+"]").removeClass(""+t.opts.openClass)}}(this))}return n}(),new n})}.call(this),function(){define("common/remote_pagination",["jquery"],function(e){var t;return t=function(){function t(){e("a[data-remote]").parents("[data-scroll]").length>0&&e(window).scroll(function(){var t;t=e(".pagination a[rel=next]").attr("href");if(t&&e(window).scrollTop()>e(document).height()-e(window).height()-50)return e(".pagination").html("<li><span>Loading...</span></li>"),e.getScript(t+"?scroll=true")}),this.loading_animation(),e(document).ajaxComplete(this.loading_animation)}return t.prototype.loading_animation=function(){if(!e(".pagination a[data-remote]").length)return;e("a[data-remote]").length>0&&e("a[data-remote]").parents("[data-scroll]
 ").length===0&&e(".pagination").on("click","a[data-remote=true]",function(t){history.pushState("","New URL: "+e(this).attr("href"),e(this).attr("href")),e("ul.pagination").empty().html("<li><span>Loading...</span></li>");if(e(window).scrollTop()>e("#main-container").offset().top-50)return e("html, body").animate({scrollTop:e("#main-container").offset().top-50},"fast")});if(e("a[data-remote]").parents("[data-scroll]").length>0)return e(".pagination").hide()},t}(),new t})}.call(this),function(){define("common/responsive_menu",["jquery"],function(e){var t;return t=function(){function t(e){this.enabled=e!=null?e:!0,this._registerEvents(),this}return t.prototype._registerEvents=function(){return this.enabled?e("[data-trigger-menu]").on("click",function(){return e(".left-main-container").toggleClass("opened"),e(this).toggleClass("closed")}):e("[data-trigger-menu]").hide()},t}(),new t})}.call(this),function(){define("common/scroll_spy",["jquery","scrollspy"],function(e){var t;return t=func
 tion(){function t(){e("body").scrollspy({target:"#navbar-scale",offset:30})}return t}()})}.call(this),function(){define("common/tags",["jquery","lodash"],function(e,t){var n;return n=function(){function n(){e("[data-filter-tags]").keyup(function(){var n;n=t.snakeCase(e(this).val().toLowerCase()),e(".sidebar-tag-item").show();if(n.length>0)return e(".sidebar-tag-item:not([data-tag-name*='"+n+"'])").hide()}),e("[data-tag-collapse]").each(this.onCollapse()),e("[data-tag-collapse]").click(this.onCollapse())}return n.prototype.onCollapse=function(){var t,n;return n="iconf-minus-1",t="iconf-add-1",function(){var r;return e(this).hasClass(t)?e(this).removeClass(t).addClass(n):e(this).removeClass(n).addClass(t),r=e(this).parent().attr("data-tag-kind"),e(".sidebar-tag-item[data-tag-kind='"+r+"']").toggle()}},n}(),new n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/user_link",["jquery","lodash"],function(t,n){var r;return r=functio
 n(){function r(r){this._onLeave=e(this._onLeave,this),this._getTriggerPosition=e(this._getTriggerPosition,this),this._onHover=e(this._onHover,this);var i;i={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:t(".main-left-navbar a").first().attr("href")},this.opts=n.extend(i,r),this._bindUserLinks()}return r.prototype._bindUserLinks=function(){var e;return e=this,t(this.opts.linkSelector).hover(this._onHover,this._onLeave)},r.prototype._onHover=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("body").append(this._getPopupTemplate(r)),this._showBubbleFor(r,n)},r.prototype._getTriggerPosition=function(e,n){return{left:t(e).offset().left+t(e).innerWidth()/2-t(n).innerWidth()/2,top:t(e).offset().top-t(n).innerHeight()}},r.prototype._onLeave=function(e){var n,r;return n=t(e.target),r=n.attr(this.opts.loginAttr),t("[data-user-popup='"+r+"']").remove()},r.prototype._showBubbleFor=function(e,n){return t.ajax({crossDomain:!0,type:"GET",dataType:
 "jsonp",url:""+this.opts.profileBaseUrl+"/users/"+e+".json",done:function(r){return function(i){var s;return t("[data-user-popup='"+e+"']").html(r._getPopupContent(i.user)),s=t("[data-user-popup='"+e+"']"),s.css(r._getTriggerPosition(n,s))}}(this)})},r.prototype._getPopupTemplate=function(e){return'<div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+e+'" style="position: absolute">\n  <h3 class="marked-title">Loading...</h3>\n</div>'},r.prototype._getPopupContent=function(e){return'<div class="user-popup-image" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+e.login+'.jpg)">\n</div>\n<div class="user-popup-info">\n  <h3 class="user-popup-login">'+e.full_name+'</h3>\n  <span class="user-popup-email marked-title">\n    <span class="icon-envelope"></span>\n    '+e.email+'\n  </span>\n  <h5 class="user-popup-location">\n    <span data-user-location="'+e.location+'" class="icon-circle"></span>\n    '+(e.location||"unavailable")+"\n  </h5>\n</div>"
 },r}(),new r})}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("common/window_focus",[],function(){var t;return t=function(){function t(){var t,n,r,i,s;t="hidden",n=function(e){var n,r,i;e=e||window.event,i="visible",r="hidden",n={focus:i,focusin:i,pageshow:i,blur:r,focusout:r,pagehide:r},e.type in n?document.body.className=n[e.type]:document.body.className=this[t]?r:i},e.call(document,t)>=0?document.addEventListener("visibilitychange",n):(r=t="mozHidden",e.call(document,r)>=0)?document.addEventListener("mozvisibilitychange",n):(i=t="webkitHidden",e.call(document,i)>=0)?document.addEventListener("webkitvisibilitychange",n):(s=t="msHidden",e.call(document,s)>=0)?document.addEventListener("msvisibilitychange",n):e.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n}return t}()})}.call(this),function(){define("c
 ommon/markdown_preview",["jquery","lodash","marked"],function(e,t,n){var r;return r=function(){function r(r){var i,s;i={bindSelector:"data-markdown-preview"},this.opts=t.extend(i,r),s=this,e("["+this.opts.bindSelector+"]").each(function(t){var r,i;i=this,r=e(this).attr(s.opts.bindSelector);if(r)return e(r).keyup(function(){return e(i).html(n(e(this).val()))})})}return r}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("common/main",["require","jquery","Logger","common/add_on","common/callback","common/modal","common/simple_form","common/typeahead","common/cache","common/copy","common/data_events","common/data_date","common/emojify","common/fullscreen","common/infinite_scroll","common/lockable","common/manage_attachment","common/markdownable","common/multiple_actions","common/notifications_manager","common/overlay","common/remote_pagination","common/responsive_menu","common/scroll_spy","common/tags","common/user_link","common/wind
 ow_focus","common/markdown_preview"],function(t,n){var r;return r=function(){function r(){this._emitReady=e(this._emitReady,this),this._ready=e(this._ready,this),n(this._ready)}return r.prototype._ready=function(){var e,n,r,i;return r=t("common/scroll_spy"),new r,i=t("common/simple_form"),new i,e=t("common/data_date"),new e,n=t("common/markdown_preview"),new n,this._emitReady()},r.prototype._emitReady=function(){return n(document).trigger("intra.ready"),n(".js-hidden").addClass("js-active").removeClass("js-hidden"),this.ready()},r}()})}.call(this),define("common",["common/main"],function(e){return e});