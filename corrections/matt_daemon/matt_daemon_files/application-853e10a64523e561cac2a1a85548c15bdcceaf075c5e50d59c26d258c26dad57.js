(function(){define("project/answer",["jquery"],function(t){var e;return e=function(){function e(){t(document).on("change","[data-star-range]",function(){return t(this).attr("data-star-range",t(this).val())})}return e}()})}).call(this),function(){define("project/calendar",["jquery","noty","fullcalendar"],function(t){var e;return e=function(){function e(){var e;e=this,this._$modal=t("#slotSelectionModalContainer"),this._$calendar=t("#calendar"),this._$loading=t("#loading"),this._waitingAjax=!1,this.calendar=this._$calendar.fullCalendar({header:{left:"",center:"title",right:"today prev next"},axisFormat:"h:mm a",defaultDate:moment().add(1,"d"),defaultView:"agendaWeek",firstDay:1,allDaySlot:!1,slotEventOverlap:!1,selectable:!1,selectHelper:!0,slotDuration:"00:30:00",snapDuration:"00:15:00",eventClick:function(t){return function(n){var r;if(!t._waitingAjax)return r=n.ids.split(",").map(function(t){return t>>0}),e._populateModal(r,n),e._$modal.modal("show")}}(this),loading:function(t){return function(e){return t._isLoading=e,t._isLoading?(t._intervalHandler=clearInterval(t._intervalHandler),t._timeOutHandler=setTimeout(function(){return t._loadingEnable=!0,t._$loading.show(),t._intervalHandler=setInterval(function(){return t._isLoading?void 0:(t._$loading.fadeOut(),t._loadingEnable=!1,t._intervalHandler=clearInterval(t._intervalHandler))},1e3)},100)):t._loadingEnable?void 0:clearTimeout(t._timeOutHandler)}}(this),events:function(n,r,i,a){var o;return o={start:n.format(),end:r.format()},t.getJSON(e._$calendar.data("index-url"),o,function(t){return a(t)})}}),this._bind()}return e.prototype._bind=function(){return this._$modal.on("hidden.bs.modal",".btn-primary",function(){return t(this).off(".modal")}),this._$modal.on("click.modal",".btn-primary:not(.disable)",this._sendSelectedSession.bind(this))},e.prototype._sendSelectedSession=function(){var e,n,r,i;return e=this._$modal.find(".modal-body select"),r=e.val()>>0,n=e.data("ids").split(",").slice(r,r+this._$calendar.data("duration")).join(","),i=this._$calendar.data("update-url").replace(":ids",n),this._waitingAjax=!0,this._$loading.show(),this._$modal.find(".btn-primary").addClass("disable"),t.ajax({url:i,type:"post",dataType:"json",data:{start:this._$calendar.fullCalendar("getView").start.format(),end:this._$calendar.fullCalendar("getView").end.format(),_method:"put"},success:function(t){return function(e){return 200===e.status?document.location=t._$calendar.data("reload-url"):void 0}}(this),complete:function(t){return function(e){return t._showNotification(e),t._$loading.fadeOut(),t._waitingAjax=!1}}(this),error:function(t){return function(){return t._$modal.find(".btn-primary").removeClass("disable")}}(this)})},e.prototype._populateModal=function(e,n){var r,i,a,o,s,u,c;for(s=moment(n._start),o=this._$calendar.data("duration"),u=15,r=this._$modal.find(".modal-body select"),r.empty(),a=e.length-o,i=c=0;a>=0?a>=c:c>=a;i=a>=0?++c:--c)r.append(t('<option value="'+i+'"> From '+n._start.format("LT")+" to "+n._start.add(u*o,"m").format("LT")+" </option>")),n._start.subtract((o-1)*u,"m");return n._start=s,r.data("ids",e.join(","))},e.prototype._showNotification=function(t){return t=t.responseJSON?t.responseJSON:{status:500,message:"Error"},noty({layout:"topRight",type:200===t.status?"success":"error",text:t.message,timeout:4e3})},e}(),e.isCalendar=function(){return t("#calendar").length},e})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("project/list",["lodash","vendor/list"],function(e,n){var r;return r=function(){function r(){this._sort=t(this._sort,this),this.options={valueNames:e.map(i,function(t){return"project-"+t}),sortFunction:this._sort},this.projectsList=new n(a,this.options),this._bindSearch(),this._bindFilters()}var i,a;return i=["name","duration","recommendation","registration"],a="projects-list-container",r.prototype._bindSearch=function(){var t;return t=document.getElementsByClassName("projects-list--search")[0],t?t.addEventListener("keyup",function(e){return function(){return e.projectsList.search(t.value,["project-name"])}}(this)):void 0},r.prototype._bindFilters=function(){var t,e,n,r,i,a;if(t=document.getElementsByClassName("projects-list--header")[0]){for(i=t.getElementsByClassName("filter-trigger"),a=[],n=0,r=i.length;r>n;n++)e=i[n],a.push(e.addEventListener("click",this._filter(e)));return a}},r.prototype._escapeValue=function(t){return e.snakeCase(e.trim(e.deburr(t)))},r.prototype._cmp=function(t,e){return"project-duration"===e?parseInt(t.elm.attributes.getNamedItem("data-"+e.slice(8)).value):t.elm.attributes.getNamedItem("data-"+e.slice(8)).value+t.elm.attributes.getNamedItem("data-name").value},r.prototype._sort=function(t,e,n){var r;return r="asc"===n.order?1:-1,this._cmp(t,n.valueName)<this._cmp(e,n.valueName)?-1*r:this._cmp(t,n.valueName)>this._cmp(e,n.valueName)?1*r:0},r.prototype._filter=function(t){return function(n){return function(){var r,i,a,o,s;if(t.classList.contains("active"))return t.classList.remove("active"),t.parentElement.getElementsByClassName("filter-trigger")[0].classList.add("active"),n.projectsList.filter(n._filterClear);for(s=t.parentElement.getElementsByClassName("filter-trigger"),a=0,o=s.length;o>a;a++)i=s[a],i.classList.remove("active");return t.classList.add("active"),r=n["_filter"+e.capitalize(e.camelCase(t.attributes.getNamedItem("data-filter").value))],n.projectsList.filter(r)}}(this)},r.prototype._filterRecommendedProjects=function(t){return"a_recommended"===t.elm.attributes.getNamedItem("data-recommendation").value&&"not_registered"===t.elm.attributes.getNamedItem("data-registration").value},r.prototype._filterClear=function(){return!0},r.isProjectsList=function(){return null!=document.getElementById(a)},r}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("project/scales",["jquery","rangeslider"],function(e){var n;return n=function(){function n(){this._onSkillIdChange=t(this._onSkillIdChange,this),this._onQuestionKindChange=t(this._onQuestionKindChange,this),this._sliderSlt='input[type="range"]',this._skillSummaryCtnSlt=".skillSummary",this._typeInputInputSlt="[data-skill-type]",this._questionKindInputSlt="[data-question-kind]",this._addSkillStl="[data-association='questions_skills'].add_nested_fields",this._getSummarySkills(),this._createSliders(),this._bind(),e(""+this._sliderSlt).parents(".form-group").show(),this._updateLimits(),this._updateSummary()}return n.prototype._createSliders=function(){var t;return t=this,e(""+this._sliderSlt).not(".slided").each(function(t){return function(n,r){var i,a;return i=e(r),a=i.data("kind"),i.attr("max","standard"===a?100:25),i.rangeslider({polyfill:!1,onSlide:function(){return t._checkLimit.apply(t,e.merge(arguments,this.$element))},onSlideEnd:function(){return t._updateLimits(),t._updateSummary()}}),i.addClass("slided")}}(this))},n.prototype._bind=function(){return e(document).on("change",this._questionKindInputSlt,this._onQuestionKindChange),e(document).on("change",this._typeInputInputSlt,this._onSkillIdChange),e(document).on("nested:fieldRemoved",function(t){return function(){return t._updateLimits(),t._updateSummary()}}(this)),e(document).on("nested:fieldAdded:questions",function(t){return function(e){return e.field.find(""+t._questionKindInputSlt).change()}}(this)),e(document).on("nested:fieldAdded:questions_skills",function(t){return function(){var n,r;return n=e(""+t._sliderSlt).not(".slided"),r=n.parents(".fields:eq(1)").find(""+t._questionKindInputSlt).val(),n.data("kind",r),t._createSliders(),n.parents(".fields:eq(0)").find("[data-skill-type]").change()}}(this))},n.prototype._onQuestionKindChange=function(t){var n,r,i;return i=e(t.currentTarget),r=i.parents(".fields").first(),n=r.find(""+this._sliderSlt),n.data("kind",i.val()),n.val(0),n.rangeslider("destroy").removeClass("slided"),this._createSliders(),this._updateLimits(),this._updateSummary()},n.prototype._onSkillIdChange=function(t){var n,r,i,a;return n=e(t.currentTarget),a=n.val(),i=n.parents(".form-group").next(),r=i.find(""+this._sliderSlt),a?(i.fadeIn("slow"),r.attr("data-slider-id",a)):i.fadeOut("slow"),r.val(0),this._updateLimits(),a&&r.val(r.data("slider-limit")).change(),this._updateLimits(),this._updateSummary()},n.prototype._checkLimit=function(t,n,r){var i,a;return a="malus"===e(r).data("kind")?"-":"",e(r).next().find(".rangeslider__handle").html(""+a+n),i=e(r).data("slider-limit"),n>i?e(r).val(i).change():void 0},n.prototype._updateLimits=function(){var t;return t=this._getUniqSliders(),t.each(function(t){return function(n,r){var i,a,o,s,u,c;return a=e(r).attr("data-slider-id"),o=e(r).data("kind"),u=e(r).attr("max")>>0,c=e(r).attr("min")>>0,i=e(""+t._sliderSlt+":visible[data-slider-id="+a+"]").filter(function(t,n){return e(n).data("kind")===o}),s=u,i.each(function(t,n){return s-=e(n).val()>>0}),c>s&&(s=c),i.each(function(t,n){return e(n).data("slider-limit",s+(e(n).val()>>0))})}}(this))},n.prototype._getUniqSliders=function(){var t,n;return t=e(""+this._sliderSlt+":visible.slided"),n={standard:[],malus:[],bonus:[]},t=t.filter(function(t,r){var i,a;return i=e(r).attr("data-slider-id"),a=e(r).data("kind"),-1===n[a].indexOf(i)?(n[a].push(i),!0):!1})},n.prototype._getSummarySkills=function(){return this._summarySkills=e(""+this._skillSummaryCtnSlt+" [data-skill-id]").map(function(t,n){return{id:e(n).attr("data-skill-id"),$element:e(n)}})},n.prototype._updateSummary=function(){return this._summarySkills.each(function(t){return function(n,r){var i,a;return a={standard:0,bonus:0,malus:0},null!=r.id&&(i=e(""+t._sliderSlt+":visible[data-slider-id="+r.id+"]"),i.each(function(t,n){var r;return r=e(n).data("kind"),a[r]+=e(n).val()>>0})),r.$element.find(".standard .value").html(a.standard),r.$element.find(".bonus .value").html(a.bonus),r.$element.find(".malus .value").html("-"+a.malus)}}(this))},n}(),n.isScales=function(){return e(".skillSummary").length},n})}.call(this),function(){define("project/radios",["jquery"],function(t){var e;return e=function(){function e(){var e;e=this,t("[data-radio-item] label").each(function(){var n;return n=this,t("#"+t(this).attr("for")).on("change",function(){return e._activate(n)}),t(this).on("click",function(){return e._activate(this)})})}return e.prototype._activate=function(e){var n;return n=t(e).parent().attr("data-radio-item"),t("[data-radio-item='"+n+"'] label").removeClass("active"),t(e).addClass("active"),"scale_team_flag_ok"!==t(e).attr("for")?t(".scale-section-answers").addClass("hidden"):t(".scale-section-answers").removeClass("hidden")},e}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("project/rules",["jquery","typeahead"],function(e){var n,r;return r=/(([^ ,]|\\ )*)$/,n=function(){function n(){this.changed=t(this.changed,this),this._save="",this._setBloodhound(),this._bindAutoComplete(e("form .autocomplete")),this.url=e("[data-select-url]").data("select-url"),e(".rules_select").each(function(){return 0===e(this).find("option:checked").attr("value").length?e(this).parents(".form-group").siblings(".params_fields").html(""):void 0}),e("form").on("change",".rules_select",function(t){return function(e){return t.changed(e.target)}}(this))}return n.prototype._bindAutoComplete=function(t){return t.typeahead({highlight:!1,hint:!1},{display:"value",source:this.bloodhound.ttAdapter(),templates:{suggestion:function(t){return"<p><span class='label label-primary'> "+t.cat+" </span> &nbsp; "+t.value+"</p>"}},updater:function(t){return this.$element.val().replace(/[^,]*$/,"")+t+", "}}),t.on("typeahead:active, typeahead:idle",function(t){return function(n){return e(n.currentTarget).val()?e(n.currentTarget).val(t._value):void 0}}(this)),t.on("typeahead:render",function(t){return function(n){return t._value=e(n.currentTarget).val()}}(this)),t.on("typeahead:cursorchange",function(t){return function(n,i){return t._value=t._value.substring(0,r.exec(t._value).index),t._value+=i?i.value:"",e(n.currentTarget).val(t._value)}}(this)),t.on("typeahead:select",function(t){return function(n,i){return setTimeout(function(){return t._value=t._value.substring(0,r.exec(t._value).index),t._value+=i?i.value:"",e(n.currentTarget).val(t._value)},0)}}(this)),t.on("typeahead:change",function(t){return function(n){return setTimeout(function(){return e(n.currentTarget).val()?e(n.currentTarget).val(t._value):void 0},0)}}(this))},n.prototype._setBloodhound=function(){return this.bloodhound=new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"http://localhost:9000/completions.json?query=%QUERY",wildcard:"%QUERY",prepare:function(t,e){return t=t.substring(r.exec(t).index),e.url=e.url.replace("%QUERY",encodeURIComponent(t)),e},transform:function(t){var e;return e=[],_.forIn(t,function(t,n){return _.each(t,function(t){return e.push({value:t,cat:n})})}),t=e}}}),this.bloodhound.initialize()},n.prototype.changed=function(t){var n,r,i;return n=e(t).parents(".form-group").siblings(".params_fields"),r=function(){return function(){return n.find(".autocomplete").typeahead("destroy"),n.html("")}}(this),i=function(r){return function(i){return e.getJSON(i,function(i){var a,o;return a=e("<div class='form-group input optional project_projects_rules_rule'></div>"),o=e(t).attr("name"),e.each(i,function(t,e){var n,r;return r=(new Date).getTime(),n="<label class='select optional col-sm-2 control-label' for='project_projects_rules_attributes_params_attributes_"+r+"_rule_id'>"+e.name+"</label>",n+="<div class='col-sm-10'><input class='input optional autocomplete form-control' data-url='http://localhost:9000/completions.json' data-display-key='' value='"+e.default_value.replace(/(')/g,"&#39;")+"' id='project_projects_rules_attributes_params_attributes_"+r+"_value' name='"+o.replace("[rule_id]","[params_projects_rules_attributes]["+r+t+"][value]")+"' /></div>",n+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+e.id+"' name='"+o.replace("[rule_id]","[params_projects_rules_attributes]["+r+t+"][param_id]")+"' /></div>",a.append(n)}),n.replaceWith(a),r._bindAutoComplete(a.find(".autocomplete"))})}}(this),0===e(t).find("option:checked").attr("value").length?r(n):i(this.url.replace(":id",e(t).find("option:checked").attr("value")))},n}(),n.hasRules=function(){return e("[data-select-url]").length},n})}.call(this),function(){define("project/skills",["jquery","rangeslider"],function(t){var e;return e=function(){function e(){t("[data-add-skill]").length&&(this._$form=t("form"),this._rangeSlt='input[type="range"]:visible',this._$difficulty=t("[data-difficulty]"),this._updateLimits(),t(""+this._rangeSlt).each(function(e){return function(n,r){return e._initSlider(t(r))}}(this)),this._$difficulty.on("change",function(e){return function(){return e._updateRanges(t(""+e._rangeSlt))}}(this)),t(document).on("nested:fieldRemoved:projects_skills",function(t){return function(){return t._updateLimits()}}(this)),t(document).on("nested:fieldAdded:projects_skills",function(e){return function(){return e._updateRanges(t(""+e._rangeSlt).not(".slided"))}}(this)))}return e.prototype._updateRanges=function(e){var n,r;return r="0"===t("[data-difficulty]").val()?100:t("[data-difficulty]").val(),n=parseFloat(r),e.each(function(e){return function(r,i){var a,o,s,u;return a=t(i),u=a.attr("max"),s=n*a.val()/u,o=n/100,a.attr("max",n).attr("step",o),a.rangeslider("destroy"),a.val(s),e._initSlider(a),a.val(s)}}(this)),this._updateLimits()},e.prototype._initSlider=function(t){return t.rangeslider({polyfill:!1,onSlide:this._checkLimit,onSlideEnd:function(t){return function(){return t._updateLimits()}}(this)}),t.addClass("slided")},e.prototype._checkLimit=function(e,n){var r,i,a;return a="0"===t("[data-difficulty]").val()?100:t("[data-difficulty]").val(),i=100*n/parseFloat(a),this.$element.next().find(".rangeslider__handle").attr("data-percent",""+i),r=this.$element.data("rangeUntil"),n>r?this.$element.val(r).change():void 0},e.prototype._updateLimits=function(){var e,n;return n="0"===t("[data-difficulty]").val()?100:t("[data-difficulty]").val(),e=parseFloat(n),t(""+this._rangeSlt).each(function(n,r){return e-=parseFloat(t(r).val())}),0>e&&(e=0),t(""+this._rangeSlt).each(function(n,r){return t(r).data("rangeUntil",parseFloat(t(r).val())+e)})},e.prototype.modalCondition=function(){var e;return e=0,t(""+this._rangeSlt).each(function(n,r){return e+=t(r).next().find(".rangeslider__handle").data("percent")>>0}),100!==e&&"0"!==t("[data-difficulty]").val()},e.prototype.modalConfirmation=function(){return this._$form.submit()},e}(),e.hasSkills=function(){return t("[data-add-skill]").length},new e})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("project/form",["jquery","lodash","marked"],function(n,r,i){var a;return new(a=function(){function a(){this._filterSkills=t(this._filterSkills,this),n(".new_project, .edit_project").length>0&&this._bindProject(),n(".new_scale, .edit_scale").length>0&&this._bindScale()}return a.prototype._bindProject=function(){return this._bindNameCheck(),this._hideDependancies(),this._bindEstimations(),this._bindRules(),this._initRules(),this._filterSkills(),n(document).on("nested:fieldAdded",function(t){return function(){return t._filterSkills()}}(this)),n("#project_cursus_ids").change(this._filterSkills)},a.prototype._bindNameCheck=function(){var t;return t=this,n("#project_name").keyup(function(){var e,i;return e=n(this),n(this).val().length>0?(i=n(this).val(),n.getJSON(""+location.origin+"/projects.json",function(n){var a;return a=r.findWhere(n,{name:i}),a?(t._updateNextHelp(e,""+i+" is already taken"),t._updateNextHelp("#project_tag_ids","")):(t._updateNextHelp(e,""+i+" seems to be a nice name !"),t._updateNextHelp("#project_tag_ids","The tag "+i+" will also be automaticaly created."))})):(t._updateNextHelp(e,""),t._updateNextHelp("#project_tag_ids",""))})},a.prototype._bindEstimations=function(){return n("#project_min_estimate_time").val("604800"),n("#project_max_estimate_time").val("1209600")},a.prototype._initRules=function(){return n(".rules_select").each(this._setRuleTemplate)},a.prototype._bindRules=function(){return n(document).on("change",".rules_select",this._setRuleTemplate)},a.prototype._setRuleTemplate=function(){var t,e,i;return e=r.template("<div class=\"col-sm-12 lead\">\n  <h4><%= kind.toUpperCase() %>: Rule <%= name %>\n    <small>\n      <%= description || 'No description' %>\n    </small>\n  </h4>\n  <p><pre><code><%= code %></code></pre></p>\n</div>"),t=n(this).parents(".fields").find(".rule-description").first(),i=r.findWhere(rules_description,{id:parseInt(n(this).val())}),t.html(e(i))},a.prototype._hideDependancies=function(){return""===n("#project_parent_id").val()&&n(".project_inherited_team").hide(),n("#project_parent_id").change(function(){return""!==n(this).val()?n(".project_inherited_team").show():n(".project_inherited_team").hide()})},a.prototype._updateNextHelp=function(t,e){var r;return r=n(t).parent().find(".help-block").last(),n(r).length>0?n(r).html(e):void 0},a.prototype._bindScale=function(){return this._bindMarkdownPreviews(),this._checkScales(),this._bindNavbarArchi(),n(document).on("nested:fieldAdded",function(t){return function(){return t._bindNavbarArchi()}}(this)),n(".section-counter-item input[type='text']").keyup(function(t){return function(){return t._bindNavbarArchi()}}(this))},a.prototype._checkScales=function(){var t,e;return t=r.template("<p class='text-warning primary-warning'>An other scale (<%= name %>) is already set as <b>primary</b>. You can <a href='<%= link %>/edit' target='_blank'>edit it now</a></p>"),e=r.template("<p class='text-warning primary-warning'>There is no other scale defined as primary for this project. Don't forget to set this scale as primary later if you want to use it for defenses.</a></p>"),existing_scales&&n("#scale_is_primary").parents(".checkbox").after(t(existing_scales)),n("#scale_is_primary").change(function(){var r;return r=this.checked,n(".primary-warning").detach(),r&&existing_scales?n("#scale_is_primary").parents(".checkbox").after(t(existing_scales)):r||existing_scales?void 0:n("#scale_is_primary").parents(".checkbox").after(e())})},a.prototype._bindMarkdownPreviews=function(){return n("[data-markdown-preview]").each(function(){var t;return t=n("<div class='markdown-preview-container'></div>"),n(this).after(t),n(this).keyup(function(){return n(t).html(i(n(this).val()))})})},a.prototype._bindNavbarArchi=function(){var t;return t=n("#navbar-scale-edit .nav .sections-list"),t.html("<li><h5 class='marked-title'><a href='#sections'>Sections <small>("+n(".section-counter-item").length+" defined)</small></a></h5><ol class='section-root'></ol></li>"),n(".section-counter-item").each(function(){var e,r,i;return i=n(this).find(".scale_sections_name input"),e=n("<li><a href='#"+i.attr("id")+"'>"+i.val()+"</a></li>"),n(this).find(".question-item").length>0&&(r=n("<ol></ol>"),n(this).find(".question-item").each(function(){var t,e;return e=n(this).find(".scale_sections_questions_name input"),t=n("<li><a href='#"+e.attr("id")+"'>"+e.val()+"</a></li>"),r.append(t)}),e.append(r)),t.find(".section-root").append(e)})},a.prototype._filterSkills=function(){var t,i;return t=n("#project_cursus_ids").val()||[],i=r.map(t,function(t){return available_skills[t]}),i=r.merge.apply(r,i),r.each(n(".project_projects_skills_skill select option"),function(t){var a;return a=n(t).val(),e.call(r.keys(i),a)>=0?n(t).attr("disabled",null):n(t).attr("disabled","disabled")})},a}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("project/sort",["jquery","Sortable","noty"],function(e,n,r){var i;return i=function(){function i(){this._update=t(this._update,this);var r;this.sortables=[],r=this._update,e("ul[data-sortable]").each(function(t){return function(i,a){var o,s,u;return o=e(a),u=o.data("group"),s={group:u,onUpdate:function(){return r(o.data("update-url"),u,this.toArray())}},t.sortables.push(new n(a,s))}}(this))}return i.prototype._update=function(t,n,i){var a;return a={},a[n]=i,e.post(t,a,function(){return function(){return r({layout:"topRight",type:"success",text:"Updated",timeout:4e3})}}(this))},i}()})}.call(this),function(){define("project/main",["require","jquery","project/answer","project/calendar","project/list","project/scales","project/radios","project/rules","project/skills","project/form","project/sort","components"],function(t,e,n,r,i,a,o,s,u,c,l){var d;return d=function(){function t(){a.isScales()&&new a,r.isCalendar()&&new r,s.hasRules()&&new s,new n,new o,i.isProjectsList()&&new i,new l}return t}()})}.call(this),define("project",["project/main"],function(t){return t}),function(){define("animMaster/helpers",["jquery","async","easel","tween"],function(t){var e;return e=function(t){var e;return e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,e.test(t)},{getData:function(e,n){var r,i;return r=1,i=function(a){var o,s,u,c;c=[];for(o in a)s=a[o],_.isObject(s)?s.ajax?(r++,u=o,c.push(t.getJSON(s.ajax).then(function(t){return a[u]=t,r--,0===r?e(null,n):void 0}))):c.push(i(s)):c.push(a[o]=s);return c},i(n),r--,0===r?e(null,n):void 0},getRadianAngle:function(t,e){var n;return e=e||0,t=t||360,n=360*Number(this)/t,(e+n)*Math.PI/180},getDegreeAngle:function(t){return(Number(this)*(180/Math.PI)>>0)-t},setter:function(t,e,n,r,i){return t[n]=i,e(r)},emit:function(t,e,n){var r;return r=new createjs.Event(e),r.data=n,t.dispatchEvent(r)}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("animMaster/base",["jquery","async","stats","animMaster/helpers"],function(e,n,r,i){var a,o,s;return s=1920,o=1350,a=function(){function a(e){this.destroy=t(this.destroy,this),this.emit=t(this.emit,this),this._set=_.curry(i.setter)(this),n.series([function(t){return function(n){return i.getData(t._set(n,"data"),e.data||{})}}(this),function(t){return function(n){return t._createStage(n,e)}}(this),function(t){return function(e){return t._createElements(e)}}(this),function(t){return function(e){return t._bindEvents(e)}}(this),function(t){return function(n){return t._startStats(n,e)}}(this)],function(t){return function(e){return e?void 0:t.start()}}(this))}return a.prototype._createStage=function(t,e){return this._stage=new createjs.Stage(e.viewId),this._stage._stage=this._stage,this._stage.realWidth=e.scale.width||s,this._stage.realHeight=e.scale.height||o,this._stage.toResize=!0,createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(60),this._stage.enableMouseOver(),t()},a.prototype._bindEvents=function(){return e(window).on("resize orientationchange",function(t){return function(){return t._stage.toResize=!0}}(this))},a.prototype._startStats=function(t,e){return e.stats?(this._stats=new r,this._stats.domElement.style.position="absolute",this._stats.domElement.style.top="0",this._stats.domElement.style.right="0",this._stats.domElement.style["z-index"]="2000",document.body.appendChild(this._stats.domElement),t()):t()},a.prototype._resize=function(){var t,n,r;return r=window.innerWidth-e(".page-content").position().left,t=window.innerHeight-e(".page-content").position().top,n=Math.min(r/this._stage.realWidth,t/this._stage.realHeight),this._stage.scaleX=n,this._stage.scaleY=n,this._stage.canvas.width=this._stage.realWidth*n,this._stage.canvas.height=this._stage.realHeight*n,this._stage.toResize=!1,window.innerHeight>this._stage.canvas.height?e(this._stage.canvas).css("margin-top",(window.innerHeight-this._stage.canvas.height)/2):void 0},a.prototype.start=function(){var t,e;return e=function(t){return function(){return t._stage.toResize&&t._resize(),t._stage.update()}}(this),t=e,this._stats&&(t=function(t){return function(){return t._stats.begin(),e(),t._stats.end()}}(this)),createjs.Ticker.addEventListener("tick",t)},a.prototype.emit=function(t,e){return i.emit(this._stage,t,e)},a.prototype.destroy=function(){return this._stage.removeAllEventListeners(),this._stage.removeAllChildren()},a}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};define("animMaster/element",["async","animMaster/helpers"],function(e,r){var i;return i=function(i){function a(n,i){this.emit=t(this.emit,this),this._setMargin=t(this._setMargin,this),this.Container_constructor(),this.container=i.container,this._set=_.curry(r.setter)(this),e.series([function(t){return function(e){return r.getData(t._set(e,"data"),i.data||{})}}(this),function(t){return function(e){return t._createContent(e)}}(this),function(t){return function(e){return t._setContent(e,i)}}(this),function(t){return function(e){return t._setMargin(e)}}(this),function(t){return function(e){return t._createElements(e)}}(this),function(t){return function(e){return t._bindEvents(e)}}(this)],function(t){return function(){return n(null,t)}}(this))}return n(a,i),a.prototype._createContent=function(t){return this._stage=this.container._stage,this.content=this,this.container.addChild(this),t()},a.prototype._setMargin=function(t){var e,n,r;return this.content.margin&&(n=this.content.margin,r=this.content._stage,e=this.content.clone(),e.set({x:n,y:n,width:this.content.width-2*n,height:this.content.height-2*n}),this.content.addChild(e),this.content=e,this.content.margin=n,this.content._stage=r),t()},a.prototype.emit=function(t,e){return r.emit(this._stage,t,e)},a.prototype.getCircleAttr=function(t,e,n,r,i){var a,o;return o=360/e*t,a=(90-o)*Math.PI/180,{x:n+i*Math.cos(a),y:r-i*Math.sin(a),alpha:o}},a.prototype.getData=function(t,e){return r.getData(t,e)},a.prototype._bindEvents=function(t){return t()},a.prototype._setContent=function(t){return t()},a}(createjs.Container),createjs.EventDispatcher.initialize(i.prototype),createjs.promote(i,"Container"),i})}.call(this),function(){define("animMaster/main",["animMaster/base","animMaster/element","animMaster/helpers"],function(t,e,n){return Number.prototype.GRA=n.getRadianAngle,Number.prototype.GDA=n.getDegreeAngle,{Base:t,Element:e}})}.call(this),define("animMaster",["animMaster/main"],function(t){return t}),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/profile/base",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(r){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,r),i.prototype._createElements=function(t){return n.series([function(t){return function(e){return t._createCircle(e)}}(this),function(t){return function(e){return t._createAvatar(e)}}(this),function(t){return function(e){return t._createAA(e)}}(this),function(t){return function(e){return t._createLogin(e)}}(this),function(t){return function(e){return t._createGlowing(e)}}(this)],t)},i.prototype._createCircle=function(t){return this.circle=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,0,330),scaleX:0,scaleY:0}),this.content.addChild(this.circle),t()},i.prototype._createAvatar=function(e){return t("<img>",{src:this.data.avatar,error:function(t){return function(){return t.avatar=(new createjs.Shape).set({cursor:"pointer",graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,-60,130)}),t.content.addChild(t.avatar),e()}}(this),load:function(t){return function(){return t.avatar=(new createjs.Shape).set({cursor:"pointer",graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,-60,130)}),t.content.addChild(t.avatar),e()}}(this)})},i.prototype._createAA=function(t){var e,n,r;return r=-90,e="#212226",n=270,this._hack=new createjs.Shape,this._hack.alpha=0,this._hack.command=this._hack.graphics.s(e).ss(30).arc(0,-60,140,r.GRA(),n.GRA(),!1).command,this.content.addChild(this._hack),t()},i.prototype._createLogin=function(t){return this.login=(new createjs.Text).set({alpha:0,text:""+this.data.login+" - lvl "+this.data.lvl,y:140,textAlign:"center",font:"50px Arial",color:"#5b5b60"}),this.content.addChild(this.login),t()},i.prototype._createGlowing=function(t){return this._shadow=(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#212226").drawCircle(0,0,360),alpha:0,mask:(new createjs.Shape).set({graphics:(new createjs.Graphics).beginFill("#ff000").drawRect(-1*this._stage.realWidth/2,-1*this._stage.realHeight,this._stage.realWidth,this._stage.realHeight)})}),this.content.addChildAt(this._shadow,0),t()},i.prototype._bindEvents=function(t){return this.avatar.on("click",function(t){return function(){return t.emit("avatar.clicked")}}(this)),t()},i.prototype._createCategoryLabel=function(t,e){return this._categoryLabel&&this.content.removeChild(this._categoryLabel),this._categoryLabel=(new createjs.Text).set({text:t,y:90,textAlign:"center",font:"40px Helvetica",color:e}),this.content.addChild(this._categoryLabel)},i.prototype._removeCategoryLabel=function(){return this._categoryLabel?this.content.removeChild(this._categoryLabel):void 0},i.prototype.animations=function(){return{start:function(t){return function(e){return createjs.Tween.get(t.circle).to({scaleX:1,scaleY:1},200).call(function(){return createjs.Tween.get(t._hack).to({alpha:1},0).call(function(){return createjs.Tween.get(t.avatar).to({alpha:1},200,createjs.Ease.getPowInOut(5)).call(function(){return createjs.Tween.get(t.login).to({alpha:1},500,createjs.Ease.getPowInOut(5)).call(e,t)})})})}}(this),reduce:function(t){return function(e){return 0===t._shadow.alpha?e():(t._removeCategoryLabel(),createjs.Tween.get(t._shadow).to({alpha:0},300).call(e,t))
}}(this),expand:function(t){return function(e,n){return 1===t._shadow.alpha?e():(t._createCategoryLabel(n.name,n.color),t._shadow.shadow=new createjs.Shadow(n.color,0,0,150),createjs.Tween.get(t._shadow).to({alpha:1},700).call(e,t))}}(this)}},i}(r.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/profile/xp",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype._createElements=function(t){var e,n;return n=-90,e="#00bbbc",this._xp=new createjs.Shape,this._xp.command=this._xp.graphics.rs(["#2dd57a","#00babc"],[0,1],0,0,280,0,0,320).ss(45).arc(0,0,300,n.GRA(),n.GRA(),!1).command,this.content.addChild(this._xp),t()},n.prototype.animations=function(){return{start:function(t){return function(e){return createjs.Tween.get(t._xp.command).to({endAngle:t.data.xp.GRA(100,-90)},700,createjs.Ease.bounceOut).call(e,t)}}(this)}},n}(r.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/profile/categorie",["jquery","async","animMaster"],function(t,n,r){var i,a;return a={reduce:"reduce",expand:"expand"},i=function(t){function r(t,e){this._arcMargin=2,this._state=a.reduce,this.currentIndexPositionFromTopCategory=e.data.index,r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(t){var e,n,r,i,a,o;return i=350,o=30,a=this._getRotation()-this._getArcSize()/2-this._arcMargin,e=this._getArcSize(),this._arc=(new createjs.Shape).set({cursor:"pointer",alpha:0,rotation:a}),this._arc._arcCommand=this._arc.graphics.s(this.data.color).ss(o).arc(0,0,i,0,e.GRA(),!1).command,this.content.addChild(this._arc),i=420,r=20,a=this._getRotation()-this._arcMargin,n="#333",this._point=(new createjs.Shape).set({alpha:0,rotation:a,cursor:"pointer"}),this._point.graphics.s(this.data.color).beginFill(n).ss(5).dc(i,0,r),this.content.addChild(this._point),this._createText(this._getRotation(0),0),t()},r.prototype._createText=function(t,e){var n,r;return r=500,n=this.getCircleAttr(t,360,0,-25,r),this._text=new createjs.Text(this.data.name,"40px Helvetica",this.data.color).set({alpha:e,x:n.x,y:n.y,cursor:"pointer",textAlign:this._setTextAlign()}),this.content.addChild(this._text)},r.prototype._bindEvents=function(t){return this._text.on("click",function(t){return function(){return 0!==t.currentIndexPositionFromTopCategory||t._state!==a.expand?t.emit("category.clicked",{ids:[t.data.id]}):void 0}}(this)),this._point.on("click",function(t){return function(){return 0!==t.currentIndexPositionFromTopCategory||t._state!==a.expand?t.emit("category.clicked",{ids:[t.data.id]}):void 0}}(this)),this._arc.on("click",function(t){return function(){return 0!==t.currentIndexPositionFromTopCategory||t._state!==a.expand?t.emit("category.clicked",{ids:[t.data.id]}):void 0}}(this)),this._point.on("mouseover",function(t){return function(){return t.emit("category.mouseovered",{index:t.data.index})}}(this)),this._point.on("mouseout",function(t){return function(){return t.emit("category.mouseouted",{index:t.data.index})}}(this)),this._arc.on("mouseover",function(t){return function(){return t.emit("category.mouseovered",{index:t.data.index})}}(this)),this._arc.on("mouseout",function(t){return function(){return t.emit("category.mouseouted",{index:t.data.index})}}(this)),t()},r.prototype._getRotation=function(t,e,n){var r;return null==t&&(t=-90),null==e&&(e=360),null==n&&(n=this.data.total),r=e/n*this.currentIndexPositionFromTopCategory+this._arcMargin,r=0>r?360+r:r,r+t},r.prototype._getArcSize=function(t,e){return null==t&&(t=360),null==e&&(e=this.data.total),t/e-this._arcMargin},r.prototype._setTextAlign=function(){return 0===this.currentIndexPositionFromTopCategory||this.currentIndexPositionFromTopCategory===this.data.total/2?"center":this._state===a.reduce?this.currentIndexPositionFromTopCategory>this.data.total/2||this.currentIndexPositionFromTopCategory<0?"right":"left":this.currentIndexPositionFromTopCategory>0?"left":"right"},r.prototype._setCurrentIndexPositionFromTopCategory=function(t){return this.currentIndexPositionFromTopCategory=(this.data.index-t+this.data.total)%this.data.total,this.currentIndexPositionFromTopCategory>this.data.total/2?this.currentIndexPositionFromTopCategory-=this.data.total:void 0},r.prototype._getArcExpandRotation=function(t){var e;return 0===this.currentIndexPositionFromTopCategory?e=t-90+this._getArcSize()/2:(this.currentIndexPositionFromTopCategory<0?e=0>t?-1*(180+t%360)+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory:180-t%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory:(e=180>t?0-t%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*(this.currentIndexPositionFromTopCategory-1):360-t%360+(this._getArcSize(180-this._arcMargin,this.data.total-1)+this._arcMargin)*(this.currentIndexPositionFromTopCategory-1),e+=this._arcMargin,e%=360),e+=t),e},r.prototype._getPointExpandRotation=function(t){var e;return 0===this.currentIndexPositionFromTopCategory?t:(e=this.currentIndexPositionFromTopCategory<0?-1*this.currentIndexPositionFromTopCategory*(this._getArcSize()+this._arcMargin)-(90+-1*(this._getArcSize(180,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory)+this._getArcSize(180,this.data.total-1)/2:-1*this.currentIndexPositionFromTopCategory*(this._getArcSize()+this._arcMargin)+(90+(this._getArcSize(180,this.data.total-1)+this._arcMargin)*this.currentIndexPositionFromTopCategory)-this._getArcSize(180,this.data.total-1)/2-this._arcMargin/2,e%360+t)},r.prototype.animations=function(){return{start:function(t){return function(e){return createjs.Tween.get(t._arc).to({alpha:1},300),createjs.Tween.get(t._point).to({alpha:1},300),createjs.Tween.get(t._text).to({alpha:1},300).call(e,t)}}(this),rotate:function(t){return function(e,r,i){var a;return a=function(t,e){var n;return n=e.rotation+i,e._saveRotation=n,createjs.Tween.get(e).to({rotation:n},300).call(t,this)},t._setCurrentIndexPositionFromTopCategory(r),n.parallel([function(e){return a(e,t._arc)},function(e){return a(e,t._point)}],e)}}(this),reduce:function(t){return function(e){var r;return t.content.removeChild(t._text),t._text=null,t._state===a.reduce?e():(t._state=a.reduce,r=t._getArcSize(),n.parallel([function(e){return createjs.Tween.get(t._arc).to({rotation:t._arc._saveRotation},300,createjs.Ease.circInOut).call(e,t)},function(e){return createjs.Tween.get(t._point).to({rotation:t._point._saveRotation},300,createjs.Ease.circInOut).call(e,t)},function(e){return createjs.Tween.get(t._arc._arcCommand).to({endAngle:r.GRA()},300,createjs.Ease.circInOut).call(e,t)}],e))}}(this),expand:function(t){return function(e){var r;return t._state===a.expand?e():(t._state=a.expand,r=0===t.currentIndexPositionFromTopCategory?180:t._getArcSize(180,t.data.total-1),n.parallel([function(e){return createjs.Tween.get(t._arc).to({rotation:t._getArcExpandRotation(t._arc.rotation)},500,createjs.Ease.circInOut).call(e,t)},function(e){return createjs.Tween.get(t._point).to({rotation:t._getPointExpandRotation(t._point.rotation)},500,createjs.Ease.circInOut).call(e,t)},function(e){return createjs.Tween.get(t._arc._arcCommand).to({endAngle:r.GRA()},500,createjs.Ease.circInOut).call(e,t)}],function(){return e()}))}}(this),mouseovered:function(t){return function(e){return t._enabled?e():(0===t.currentIndexPositionFromTopCategory&&t._state===a.expand||t._state===a.reduce||t._text||t._createText(t._point.rotation+90,1),(0!==t.currentIndexPositionFromTopCategory||t._state!==a.expand)&&(t._point.shadow=new createjs.Shadow(t.data.color,0,0,15),t._arc.shadow=new createjs.Shadow(t.data.color,0,0,15)),e())}}(this),mouseouted:function(t){return function(e){return t._enabled?e():(0===t.currentIndexPositionFromTopCategory&&t._state===a.expand||t._state===a.reduce||t._text&&(t.content.removeChild(t._text),t._text=null),(0!==t.currentIndexPositionFromTopCategory||t._state!==a.expand)&&(t._point.shadow=null,t._arc.shadow=null),e())}}(this),enable:function(t){return function(e){return 0===t.currentIndexPositionFromTopCategory?e():(t._enabled=!0,t._text||t._createText(t._point.rotation+90,1),t._point.shadow=new createjs.Shadow(t.data.color,0,0,15),t._arc.shadow=new createjs.Shadow(t.data.color,0,0,15),e())}}(this),showText:function(t){return function(e){return t._text||t._createText(t._getRotation(0),1),e()}}(this),disable:function(t){return function(e){return 0===t.currentIndexPositionFromTopCategory?e():(t._enabled=!1,t._point.shadow=null,t._arc.shadow=null,t._text&&(t.content.removeChild(t._text),t._text=null),e())}}(this)}},r}(r.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/profile/main",["jquery","async","animMaster","galaxy/profile/base","galaxy/profile/xp","galaxy/profile/categorie"],function(t,n,r,i,a,o){var s;return s=function(t){function r(){this.currentIndexCategory=0,r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._setContent=function(t){return this.content.x=this._stage.realWidth/2,this.content.y=this._stage.realHeight/2,this.content.scaleX=.6,this.content.scaleY=.6,t()},r.prototype._createElements=function(t){return n.parallel([function(t){return function(e){return new i(t._set(e,"_base"),{container:t.content,data:_.pick(t.data.profile,["avatar","login","lvl"])})}}(this),function(t){return function(e){return new a(t._set(e,"_xp"),{container:t.content,data:_.pick(t.data.profile,["xp"])})}}(this),function(t){return function(e){var r;return t._categories=[],0===t.data.categories.length?e():(r=_.curry(function(e,n,r){return n||t._categories.push(r),e()}),n.eachSeries(t.data.categories,function(e,n){return e.index=t.data.categories.indexOf(e),e.total=t.data.categories.length,new o(r(n),{container:t.content,data:e})},e))}}(this)],t)},r.prototype.getCategoryIndexFromId=function(t){return _.findIndex(this._categories,{data:{id:t}})},r.prototype.animations=function(){return{start:function(t){return function(e){return n.series([function(e){return t._base.animations().start(e)},function(e){return t._xp.animations().start(e)},function(e){return t.animations().categories().start(e)}],e)}}(this),down:function(t){return function(e){return t.y!==t._stage.realHeight/2?e():createjs.Tween.get(t).to({y:t.y+t._stage.realHeight/4},500).call(e,t)}}(this),up:function(t){return function(e){return t.y===t._stage.realHeight/2?e():createjs.Tween.get(t).to({y:t.y-t._stage.realHeight/4},500).call(e,t)}}(this),categories:function(t){return function(){return{enable:function(e,r){return n.each(r,function(e,n){var r;return r=_.find(t._categories,function(t){return t.data.id===e}),r.animations().enable(n)},e())},enableText:function(e,r){return n.each(r,function(e,n){var r;return r=_.find(t._categories,function(t){return t.data.id===e}),r.animations().showText(n)},e())},disable:function(e,r){return n.each(r,function(e,n){var r;return r=_.find(t._categories,function(t){return t.data.id===e}),r.animations().disable(n)},e())},start:function(e){return n.each(t._categories,function(t,e){return t.animations().start(e)},e)},unselected:function(e){return n.series([function(e){return t.animations().categories().mouseouted(e,t.currentIndexCategory)},function(e){return t.animations().categories().reduce(e)},function(e){return t.animations().up(e)},function(e){return t.animations().categories().enableText(e,_.pluck(t.data.categories,"id"))}],e)},selected:function(e,r){return n.series([function(e){return t.animations().categories().mouseouted(e,r)},function(e){return t.animations().categories().reduce(e)},function(e){return t.animations().categories().rotate(e,r)},function(e){return setTimeout(function(){return n.parallel([function(e){return t.animations().categories().expand(e,r)},function(e){return t.animations().down(e)}],e)},150)}],function(){return t.currentIndexCategory=r,e()})},reduce:function(e){return n.parallel([function(e){return t._base.animations().reduce(e)},function(e){return n.each(t._categories,function(t,e){return t.animations().reduce(e)},e)}],e)},rotate:function(e,r){var i;return i=t._categories[r].currentIndexPositionFromTopCategory*(360/t._categories.length)*-1,i>=180&&(i-=360),-180>=i&&(i=360+i),n.each(t._categories,function(t,e){return t.animations().rotate(e,r,i)},e)},expand:function(e,r){return n.parallel([function(e){return t._base.animations().expand(e,t._categories[r].data)},function(e){return n.each(t._categories,function(t,e){return t.animations().expand(e)},e)}],e)},mouseovered:function(e,r){return n.series([function(e){return t._categories[r].animations().mouseovered(e)}],e)},mouseouted:function(e,r){return n.series([function(e){return t._categories[r].animations().mouseouted(e)}],e)}}}}(this)}},r}(r.Element)})}.call(this),define("galaxy/profile",["galaxy/profile/main"],function(t){return t}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};define("galaxy/infoBox/main",["jquery","async","animMaster"],function(e,r,i){var a;return a=function(r){function i(){return this.update=t(this.update,this),i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype._createElements=function(t){return this._$infobox=e(".galaxy-infobox"),t()},i.prototype.update=function(t,n){var r;return r=function(n){return function(r,i){return r?void 0:(n.data=i,n._$infobox.html(_.template(e("[data-template-id='infobox']").html())(i.project)),n.animations().show(t))}}(this),this.getData(r,n)},i.prototype.animations=function(){return{hide:function(t){return function(e){return t._$infobox.fadeOut("fast"),t.emit("infobox.hidden",_.pick(t.data.project,"associatedCategories")),e()}}(this),show:function(t){return function(e){return t._$infobox.fadeIn("fast"),t.emit("infobox.shown",_.pick(t.data.project,"associatedCategories")),e()}}(this)}},i}(i.Element)})}.call(this),define("galaxy/infoBox",["galaxy/infoBox/main"],function(t){return t}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};define("galaxy/galaxy/label",["jquery","async","animMaster"],function(e,r,i){var a;return a=function(e){function r(){return this._createElements=t(this._createElements,this),r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype._setContent=function(t){return this.content.margin=10,this.content.x=this.data.x,this.content.y=this.data.y,t()},r.prototype._createElements=function(t){return this._box=new createjs.Shape,this.addChildAt(this._box,0),this._title=new createjs.Text(this.data.title,"20px Helvetica","#fff").set({lineWidth:200,textBaseline:"hanging"}),this.content.addChild(this._title),this._updateBoxHeight(),t()},r.prototype._updateBoxHeight=function(){var t,e,n;return e=this._title.getBounds(),t=e.height+this.content.margin,n=e.width+2*this.content.margin,this._box._command=this._box.graphics.clear().beginFill("#000").ss(2).beginStroke(this.data.strokeColor).command,this._box.graphics.drawRect(0,0,n,t)},r.prototype.getHeight=function(){return this._title.getBounds().height+this.content.margin},r.prototype.animations=function(){return{selected:function(t){return function(e){return t._box._command.style="#fff",e()}}(this),unSelected:function(t){return function(e){return t._box._command.style=t.data.strokeColor,e()}}(this)}},r}(i.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/galaxy/project",["jquery","async","animMaster","galaxy/galaxy/label"],function(t,n,r,i){var a,o;return o=30,a=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(t){var e,r,a,s,u,c;return u=this.getCircleAttr(this.data.angle,360,0,0,this.data.tiersRange[this.data.tierIndex]),s=1-(this.data.final_mark||0)/100,r=this.data.bonused?"#caba78":"#29292e",this._circle=(new createjs.Shape).set({cursor:"pointer",graphics:(new createjs.Graphics).ss(3).beginFill(r).beginStroke("#5b5b686")}),this._circle._command=this._circle.graphics.command,this.data.failed?a=new createjs.Bitmap(this.data.failed):this.data.malused?a=new createjs.Bitmap(this.data.malused):this.data.bonused?a=new createjs.Bitmap(this.data.bonused):this.data.validated&&this._circle.graphics.lf(["#29292e",this.data.color],[s,s],u.x,u.y-o*this.data.size>>0,u.x,u.y+o*this.data.size>>0),this._circle.graphics.dc(u.x,u.y,o*this.data.size),this.content.addChild(this._circle),a&&(a.set({x:u.x-26,y:u.y-26}),this.content.addChild(a)),c=_.without(this.data.states,"Authorize"),e=-180,_.forEach(c,function(t){return function(e){var n;return n=t.getCircleAttr(210,360,u.x,u.y,o*t.data.size),e=new createjs.Bitmap(e),e.set({x:n.x-12,y:n.y-12}),t.content.addChild(e)}}(this)),n.parallel([function(t){return function(e){return new i(t._set(e,"_label"),{container:t.content,data:{x:u.x,y:u.y-o*t.data.size,title:t.data.name,strokeColor:"#6f7279"}})}}(this)],function(e){return function(){var n;return n=e._label.getHeight(),n>e.data.radius&&(e._label.y-=n/2),t()}}(this))},r.prototype._bindEvents=function(t){return this._circle.on("click",function(t){return function(){return t.emit("project.clicked",t.data.id)}}(this)),t()},r.prototype.animations=function(){return{selected:function(t){return function(e,n){return t._circle.shadow=new createjs.Shadow(n,0,0,25),t._circle._command.style="#fff",t._label.animations().selected(e)}}(this),unSelected:function(t){return function(e){return t._circle.shadow=null,t._circle._command.style="#5b5b686",t._label.animations().unSelected(e)}}(this)}},r}(r.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/galaxy/search",["jquery","async","animMaster"],function(t,n,r){var i;return i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,n),r.prototype._createElements=function(e){return this._$search=t(".galaxy-search").fadeIn(),this._$search.find(".typeahead").focus(),e()},r.prototype._bindEvents=function(t){return this._$search.on("typeahead:selected",function(t){return function(e,n){return t._stage.on("category.ready",function(){return this.emit("project.clicked",n.data.id)},t,!0),t.emit("category.clicked",{ids:n.data.skills}),t._$search.blur()}}(this)),t()},r}(r.Element)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/galaxy/main",["jquery","async","animMaster","galaxy/galaxy/project","galaxy/galaxy/search"],function(t,n,r,i,a){var o,s;return s=[350,500,650,800,950,1100],o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._setContent=function(t){return this.alpha=0,this.content.x=this._stage.realWidth/2,this.content.y=this._stage.realHeight/4*3,t()},r.prototype._createElements=function(t){var e,n,r,i,o;return o=1,e="#5b5b68",i=180,n=360,r=200,_.forEach(s,function(t){return function(r){var a;return a=(new createjs.Shape).set({graphics:(new createjs.Graphics).s(e).ss(o).arc(0,0,r,i.GRA(),n.GRA(),!1)}),t.content.addChild(a)}}(this)),new a(this._set(t,"_search"),{container:this,data:_.pick(this.data,"projectSearchUrl")})},r.prototype._clean=function(){return _.forEach(this._projects,function(t){return function(e){return t.content.removeChild(e)}}(this)),this._projects=[]},r.prototype.populate=function(t,e){var r;return this._category=e,this._clean(),r={projects:{ajax:this.data.projectsUrl.replace("#skillId",this._category.id)}},n.series([function(t){return function(e){return t.getData(e,r)}}(this)],function(e){return function(r,a){var o,u;return u=a[0].projects,o=_.curry(function(t,n,r){return n||e._projects.push(r),t()}),n.eachSeries(_.sortByOrder(u,["tierIndex","angle"],[!1,!1]),function(t,n){var r;return r={container:e,data:{tiersRange:s,color:e._category.color}},_.merge(r.data,t),new i(o(n),r)}),t()}}(this))},r.prototype.animations=function(){return{show:function(t){return function(e){return createjs.Tween.get(t).to({alpha:1},400).call(e,t)}}(this),hide:function(t){return function(e){return createjs.Tween.get(t).to({alpha:0},400).call(e,t)}}(this),projects:function(t){return function(){return{selected:function(e,r){var i;return i=t._selectedProject,t._selectedProject=_.find(t._projects,function(t){return t.data.id===r}),n.parallel([function(t){return i?i.animations().unSelected(t):t()},function(e){return t._selectedProject.animations().selected(e,t._category.color)}],e)}}}}(this)}},r}(r.Element)})}.call(this),define("galaxy/galaxy",["galaxy/galaxy/main"],function(t){return t}),function(){define("galaxy/legend",["jquery"],function(t){var e;return e=function(){function e(){this._$button=t(".legend-icon"),this._$legend=t(".legend"),this._bindEvents()}return e.prototype._bindEvents=function(){return this._$button.on("mouseover",function(t){return function(){return t._$legend.fadeIn("fast")}}(this)),this._$button.on("mouseout",function(t){return function(){return t._$legend.fadeOut("fast")}}(this))},e}()})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define("galaxy/main",["jquery","async","animMaster","galaxy/profile","galaxy/infoBox","galaxy/galaxy","galaxy/legend"],function(t,n,r,i,a,o,s){var u;return u=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype._createElements=function(t){return n.parallel([function(t){return function(e){var n;return n=new o(t._set(e,"_galaxy"),{container:t._stage,data:_.pick(t.data,["projectsUrl"])})}}(this),function(t){return function(e){return new i(t._set(e,"_profile"),{container:t._stage,data:{categories:t.data.categories,profile:{ajax:t.data.profileUrl}}})}}(this),function(t){return function(e){return new a(t._set(e,"_infoBox"),{container:t._stage})}}(this)],t)},r.prototype._bindEvents=function(t){var e,i,a,o,s,u,c,l,d,h,p,f,_,g;return r.__super__._bindEvents.call(this),f=function(t){return n.series([function(e){return function(n){return e._profile.animations().categories().enable(n,t.data.associatedCategories)}}(this)],p)},p=function(t){return function(){return t._stage.on("infobox.shown",f,t,!0)}}(this),p(),h=function(t){return n.series([function(e){return function(n){return t.data.associatedCategories?e._profile.animations().categories().disable(n,t.data.associatedCategories):n()}}(this)],d)},d=function(t){return function(){return t._stage.on("infobox.hidden",h,t,!0)}}(this),d(),l=function(t){return n.series([function(e){return function(n){return e.animations().categories().mouseovered(n,t.data.index)}}(this)],c)},c=function(t){return function(){return t._stage.on("category.mouseovered",l,t,!0)}}(this),c(),u=function(t){return n.series([function(e){return function(n){return e.animations().categories().mouseouted(n,t.data.index)}}(this)],s)},s=function(t){return function(){return t._stage.on("category.mouseouted",u,t,!0)}}(this),s(),o=function(t){return n.series([function(e){return function(n){return e.animations().categories().selected(n,t.data.ids)}}(this)],a)},a=function(t){return function(){return t.emit("category.ready"),t._stage.on("category.clicked",o,t,!0)}}(this),a(),g=function(t){return n.series([function(e){return function(n){return e.animations().projects().selected(n,t.data)}}(this)],_)},_=function(t){return function(){return t._stage.on("project.clicked",g,t,!0)}}(this),_(),i=function(){return n.series([function(t){return function(e){return t.animations().categories().unselected(e)}}(this)],e)},e=function(t){return function(){return t._stage.on("avatar.clicked",i,t,!0)}}(this),e(),t()},r.prototype.start=function(){return r.__super__.start.call(this),new s,this.animations().start()},r.prototype.animations=function(){return{start:function(t){return function(e){return n.series([function(e){return t._profile.animations().start(e)}],e)}}(this),projects:function(t){return function(){return{selected:function(e,r){return n.series([function(e){return t._infoBox.animations().hide(e)},function(e){return t._galaxy.animations().projects().selected(e,r)},function(e){var n;return n={categories:t.data.categories,project:{ajax:t.data.projectUrl.replace("#projectId",r)}},t._infoBox.update(e,n)}],e)}}}}(this),categories:function(t){return function(){return{selected:function(e,r){return _.forEach(r,function(r){var i;return i=t._profile.getCategoryIndexFromId(r),-1!==i?(n.series([function(e){return t._infoBox.animations().hide(e)},function(e){return t._galaxy.animations().hide(e)},function(e){return t._profile.animations().categories().selected(e,i)},function(e){return t._galaxy.populate(e,t.data.categories[i])},function(e){return t._galaxy.animations().show(e)}],e),!1):void 0})},unselected:function(e){return n.series([function(e){return t._infoBox.animations().hide(e)},function(e){return t._galaxy.animations().hide(e)},function(e){return t._profile.animations().categories().unselected(e)}],e)},mouseovered:function(e,r){return n.series([function(e){return t._profile.animations().categories().mouseovered(e,r)}],e)},mouseouted:function(e,r){return n.series([function(e){return t._profile.animations().categories().mouseouted(e,r)}],e)}}}}(this)}},r}(r.Base)})}.call(this),define("galaxy",["galaxy/main"],function(t){return t}),function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};require(["require","vendor"],function(t){return t(["common"],function(n){return t(["jquery","project","galaxy","rangeslider"],function(t,r,i){var a;return new(a=function(n){function a(){return a.__super__.constructor.apply(this,arguments)}return e(a,n),a.prototype.ready=function(){var e,n;return t("select.select:not(.chosen)").each(function(){return t(this).val(t(this).find("option[selected='selected']").val())}),t("canvas#view").length?(t("body").addClass("galaxy-background"),e=null,n=function(){var n,r;return t(".galaxy-infobox").hide(),t(".galaxy-search .typeahead").val(""),r=t(".galaxy-search select").val()>>0,n=t("canvas#view"),e&&e.destroy(),e=new i({scale:{width:2595,height:1522},stats:!1,viewId:"view",data:{categories:{ajax:n.data("categoriesurl").replace("#cursusId",r)},profileUrl:n.data("profileurl").replace("#cursusId",r),projectsUrl:n.data("projectsurl"),projectUrl:n.data("projecturl"),projectSearchUrl:n.data("projectsearchurl")}})},t("select.cursus").on("change",n),n()):new r,t(".scale-section-answers, .scale_team_feedback_rating").length>0?t('input[type="range"]').rangeslider({polyfill:!1}):void 0},a}(n))})})})}.call(this),define("application",function(){});