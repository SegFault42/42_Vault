(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n={}.hasOwnProperty,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};this.WebSocketRails=function(){function n(n,e){this.url=n,this.use_websockets=null!=e?e:!0,this.connection_stale=t(this.connection_stale,this),this.pong=t(this.pong,this),this.supports_websockets=t(this.supports_websockets,this),this.dispatch_channel=t(this.dispatch_channel,this),this.unsubscribe=t(this.unsubscribe,this),this.subscribe_private=t(this.subscribe_private,this),this.subscribe=t(this.subscribe,this),this.dispatch=t(this.dispatch,this),this.trigger_event=t(this.trigger_event,this),this.trigger=t(this.trigger,this),this.unbind=t(this.unbind,this),this.bind=t(this.bind,this),this.connection_established=t(this.connection_established,this),this.new_message=t(this.new_message,this),this.reconnect=t(this.reconnect,this),this.callbacks={},this.channels={},this.queue={},this.connect()}return n.prototype.connect=function(){return this.state="connecting",this._conn=this.supports_websockets()&&this.use_websockets?new n.WebSocketConnection(this.url,this):new n.HttpConnection(this.url,this),this._conn.new_message=this.new_message},n.prototype.disconnect=function(){return this._conn&&(this._conn.close(),delete this._conn._conn,delete this._conn),this.state="disconnected"},n.prototype.reconnect=function(){var t,n,e,i,s;e=null!=(i=this._conn)?i.connection_id:void 0,this.disconnect(),this.connect(),s=this.queue;for(n in s)t=s[n],t.connection_id!==e||t.is_result()||this.trigger_event(t);return this.reconnect_channels()},n.prototype.new_message=function(t){var e,i,s,o,r,c;for(c=[],s=0,o=t.length;o>s;s++)i=t[s],e=new n.Event(i),e.is_result()?(null!=(r=this.queue[e.id])&&r.run_callbacks(e.success,e.data),delete this.queue[e.id]):e.is_channel()?this.dispatch_channel(e):e.is_ping()?this.pong():this.dispatch(e),c.push("connecting"===this.state&&"client_connected"===e.name?this.connection_established(e.data):void 0);return c},n.prototype.connection_established=function(t){return this.state="connected",this._conn.setConnectionId(t.connection_id),this._conn.flush_queue(),null!=this.on_open?this.on_open(t):void 0},n.prototype.bind=function(t,n){var e,i;return null==(i=(e=this.callbacks)[t])&&(e[t]=[]),this.callbacks[t].push(n)},n.prototype.unbind=function(t){return delete this.callbacks[t]},n.prototype.trigger=function(t,e,i,s){var o,r;return o=new n.Event([t,e,null!=(r=this._conn)?r.connection_id:void 0],i,s),this.trigger_event(o)},n.prototype.trigger_event=function(t){var n,e,i;return null==(i=(n=this.queue)[e=t.id])&&(n[e]=t),this._conn&&this._conn.trigger(t),t},n.prototype.dispatch=function(t){var n,e,i,s,o;if(null!=this.callbacks[t.name]){for(s=this.callbacks[t.name],o=[],e=0,i=s.length;i>e;e++)n=s[e],o.push(n(t.data));return o}},n.prototype.subscribe=function(t,e,i){var s;return null==this.channels[t]?(s=new n.Channel(t,this,!1,e,i),this.channels[t]=s,s):this.channels[t]},n.prototype.subscribe_private=function(t,e,i){var s;return null==this.channels[t]?(s=new n.Channel(t,this,!0,e,i),this.channels[t]=s,s):this.channels[t]},n.prototype.unsubscribe=function(t){return null!=this.channels[t]?(this.channels[t].destroy(),delete this.channels[t]):void 0},n.prototype.dispatch_channel=function(t){return null!=this.channels[t.channel]?this.channels[t.channel].dispatch(t.name,t.data):void 0},n.prototype.supports_websockets=function(){return"function"==typeof WebSocket||"object"==typeof WebSocket},n.prototype.pong=function(){var t,e;return t=new n.Event(["websocket_rails.pong",{},null!=(e=this._conn)?e.connection_id:void 0]),this._conn.trigger(t)},n.prototype.connection_stale=function(){return"connected"!==this.state},n.prototype.reconnect_channels=function(){var t,n,e,i,s;i=this.channels,s=[];for(e in i)n=i[e],t=n._callbacks,n.destroy(),delete this.channels[e],n=n.is_private?this.subscribe_private(e):this.subscribe(e),n._callbacks=t,s.push(n);return s},n}(),WebSocketRails.Event=function(){function t(t,n,e){var i;this.success_callback=n,this.failure_callback=e,this.name=t[0],i=t[1],null!=i&&(this.id=null!=i.id?i.id:65536*(1+Math.random())|0,this.channel=null!=i.channel?i.channel:void 0,this.data=null!=i.data?i.data:i,this.token=null!=i.token?i.token:void 0,this.connection_id=t[2],null!=i.success&&(this.result=!0,this.success=i.success))}return t.prototype.is_channel=function(){return null!=this.channel},t.prototype.is_result=function(){return"undefined"!=typeof this.result},t.prototype.is_ping=function(){return"websocket_rails.ping"===this.name},t.prototype.serialize=function(){return JSON.stringify([this.name,this.attributes()])},t.prototype.attributes=function(){return{id:this.id,channel:this.channel,data:this.data,token:this.token}},t.prototype.run_callbacks=function(t,n){return this.success=t,this.result=n,this.success===!0?"function"==typeof this.success_callback?this.success_callback(this.result):void 0:"function"==typeof this.failure_callback?this.failure_callback(this.result):void 0},t}(),WebSocketRails.AbstractConnection=function(){function t(t,n){this.dispatcher=n,this.message_queue=[]}return t.prototype.close=function(){},t.prototype.trigger=function(t){return"connected"!==this.dispatcher.state?this.message_queue.push(t):this.send_event(t)},t.prototype.send_event=function(t){return null!=this.connection_id?t.connection_id=this.connection_id:void 0},t.prototype.on_close=function(t){var n;return this.dispatcher&&this.dispatcher._conn===this?(n=new WebSocketRails.Event(["connection_closed",t]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(n)):void 0},t.prototype.on_error=function(t){var n;return this.dispatcher&&this.dispatcher._conn===this?(n=new WebSocketRails.Event(["connection_error",t]),this.dispatcher.state="disconnected",this.dispatcher.dispatch(n)):void 0},t.prototype.on_message=function(t){return this.dispatcher&&this.dispatcher._conn===this?this.dispatcher.new_message(t):void 0},t.prototype.setConnectionId=function(t){this.connection_id=t},t.prototype.flush_queue=function(){var t,n,e,i;for(i=this.message_queue,n=0,e=i.length;e>n;n++)t=i[n],this.trigger(t);return this.message_queue=[]},t}(),WebSocketRails.HttpConnection=function(t){function n(t,e){var i=this;this.dispatcher=e,n.__super__.constructor.apply(this,arguments),this._url="http://"+t,this._conn=this._createXMLHttpObject(),this.last_pos=0;try{this._conn.onreadystatechange=function(){return i._parse_stream()},this._conn.addEventListener("load",this.on_close,!1)}catch(s){this._conn.onprogress=function(){return i._parse_stream()},this._conn.onload=this.on_close,this._conn.readyState=3}this._conn.open("GET",this._url,!0),this._conn.send()}return e(n,t),n.prototype.connection_type="http",n.prototype._httpFactories=function(){return[function(){return new XDomainRequest},function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}]},n.prototype.close=function(){return this._conn.abort()},n.prototype.send_event=function(t){return n.__super__.send_event.apply(this,arguments),this._post_data(t.serialize())},n.prototype._post_data=function(t){return $.ajax(this._url,{type:"POST",data:{client_id:this.connection_id,data:t},success:function(){}})},n.prototype._createXMLHttpObject=function(){var t,n,e,i,s;for(e=!1,t=this._httpFactories(),i=0,s=t.length;s>i;i++){n=t[i];try{e=n()}catch(o){continue}break}return e},n.prototype._parse_stream=function(){var t,n;if(3===this._conn.readyState){t=this._conn.responseText.substring(this.last_pos),this.last_pos=this._conn.responseText.length,t=t.replace(/\]\]\[\[/g,"],[");try{return n=JSON.parse(t),this.on_message(n)}catch(e){}}},n}(WebSocketRails.AbstractConnection),WebSocketRails.WebSocketConnection=function(t){function n(t,e){var i=this;this.url=t,this.dispatcher=e,n.__super__.constructor.apply(this,arguments),this.url.match(/^wss?:\/\//)?console.log("WARNING: Using connection urls with protocol specified is depricated"):this.url="https:"===window.location.protocol?"wss://"+this.url:"ws://"+this.url,this._conn=new WebSocket(this.url),this._conn.onmessage=function(t){var n;return n=JSON.parse(t.data),i.on_message(n)},this._conn.onclose=function(t){return i.on_close(t)},this._conn.onerror=function(t){return i.on_error(t)}}return e(n,t),n.prototype.connection_type="websocket",n.prototype.close=function(){return this._conn.close()},n.prototype.send_event=function(t){return n.__super__.send_event.apply(this,arguments),this._conn.send(t.serialize())},n}(WebSocketRails.AbstractConnection),WebSocketRails.Channel=function(){function n(n,e,i,s,o){var r,c,a;this.name=n,this._dispatcher=e,this.is_private=null!=i?i:!1,this.on_success=s,this.on_failure=o,this._failure_launcher=t(this._failure_launcher,this),this._success_launcher=t(this._success_launcher,this),this._callbacks={},this._token=void 0,this._queue=[],c=this.is_private?"websocket_rails.subscribe_private":"websocket_rails.subscribe",this.connection_id=null!=(a=this._dispatcher._conn)?a.connection_id:void 0,r=new WebSocketRails.Event([c,{data:{channel:this.name}},this.connection_id],this._success_launcher,this._failure_launcher),this._dispatcher.trigger_event(r)}return n.prototype.destroy=function(){var t,n,e;return this.connection_id===(null!=(e=this._dispatcher._conn)?e.connection_id:void 0)&&(n="websocket_rails.unsubscribe",t=new WebSocketRails.Event([n,{data:{channel:this.name}},this.connection_id]),this._dispatcher.trigger_event(t)),this._callbacks={}},n.prototype.bind=function(t,n){var e,i;return null==(i=(e=this._callbacks)[t])&&(e[t]=[]),this._callbacks[t].push(n)},n.prototype.unbind=function(t){return delete this._callbacks[t]},n.prototype.trigger=function(t,n){var e;return e=new WebSocketRails.Event([t,{channel:this.name,data:n,token:this._token},this.connection_id]),this._token?this._dispatcher.trigger_event(e):this._queue.push(e)},n.prototype.dispatch=function(t,n){var e,i,s,o,r,c;if("websocket_rails.channel_token"===t)return this.connection_id=null!=(o=this._dispatcher._conn)?o.connection_id:void 0,this._token=n.token,this.flush_queue();if(null!=this._callbacks[t]){for(r=this._callbacks[t],c=[],i=0,s=r.length;s>i;i++)e=r[i],c.push(e(n));return c}},n.prototype._success_launcher=function(t){return null!=this.on_success?this.on_success(t):void 0},n.prototype._failure_launcher=function(t){return null!=this.on_failure?this.on_failure(t):void 0},n.prototype.flush_queue=function(){var t,n,e,i;for(i=this._queue,n=0,e=i.length;e>n;n++)t=i[n],this._dispatcher.trigger_event(t);return this._queue=[]},n}()}).call(this),define("websocket-rails",function(){}),function(){var t=function(t,n){return function(){return t.apply(n,arguments)}};define("components/websockets/manager",["jquery","websocket-rails","Logger"],function(n){var e;return e=function(){function e(e){this._initChat=t(this._initChat,this),this._onOpen=t(this._onOpen,this),this.addHandler=t(this.addHandler,this);var i;console.group("Websocket connection"),i={websocketUrl:n("body").attr("data-url"),userId:n("body").attr("data-id"),publicChannelName:"global",handlers:[]},this.opts=_.extend(i,e),this.dispatcher=new WebSocketRails(this.opts.websocketUrl+"websocket"),this.logged=!1,this.retries=0,this.dispatcher.on_open=this._onOpen,window.dispatcher=this.dispatcher,window.manager=this}return e.prototype._logOnPrivateChannel=function(){return this.logged||(this.retries>0&&log("Retrying ("+this.retries+" retry)"),log("Waiting for access on private channels... [private-"+this.opts.userId+"]"),(this.private_channel=this.dispatcher.subscribe_private("private-"+this.opts.userId))&&console.time("Private channel request"),this.private_channel.on_success=function(t){return function(n){return t.logged=!0,console.timeEnd("Private channel request"),log("[c='color: green']["+n.login+"@private-"+t.opts.userId+"][c] Has joined the channel !"),t._bindPrivateRoutes(),t._initChat(n.login)}}(this),this.private_channel.on_failure=function(t){return function(n){return t.logged=!1,t.retries++,log("[c='color: orange'][!@private-"+t.opts.userId+"][c] Authorization failed because "+n.message),t.retries<3&&t._logOnPrivateChannel,console.groupEnd("Websocket connection")}}(this)),this.logged},e.prototype._logOnPublicChannel=function(){return this.public_channel=this.dispatcher.subscribe(this.opts.publicChannelName),log("[c='color: green'][public@"+this.opts.publicChannelName+"][c] Has joined the channel !"),this._bindPublicRoutes(),this._bindTestChannel()},e.prototype._bindTestChannel=function(){return log("Binding test channel... [c='color:#bbb'](on [debug.hello] for simple ping pong test)[c]"),this.debug_channel=this.dispatcher.subscribe("debug"),this.debug_channel.bind("hello",function(t){return console.info("[Debug] Hello received !",t)})},e.prototype._bindPrivateRoutes=function(){return _.each(this.opts.handlers,function(t){return function(n){return n.bindHandlers?n.bindHandlers(t.private_channel):void 0}}(this)),console.groupEnd("Websocket connection")},e.prototype._bindPublicRoutes=function(){return _.each(this.opts.handlers,function(t){return function(n){return n.bindPublicHandlers?n.bindPublicHandlers(t.dispatcher):void 0}}(this))},e.prototype.addHandler=function(t){return t.bindHandlers&&t.bindHandlers(this.dispatcher),t.bindPublicHandlers?t.bindPublicHandlers(this.dispatcher):void 0},e.prototype._onOpen=function(){return log("Websockets are now opened !"),this._logOnPrivateChannel(),this._logOnPublicChannel()},e.prototype._initChat=function(t){return this.private_channel.bind("message",function(){return function(t){return console.info(""+t.author+": "+t.content)}}(this)),window.say=function(n){return function(e){return n.dispatcher.trigger("direct.message",{author:t,content:e})}}(this)},e}()})}.call(this),function(){var t=function(t,n){return function(){return t.apply(n,arguments)}};define("components/base",["jquery"],function(n){var e;return e=function(){function e(n,e){this.name=n,this.root=e,this.bindHandlers=t(this.bindHandlers,this),this._onProgress=t(this._onProgress,this),this.data=[],this._renderTemplate(),this.verbose=!0,this.bindEvents=["new","update","progress"],this.counterClass=".labeled",this.dispatcher=null!=window.dispatcher}return e.prototype._channelNameFor=function(t){return""+this.name+"."+t},e.prototype._renderTemplate=function(){return""},e.prototype.bind=function(t){switch(t){case"new":return this._onNew;case"update":return this._onUpdate;case"progress":return this._onProgress;default:return console.warn("Event "+t+" can't be binded on component..."),function(t){return console.warn("empty function "+t)}}},e.prototype._onNew=function(t){return log("[new] requested !",t)},e.prototype._onUpdate=function(t){return log("[update] requested !",t)},e.prototype._onProgress=function(t){return console.warn(t),log("["+this.name+"] Progress "+this.name+" requested !",t)},e.prototype.bindHandlers=function(t,n){var e,i,s,o,r,c,a,h;for(null==n&&(n="?"),c=this.bindEvents,i=0,o=c.length;o>i;i++)e=c[i],log("["+this.name+" ("+n+")] - Binding on: "+this._channelNameFor(e),t);for(a=this.bindEvents,h=[],s=0,r=a.length;r>s;s++)e=a[s],h.push(t.bind(this._channelNameFor(e),this.bind(e)));return h},e.prototype.bindPublicHandlers=function(t){return this.dispatcher=t,this.bindHandlers(t.subscribe("global"),"global")},e.prototype._incrementCounters=function(){var t;return null!=this.root&&n(this.root).find(this.counterClass).length>0?(t=parseInt(n(this.root).find(this.counterClass).text()),n(this.root).find(this.counterClass).html(t+1),n(this.root).find(this.counterClass).attr("data-counter-count",t+1)):void 0},e.prototype._resetCounters=function(){return null!=this.root&&n(this.root).find(this.counterClass).length>0?(n(this.root).find(this.counterClass).html(0),n(this.root).find(this.counterClass).attr("data-counter-count",0)):void 0},e}()})}.call(this),function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n={}.hasOwnProperty,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};define("components/drop_component",["jquery","components/base","common/data_date"],function(n,i,s){var o,r;return r=new s,o=function(i){function s(e,i){this._updateItem=t(this._updateItem,this),this._addItem=t(this._addItem,this),this._onProgress=t(this._onProgress,this),this._onUpdate=t(this._onUpdate,this),this._onNew=t(this._onNew,this),this._renderTemplate=t(this._renderTemplate,this),s.__super__.constructor.call(this,e,i),this.containerSelector=".notifications-container",this.url=n(this.containerSelector).attr("data-notifications-url"),this.data=[],this._handleEvents(),this.render()}return e(s,i),s.prototype.render=function(){return this.data=_.sortBy(this.data,function(t){return t.updated_at||t.text||t.progress}).reverse(),n(this.containerSelector).html(this._renderTemplate()),r&&r._updateAll(),this._position()},s.prototype._renderTemplate=function(){return this.template='<header class="notifications--header">\n  <span>notifications</span>\n  <a href="'+this.url+'">See all notifications</a>\n</header>\n<ul class="menu-drop-list">'+_.map(this.data,this._renderCellTemplate).join("")+"</ul>"},s.prototype._renderCellTemplate=function(t){return'<li class="menu-drop-item dancer '+(t.read?"read":"unread")+'">\n  <a href="'+(t.link||"#")+'">'+(t.image?'<div class="menu-drop-image full-bg square-s" style="background-image: url('+t.image+')"></div>':"")+('    <div class="menu-drop-content">\n    '+(t.title?'<div class="menu-drop-title">'+t.title+"</div>":"")+"\n    "+(t.text?'<div class="menu-drop-text">'+t.text+"</div>":"")+"\n    "+(t.updated_at?'<span class="menu-drop-created" data-short-date="'+t.updated_at+'">'+t.updated_at+"</span>":"")+"\n    "+(t.progress?'<div class="menu-drop-progress"><div class="progress"><div class="progress-bar" style="width:'+t.progress+'%"></div></div></div>':"")+"\n    </div>\n  </a>\n</li>")},s.prototype._onNew=function(t){return this.verbose&&log("["+this.name+"] New "+this.name+" requested !",t),this._addItem(t)},s.prototype._onUpdate=function(t){return this.verbose&&log("["+this.name+"] Update "+this.name+" requested !",t),this._updateItem(t)},s.prototype._onProgress=function(t){var n;return console.warn(t),log("["+this.name+"] Progress "+this.name+" requested !",t),t.progress?(n=_.findWhere(_notifications.read,{concern:t.concern}),n?(n.progress=t.progress,this._updateItem(t)):void 0):void 0},s.prototype._addItem=function(t){return t=this._filterObject(t),t.onCurrentPage()||(this.data.unshift(t),this.render(),t.read)?void 0:this._incrementCounters()},s.prototype._updateItem=function(t){var n;return t.read=!1,t=this._filterObject(t),!t.onCurrentPage()&&(n=_.findWhere(this.data,{title:t.title,concern:t.concern}),n&&(this.data=_.reject(this.data,{title:t.title,concern:t.concern}),this.data.unshift(t),this.render(),n&&n.read))?this._incrementCounters():void 0},s.prototype._onOpen=function(){return n(this.containerSelector).addClass("open"),this.data.length>0?this.readingTimeout=setTimeout(function(t){return function(){var e,i,s,o;for(o=t.data,i=0,s=o.length;s>i;i++)e=o[i],e.read=!0;return n(""+t.containerSelector+" .unread").addClass("read").removeClass("unread"),t._resetCounters(),t.readingTimeout=!1,t._markAllAsRead()}}(this),1e3):void 0},s.prototype._onClose=function(){return n(this.containerSelector).removeClass("open"),this.readingTimeout?clearTimeout(this.readingTimeout):void 0},s.prototype._markAllAsRead=function(){return n.signedAjax({url:""+this.url+"/read_all",method:"POST"}).done(function(t){return console.log("Sucessfully read all !",t)})},s.prototype._handleEvents=function(){return n(document).on("click",this.root,function(t){return function(e){return n(t.containerSelector).hasClass("open")?t._onClose():t._onOpen(),e.stopImmediatePropagation(),!1}}(this)),n(document).on("click",function(t){return function(){return n(t.containerSelector).removeClass("open")}}(this))},s.prototype._position=function(){var t,e;return e=n(".main-navbar").height(),t=n(this.root).offset().left-265,n(this.containerSelector).css({top:e,left:t})},s.prototype._filterObject=function(t){return t.read||(t.read=!1),t.progress||(t.progress=!1),t.image&&void 0!==t.image.url&&(t.image=t.image.url),t.markAsRead=function(n){return function(){return n.dispatcher?n.dispatcher.trigger("notifications.read",{concern:t.concern,title:t.title}):void 0}}(this),t.onCurrentPage=function(){return t.concern&&n("[data-concern='"+this.concern+"']").length>0?(this.markAsRead(),!0):!1},t},s}(i)})}.call(this),function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n={}.hasOwnProperty,e=function(t,e){function i(){this.constructor=t}for(var s in e)n.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};define("components/friendship",["jquery","components/drop_component"],function(n,i){var s;return s=function(i){function s(){this._onNew=t(this._onNew,this),n("[data-friendship-drop]").length&&(s.__super__.constructor.call(this,"friendship","[data-friendship-drop]"),this._bindFriendshipActions())}return e(s,i),s.prototype.ACCEPT_URL="http://localhost:8000/friends/<%= id %>",s.prototype.DECLINE_URL="http://localhost:8000/friends/<%= id %>/ignore",s.prototype.ACCEPTED_MESSAGE='<span class="icon-check"></span> Invitation accepted',s.prototype.DECLINED_MESSAGE='<span class="icon-ban"></span> Invitation declined',s.prototype._renderCellTemplate=function(t){return'<li class="menu-drop-item">\n  <div class="menu-drop-image full-bg square-s rounded" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+t.login+'.jpg)"></div>\n  <div class="menu-drop-name">'+t.login+'</div>\n  <div class="menu-drop-actions">\n    <a href="#" data-friendship-accept="'+t.id+'"><span class="icon-check-circle-o"></span></a>\n    <a href="#" data-friendship-decline="'+t.id+'"><span class="icon-times-circle-o"></span></a>\n  </div>\n</li>'},s.prototype._bindFriendshipActions=function(){var t;return t=this,n("[data-friendship-accept]").click(function(){var e,i;return i=_.template(t.ACCEPT_URL)({id:n(this).attr("data-friendship-accept")}),e=n(this).parent().parent(),console.log("click ("+i+") aaaaand..."),n.ajax({url:i,data:{_method:"put"},method:"POST",success:function(){return console.log("request"),n(e).html(t.ACCEPTED_MESSAGE)}})}),n("[data-friendship-decline]").click(function(){var e,i;return i=_.template(t.DECLINE_URL)({id:n(this).attr("data-friendship-decline")}),e=n(this).parent().parent(),n.ajax({url:i,data:{_method:"delete"},method:"POST",success:function(){return n(e).html(t.DECLINED_MESSAGE)}})})},s.prototype._onNew=function(t){return console.log("newFriendship requested !",t),this.data.push(t),this.render(),this._bindFriendshipActions(),this._incrementCounters()},s}(i)})}.call(this),function(){var t={}.hasOwnProperty,n=function(n,e){function i(){this.constructor=n}for(var s in e)t.call(e,s)&&(n[s]=e[s]);return i.prototype=e.prototype,n.prototype=new i,n.__super__=e.prototype,n};define("components/notification",["jquery","components/drop_component"],function(t,e){var i;return i=function(e){function i(){t("[data-notification-drop]").length?(i.__super__.constructor.call(this,"notification","[data-notification-drop]"),this.manageExistingNotifications()):console.error("[Notification] Unable to find notifiable aera")}return n(i,e),i.prototype.manageExistingNotifications=function(){var t,n,e,i,s,o,r,c;if("undefined"!=typeof _notifications&&null!==_notifications){for(o=_notifications.unread,n=0,i=o.length;i>n;n++)t=o[n],this._addItem(t);for(r=_notifications.read,c=[],e=0,s=r.length;s>e;e++)t=r[e],c.push(this._addItem(t));return c}},i}(e)})}.call(this),function(){define("components/main",["require","jquery","components/websockets/manager","components/base","components/drop_component","components/friendship","components/notification"],function(t,n){var e,i,s,o,r;return o=t("components/websockets/manager"),i=t("components/friendship"),s=t("components/notification"),e=t("common/data_date"),this.components=[],n("[data-friendship-drop]").length&&this.components.push(this.friendship=new i),this.components.push(this.notification=new s),r=is_beta()?new o({handlers:this.components}):{}})}.call(this),define("components",["components/main"],function(t){return t});