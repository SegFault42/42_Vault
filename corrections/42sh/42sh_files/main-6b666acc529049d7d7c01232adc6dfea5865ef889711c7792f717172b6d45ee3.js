(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("Flags",["lodash"],function(n){var o;return o=function(){function o(){this.is_beta=t(this.is_beta,this),this._availableFlags=["Debug","Experiments"],this._flags=n.zipObject(this._availableFlags,n.map(this._availableFlags,function(t){return"true"===sessionStorage[t]||!1}))}return o.prototype.enable=function(t){return e.call(this._availableFlags,t)>=0?(sessionStorage[t]="true",this._flags[t]=!0):console.warn("Unable to enable "+t+" (available: ["+this._availableFlags+"])")},o.prototype.disable=function(t){return e.call(this._availableFlags,t)>=0?(sessionStorage[t]=null,this._flags[t]=!1):void 0},o.prototype.get=function(t){return this._flags[t]},o.is_beta=function(){return $("body").is(".beta")||$("body").is(".basic-staff")},o.prototype.is_beta=function(){return $("body").is(".beta")||$("body").is(".basic-staff")},o}(),window.is_beta=o.is_beta,new o})}).call(this),function(){define("Logger",["log","Flags"],function(t,e){var n;return new(n=function(){function n(){t&&(window.log=this.log,e.disable("Debug"),e.is_beta()&&e.enable("Debug"),this._printHello(e.get("Debug")))}return n.prototype.log=function(n,o){var i;return i=['color: #000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'],o||e.get("Debug")?t("[c='"+i.join(";")+"']"+n+"[c]"):void 0},n.prototype.warn=function(n,o){var i;return i=['color: #d9af16; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'],o||e.get("Debug")?t("[c='"+i.join(";")+"']"+n+"[c]"):void 0},n.prototype.err=function(n,o){var i;return i=['color: #a10000; font-size: 12px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif'],o||e.get("Debug")?t("[c='"+i.join(";")+"']"+n+"[c]"):void 0},n.prototype._printHello=function(e){var n;return null==e&&(e=!1),n=["height: 60px","width: 60px","display: block",'font-size: 20px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"background-color:transparent","padding: 30px 40px 30px 70px","line-height: 50px","background-image: url('data:image/png;base64,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')","background-repeat: no-repeat","background-position: 0% 50%","background-size: auto 80%"],t("[c='"+n.join(";")+"']"+(e?"DEBUG MODE":"")+"[c]")},n}())})}.call(this),function(){define("common/add_on/array",[],function(){var t;return new(t=function(){function t(){Array.prototype.to_rails_params=function(t,e){var n;return null==e&&(e="id"),function(){var o,i,r;for(r=[],o=0,i=this.length;i>o;o++)n=this[o],r.push(""+t+"["+e.pluralize()+"][]="+n);return r}.call(this).join("&")}}return t}())})}.call(this),function(){define("common/add_on/bootstrap",["jquery","bootstrap"],function(t){var e;return new(e=function(){function e(){t("a[rel~=popover], .has-popover").popover({trigger:"hover"}),t("a[rel~=tooltip], .has-tooltip").tooltip(),t("[data-toggle='tooltip']").tooltip()}return e}())})}.call(this),function(){define("common/add_on/jquery",["common/add_on/bootstrap"],function(){var t;return new(t=function(){function t(){$.fn.incr=function(t,e){var n,o;return null==t&&(t=1),null==e&&(e=!1),$(this).length?(e&&(t=-t),n=$(this).html().trim(),$(this).html((o=n.match(/^(\d+)\s*([\D]+)$/m))?o[2].pluralize(parseInt(o[1],10)+t,!0):parseInt(n,10)+t)):void 0},$.fn.decr=function(t,e){return null==t&&(t=1),null==e&&(e=!1),$(this).incr(-t,e)},$.fn.reverse_state=function(){var t;return t=$(this).attr("data-state"),$(this).attr("data-state",{"true":"false","false":"true"}[t]),t.to_bool},$.fn.state=function(){var t;return t=$(this).attr("data-state"),t?t.to_bool:void 0},$.fn.inputWrapper=function(t){return this.text=t,this.each(function(t){return function(e,n){var o;return o=$("<span data-input-wrapper>"+t.text+"</span>"),$(n).after(o).css("text-indent",$(o).outerWidth()).css("padding",0),$(n).parent().attr("data-input-container","")}}(this))},$.signedAjax=function(t){return t.xhrFields={withCredentials:!0},$.ajax(t)}}return t}())})}.call(this),function(){define("common/add_on/string",["pluralize"],function(t){var e;return new(e=function(){function e(){Object.defineProperty(String.prototype,"to_bool",{get:function(){return/^(true|1)$/i.test(this)}}),String.prototype.pluralize=function(e,n){return null==e&&(e=42),null==n&&(n=!1),t(this,e,n)}}return e}())})}.call(this),function(){define("common/add_on/main",["common/add_on/array","common/add_on/bootstrap","common/add_on/jquery","common/add_on/string"],function(){var t;return new(t=function(){function t(){}return t}())})}.call(this),define("common/add_on",["common/add_on/main"],function(t){return t}),function(){define("common/callback/base",[],function(){var t;return t=function(){function t(){var t;t=this,$("body").on("click","a[data-uid], [data-uid] a",function(e){var n,o,i,r;return $(this).is("[data-uid]")?(o=this,r=this,i=$(o).data("uid")):(o=this,r=$(o).parents("[data-uid]"),i=$(r).data("uid")),n="click_"+i,t.call_callback(t,n,"before",o,r),$.ajax($(o).attr("href")).success(function(e){return t.call_callback(t,n,"success",o,r,e)}).error(function(){return t.call_callback(t,n,"error",o,r)}).done(function(){return t.call_callback(t,n,"done",o,r)}),e.stopPropagation(),!1})}return t.prototype.call_callback=function(t,e,n,o,i,r){return"function"==typeof t[""+n+"_"+e]?t[""+n+"_"+e](o,i,r):void 0},t}()})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function o(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("common/callback/message",["jquery","common/callback/base"],function(t,n){var o;return new(o=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return e(o,n),o.prototype.before_click_star=function(e){return t("#favorite_count").incr(1,t(e).reverse_state())},o.prototype.before_click_pin=function(e){return t(e).reverse_state()},o.prototype.before_click_lock=function(e){return t(e).reverse_state()},o.prototype.before_click_upvote=function(e,n,o){var i;return null==o&&(o=!0),o&&t(n).siblings("[data-uid=downvote]").state()&&this.before_click_downvote(void 0,t(n).siblings("[data-uid=downvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,i),t(n).parents(".reply-actions").length?(t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())):void 0},o.prototype.before_click_downvote=function(e,n,o){var i;return null==o&&(o=!0),o&&t(n).siblings("[data-uid=upvote]").state()&&this.before_click_upvote(void 0,t(n).siblings("[data-uid=upvote]"),!1),i=t(n).reverse_state(),t(n).find("span.count").incr(1,i),t(n).siblings(".vote-summary").incr(1,!i),t(n).parents(".reply-actions").length?(t(n).parents(".reply-actions").siblings(".reply-vote-summary").incr(-1,i),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())):void 0},o.prototype.before_click_trollvote=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},o.prototype.before_click_problem=function(e,n){return t(n).find("span.count").incr(1,t(n).reverse_state())},o.prototype.success_click_upvote=function(e,n,o){return t(n).find("span.count").html(o.upvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(o.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(o.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=downvote]").find("span.count").html(o.downvote_count)},o.prototype.success_click_downvote=function(e,n,o){return t(n).find("span.count").html(o.downvote_count),t(n).siblings(".vote-summary").length&&t(n).siblings(".vote-summary").html(o.totalvote_count),t(n).parents(".reply-actions").length&&(t(n).parents(".reply-actions").siblings(".reply-vote-summary").html(o.totalvote_count),t(n).parents(".reply-actions").siblings(".reply-vote-summary").attr("data-vote-count",t(n).parents(".reply-actions").siblings(".reply-vote-summary").html())),t(n).siblings("[data-uid=upvote]").find("span.count").html(o.upvote_count)},o.prototype.success_click_trollvote=function(e,n,o){return t(n).find("span.count").html(o.kind_count)},o.prototype.success_click_problem=function(e,n,o){return t(n).find("span.count").html(o.kind_count)},o.prototype.success_click_pin=function(e,n,o){return"OK"===o?t(e).toggleClass("active"):void 0},o.prototype.success_click_lock=function(e,n,o){return"OK"===o?t(e).toggleClass("active").toggleClass("icon-lock").toggleClass("icon-unlock"):void 0},o.prototype.success_click_star=function(e,n,o){var i;return"Topic"!==o.kind?(o.starred?(i=t(e).parent().clone(),i.attr("data-tag-kind","starred"),t("[data-tag-kind='starred']").last().after(i)):t("[data-tag-kind='starred'][data-tag-name='"+o.name+"']").remove(),log("Success star !",e,n,o)):void 0},o}(n))})}.call(this),function(){define("common/callback/main",["common/callback/message"],function(){var t;return new(t=function(){function t(){}return t}())})}.call(this),define("common/callback",["common/callback/main"],function(t){return t}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/modal/smart",["jquery","lodash","bootstrap"],function(e,n){var o;return new(o=function(){function o(e){var o;null==e&&(e={}),this._bind=t(this._bind,this),o={selector:"data-smart-modal",url:"data-url",container:"data-selector",titleSelector:"data-title",footerSelector:"data-footer",modal:"#smartModal"},this.opts=n.extend(o,e),this._bind()}return o.prototype._bind=function(){var t;return t=function(t){return"["+t+"]"},e(t(this.opts.selector)).each(function(t){return function(n,o){var i,r,a,s;return s=e(o).attr(t.opts.url),i=e(o).attr(t.opts.container)||".container-item",a=e(o).attr(t.opts.titleSelector),r=e(o).attr(t.opts.footerSelector),s?e(o).click(function(){return log("Clicked "+o),e.get(s,function(n){var o,s,c;return log("Received data for modal"),s=e(n).find(i).html(),c=a?e(n).find(a).html():!1,o=r?e(n).find(r).html():!1,e(t.opts.modal).find(".modal-body").html(s),c?e(t.opts.modal).find(".modal-header").html(c).show():e(t.opts.modal).find(".modal-header").html("").hide(),o?e(t.opts.modal).find(".modal-footer").html(o).show():e(t.opts.modal).find(".modal-footer").html("").hide(),e(t.opts.modal).modal("show")})}):console.warn("Undefined url for trigger ",o)}}(this))},o}())})}.call(this),function(){define("common/modal/main",["require","jquery","bootstrap","common/modal/smart"],function(t,e){var n;return new(n=function(){function n(){var n;n=this,e("input[data-modal-id]").on("click",function(o){var i,r,a,s;return r=!0,a=e(this).data("condition"),a&&t(a)&&(s=t(e(this).data("condition")),s.modalCondition&&(r=s.modalCondition())),i=e(".modal[data-modal-id='"+e(this).data("modal-id")+"']"),n._initModal(i,e(this).data("confirmation")),r?(o.preventDefault(),i.modal("show")):void 0})}return n.prototype._initModal=function(e,n){return n?e.one("click",".btn-primary",function(){return function(){var e;return e=t(n),e.modalConfirmation?e.modalConfirmation():void 0}}(this)):void 0},n}())})}.call(this),define("common/modal",["common/modal/main"],function(t){return t}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/simple_form/date_picker",["jquery","lodash","datetimepicker"],function(e,n){var o;return new(o=function(){function o(o){null==o&&(o={}),this._bindAll=t(this._bindAll,this),this.opts=n.merge(this.DEFAULTS,o),e.fn.datetimepicker&&(this._setDefaults(),this._bindAll(),e(document).on("nested:fieldAdded",this._bindAll))}return o.prototype.DEFAULTS={excludeDateAttr:"data-date-without",includeDateAttr:"data-date-with",minDateAttr:"data-date-min",maxDateAttr:"data-date-max",noWeekends:"data-date-no-weekends"},o.prototype._bindAll=function(){return this._bindDateTimePicker("input.datetimepicker"),this._bindDatePicker("input.datepicker")},o.prototype._setDefaults=function(){return n.merge(e.fn.datetimepicker.defaults,{icons:{time:"icon-clock-3",date:"icon-calendar-1",up:"icon-arrow-9",down:"icon-arrow-10",previous:"icon-arrow-7",next:"icon-arrow-8",today:"icon-target",clear:"icon-bin-2"},useStrict:!1,sideBySide:!1})},o.prototype._bindDateTimePicker=function(t){return e(t).each(function(t){return function(n,o){return e(o).datetimepicker(t._computeOptions(o))}}(this))},o.prototype._bindDatePicker=function(t){return e(t).each(function(t){return function(n,o){return e(o).datetimepicker(t._computeOptions(o))}}(this))},o.prototype._computeOptions=function(t,o){var i,r;return null==o&&(o={}),e(t).attr(this.opts.excludeDateAttr)&&(i=e.parseJSON(e(t).attr(this.opts.excludeDateAttr)),o.disabledDates=n.map(i,function(t){return moment(t)})),e(t).attr(this.opts.includeDateAttr)&&(r=e.parseJSON(e(t).attr(this.opts.includeDateAttr)),o.enabledDates=n.map(r,function(t){return moment(t)})),e(t).attr(this.opts.minDateAttr)&&(o.minDate=moment(e(t).attr(this.opts.minDateAttr))),e(t).attr(this.opts.maxDateAttr)&&(o.maxDate=moment(e(t).attr(this.opts.maxDateAttr))),null!=e(t).attr(this.opts.noWeekends)&&(o.daysOfWeekDisabled=[0,6]),o},o}())})}.call(this),function(){define("common/simple_form/chosen",["jquery","chosen"],function(t){var e;return new(e=function(){function e(){t(document).on("nested:fieldAdded",this._bind),this._bind()}return e.prototype._bind=function(){return t(".chosen-select").each(function(){return t(this).chosen({allow_single_deselect:!0,no_results_text:"No results matched",width:t(this).width()+"px"})})},e}())})}.call(this),function(){define("common/simple_form/limit",["jquery","maxlength"],function(t){var e;return new(e=function(){function e(){t("[data-limit]").each(function(){return t(this).maxlength({maxCharacters:t(this).data("limit"),zeroStatusText:t(this).data("zero"),oneStatusText:t(this).data("one"),moreStatusText:t(this).data("more")})})}return e}())})}.call(this),function(){define("common/simple_form/textarea",["jquery"],function(t){var e;return new(e=function(){function e(){t("textarea").keydown(function(e){var n,o,i,r;return 9===e.keyCode?(i=this.selectionStart,o=this.selectionEnd,n=t(this),r=n.val(),n.val(r.substring(0,i)+"	"+r.substring(o)),this.selectionStart=this.selectionEnd=i+1,e.preventDefault()):void 0})}return e}())})}.call(this),function(){define("common/simple_form/form_group",["jquery"],function(t){var e;return new(e=function(){function e(){t(".form-group.other").each(function(){var e,n;return n=t(this).find("select"),e=t(n).next("input"),t(n).find("option:selected").html()!==t(n).find("option:last").html()&&t(e).hide(),n.change(function(){return t(n).find("option:selected").html()===t(n).find("option:last").html()?e.show():e.hide()})})}return e}())})}.call(this),function(){define("common/simple_form/main",["common/simple_form/date_picker","common/simple_form/chosen","common/simple_form/limit","common/simple_form/textarea","common/simple_form/form_group"],function(){var t;return t=function(){function t(){}return t}()})}.call(this),define("common/simple_form",["common/simple_form/main"],function(t){return t}),function(){define("common/typeahead/search",["jquery","bloodhound"],function(t){var e;return new(e=function(){function e(){this.form=t(".main-navbar-search"),this.input=this.form.find("input"),this.fetch_url=this.form.attr("action"),this.userUrl=this.form.attr("data-user-url"),this.input.length&&this._setupTypeahead()}var n;return n="%QUERY",e.prototype._setupTypeahead=function(){var t,e;return e=this,this._bindEnter(),this.form.addClass("js-search"),t=this._getBloodhound(),t.initialize(),this.input.typeahead({highlight:!0,hint:!0},{display:"value",source:t,templates:{suggestion:function(t){return"<a href='"+e.userUrl+t+"' class='search-suggestion-item'><div class='search-user-picture bg-image-item rounded square-xs' style='background-image: url(https://cdn.42.fr/userprofil/profilview/"+t+".jpg)'></div><span>"+t+"</span></a>"}}})},e.prototype._bindEnter=function(){var e;return e=function(e){return function(n){return 13===n.keyCode?t(e.form).submit():void 0}}(this),this.input.on("typeahead:cursorchange",function(t){return function(n,o){return t.input.off("keyup",e),o?void 0:t.input.on("keyup",e)}}(this)),this.input.on("typeahead:select",function(t){return function(e,n){var o;return o=""+(t.userUrl+n),document.location=o}}(this)),this.input.on("keyup",e)},e.prototype._getBloodhound=function(){return new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:this.fetch_url+(".json?query="+n),wildcard:n,prepare:function(t,e){return e.xhrFields={withCredentials:!0},e.url=e.url.replace(n,encodeURIComponent(t)),e}}})},e}())})}.call(this),function(){define("common/typeahead/main",["jquery","common/typeahead/search"],function(t){var e;return new(e=function(){function e(){var e;e=this,t(".typeahead").each(function(){var n,o;return n=t(this),o=e._getBloodhound.call(this),o.initialize(),n.typeahead({highlight:!0,hint:!1},{display:"displayKey",source:o.ttAdapter()}).on("typeahead:selected",function(t,e){return n.parents("form").find('input[type="hidden"][data-typeahead-'+n.data("displayKey")+"]").val(e.value)})})}return e.prototype._getBloodhound=function(){var e;return e=t(this),new Bloodhound({datumTokenizer:function(t){return Bloodhound.tokenizers.whitespace(t.displayKey)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:e.data("url")+"?query=%QUERY",wildcard:"%QUERY",transform:function(n){return t.map(n,function(t){return{displayKey:t[e.data("displayKey")],value:t[e.data("valueKey")||"id"],data:t}})}}})},e}())})}.call(this),define("common/typeahead",["common/typeahead/main"],function(t){return t}),function(){define("common/cache",["jquery"],function(t){var e;return new(e=function(){function e(){this._$element=t("[data-cache]"),this._$element.find("[data-cache-target]").each(function(){var e,n;return e=t(this),n=t(""+e.data("cache-target")),n.html(e.html())})}return e}())})}.call(this),function(){define("common/copy",["jquery","zeroclipboard"],function(t,e){var n;return new(n=function(){function n(){e.config({swfPath:"/assets/clipboard-eec56f47f17c747710021e35aee59177a7e451c374b6d8ef11508bb25edf5125.swf"}),t("[data-copy]").each(function(t){return function(e,n){return t._initCopy(n)}}(this))}return n.prototype._initCopy=function(n){var o;return o=new e(n),o.on("ready",function(){return o.on("copy",function(e){var o,i;return i=t(""+t(n).data("copy")).val(),o=t(n).data("copy-type")||"text/plain",e.clipboardData.setData(o,i),noty({layout:"topRight",type:"success",text:"Copied",timeout:3e3})})})},n}())})}.call(this),function(){define("common/data_events",["jquery"],function(t){var e;return new(e=function(){function e(){this.refresh()}return e.prototype.refresh=function(){return this.attachFocusEvents(),this.attachToggleEvents()},e.prototype.attachFocusEvents=function(){return t("[data-event-focus]").click(function(){return t(t(this).attr("data-event-focus")).focus()})},e.prototype.attachToggleEvents=function(){return t("[data-event-toggle]").each(function(){var e,n,o;return e=t(this).attr("data-event-container"),o=t(this).attr("data-event-toggle"),n=e?t(this).parents(e):t(this).parent(),t(n).find(o).addClass("hidden"),t(this).click(function(e){return e.stopImmediatePropagation(),t(n).find(o).toggleClass("hidden"),t(this).toggleClass("active"),!1})})},e}())})}.call(this),function(){define("common/data_date",["jquery","moment-twitter"],function(t,e){var n;return n=function(){function n(){this._updateAll(),this.handler=setInterval(this._updateAll,61e3)}return n.prototype._updateAll=function(){return t("[data-long-date]").each(function(){return t(this).html(e(t(this).attr("data-long-date"),"YYYY-MM-DD HH:mm Z").fromNow())}),t("[data-short-date]").each(function(){return t(this).html(e(t(this).attr("data-short-date"),"YYYY-MM-DD HH:mm Z").twitter())}),t("[data-cal-date]").each(function(){return t(this).html(e(t(this).attr("data-cal-date"),"YYYY-MM-DD HH:mm Z").calendar())})},n.prototype.refresh=function(){return this._updateAll(),this.handler&&clearInterval(this.handler),this.handler=setInterval(this._updateAll,61e3)},n.refresh=function(){var t;return window.__||(window.__={}),(t=window.__).date||(t.date=new this),window.__.date.refresh()},n}()})}.call(this),function(){define("common/emojify",["emojify"],function(t){var e;return new(e=function(){function e(){t.setConfig({emojify_tag_type:"span",only_crawl_id:null,img_dir:"/images/emoji",ignored_tags:{H1:1,SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),this.refresh()}return e.prototype.refresh=function(){var e,n,o,i,r,a;for(r=["messages","changelogs"],a=[],o=0,i=r.length;i>o;o++)n=r[o],e=document.getElementsByClassName(""+n+"-list")[0],a.push(t&&null!=e?t.run(e):void 0);return a},e}())})}.call(this),function(){define("common/flashes",["lodash","jquery","bootstrap"],function(t,e){var n;return n=function(){function n(){this.lock=!1,this.flashes=t.map(_flashes,function(t){return t.seen=!1,t.selector||(t.selector="body"),t}),this.modal=e("#flashModal"),this.modal.on("hidden.bs.modal",function(t){return function(){return t.lock=!1,console.log("[-] Lock is unlocked"),t._try_to_display()}}(this)),this._try_to_display()}return n.prototype._try_to_display=function(){var t,e,n,o,i;for(console.log("Flashes => ",this.flashes),o=this.flashes,i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(!this._isFlashOnPage(t)||t.seen||this.lock?console.log("Flash "+t.selector+" isn't on page..."):this._display(t));return i},n.prototype._display=function(t){return this.lock=!0,console.log("[+] Lock is locked"),t.seen=!0,this._show_modal(t),this._mark_as_seen(t)},n.prototype._isFlashOnPage=function(t){return!0},n.prototype._mark_as_seen=function(){return console.log("Marked as seen")},n.prototype._show_modal=function(t){return t.title&&this.modal.find("#flashModalLabel").html(t.title),this.modal.find(".modal-body").html(t.content),this.modal.modal("show")},n}()})}.call(this),function(){define("common/fullscreen",["jquery"],function(t){var e;return e=function(){function e(){t("[data-toggle-fullscreen]").click(function(){var e;if(e=t(".page-content")[0]){if(e.requestFullscreen)return e.requestFullscreen();if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.webkitRequestFullscreen)return e.webkitRequestFullscreen()}}),document.addEventListener("webkitfullscreenchange",function(){return t("html").toggleClass("fullscreen")},!1)}return e}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/infinite_scroll",["jquery","lodash"],function(e,n){var o;return o=function(){function o(o){this._bindManualButtons=t(this._bindManualButtons,this),this._clearManualButtons=t(this._clearManualButtons,this),this._generateManualButtons=t(this._generateManualButtons,this),this.paginate=t(this.paginate,this);var i;i={navSelector:"ul.pagination",nextSelector:"ul.pagination li.next a[rel=next]",prevSelector:"ul.pagination li.prev a[rel=prev]",itemSelector:".message-item",itemContainer:".messages-list",loading:function(t){return"Loading "+(t?"previous":"next")+" messages..."},limit:250},o||(o={}),this.options=n.extend(i,o),this._refreshValues(),this.nav=e(this.options.navSelector).last(),this.nav.hide(),this.callbacks=[],this.lock=!1,this._setupReferences(),this._generateManualButtons(),this._bindManualButtons(),this._getNextItems(!0),e(document).scroll(this.paginate),o.onRefresh&&this.onRefresh(o.onRefresh)}return o.prototype._setupReferences=function(){var t,n;return t=e(""+this.options.itemContainer+" "+this.options.itemSelector).first(),n=e(""+this.options.itemContainer+" "+this.options.itemSelector).last(),this.start=t?t.attr("data-index"):0,this.end=n?n.attr("data-index"):0},o.prototype.paginate=function(t){var n;return n=this._isScrollUp(),n&&0===e(document).scrollTop()&&this.scroll>350?(t.preventDefault(),t.stopImmediatePropagation(),e("body").scrollTop(this.scroll),!1):(this._refreshValues(),this._needMoreContent(n)?this._getNextItems(n):void 0)},o.prototype._needMoreContent=function(t){var e;return t?this.scroll<this.options.limit:(e=this.docHeight-(this.winHeight+this.scroll),e<this.options.limit)},o.prototype.onRefresh=function(t){return this.callbacks.push(t)},o.prototype._addLoader=function(t){var n;return n='<h1 class="infinite-loader marked-title" style="text-align: center; font-size: 1.2em">\n  '+this.options.loading(t)+"\n</h1>",t?e(""+this.options.itemContainer).prepend(n):e(""+this.options.itemContainer).append(n),t?e("[data-load-previous]").remove():e("[data-load-next]").remove()},o.prototype._removeLoader=function(){return e(""+this.options.itemContainer+" .infinite-loader").remove()},o.prototype._generateManualButtons=function(){return e(this.options.prevSelector).length>0&&e(this.options.itemContainer).prepend(e('<div class="btn btn-block btn-primary" data-load-previous>Load previous messages</div>')),e(this.options.nextSelector).length>0&&e(this.options.itemContainer).append(e('<div class="btn btn-block btn-primary" data-load-next>Load next messages</div>')),this},o.prototype._clearManualButtons=function(){return e("[data-load-previous], [data-load-next]").remove()},o.prototype._bindManualButtons=function(){return e(document).on("click","[data-load-previous]",function(t){return function(){return t._getNextItems(!0)}}(this)),e(document).on("click","[data-load-next]",function(t){return function(){return t._getNextItems(!1)}}(this))},o.prototype._getNextItems=function(t){var o,i,r;return null==t&&(t=!1),r=t?this.options.prevSelector:this.options.nextSelector,e(r).length>0?(o=e(r).first(),i=e(o).attr("href"),!this.lock&&i&&(o.remove(),this._addLoader(t),this.lock=!0,e.get(i,function(o){return function(i){var a,s,c,l,u,d,p;return u=e(i).find(o.options.navSelector),l=e(i).find(r).parent(),o.nav.append(l),o.nav=e(o.options.navSelector),s=e(i).find(o.options.itemSelector),t?(a=e(""+o.options.itemContainer+" "+o.options.itemSelector).first(),d=-document.querySelector("[data-id='"+a.attr("data-id")+"']").getBoundingClientRect().top,a.before(s),a.prevAll().each(function(){return d+=e(this).outerHeight()}),e("body").scrollTop(d)):(c=e(""+o.options.itemContainer+" fantom-item").detach(),p=e(""+o.options.itemContainer+" [data-id='virtual']").detach(),e(""+o.options.itemContainer+" "+o.options.itemSelector).last().after(s),e(""+o.options.itemContainer+" "+o.options.itemSelector).last().after(c),e(""+o.options.itemContainer+" "+o.options.itemSelector).last().after(p)),o.lock=!1,o._removeLoader(),o._generateManualButtons(),n.each(o.callbacks,function(t){return t()})}}(this))),!0):!1},o.prototype._isScrollUp=function(){return this.scroll>e(document).scrollTop()},o.prototype._refreshValues=function(){return this.docHeight=e(document).innerHeight(),this.winHeight=e(window).innerHeight(),this.scroll=e(document).scrollTop()},o}()})}.call(this),function(){define("common/lockable",["jquery"],function(t){var e;return new(e=function(){function e(){var e;e=this._form_to_data,t("[data-lockable-url]").length&&setInterval(function(e){return function(){return e._synchronize_locked(t("[data-lockable-url]").data("lockable-url"))}}(this),1e4),t("[data-check-lock-url]").length&&(setInterval(function(e){return function(){return e._check_locked(t("[data-check-lock-url]").data("check-lock-url"))}}(this),1e4),t("#lock_taken .roger").click(function(){return function(){return t("form").submit(function(){return t.ajax({url:t(this).attr("action"),data:e(t("form")),type:"POST",dataType:"JSON"}).success(function(){return document.location.href=t("#lock_taken .roger").attr("href")
}),!1}),t("form").submit()}}(this)))}return e.prototype._synchronize_locked=function(e){return t.getScript(e)},e.prototype._check_locked=function(e){return t.getJSON(e,function(e){var n;return"OK"!==e.res?(t("#lock_taken .modal-body").html(null!=(n=e.res)?n:""),t("#lock_taken").modal("show")):void 0})},e.prototype._form_to_data=function(e){return t.map(t(e).find("input, select, textarea"),function(e){return t(e).attr("name")+"="+t(e).val()}).join("&")},e}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/manage_attachment",["jquery"],function(e){var n;return n=function(){function n(){this.changed=t(this.changed,this),e.getJSON(e("[data-attachments-url]").data("attachments-url"),function(t){return function(n){return t.values=n,e("form .attachment_kind input:hidden").each(function(n,o){return 0===e(o).parents("form").find(".attachment_fields input").length?t.changed(o,e(o).val()):void 0})}}(this)),e("form").on("change","#attachment_select",function(t){return function(e){return t.changed(e.target)}}(this))}return n.prototype.changed=function(t,n){var o,i,r,a,s,c,l;null==n&&(n=e(t).find("option:checked").html().toLowerCase()),o=e(t).parents(".form-group").siblings(".attachment_fields"),s=(new Date).getTime(),i=e(t).attr("name"),r="<div class='form-group input optional project_attachements'>",l=this.values[n];for(a in l)c=l[a],r+="<div class='col-sm-12'><input class='hidden optional form-control' value='"+n+"' name='"+i.replace("[kind]","[attachable_attributes]["+s+"][attachable_type]]")+"' /></div>",r+="<label class='select optional col-sm-2 control-label' for='project_attachements_attributes_"+s+"_"+a+"'>"+a+"</label>",r+="<div class='col-sm-10'>","string"===c?r+="<input class='input optional form-control' id='project_attachements_attributes_"+s+"_"+a+"' name='"+i.replace("[kind]","[attachable_attributes]["+s+"]["+a+"]")+"' />":"text"===c?r+="<textarea class='text optional form-control' id='project_attachements_attributes_"+s+"_"+a+"' name='"+i.replace("[kind]","[attachable_attributes]["+s+"]["+a+"]")+"' />":"upload"===c&&(r+="<input class='file optional form-control' type='file' id='project_attachements_attributes_"+s+"_"+a+"' name='"+i.replace("[kind]","[attachable_attributes]["+s+"]["+a+"]")+"' />"),r+="</div>";return r+="</div>",e(o).html(r)},n}(),e("[data-attachments-url]").length?new n:void 0})}.call(this),function(){define("common/markdownable",["jquery","lodash","marked","Logger"],function(t,e,n,o){var i;return new(i=function(){function i(t){var i;null==n?o.warn("Unable to find marked for client-side markdown compilation."):(i={markdownSelector:"[data-markdownable]",markdownAttribute:"data-markdownable"},this.opts=e.extend(i,t),this._generateMarkdown())}return i.prototype._generateMarkdown=function(){var e;return e=this,t(this.opts.markdownSelector).each(function(){return t(this).html(n(t(this).attr(e.opts.markdownAttribute).trim()))})},i}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/multiple_actions",["jquery"],function(e){var n;return new(n=function(){function n(){this.on_select_one_click=t(this.on_select_one_click,this),this.on_select_all_click=t(this.on_select_all_click,this),this.on_select_click=t(this.on_select_click,this),this.selector=".table.admin_table",e(this.selector).length&&(this.bindAll(),e(this.selector).find(".btns").hide(),this.on_select_click())}return n.prototype.bindAll=function(){var t;return t=this,e(this.selector).on("click",".select.all",this.on_select_all_click),e(this.selector).on("click",".select.one",this.on_select_one_click),e(this.selector).on("click",".select",this.on_select_click)},n.prototype.on_select_click=function(t){return t?(e(t.target).parents(this.selector).find(".btns")[e(t.target).parents(this.selector).find(".select.one").filter(":checked").length?"show":"hide"](),e(t.target).parents(this.selector).find(".btns a").each(function(n){return function(o,i){var r;return r=e(t.target).parents(n.selector).find(".select.one").filter(":checked").map(function(){return e(this).data("id")}).toArray(),r=r.to_rails_params(e(t.target).parents(n.selector).data("model")),e(i).attr("href",""+e(i).attr("href").split("?")[0]+"?"+r)}}(this))):void 0},n.prototype.on_select_all_click=function(t){return e(t.target).parents(this.selector).find(".select.one").prop("checked",!e(t.target).parents(this.selector).find(".select.one").filter(":checked").length),e(t.target).prop("checked",e(t.target).parents(this.selector).find(".select.one").filter(":checked").length)},n.prototype.on_select_one_click=function(t){return e(t.target).parents(this.selector).find(".select.all").prop("checked",!e(t.target).parents(this.selector).find(".select.one").not(":checked").length)},n}())})}.call(this),function(){define("common/notifications_manager",["jquery","tinycon"],function(t,e){var n;return new(n=function(){function n(e){window.webkitNotifications&&0!==window.webkitNotifications.checkPermission()&&0===t("body[data-id]").length&&(this._setDefaultOptions(),e=t.extend(this.default_notif_options,e),t("#browser_notification").on("click",function(){return t(this).parents(".alert").remove(),window.webkitNotifications.requestPermission()}),this.alert("Configure browser notifications : <a href='#' id='browser_notification'>Let's Go!</a>",e.alert))}return n.prototype._setDefaultOptions=function(){var n;return n=t("title").html(),this.default_alert_options={parent:".span9","class":"success",fct:"prepend",template:"<div class='alert fade in alert-$class'><button class='close' data-dismiss='alert'>x</button>$msg</div>"},this.default_notif_options={image:t("link[rel='shortcut icon']").attr("href"),onclick:function(){return window.focus()},title:n,timeout:5e3,alert:{"class":"info"}},this.default_blink_title_options={title:n},this.blink_titles=[n],this.blink_interval=null,this.blink_index=1,e.setOptions({width:7,height:9,font:"10px arial",colour:"#FFFFFF",background:"#FF0000",fallback:!0})},n.prototype.alert=function(e,n){return n=t.extend(this.default_alert_options,n),t(n.parent)[n.fct](t(n.template.replace("$class",n["class"]).replace("$msg",e)))},n.prototype.blink_title=function(e,n){return t("body").hasClass("hidden")?(n=t.extend(this.default_blink_title_options,n),this.blink_titles.push(e),this.blink_fct=function(e){return function(){return t("title").html(e.blink_titles[e.blink_index]),e.blink_index=(e.blink_index+1)%e.blink_titles.length}}(this),this.blink_interval||(this.blink_interval=setInterval(this.blink_fct,700)),t(window).one("focus",function(e){return function(){return clearInterval(e.blink_interval),e.blink_interval=null,t("title").text(n.title),e.blink_titles=[e.default_blink_title_options.title],e.blink_index=1}}(this))):void 0},n.prototype.set_focus_favicon=function(){return t(window).one("focus",function(t){return function(){return e.reset(),t.value=void 0}}(this))},n.prototype.incr_favicon=function(){return null==this.value&&(this.value=0),this.value+=1,e.setBubble(this.value),this.set_focus_favicon()},n.prototype.update_favicon=function(t){return this.value=t,null!=t?e.setBubble(t):(e.reset(),this.set_focus_favicon())},n.prototype.display_notif=function(e,n){var o;return n=t.extend(this.default_notif_options,n),window.webkitNotifications&&0===window.webkitNotifications.checkPermission()?(o=window.webkitNotifications.createNotification(n.image,n.title,e),o.onclick=n.onclick,o.show(),setTimeout(function(){return o.cancel()},n.timeout)):void 0},n}())})}.call(this),function(){define("common/overlay",["jquery","lodash"],function(t,e){var n;return new(n=function(){function n(n){var o;o={selector:"data-overlay",trigger:"data-overlay-trigger",openClass:"open",closeSelector:".close",widthSelector:"data-overlay-width"},this.opts=e.extend(o,n),t("["+this.opts.trigger+"]").click(function(e){return function(){return 0===t("["+e.opts.widthSelector+"]").length||t(window).width()<=parseInt(t("["+e.opts.widthSelector+"]").attr(e.opts.widthSelector))?t("["+e.opts.selector+"]").toggleClass(""+e.opts.openClass):void 0}}(this)),t("["+this.opts.selector+"] "+this.opts.closeSelector+", ["+this.opts.selector+"]").click(function(e){return function(){return t("["+e.opts.selector+"]").removeClass(""+e.opts.openClass)}}(this))}return n}())})}.call(this),function(){define("common/remote_pagination",["jquery"],function(t){var e;return new(e=function(){function e(){t("a[data-remote]").parents("[data-scroll]").length>0&&t(window).scroll(function(){var e;return e=t(".pagination a[rel=next]").attr("href"),e&&t(window).scrollTop()>t(document).height()-t(window).height()-50?(t(".pagination").html("<li><span>Loading...</span></li>"),t.getScript(e+"?scroll=true")):void 0}),this.loading_animation(),t(document).ajaxComplete(this.loading_animation)}return e.prototype.loading_animation=function(){return t(".pagination a[data-remote]").length?(t("a[data-remote]").length>0&&0===t("a[data-remote]").parents("[data-scroll]").length&&t(".pagination").on("click","a[data-remote=true]",function(){return history.pushState("","New URL: "+t(this).attr("href"),t(this).attr("href")),t("ul.pagination").empty().html("<li><span>Loading...</span></li>"),t(window).scrollTop()>t("#main-container").offset().top-50?t("html, body").animate({scrollTop:t("#main-container").offset().top-50},"fast"):void 0}),t("a[data-remote]").parents("[data-scroll]").length>0?t(".pagination").hide():void 0):void 0},e}())})}.call(this),function(){define("common/responsive_menu",["jquery"],function(t){var e;return new(e=function(){function e(t){this.enabled=null!=t?t:!0,this._registerEvents()}return e.prototype._registerEvents=function(){return this.enabled?t("[data-trigger-menu]").on("click",function(){return t(".left-main-container").toggleClass("opened"),t(this).toggleClass("closed")}):t("[data-trigger-menu]").hide()},e}())})}.call(this),function(){define("common/scroll_spy",["jquery","scrollspy"],function(t){var e;return e=function(){function e(){t("body").scrollspy({target:"#navbar-scale",offset:30})}return e}()})}.call(this),function(){define("common/tags",["jquery","lodash"],function(t,e){var n;return new(n=function(){function n(){t("[data-filter-tags]").keyup(function(){var n;return n=e.snakeCase(t(this).val().toLowerCase()),t(".sidebar-tag-item").show(),n.length>0?t(".sidebar-tag-item:not([data-tag-name*='"+n+"'])").hide():void 0}),t("[data-tag-collapse]").each(this.onCollapse()),t("[data-tag-collapse]").click(this.onCollapse())}return n.prototype.onCollapse=function(){var e,n;return n="iconf-minus-1",e="iconf-add-1",function(){var o;return t(this).hasClass(e)?t(this).removeClass(e).addClass(n):t(this).removeClass(n).addClass(e),o=t(this).parent().attr("data-tag-kind"),t(".sidebar-tag-item[data-tag-kind='"+o+"']").toggle()}},n}())})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/user_link",["jquery","lodash"],function(e,n){var o;return new(o=function(){function o(o){this._onLeave=t(this._onLeave,this),this._getTriggerPosition=t(this._getTriggerPosition,this),this._onHover=t(this._onHover,this);var i;i={linkSelector:"[data-user-link]",loginAttr:"data-user-link",profileBaseUrl:e(".main-left-navbar a").first().attr("href")},this.opts=n.extend(i,o),this._bindUserLinks()}return o.prototype._bindUserLinks=function(){var t;return t=this,e(this.opts.linkSelector).hover(this._onHover,this._onLeave)},o.prototype._onHover=function(t){var n,o;return n=e(t.target),o=n.attr(this.opts.loginAttr),e("body").append(this._getPopupTemplate(o)),this._showBubbleFor(o,n)},o.prototype._getTriggerPosition=function(t,n){return{left:e(t).offset().left+e(t).innerWidth()/2-e(n).innerWidth()/2,top:e(t).offset().top-e(n).innerHeight()}},o.prototype._onLeave=function(t){var n,o;return n=e(t.target),o=n.attr(this.opts.loginAttr),e("[data-user-popup='"+o+"']").remove()},o.prototype._showBubbleFor=function(t,n){return e.ajax({crossDomain:!0,type:"GET",dataType:"jsonp",url:""+this.opts.profileBaseUrl+"/users/"+t+".json",done:function(o){return function(i){var r;return e("[data-user-popup='"+t+"']").html(o._getPopupContent(i.user)),r=e("[data-user-popup='"+t+"']"),r.css(o._getTriggerPosition(n,r))}}(this)})},o.prototype._getPopupTemplate=function(t){return'<div class="pop-over user-pop-over" role="tooltip" data-user-popup="'+t+'" style="position: absolute">\n  <h3 class="marked-title">Loading...</h3>\n</div>'},o.prototype._getPopupContent=function(t){return'<div class="user-popup-image" style="background-image: url(https://cdn.42.fr/userprofil/profilview/'+t.login+'.jpg)">\n</div>\n<div class="user-popup-info">\n  <h3 class="user-popup-login">'+t.full_name+'</h3>\n  <span class="user-popup-email marked-title">\n    <span class="icon-envelope"></span>\n    '+t.email+'\n  </span>\n  <h5 class="user-popup-location">\n    <span data-user-location="'+t.location+'" class="icon-circle"></span>\n    '+(t.location||"unavailable")+"\n  </h5>\n</div>"},o}())})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};define("common/window_focus",[],function(){var e;return e=function(){function e(){var e,n,o,i,r;e="hidden",n=function(t){var n,o,i;t=t||window.event,i="visible",o="hidden",n={focus:i,focusin:i,pageshow:i,blur:o,focusout:o,pagehide:o},document.body.className=t.type in n?n[t.type]:this[e]?o:i},t.call(document,e)>=0?document.addEventListener("visibilitychange",n):(o=e="mozHidden",t.call(document,o)>=0?document.addEventListener("mozvisibilitychange",n):(i=e="webkitHidden",t.call(document,i)>=0?document.addEventListener("webkitvisibilitychange",n):(r=e="msHidden",t.call(document,r)>=0?document.addEventListener("msvisibilitychange",n):t.call(document,"onfocusin")>=0?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n)))}return e}()})}.call(this),function(){define("common/markdown_preview",["jquery","lodash","marked"],function(t,e,n){var o;return o=function(){function o(o){var i,r;i={bindSelector:"data-markdown-preview"},this.opts=e.extend(i,o),r=this,t("["+this.opts.bindSelector+"]").each(function(){var e,o;return o=this,e=t(this).attr(r.opts.bindSelector),e?t(e).keyup(function(){return t(o).html(n(t(this).val()))}):void 0})}return o}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define("common/main",["require","jquery","Logger","autosize","common/add_on","common/callback","common/modal","common/simple_form","common/typeahead","common/cache","common/copy","common/data_events","common/data_date","common/emojify","common/flashes","common/fullscreen","common/infinite_scroll","common/lockable","common/manage_attachment","common/markdownable","common/multiple_actions","common/notifications_manager","common/overlay","common/remote_pagination","common/responsive_menu","common/scroll_spy","common/tags","common/user_link","common/window_focus","common/markdown_preview"],function(e,n){var o;return o=function(){function o(){this._emitReady=t(this._emitReady,this),this._ready=t(this._ready,this),n(this._ready)}return o.prototype._ready=function(){var t,n,o,i,r,a;return i=e("common/scroll_spy"),new i,r=e("common/simple_form"),new r,t=e("common/data_date"),new t,o=e("common/markdown_preview"),new o,n=e("common/flashes"),this._emitReady(),(a=e("autosize"))(document.querySelectorAll("textarea"))},o.prototype._emitReady=function(){return n(document).trigger("intra.ready"),n(".js-hidden").addClass("js-active").removeClass("js-hidden"),this.ready()},o}()})}.call(this),define("common",["common/main"],function(t){return t});